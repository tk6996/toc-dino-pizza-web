(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},LvDl:function(t,e,n){(function(t){var i;(function(){var r,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,h=128,u=1/0,c=9007199254740991,f=NaN,d=4294967295,p=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",b="[object Error]",w="[object Function]",x="[object GeneratorFunction]",k="[object Map]",S="[object Number]",_="[object Object]",C="[object Promise]",M="[object RegExp]",P="[object Set]",T="[object String]",N="[object Symbol]",A="[object WeakMap]",E="[object ArrayBuffer]",L="[object DataView]",O="[object Float32Array]",D="[object Float64Array]",j="[object Int8Array]",F="[object Int16Array]",I="[object Int32Array]",R="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",V="[object Uint32Array]",U=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,X=RegExp(G.source),K=RegExp(Y.source),W=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+|\s+$/g,rt=/^\s+/,ot=/\s+$/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="a-z\\xdf-\\xf6\\xf8-\\xff",St="A-Z\\xc0-\\xd6\\xd8-\\xde",_t="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="["+_t+"]",Mt="["+xt+"]",Pt="\\d+",Tt="["+kt+"]",Nt="[^\\ud800-\\udfff"+_t+Pt+"\\u2700-\\u27bf"+kt+St+"]",At="\\ud83c[\\udffb-\\udfff]",Et="[^\\ud800-\\udfff]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",Dt="["+St+"]",jt="(?:"+Tt+"|"+Nt+")",Ft="(?:"+Dt+"|"+Nt+")",It="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Rt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Bt="(?:"+Mt+"|"+At+")?",zt="[\\ufe0e\\ufe0f]?",Vt=zt+Bt+"(?:\\u200d(?:"+[Et,Lt,Ot].join("|")+")"+zt+Bt+")*",Ut="(?:"+["[\\u2700-\\u27bf]",Lt,Ot].join("|")+")"+Vt,qt="(?:"+[Et+Mt+"?",Mt,Lt,Ot,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("['\u2019]","g"),Gt=RegExp(Mt,"g"),Yt=RegExp(At+"(?="+At+")|"+qt+Vt,"g"),Xt=RegExp([Dt+"?"+Tt+"+"+It+"(?="+[Ct,Dt,"$"].join("|")+")",Ft+"+"+Rt+"(?="+[Ct,Dt+jt,"$"].join("|")+")",Dt+"?"+jt+"+"+It,Dt+"+"+Rt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pt,Ut].join("|"),"g"),Kt=RegExp("[\\u200d\\ud800-\\udfff"+xt+"\\ufe0e\\ufe0f]"),Wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zt=-1,Jt={};Jt[O]=Jt[D]=Jt[j]=Jt[F]=Jt[I]=Jt[R]=Jt[B]=Jt[z]=Jt[V]=!0,Jt[g]=Jt[m]=Jt[E]=Jt[y]=Jt[L]=Jt[v]=Jt[b]=Jt[w]=Jt[k]=Jt[S]=Jt[_]=Jt[M]=Jt[P]=Jt[T]=Jt[A]=!1;var Qt={};Qt[g]=Qt[m]=Qt[E]=Qt[L]=Qt[y]=Qt[v]=Qt[O]=Qt[D]=Qt[j]=Qt[F]=Qt[I]=Qt[k]=Qt[S]=Qt[_]=Qt[M]=Qt[P]=Qt[T]=Qt[N]=Qt[R]=Qt[B]=Qt[z]=Qt[V]=!0,Qt[b]=Qt[w]=Qt[A]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,ie="object"==typeof global&&global&&global.Object===Object&&global,re="object"==typeof self&&self&&self.Object===Object&&self,oe=ie||re||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&"object"==typeof t&&t&&!t.nodeType&&t,le=ae&&ae.exports===se,he=le&&ie.process,ue=function(){try{return ae&&ae.require&&ae.require("util").types||he&&he.binding&&he.binding("util")}catch(t){}}(),ce=ue&&ue.isArrayBuffer,fe=ue&&ue.isDate,de=ue&&ue.isMap,pe=ue&&ue.isRegExp,ge=ue&&ue.isSet,me=ue&&ue.isTypedArray;function ye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ve(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function be(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function xe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ke(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function Se(t,e){return!(null==t||!t.length)&&Oe(t,e,0)>-1}function _e(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Ce(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Me(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Pe(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Te(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ne(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Ae=Ie("length");function Ee(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function Le(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Oe(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Le(t,je,n)}function De(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function je(t){return t!=t}function Fe(t,e){var n=null==t?0:t.length;return n?ze(t,e)/n:f}function Ie(t){return function(e){return null==e?r:e[t]}}function Re(t){return function(e){return null==t?r:t[e]}}function Be(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function ze(t,e){for(var n,i=-1,o=t.length;++i<o;){var s=e(t[i]);s!==r&&(n=n===r?s:n+s)}return n}function Ve(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ue(t){return function(e){return t(e)}}function qe(t,e){return Ce(e,function(e){return t[e]})}function He(t,e){return t.has(e)}function Ge(t,e){for(var n=-1,i=t.length;++n<i&&Oe(e,t[n],0)>-1;);return n}function Ye(t,e){for(var n=t.length;n--&&Oe(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var Ke=Re({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),We=Re({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $e(t){return"\\"+te[t]}function Ze(t){return Kt.test(t)}function Je(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function Qe(t,e){return function(n){return t(e(n))}}function tn(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[r++]=n)}return o}function en(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function nn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function rn(t){return Ze(t)?function(t){for(var e=Yt.lastIndex=0;Yt.test(t);)++e;return e}(t):Ae(t)}function on(t){return Ze(t)?function(t){return t.match(Yt)||[]}(t):function(t){return t.split("")}(t)}var sn=Re({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),an=function t(e){var n,i=(e=null==e?oe:an.defaults(oe.Object(),e,an.pick(oe,$t))).Array,xt=e.Date,kt=e.Error,St=e.Function,_t=e.Math,Ct=e.Object,Mt=e.RegExp,Pt=e.String,Tt=e.TypeError,Nt=i.prototype,At=Ct.prototype,Et=e["__core-js_shared__"],Lt=St.prototype.toString,Ot=At.hasOwnProperty,Dt=0,jt=(n=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ft=At.toString,It=Lt.call(Ct),Rt=oe._,Bt=Mt("^"+Lt.call(Ot).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=le?e.Buffer:r,Vt=e.Symbol,Ut=e.Uint8Array,qt=zt?zt.allocUnsafe:r,Yt=Qe(Ct.getPrototypeOf,Ct),Kt=Ct.create,te=At.propertyIsEnumerable,ie=Nt.splice,re=Vt?Vt.isConcatSpreadable:r,se=Vt?Vt.iterator:r,ae=Vt?Vt.toStringTag:r,he=function(){try{var t=ao(Ct,"defineProperty");return t({},"",{}),t}catch(e){}}(),ue=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Ae=xt&&xt.now!==oe.Date.now&&xt.now,Re=e.setTimeout!==oe.setTimeout&&e.setTimeout,ln=_t.ceil,hn=_t.floor,un=Ct.getOwnPropertySymbols,cn=zt?zt.isBuffer:r,fn=e.isFinite,dn=Nt.join,pn=Qe(Ct.keys,Ct),gn=_t.max,mn=_t.min,yn=xt.now,vn=e.parseInt,bn=_t.random,wn=Nt.reverse,xn=ao(e,"DataView"),kn=ao(e,"Map"),Sn=ao(e,"Promise"),_n=ao(e,"Set"),Cn=ao(e,"WeakMap"),Mn=ao(Ct,"create"),Pn=Cn&&new Cn,Tn={},Nn=Io(xn),An=Io(kn),En=Io(Sn),Ln=Io(_n),On=Io(Cn),Dn=Vt?Vt.prototype:r,jn=Dn?Dn.valueOf:r,Fn=Dn?Dn.toString:r;function In(t){if(ta(t)&&!qs(t)&&!(t instanceof Vn)){if(t instanceof zn)return t;if(Ot.call(t,"__wrapped__"))return Ro(t)}return new zn(t)}var Rn=function(){function t(){}return function(e){if(!Qs(e))return{};if(Kt)return Kt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Bn(){}function zn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Yn(t){var e=this.__data__=new qn(t);this.size=e.size}function Xn(t,e){var n=qs(t),i=!n&&Us(t),r=!n&&!i&&Xs(t),o=!n&&!i&&!r&&la(t),s=n||i||r||o,a=s?Ve(t.length,Pt):[],l=a.length;for(var h in t)!e&&!Ot.call(t,h)||s&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||go(h,l))||a.push(h);return a}function Kn(t){var e=t.length;return e?t[Hi(0,e-1)]:r}function Wn(t,e){return Lo(Cr(t),ri(e,0,t.length))}function $n(t){return Lo(Cr(t))}function Zn(t,e,n){(n!==r&&!Bs(t[e],n)||n===r&&!(e in t))&&ni(t,e,n)}function Jn(t,e,n){var i=t[e];Ot.call(t,e)&&Bs(i,n)&&(n!==r||e in t)||ni(t,e,n)}function Qn(t,e){for(var n=t.length;n--;)if(Bs(t[n][0],e))return n;return-1}function ti(t,e,n,i){return hi(t,function(t,r,o){e(i,t,n(t),o)}),i}function ei(t,e){return t&&Mr(e,Aa(e),t)}function ni(t,e,n){"__proto__"==e&&he?he(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ii(t,e){for(var n=-1,o=e.length,s=i(o),a=null==t;++n<o;)s[n]=a?r:Ca(t,e[n]);return s}function ri(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function oi(t,e,n,i,o,s){var a,l=1&e,h=2&e,u=4&e;if(n&&(a=o?n(t,i,o,s):n(t)),a!==r)return a;if(!Qs(t))return t;var c=qs(t);if(c){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Cr(t,a)}else{var f=uo(t),d=f==w||f==x;if(Xs(t))return br(t,l);if(f==_||f==g||d&&!o){if(a=h||d?{}:fo(t),!l)return h?function(t,e){return Mr(t,ho(t),e)}(t,function(t,e){return t&&Mr(e,Ea(e),t)}(a,t)):function(t,e){return Mr(t,lo(t),e)}(t,ei(a,t))}else{if(!Qt[f])return o?t:{};a=function(t,e,n){var i=t.constructor;switch(e){case E:return wr(t);case y:case v:return new i(+t);case L:return function(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case D:case j:case F:case I:case R:case B:case z:case V:return xr(t,n);case k:return new i;case S:case T:return new i(t);case M:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case P:return new i;case N:return jn?Ct(jn.call(t)):{}}}(t,f,l)}}s||(s=new Yn);var p=s.get(t);if(p)return p;s.set(t,a),oa(t)?t.forEach(function(i){a.add(oi(i,e,n,i,t,s))}):ea(t)&&t.forEach(function(i,r){a.set(r,oi(i,e,n,r,t,s))});var m=c?r:(u?h?to:Qr:h?Ea:Aa)(t);return be(m||t,function(i,r){m&&(i=t[r=i]),Jn(a,r,oi(i,e,n,r,t,s))}),a}function si(t,e,n){var i=n.length;if(null==t)return!i;for(t=Ct(t);i--;){var o=n[i],s=t[o];if(s===r&&!(o in t)||!(0,e[o])(s))return!1}return!0}function ai(t,e,n){if("function"!=typeof t)throw new Tt(o);return To(function(){t.apply(r,n)},e)}function li(t,e,n,i){var r=-1,o=Se,s=!0,a=t.length,l=[],h=e.length;if(!a)return l;n&&(e=Ce(e,Ue(n))),i?(o=_e,s=!1):e.length>=200&&(o=He,s=!1,e=new Gn(e));t:for(;++r<a;){var u=t[r],c=null==n?u:n(u);if(u=i||0!==u?u:0,s&&c==c){for(var f=h;f--;)if(e[f]===c)continue t;l.push(u)}else o(e,c,i)||l.push(u)}return l}In.templateSettings={escape:W,evaluate:$,interpolate:Z,variable:"",imports:{_:In}},(In.prototype=Bn.prototype).constructor=In,(zn.prototype=Rn(Bn.prototype)).constructor=zn,(Vn.prototype=Rn(Bn.prototype)).constructor=Vn,Un.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},Un.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Un.prototype.get=function(t){var e=this.__data__;if(Mn){var n=e[t];return n===s?r:n}return Ot.call(e,t)?e[t]:r},Un.prototype.has=function(t){var e=this.__data__;return Mn?e[t]!==r:Ot.call(e,t)},Un.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Mn&&e===r?s:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=Qn(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},qn.prototype.get=function(t){var e=this.__data__,n=Qn(e,t);return n<0?r:e[n][1]},qn.prototype.has=function(t){return Qn(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,i=Qn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(kn||qn),string:new Un}},Hn.prototype.delete=function(t){var e=oo(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return oo(this,t).get(t)},Hn.prototype.has=function(t){return oo(this,t).has(t)},Hn.prototype.set=function(t,e){var n=oo(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Gn.prototype.add=Gn.prototype.push=function(t){return this.__data__.set(t,s),this},Gn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.clear=function(){this.__data__=new qn,this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Yn.prototype.get=function(t){return this.__data__.get(t)},Yn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var i=n.__data__;if(!kn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(i)}return n.set(t,e),this.size=n.size,this};var hi=Nr(yi),ui=Nr(vi,!0);function ci(t,e){var n=!0;return hi(t,function(t,i,r){return n=!!e(t,i,r)}),n}function fi(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(l===r?a==a&&!aa(a):n(a,l)))var l=a,h=s}return h}function di(t,e){var n=[];return hi(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function pi(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=po),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?pi(a,e-1,n,i,r):Me(r,a):i||(r[r.length]=a)}return r}var gi=Ar(),mi=Ar(!0);function yi(t,e){return t&&gi(t,e,Aa)}function vi(t,e){return t&&mi(t,e,Aa)}function bi(t,e){return ke(e,function(e){return $s(t[e])})}function wi(t,e){for(var n=0,i=(e=gr(e,t)).length;null!=t&&n<i;)t=t[Fo(e[n++])];return n&&n==i?t:r}function xi(t,e,n){var i=e(t);return qs(t)?i:Me(i,n(t))}function ki(t){return null==t?t===r?"[object Undefined]":"[object Null]":ae&&ae in Ct(t)?function(t){var e=Ot.call(t,ae),n=t[ae];try{t[ae]=r;var i=!0}catch(s){}var o=Ft.call(t);return i&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return Ft.call(t)}(t)}function Si(t,e){return t>e}function _i(t,e){return null!=t&&Ot.call(t,e)}function Ci(t,e){return null!=t&&e in Ct(t)}function Mi(t,e,n){for(var o=n?_e:Se,s=t[0].length,a=t.length,l=a,h=i(a),u=1/0,c=[];l--;){var f=t[l];l&&e&&(f=Ce(f,Ue(e))),u=mn(f.length,u),h[l]=!n&&(e||s>=120&&f.length>=120)?new Gn(l&&f):r}f=t[0];var d=-1,p=h[0];t:for(;++d<s&&c.length<u;){var g=f[d],m=e?e(g):g;if(g=n||0!==g?g:0,!(p?He(p,m):o(c,m,n))){for(l=a;--l;){var y=h[l];if(!(y?He(y,m):o(t[l],m,n)))continue t}p&&p.push(m),c.push(g)}}return c}function Pi(t,e,n){var i=null==(t=_o(t,e=gr(e,t)))?t:t[Fo(Wo(e))];return null==i?r:ye(i,t,n)}function Ti(t){return ta(t)&&ki(t)==g}function Ni(t,e,n,i,o){return t===e||(null==t||null==e||!ta(t)&&!ta(e)?t!=t&&e!=e:function(t,e,n,i,o,s){var a=qs(t),l=qs(e),h=a?m:uo(t),u=l?m:uo(e),c=(h=h==g?_:h)==_,f=(u=u==g?_:u)==_,d=h==u;if(d&&Xs(t)){if(!Xs(e))return!1;a=!0,c=!1}if(d&&!c)return s||(s=new Yn),a||la(t)?Zr(t,e,n,i,o,s):function(t,e,n,i,r,o,s){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case E:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case y:case v:case S:return Bs(+t,+e);case b:return t.name==e.name&&t.message==e.message;case M:case T:return t==e+"";case k:var a=Je;case P:if(a||(a=en),t.size!=e.size&&!(1&i))return!1;var l=s.get(t);if(l)return l==e;i|=2,s.set(t,e);var h=Zr(a(t),a(e),i,r,o,s);return s.delete(t),h;case N:if(jn)return jn.call(t)==jn.call(e)}return!1}(t,e,h,n,i,o,s);if(!(1&n)){var p=c&&Ot.call(t,"__wrapped__"),w=f&&Ot.call(e,"__wrapped__");if(p||w){var x=p?t.value():t,C=w?e.value():e;return s||(s=new Yn),o(x,C,n,i,s)}}return!!d&&(s||(s=new Yn),function(t,e,n,i,o,s){var a=1&n,l=Qr(t),h=l.length;if(h!=Qr(e).length&&!a)return!1;for(var u=h;u--;){var c=l[u];if(!(a?c in e:Ot.call(e,c)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++u<h;){var m=t[c=l[u]],y=e[c];if(i)var v=a?i(y,m,c,e,t,s):i(m,y,c,t,e,s);if(!(v===r?m===y||o(m,y,n,i,s):v)){p=!1;break}g||(g="constructor"==c)}if(p&&!g){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,i,o,s))}(t,e,n,i,Ni,o))}function Ai(t,e,n,i){var o=n.length,s=o,a=!i;if(null==t)return!s;for(t=Ct(t);o--;){var l=n[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var h=(l=n[o])[0],u=t[h],c=l[1];if(a&&l[2]){if(u===r&&!(h in t))return!1}else{var f=new Yn;if(i)var d=i(u,c,h,t,e,f);if(!(d===r?Ni(c,u,3,i,f):d))return!1}}return!0}function Ei(t){return!(!Qs(t)||(e=t,jt&&jt in e))&&($s(t)?Bt:gt).test(Io(t));var e}function Li(t){return"function"==typeof t?t:null==t?nl:"object"==typeof t?qs(t)?Ii(t[0],t[1]):Fi(t):cl(t)}function Oi(t){if(!wo(t))return pn(t);var e=[];for(var n in Ct(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Di(t,e){return t<e}function ji(t,e){var n=-1,r=Gs(t)?i(t.length):[];return hi(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Fi(t){var e=so(t);return 1==e.length&&e[0][2]?ko(e[0][0],e[0][1]):function(n){return n===t||Ai(n,t,e)}}function Ii(t,e){return yo(t)&&xo(e)?ko(Fo(t),e):function(n){var i=Ca(n,t);return i===r&&i===e?Ma(n,t):Ni(e,i,3)}}function Ri(t,e,n,i,o){t!==e&&gi(e,function(s,a){if(o||(o=new Yn),Qs(s))!function(t,e,n,i,o,s,a){var l=Mo(t,n),h=Mo(e,n),u=a.get(h);if(u)Zn(t,n,u);else{var c=s?s(l,h,n+"",t,e,a):r,f=c===r;if(f){var d=qs(h),p=!d&&Xs(h),g=!d&&!p&&la(h);c=h,d||p||g?qs(l)?c=l:Ys(l)?c=Cr(l):p?(f=!1,c=br(h,!0)):g?(f=!1,c=xr(h,!0)):c=[]:ia(h)||Us(h)?(c=l,Us(l)?c=ma(l):Qs(l)&&!$s(l)||(c=fo(h))):f=!1}f&&(a.set(h,c),o(c,h,i,s,a),a.delete(h)),Zn(t,n,c)}}(t,e,a,n,Ri,i,o);else{var l=i?i(Mo(t,a),s,a+"",t,e,o):r;l===r&&(l=s),Zn(t,a,l)}},Ea)}function Bi(t,e){var n=t.length;if(n)return go(e+=e<0?n:0,n)?t[e]:r}function zi(t,e,n){e=e.length?Ce(e,function(t){return qs(t)?function(e){return wi(e,1===t.length?t[0]:t)}:t}):[nl];var i=-1;return e=Ce(e,Ue(ro())),function(t,e){var i=t.length;for(t.sort(function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var l=kr(r[i],o[i]);if(l)return i>=a?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)});i--;)t[i]=t[i].value;return t}(ji(t,function(t,n,r){return{criteria:Ce(e,function(e){return e(t)}),index:++i,value:t}}))}function Vi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=wi(t,s);n(a,s)&&Wi(o,gr(s,t),a)}return o}function Ui(t,e,n,i){var r=i?De:Oe,o=-1,s=e.length,a=t;for(t===e&&(e=Cr(e)),n&&(a=Ce(t,Ue(n)));++o<s;)for(var l=0,h=e[o],u=n?n(h):h;(l=r(a,u,l,i))>-1;)a!==t&&ie.call(a,l,1),ie.call(t,l,1);return t}function qi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;go(r)?ie.call(t,r,1):ar(t,r)}}return t}function Hi(t,e){return t+hn(bn()*(e-t+1))}function Gi(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Yi(t,e){return No(So(t,e,nl),t+"")}function Xi(t){return Kn(Ba(t))}function Ki(t,e){var n=Ba(t);return Lo(n,ri(e,0,n.length))}function Wi(t,e,n,i){if(!Qs(t))return t;for(var o=-1,s=(e=gr(e,t)).length,a=s-1,l=t;null!=l&&++o<s;){var h=Fo(e[o]),u=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(o!=a){var c=l[h];(u=i?i(c,h,l):r)===r&&(u=Qs(c)?c:go(e[o+1])?[]:{})}Jn(l,h,u),l=l[h]}return t}var $i=Pn?function(t,e){return Pn.set(t,e),t}:nl,Zi=he?function(t,e){return he(t,"toString",{configurable:!0,enumerable:!1,value:Qa(e),writable:!0})}:nl;function Ji(t){return Lo(Ba(t))}function Qi(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=i(o);++r<o;)s[r]=t[r+e];return s}function tr(t,e){var n;return hi(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function er(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!aa(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return nr(t,e,nl,n)}function nr(t,e,n,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,l=null===e,h=aa(e),u=e===r;o<s;){var c=hn((o+s)/2),f=n(t[c]),d=f!==r,p=null===f,g=f==f,m=aa(f);if(a)var y=i||g;else y=u?g&&(i||d):l?g&&d&&(i||!p):h?g&&d&&!p&&(i||!m):!p&&!m&&(i?f<=e:f<e);y?o=c+1:s=c}return mn(s,4294967294)}function ir(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!Bs(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function rr(t){return"number"==typeof t?t:aa(t)?f:+t}function or(t){if("string"==typeof t)return t;if(qs(t))return Ce(t,or)+"";if(aa(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function sr(t,e,n){var i=-1,r=Se,o=t.length,s=!0,a=[],l=a;if(n)s=!1,r=_e;else if(o>=200){var h=e?null:Gr(t);if(h)return en(h);s=!1,r=He,l=new Gn}else l=e?[]:a;t:for(;++i<o;){var u=t[i],c=e?e(u):u;if(u=n||0!==u?u:0,s&&c==c){for(var f=l.length;f--;)if(l[f]===c)continue t;e&&l.push(c),a.push(u)}else r(l,c,n)||(l!==a&&l.push(c),a.push(u))}return a}function ar(t,e){return null==(t=_o(t,e=gr(e,t)))||delete t[Fo(Wo(e))]}function lr(t,e,n,i){return Wi(t,e,n(wi(t,e)),i)}function hr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Qi(t,i?0:o,i?o+1:r):Qi(t,i?o+1:0,i?r:o)}function ur(t,e){var n=t;return n instanceof Vn&&(n=n.value()),Pe(e,function(t,e){return e.func.apply(e.thisArg,Me([t],e.args))},n)}function cr(t,e,n){var r=t.length;if(r<2)return r?sr(t[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=t[o],l=-1;++l<r;)l!=o&&(s[o]=li(s[o]||a,t[l],e,n));return sr(pi(s,1),e,n)}function fr(t,e,n){for(var i=-1,o=t.length,s=e.length,a={};++i<o;)n(a,t[i],i<s?e[i]:r);return a}function dr(t){return Ys(t)?t:[]}function pr(t){return"function"==typeof t?t:nl}function gr(t,e){return qs(t)?t:yo(t,e)?[t]:jo(ya(t))}var mr=Yi;function yr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Qi(t,e,n)}var vr=ue||function(t){return oe.clearTimeout(t)};function br(t,e){if(e)return t.slice();var n=t.length,i=qt?qt(n):new t.constructor(n);return t.copy(i),i}function wr(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function xr(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function kr(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,s=aa(t),a=e!==r,l=null===e,h=e==e,u=aa(e);if(!l&&!u&&!s&&t>e||s&&a&&h&&!l&&!u||i&&a&&h||!n&&h||!o)return 1;if(!i&&!s&&!u&&t<e||u&&n&&o&&!i&&!s||l&&n&&o||!a&&o||!h)return-1}return 0}function Sr(t,e,n,r){for(var o=-1,s=t.length,a=n.length,l=-1,h=e.length,u=gn(s-a,0),c=i(h+u),f=!r;++l<h;)c[l]=e[l];for(;++o<a;)(f||o<s)&&(c[n[o]]=t[o]);for(;u--;)c[l++]=t[o++];return c}function _r(t,e,n,r){for(var o=-1,s=t.length,a=-1,l=n.length,h=-1,u=e.length,c=gn(s-l,0),f=i(c+u),d=!r;++o<c;)f[o]=t[o];for(var p=o;++h<u;)f[p+h]=e[h];for(;++a<l;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function Cr(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function Mr(t,e,n,i){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var l=e[s],h=i?i(n[l],t[l],l,n,t):r;h===r&&(h=t[l]),o?ni(n,l,h):Jn(n,l,h)}return n}function Pr(t,e){return function(n,i){var r=qs(n)?ve:ti,o=e?e():{};return r(n,t,ro(i,2),o)}}function Tr(t){return Yi(function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=t.length>3&&"function"==typeof s?(o--,s):r,a&&mo(n[0],n[1],a)&&(s=o<3?r:s,o=1),e=Ct(e);++i<o;){var l=n[i];l&&t(e,l,i,s)}return e})}function Nr(t,e){return function(n,i){if(null==n)return n;if(!Gs(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=Ct(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Ar(t){return function(e,n,i){for(var r=-1,o=Ct(e),s=i(e),a=s.length;a--;){var l=s[t?a:++r];if(!1===n(o[l],l,o))break}return e}}function Er(t){return function(e){var n=Ze(e=ya(e))?on(e):r,i=n?n[0]:e.charAt(0),o=n?yr(n,1).join(""):e.slice(1);return i[t]()+o}}function Lr(t){return function(e){return Pe($a(Ua(e).replace(Ht,"")),t,"")}}function Or(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Rn(t.prototype),i=t.apply(n,e);return Qs(i)?i:n}}function Dr(t){return function(e,n,i){var o=Ct(e);if(!Gs(e)){var s=ro(n,3);e=Aa(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,i);return a>-1?o[s?e[a]:a]:r}}function jr(t){return Jr(function(e){var n=e.length,i=n,s=zn.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new Tt(o);if(s&&!l&&"wrapper"==no(a))var l=new zn([],!0)}for(i=l?i:n;++i<n;){var h=no(a=e[i]),u="wrapper"==h?eo(a):r;l=u&&vo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[no(u[0])].apply(l,u[3]):1==a.length&&vo(a)?l[h]():l.thru(a)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&qs(i))return l.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function Fr(t,e,n,o,s,a,l,u,c,f){var d=e&h,p=1&e,g=2&e,m=24&e,y=512&e,v=g?r:Or(t);return function r(){for(var h=arguments.length,b=i(h),w=h;w--;)b[w]=arguments[w];if(m)var x=io(r),k=Xe(b,x);if(o&&(b=Sr(b,o,s,m)),a&&(b=_r(b,a,l,m)),h-=k,m&&h<f){var S=tn(b,x);return qr(t,e,Fr,r.placeholder,n,b,S,u,c,f-h)}var _=p?n:this,C=g?_[t]:t;return h=b.length,u?b=Co(b,u):y&&h>1&&b.reverse(),d&&c<h&&(b.length=c),this&&this!==oe&&this instanceof r&&(C=v||Or(C)),C.apply(_,b)}}function Ir(t,e){return function(n,i){return function(t,e,n,i){return yi(t,function(t,r,o){e(i,n(t),r,o)}),i}(n,t,e(i),{})}}function Rr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=or(n),i=or(i)):(n=rr(n),i=rr(i)),o=t(n,i)}return o}}function Br(t){return Jr(function(e){return e=Ce(e,Ue(ro())),Yi(function(n){var i=this;return t(e,function(t){return ye(t,i,n)})})})}function zr(t,e){var n=(e=e===r?" ":or(e)).length;if(n<2)return n?Gi(e,t):e;var i=Gi(e,ln(t/rn(e)));return Ze(e)?yr(on(i),0,t).join(""):i.slice(0,t)}function Vr(t){return function(e,n,o){return o&&"number"!=typeof o&&mo(e,n,o)&&(n=o=r),e=fa(e),n===r?(n=e,e=0):n=fa(n),function(t,e,n,r){for(var o=-1,s=gn(ln((e-t)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=t,t+=n;return a}(e,n,o=o===r?e<n?1:-1:fa(o),t)}}function Ur(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ga(e),n=ga(n)),t(e,n)}}function qr(t,e,n,i,o,s,a,h,u,c){var f=8&e;e|=f?l:64,4&(e&=~(f?64:l))||(e&=-4);var d=[t,e,o,f?s:r,f?a:r,f?r:s,f?r:a,h,u,c],p=n.apply(r,d);return vo(t)&&Po(p,d),p.placeholder=i,Ao(p,t,e)}function Hr(t){var e=_t[t];return function(t,n){if(t=ga(t),(n=null==n?0:mn(da(n),292))&&fn(t)){var i=(ya(t)+"e").split("e");return+((i=(ya(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Gr=_n&&1/en(new _n([,-0]))[1]==u?function(t){return new _n(t)}:al;function Yr(t){return function(e){var n=uo(e);return n==k?Je(e):n==P?nn(e):function(t,e){return Ce(e,function(e){return[e,t[e]]})}(e,t(e))}}function Xr(t,e,n,s,u,c,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new Tt(o);var g=s?s.length:0;if(g||(e&=-97,s=u=r),f=f===r?f:gn(da(f),0),d=d===r?d:da(d),g-=u?u.length:0,64&e){var m=s,y=u;s=u=r}var v=p?r:eo(t),b=[t,e,n,s,u,m,y,c,f,d];if(v&&function(t,e){var n=t[1],i=e[1],r=n|i;if(!(r<131||i==h&&8==n||i==h&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n))return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var o=e[3];if(o){var s=t[3];t[3]=s?Sr(s,o,e[4]):o,t[4]=s?tn(t[3],a):e[4]}(o=e[5])&&(t[5]=(s=t[5])?_r(s,o,e[6]):o,t[6]=s?tn(t[5],a):e[6]),(o=e[7])&&(t[7]=o),i&h&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(b,v),t=b[0],e=b[1],n=b[2],s=b[3],u=b[4],!(d=b[9]=b[9]===r?p?0:t.length:gn(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||16==e?function(t,e,n){var o=Or(t);return function s(){for(var a=arguments.length,l=i(a),h=a,u=io(s);h--;)l[h]=arguments[h];var c=a<3&&l[0]!==u&&l[a-1]!==u?[]:tn(l,u);return(a-=c.length)<n?qr(t,e,Fr,s.placeholder,r,l,c,r,r,n-a):ye(this&&this!==oe&&this instanceof s?o:t,this,l)}}(t,e,d):e!=l&&33!=e||u.length?Fr.apply(r,b):function(t,e,n,r){var o=1&e,s=Or(t);return function e(){for(var a=-1,l=arguments.length,h=-1,u=r.length,c=i(u+l),f=this&&this!==oe&&this instanceof e?s:t;++h<u;)c[h]=r[h];for(;l--;)c[h++]=arguments[++a];return ye(f,o?n:this,c)}}(t,e,n,s);else var w=function(t,e,n){var i=1&e,r=Or(t);return function e(){return(this&&this!==oe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Ao((v?$i:Po)(w,b),t,e)}function Kr(t,e,n,i){return t===r||Bs(t,At[n])&&!Ot.call(i,n)?e:t}function Wr(t,e,n,i,o,s){return Qs(t)&&Qs(e)&&(s.set(e,t),Ri(t,e,r,Wr,s),s.delete(e)),t}function $r(t){return ia(t)?r:t}function Zr(t,e,n,i,o,s){var a=1&n,l=t.length,h=e.length;if(l!=h&&!(a&&h>l))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,p=2&n?new Gn:r;for(s.set(t,e),s.set(e,t);++f<l;){var g=t[f],m=e[f];if(i)var y=a?i(m,g,f,e,t,s):i(g,m,f,t,e,s);if(y!==r){if(y)continue;d=!1;break}if(p){if(!Ne(e,function(t,e){if(!He(p,e)&&(g===t||o(g,t,n,i,s)))return p.push(e)})){d=!1;break}}else if(g!==m&&!o(g,m,n,i,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function Jr(t){return No(So(t,r,Ho),t+"")}function Qr(t){return xi(t,Aa,lo)}function to(t){return xi(t,Ea,ho)}var eo=Pn?function(t){return Pn.get(t)}:al;function no(t){for(var e=t.name+"",n=Tn[e],i=Ot.call(Tn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function io(t){return(Ot.call(In,"placeholder")?In:t).placeholder}function ro(){var t=In.iteratee||il;return t=t===il?Li:t,arguments.length?t(arguments[0],arguments[1]):t}function oo(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function so(t){for(var e=Aa(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,xo(r)]}return e}function ao(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Ei(n)?n:r}var lo=un?function(t){return null==t?[]:(t=Ct(t),ke(un(t),function(e){return te.call(t,e)}))}:pl,ho=un?function(t){for(var e=[];t;)Me(e,lo(t)),t=Yt(t);return e}:pl,uo=ki;function co(t,e,n){for(var i=-1,r=(e=gr(e,t)).length,o=!1;++i<r;){var s=Fo(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Js(r)&&go(s,r)&&(qs(t)||Us(t))}function fo(t){return"function"!=typeof t.constructor||wo(t)?{}:Rn(Yt(t))}function po(t){return qs(t)||Us(t)||!!(re&&t&&t[re])}function go(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,n){if(!Qs(n))return!1;var i=typeof e;return!!("number"==i?Gs(n)&&go(e,n.length):"string"==i&&e in n)&&Bs(n[e],t)}function yo(t,e){if(qs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!aa(t))||Q.test(t)||!J.test(t)||null!=e&&t in Ct(e)}function vo(t){var e=no(t),n=In[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var i=eo(n);return!!i&&t===i[0]}(xn&&uo(new xn(new ArrayBuffer(1)))!=L||kn&&uo(new kn)!=k||Sn&&uo(Sn.resolve())!=C||_n&&uo(new _n)!=P||Cn&&uo(new Cn)!=A)&&(uo=function(t){var e=ki(t),n=e==_?t.constructor:r,i=n?Io(n):"";if(i)switch(i){case Nn:return L;case An:return k;case En:return C;case Ln:return P;case On:return A}return e});var bo=Et?$s:gl;function wo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||At)}function xo(t){return t==t&&!Qs(t)}function ko(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Ct(n))}}function So(t,e,n){return e=gn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=gn(r.length-e,0),a=i(s);++o<s;)a[o]=r[e+o];o=-1;for(var l=i(e+1);++o<e;)l[o]=r[o];return l[e]=n(a),ye(t,this,l)}}function _o(t,e){return e.length<2?t:wi(t,Qi(e,0,-1))}function Co(t,e){for(var n=t.length,i=mn(e.length,n),o=Cr(t);i--;){var s=e[i];t[i]=go(s,n)?o[s]:r}return t}function Mo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Po=Eo($i),To=Re||function(t,e){return oe.setTimeout(t,e)},No=Eo(Zi);function Ao(t,e,n){var i=e+"";return No(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return be(p,function(n){var i="_."+n[0];e&n[1]&&!Se(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(lt):[]}(i),n)))}function Eo(t){var e=0,n=0;return function(){var i=yn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Lo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var s=Hi(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Oo,Do,jo=(Oo=Os(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,function(t,n,i,r){e.push(i?r.replace(ut,"$1"):n||t)}),e},function(t){return 500===Do.size&&Do.clear(),t}),Do=Oo.cache,Oo);function Fo(t){if("string"==typeof t||aa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Io(t){if(null!=t){try{return Lt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ro(t){if(t instanceof Vn)return t.clone();var e=new zn(t.__wrapped__,t.__chain__);return e.__actions__=Cr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Bo=Yi(function(t,e){return Ys(t)?li(t,pi(e,1,Ys,!0)):[]}),zo=Yi(function(t,e){var n=Wo(e);return Ys(n)&&(n=r),Ys(t)?li(t,pi(e,1,Ys,!0),ro(n,2)):[]}),Vo=Yi(function(t,e){var n=Wo(e);return Ys(n)&&(n=r),Ys(t)?li(t,pi(e,1,Ys,!0),r,n):[]});function Uo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:da(n);return r<0&&(r=gn(i+r,0)),Le(t,ro(e,3),r)}function qo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=da(n),o=n<0?gn(i+o,0):mn(o,i-1)),Le(t,ro(e,3),o,!0)}function Ho(t){return null!=t&&t.length?pi(t,1):[]}function Go(t){return t&&t.length?t[0]:r}var Yo=Yi(function(t){var e=Ce(t,dr);return e.length&&e[0]===t[0]?Mi(e):[]}),Xo=Yi(function(t){var e=Wo(t),n=Ce(t,dr);return e===Wo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Mi(n,ro(e,2)):[]}),Ko=Yi(function(t){var e=Wo(t),n=Ce(t,dr);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Mi(n,r,e):[]});function Wo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var $o=Yi(Zo);function Zo(t,e){return t&&t.length&&e&&e.length?Ui(t,e):t}var Jo=Jr(function(t,e){var n=null==t?0:t.length,i=ii(t,e);return qi(t,Ce(e,function(t){return go(t,n)?+t:t}).sort(kr)),i});function Qo(t){return null==t?t:wn.call(t)}var ts=Yi(function(t){return sr(pi(t,1,Ys,!0))}),es=Yi(function(t){var e=Wo(t);return Ys(e)&&(e=r),sr(pi(t,1,Ys,!0),ro(e,2))}),ns=Yi(function(t){var e=Wo(t);return e="function"==typeof e?e:r,sr(pi(t,1,Ys,!0),r,e)});function is(t){if(!t||!t.length)return[];var e=0;return t=ke(t,function(t){if(Ys(t))return e=gn(t.length,e),!0}),Ve(e,function(e){return Ce(t,Ie(e))})}function rs(t,e){if(!t||!t.length)return[];var n=is(t);return null==e?n:Ce(n,function(t){return ye(e,r,t)})}var os=Yi(function(t,e){return Ys(t)?li(t,e):[]}),ss=Yi(function(t){return cr(ke(t,Ys))}),as=Yi(function(t){var e=Wo(t);return Ys(e)&&(e=r),cr(ke(t,Ys),ro(e,2))}),ls=Yi(function(t){var e=Wo(t);return e="function"==typeof e?e:r,cr(ke(t,Ys),r,e)}),hs=Yi(is),us=Yi(function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,rs(t,n)});function cs(t){var e=In(t);return e.__chain__=!0,e}function fs(t,e){return e(t)}var ds=Jr(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return ii(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Vn&&go(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:fs,args:[o],thisArg:r}),new zn(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(o)}),ps=Pr(function(t,e,n){Ot.call(t,n)?++t[n]:ni(t,n,1)}),gs=Dr(Uo),ms=Dr(qo);function ys(t,e){return(qs(t)?be:hi)(t,ro(e,3))}function vs(t,e){return(qs(t)?we:ui)(t,ro(e,3))}var bs=Pr(function(t,e,n){Ot.call(t,n)?t[n].push(e):ni(t,n,[e])}),ws=Yi(function(t,e,n){var r=-1,o="function"==typeof e,s=Gs(t)?i(t.length):[];return hi(t,function(t){s[++r]=o?ye(e,t,n):Pi(t,e,n)}),s}),xs=Pr(function(t,e,n){ni(t,n,e)});function ks(t,e){return(qs(t)?Ce:ji)(t,ro(e,3))}var Ss=Pr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),_s=Yi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&mo(t,e[0],e[1])?e=[]:n>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),zi(t,pi(e,1),[])}),Cs=Ae||function(){return oe.Date.now()};function Ms(t,e,n){return e=n?r:e,Xr(t,h,r,r,r,r,e=t&&null==e?t.length:e)}function Ps(t,e){var n;if("function"!=typeof e)throw new Tt(o);return t=da(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Ts=Yi(function(t,e,n){var i=1;if(n.length){var r=tn(n,io(Ts));i|=l}return Xr(t,i,e,n,r)}),Ns=Yi(function(t,e,n){var i=3;if(n.length){var r=tn(n,io(Ns));i|=l}return Xr(e,i,t,n,r)});function As(t,e,n){var i,s,a,l,h,u,c=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Tt(o);function g(e){var n=i,o=s;return i=s=r,c=e,l=t.apply(o,n)}function m(t){return c=t,h=To(v,e),f?g(t):l}function y(t){var n=t-u;return u===r||n>=e||n<0||d&&t-c>=a}function v(){var t=Cs();if(y(t))return b(t);h=To(v,function(t){var n=e-(t-u);return d?mn(n,a-(t-c)):n}(t))}function b(t){return h=r,p&&i?g(t):(i=s=r,l)}function w(){var t=Cs(),n=y(t);if(i=arguments,s=this,u=t,n){if(h===r)return m(u);if(d)return vr(h),h=To(v,e),g(u)}return h===r&&(h=To(v,e)),l}return e=ga(e)||0,Qs(n)&&(f=!!n.leading,a=(d="maxWait"in n)?gn(ga(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),w.cancel=function(){h!==r&&vr(h),c=0,i=u=s=h=r},w.flush=function(){return h===r?l:b(Cs())},w}var Es=Yi(function(t,e){return ai(t,1,e)}),Ls=Yi(function(t,e,n){return ai(t,ga(e)||0,n)});function Os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Os.Cache||Hn),n}function Ds(t){if("function"!=typeof t)throw new Tt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Os.Cache=Hn;var js=mr(function(t,e){var n=(e=1==e.length&&qs(e[0])?Ce(e[0],Ue(ro())):Ce(pi(e,1),Ue(ro()))).length;return Yi(function(i){for(var r=-1,o=mn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return ye(t,this,i)})}),Fs=Yi(function(t,e){var n=tn(e,io(Fs));return Xr(t,l,r,e,n)}),Is=Yi(function(t,e){var n=tn(e,io(Is));return Xr(t,64,r,e,n)}),Rs=Jr(function(t,e){return Xr(t,256,r,r,r,e)});function Bs(t,e){return t===e||t!=t&&e!=e}var zs=Ur(Si),Vs=Ur(function(t,e){return t>=e}),Us=Ti(function(){return arguments}())?Ti:function(t){return ta(t)&&Ot.call(t,"callee")&&!te.call(t,"callee")},qs=i.isArray,Hs=ce?Ue(ce):function(t){return ta(t)&&ki(t)==E};function Gs(t){return null!=t&&Js(t.length)&&!$s(t)}function Ys(t){return ta(t)&&Gs(t)}var Xs=cn||gl,Ks=fe?Ue(fe):function(t){return ta(t)&&ki(t)==v};function Ws(t){if(!ta(t))return!1;var e=ki(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ia(t)}function $s(t){if(!Qs(t))return!1;var e=ki(t);return e==w||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Zs(t){return"number"==typeof t&&t==da(t)}function Js(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function Qs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ta(t){return null!=t&&"object"==typeof t}var ea=de?Ue(de):function(t){return ta(t)&&uo(t)==k};function na(t){return"number"==typeof t||ta(t)&&ki(t)==S}function ia(t){if(!ta(t)||ki(t)!=_)return!1;var e=Yt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==It}var ra=pe?Ue(pe):function(t){return ta(t)&&ki(t)==M},oa=ge?Ue(ge):function(t){return ta(t)&&uo(t)==P};function sa(t){return"string"==typeof t||!qs(t)&&ta(t)&&ki(t)==T}function aa(t){return"symbol"==typeof t||ta(t)&&ki(t)==N}var la=me?Ue(me):function(t){return ta(t)&&Js(t.length)&&!!Jt[ki(t)]},ha=Ur(Di),ua=Ur(function(t,e){return t<=e});function ca(t){if(!t)return[];if(Gs(t))return sa(t)?on(t):Cr(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=uo(t);return(e==k?Je:e==P?en:Ba)(t)}function fa(t){return t?(t=ga(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function da(t){var e=fa(t),n=e%1;return e==e?n?e-n:e:0}function pa(t){return t?ri(da(t),0,d):0}function ga(t){if("number"==typeof t)return t;if(aa(t))return f;if(Qs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Qs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(it,"");var n=pt.test(t);return n||mt.test(t)?ne(t.slice(2),n?2:8):dt.test(t)?f:+t}function ma(t){return Mr(t,Ea(t))}function ya(t){return null==t?"":or(t)}var va=Tr(function(t,e){if(wo(e)||Gs(e))Mr(e,Aa(e),t);else for(var n in e)Ot.call(e,n)&&Jn(t,n,e[n])}),ba=Tr(function(t,e){Mr(e,Ea(e),t)}),wa=Tr(function(t,e,n,i){Mr(e,Ea(e),t,i)}),xa=Tr(function(t,e,n,i){Mr(e,Aa(e),t,i)}),ka=Jr(ii),Sa=Yi(function(t,e){t=Ct(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&mo(e[0],e[1],o)&&(i=1);++n<i;)for(var s=e[n],a=Ea(s),l=-1,h=a.length;++l<h;){var u=a[l],c=t[u];(c===r||Bs(c,At[u])&&!Ot.call(t,u))&&(t[u]=s[u])}return t}),_a=Yi(function(t){return t.push(r,Wr),ye(Oa,r,t)});function Ca(t,e,n){var i=null==t?r:wi(t,e);return i===r?n:i}function Ma(t,e){return null!=t&&co(t,e,Ci)}var Pa=Ir(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),t[e]=n},Qa(nl)),Ta=Ir(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]},ro),Na=Yi(Pi);function Aa(t){return Gs(t)?Xn(t):Oi(t)}function Ea(t){return Gs(t)?Xn(t,!0):function(t){if(!Qs(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=wo(t),n=[];for(var i in t)("constructor"!=i||!e&&Ot.call(t,i))&&n.push(i);return n}(t)}var La=Tr(function(t,e,n){Ri(t,e,n)}),Oa=Tr(function(t,e,n,i){Ri(t,e,n,i)}),Da=Jr(function(t,e){var n={};if(null==t)return n;var i=!1;e=Ce(e,function(e){return e=gr(e,t),i||(i=e.length>1),e}),Mr(t,to(t),n),i&&(n=oi(n,7,$r));for(var r=e.length;r--;)ar(n,e[r]);return n}),ja=Jr(function(t,e){return null==t?{}:function(t,e){return Vi(t,e,function(e,n){return Ma(t,n)})}(t,e)});function Fa(t,e){if(null==t)return{};var n=Ce(to(t),function(t){return[t]});return e=ro(e),Vi(t,n,function(t,n){return e(t,n[0])})}var Ia=Yr(Aa),Ra=Yr(Ea);function Ba(t){return null==t?[]:qe(t,Aa(t))}var za=Lr(function(t,e,n){return e=e.toLowerCase(),t+(n?Va(e):e)});function Va(t){return Wa(ya(t).toLowerCase())}function Ua(t){return(t=ya(t))&&t.replace(vt,Ke).replace(Gt,"")}var qa=Lr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ha=Lr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Ga=Er("toLowerCase"),Ya=Lr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xa=Lr(function(t,e,n){return t+(n?" ":"")+Wa(e)}),Ka=Lr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Wa=Er("toUpperCase");function $a(t,e,n){return t=ya(t),(e=n?r:e)===r?function(t){return Wt.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Za=Yi(function(t,e){try{return ye(t,r,e)}catch(n){return Ws(n)?n:new kt(n)}}),Ja=Jr(function(t,e){return be(e,function(e){e=Fo(e),ni(t,e,Ts(t[e],t))}),t});function Qa(t){return function(){return t}}var tl=jr(),el=jr(!0);function nl(t){return t}function il(t){return Li("function"==typeof t?t:oi(t,1))}var rl=Yi(function(t,e){return function(n){return Pi(n,t,e)}}),ol=Yi(function(t,e){return function(n){return Pi(t,n,e)}});function sl(t,e,n){var i=Aa(e),r=bi(e,i);null!=n||Qs(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=bi(e,Aa(e)));var o=!(Qs(n)&&"chain"in n&&!n.chain),s=$s(t);return be(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Cr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Me([this.value()],arguments))})}),t}function al(){}var ll=Br(Ce),hl=Br(xe),ul=Br(Ne);function cl(t){return yo(t)?Ie(Fo(t)):function(t){return function(e){return wi(e,t)}}(t)}var fl=Vr(),dl=Vr(!0);function pl(){return[]}function gl(){return!1}var ml,yl=Rr(function(t,e){return t+e},0),vl=Hr("ceil"),bl=Rr(function(t,e){return t/e},1),wl=Hr("floor"),xl=Rr(function(t,e){return t*e},1),kl=Hr("round"),Sl=Rr(function(t,e){return t-e},0);return In.after=function(t,e){if("function"!=typeof e)throw new Tt(o);return t=da(t),function(){if(--t<1)return e.apply(this,arguments)}},In.ary=Ms,In.assign=va,In.assignIn=ba,In.assignInWith=wa,In.assignWith=xa,In.at=ka,In.before=Ps,In.bind=Ts,In.bindAll=Ja,In.bindKey=Ns,In.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qs(t)?t:[t]},In.chain=cs,In.chunk=function(t,e,n){e=(n?mo(t,e,n):e===r)?1:gn(da(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,l=i(ln(o/e));s<o;)l[a++]=Qi(t,s,s+=e);return l},In.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},In.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Me(qs(n)?Cr(n):[n],pi(e,1))},In.cond=function(t){var e=null==t?0:t.length,n=ro();return t=e?Ce(t,function(t){if("function"!=typeof t[1])throw new Tt(o);return[n(t[0]),t[1]]}):[],Yi(function(n){for(var i=-1;++i<e;){var r=t[i];if(ye(r[0],this,n))return ye(r[1],this,n)}})},In.conforms=function(t){return function(t){var e=Aa(t);return function(n){return si(n,t,e)}}(oi(t,1))},In.constant=Qa,In.countBy=ps,In.create=function(t,e){var n=Rn(t);return null==e?n:ei(n,e)},In.curry=function t(e,n,i){var o=Xr(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},In.curryRight=function t(e,n,i){var o=Xr(e,16,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},In.debounce=As,In.defaults=Sa,In.defaultsDeep=_a,In.defer=Es,In.delay=Ls,In.difference=Bo,In.differenceBy=zo,In.differenceWith=Vo,In.drop=function(t,e,n){var i=null==t?0:t.length;return i?Qi(t,(e=n||e===r?1:da(e))<0?0:e,i):[]},In.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Qi(t,0,(e=i-(e=n||e===r?1:da(e)))<0?0:e):[]},In.dropRightWhile=function(t,e){return t&&t.length?hr(t,ro(e,3),!0,!0):[]},In.dropWhile=function(t,e){return t&&t.length?hr(t,ro(e,3),!0):[]},In.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&mo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=da(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:da(i))<0&&(i+=o),i=n>i?0:pa(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},In.filter=function(t,e){return(qs(t)?ke:di)(t,ro(e,3))},In.flatMap=function(t,e){return pi(ks(t,e),1)},In.flatMapDeep=function(t,e){return pi(ks(t,e),u)},In.flatMapDepth=function(t,e,n){return n=n===r?1:da(n),pi(ks(t,e),n)},In.flatten=Ho,In.flattenDeep=function(t){return null!=t&&t.length?pi(t,u):[]},In.flattenDepth=function(t,e){return null!=t&&t.length?pi(t,e=e===r?1:da(e)):[]},In.flip=function(t){return Xr(t,512)},In.flow=tl,In.flowRight=el,In.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},In.functions=function(t){return null==t?[]:bi(t,Aa(t))},In.functionsIn=function(t){return null==t?[]:bi(t,Ea(t))},In.groupBy=bs,In.initial=function(t){return null!=t&&t.length?Qi(t,0,-1):[]},In.intersection=Yo,In.intersectionBy=Xo,In.intersectionWith=Ko,In.invert=Pa,In.invertBy=Ta,In.invokeMap=ws,In.iteratee=il,In.keyBy=xs,In.keys=Aa,In.keysIn=Ea,In.map=ks,In.mapKeys=function(t,e){var n={};return e=ro(e,3),yi(t,function(t,i,r){ni(n,e(t,i,r),t)}),n},In.mapValues=function(t,e){var n={};return e=ro(e,3),yi(t,function(t,i,r){ni(n,i,e(t,i,r))}),n},In.matches=function(t){return Fi(oi(t,1))},In.matchesProperty=function(t,e){return Ii(t,oi(e,1))},In.memoize=Os,In.merge=La,In.mergeWith=Oa,In.method=rl,In.methodOf=ol,In.mixin=sl,In.negate=Ds,In.nthArg=function(t){return t=da(t),Yi(function(e){return Bi(e,t)})},In.omit=Da,In.omitBy=function(t,e){return Fa(t,Ds(ro(e)))},In.once=function(t){return Ps(2,t)},In.orderBy=function(t,e,n,i){return null==t?[]:(qs(e)||(e=null==e?[]:[e]),qs(n=i?r:n)||(n=null==n?[]:[n]),zi(t,e,n))},In.over=ll,In.overArgs=js,In.overEvery=hl,In.overSome=ul,In.partial=Fs,In.partialRight=Is,In.partition=Ss,In.pick=ja,In.pickBy=Fa,In.property=cl,In.propertyOf=function(t){return function(e){return null==t?r:wi(t,e)}},In.pull=$o,In.pullAll=Zo,In.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ui(t,e,ro(n,2)):t},In.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ui(t,e,r,n):t},In.pullAt=Jo,In.range=fl,In.rangeRight=dl,In.rearg=Rs,In.reject=function(t,e){return(qs(t)?ke:di)(t,Ds(ro(e,3)))},In.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=ro(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return qi(t,r),n},In.rest=function(t,e){if("function"!=typeof t)throw new Tt(o);return Yi(t,e=e===r?e:da(e))},In.reverse=Qo,In.sampleSize=function(t,e,n){return e=(n?mo(t,e,n):e===r)?1:da(e),(qs(t)?Wn:Ki)(t,e)},In.set=function(t,e,n){return null==t?t:Wi(t,e,n)},In.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Wi(t,e,n,i)},In.shuffle=function(t){return(qs(t)?$n:Ji)(t)},In.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&mo(t,e,n)?(e=0,n=i):(e=null==e?0:da(e),n=n===r?i:da(n)),Qi(t,e,n)):[]},In.sortBy=_s,In.sortedUniq=function(t){return t&&t.length?ir(t):[]},In.sortedUniqBy=function(t,e){return t&&t.length?ir(t,ro(e,2)):[]},In.split=function(t,e,n){return n&&"number"!=typeof n&&mo(t,e,n)&&(e=n=r),(n=n===r?d:n>>>0)?(t=ya(t))&&("string"==typeof e||null!=e&&!ra(e))&&!(e=or(e))&&Ze(t)?yr(on(t),0,n):t.split(e,n):[]},In.spread=function(t,e){if("function"!=typeof t)throw new Tt(o);return e=null==e?0:gn(da(e),0),Yi(function(n){var i=n[e],r=yr(n,0,e);return i&&Me(r,i),ye(t,this,r)})},In.tail=function(t){var e=null==t?0:t.length;return e?Qi(t,1,e):[]},In.take=function(t,e,n){return t&&t.length?Qi(t,0,(e=n||e===r?1:da(e))<0?0:e):[]},In.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Qi(t,(e=i-(e=n||e===r?1:da(e)))<0?0:e,i):[]},In.takeRightWhile=function(t,e){return t&&t.length?hr(t,ro(e,3),!1,!0):[]},In.takeWhile=function(t,e){return t&&t.length?hr(t,ro(e,3)):[]},In.tap=function(t,e){return e(t),t},In.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Tt(o);return Qs(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),As(t,e,{leading:i,maxWait:e,trailing:r})},In.thru=fs,In.toArray=ca,In.toPairs=Ia,In.toPairsIn=Ra,In.toPath=function(t){return qs(t)?Ce(t,Fo):aa(t)?[t]:Cr(jo(ya(t)))},In.toPlainObject=ma,In.transform=function(t,e,n){var i=qs(t),r=i||Xs(t)||la(t);if(e=ro(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:Qs(t)&&$s(o)?Rn(Yt(t)):{}}return(r?be:yi)(t,function(t,i,r){return e(n,t,i,r)}),n},In.unary=function(t){return Ms(t,1)},In.union=ts,In.unionBy=es,In.unionWith=ns,In.uniq=function(t){return t&&t.length?sr(t):[]},In.uniqBy=function(t,e){return t&&t.length?sr(t,ro(e,2)):[]},In.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?sr(t,r,e):[]},In.unset=function(t,e){return null==t||ar(t,e)},In.unzip=is,In.unzipWith=rs,In.update=function(t,e,n){return null==t?t:lr(t,e,pr(n))},In.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:lr(t,e,pr(n),i)},In.values=Ba,In.valuesIn=function(t){return null==t?[]:qe(t,Ea(t))},In.without=os,In.words=$a,In.wrap=function(t,e){return Fs(pr(e),t)},In.xor=ss,In.xorBy=as,In.xorWith=ls,In.zip=hs,In.zipObject=function(t,e){return fr(t||[],e||[],Jn)},In.zipObjectDeep=function(t,e){return fr(t||[],e||[],Wi)},In.zipWith=us,In.entries=Ia,In.entriesIn=Ra,In.extend=ba,In.extendWith=wa,sl(In,In),In.add=yl,In.attempt=Za,In.camelCase=za,In.capitalize=Va,In.ceil=vl,In.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=ga(n))==n?n:0),e!==r&&(e=(e=ga(e))==e?e:0),ri(ga(t),e,n)},In.clone=function(t){return oi(t,4)},In.cloneDeep=function(t){return oi(t,5)},In.cloneDeepWith=function(t,e){return oi(t,5,e="function"==typeof e?e:r)},In.cloneWith=function(t,e){return oi(t,4,e="function"==typeof e?e:r)},In.conformsTo=function(t,e){return null==e||si(t,e,Aa(e))},In.deburr=Ua,In.defaultTo=function(t,e){return null==t||t!=t?e:t},In.divide=bl,In.endsWith=function(t,e,n){t=ya(t),e=or(e);var i=t.length,o=n=n===r?i:ri(da(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},In.eq=Bs,In.escape=function(t){return(t=ya(t))&&K.test(t)?t.replace(Y,We):t},In.escapeRegExp=function(t){return(t=ya(t))&&nt.test(t)?t.replace(et,"\\$&"):t},In.every=function(t,e,n){var i=qs(t)?xe:ci;return n&&mo(t,e,n)&&(e=r),i(t,ro(e,3))},In.find=gs,In.findIndex=Uo,In.findKey=function(t,e){return Ee(t,ro(e,3),yi)},In.findLast=ms,In.findLastIndex=qo,In.findLastKey=function(t,e){return Ee(t,ro(e,3),vi)},In.floor=wl,In.forEach=ys,In.forEachRight=vs,In.forIn=function(t,e){return null==t?t:gi(t,ro(e,3),Ea)},In.forInRight=function(t,e){return null==t?t:mi(t,ro(e,3),Ea)},In.forOwn=function(t,e){return t&&yi(t,ro(e,3))},In.forOwnRight=function(t,e){return t&&vi(t,ro(e,3))},In.get=Ca,In.gt=zs,In.gte=Vs,In.has=function(t,e){return null!=t&&co(t,e,_i)},In.hasIn=Ma,In.head=Go,In.identity=nl,In.includes=function(t,e,n,i){t=Gs(t)?t:Ba(t),n=n&&!i?da(n):0;var r=t.length;return n<0&&(n=gn(r+n,0)),sa(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Oe(t,e,n)>-1},In.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:da(n);return r<0&&(r=gn(i+r,0)),Oe(t,e,r)},In.inRange=function(t,e,n){return e=fa(e),n===r?(n=e,e=0):n=fa(n),function(t,e,n){return t>=mn(e,n)&&t<gn(e,n)}(t=ga(t),e,n)},In.invoke=Na,In.isArguments=Us,In.isArray=qs,In.isArrayBuffer=Hs,In.isArrayLike=Gs,In.isArrayLikeObject=Ys,In.isBoolean=function(t){return!0===t||!1===t||ta(t)&&ki(t)==y},In.isBuffer=Xs,In.isDate=Ks,In.isElement=function(t){return ta(t)&&1===t.nodeType&&!ia(t)},In.isEmpty=function(t){if(null==t)return!0;if(Gs(t)&&(qs(t)||"string"==typeof t||"function"==typeof t.splice||Xs(t)||la(t)||Us(t)))return!t.length;var e=uo(t);if(e==k||e==P)return!t.size;if(wo(t))return!Oi(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},In.isEqual=function(t,e){return Ni(t,e)},In.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Ni(t,e,r,n):!!i},In.isError=Ws,In.isFinite=function(t){return"number"==typeof t&&fn(t)},In.isFunction=$s,In.isInteger=Zs,In.isLength=Js,In.isMap=ea,In.isMatch=function(t,e){return t===e||Ai(t,e,so(e))},In.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Ai(t,e,so(e),n)},In.isNaN=function(t){return na(t)&&t!=+t},In.isNative=function(t){if(bo(t))throw new kt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ei(t)},In.isNil=function(t){return null==t},In.isNull=function(t){return null===t},In.isNumber=na,In.isObject=Qs,In.isObjectLike=ta,In.isPlainObject=ia,In.isRegExp=ra,In.isSafeInteger=function(t){return Zs(t)&&t>=-9007199254740991&&t<=c},In.isSet=oa,In.isString=sa,In.isSymbol=aa,In.isTypedArray=la,In.isUndefined=function(t){return t===r},In.isWeakMap=function(t){return ta(t)&&uo(t)==A},In.isWeakSet=function(t){return ta(t)&&"[object WeakSet]"==ki(t)},In.join=function(t,e){return null==t?"":dn.call(t,e)},In.kebabCase=qa,In.last=Wo,In.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=da(n))<0?gn(i+o,0):mn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):Le(t,je,o,!0)},In.lowerCase=Ha,In.lowerFirst=Ga,In.lt=ha,In.lte=ua,In.max=function(t){return t&&t.length?fi(t,nl,Si):r},In.maxBy=function(t,e){return t&&t.length?fi(t,ro(e,2),Si):r},In.mean=function(t){return Fe(t,nl)},In.meanBy=function(t,e){return Fe(t,ro(e,2))},In.min=function(t){return t&&t.length?fi(t,nl,Di):r},In.minBy=function(t,e){return t&&t.length?fi(t,ro(e,2),Di):r},In.stubArray=pl,In.stubFalse=gl,In.stubObject=function(){return{}},In.stubString=function(){return""},In.stubTrue=function(){return!0},In.multiply=xl,In.nth=function(t,e){return t&&t.length?Bi(t,da(e)):r},In.noConflict=function(){return oe._===this&&(oe._=Rt),this},In.noop=al,In.now=Cs,In.pad=function(t,e,n){t=ya(t);var i=(e=da(e))?rn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return zr(hn(r),n)+t+zr(ln(r),n)},In.padEnd=function(t,e,n){t=ya(t);var i=(e=da(e))?rn(t):0;return e&&i<e?t+zr(e-i,n):t},In.padStart=function(t,e,n){t=ya(t);var i=(e=da(e))?rn(t):0;return e&&i<e?zr(e-i,n)+t:t},In.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),vn(ya(t).replace(rt,""),e||0)},In.random=function(t,e,n){if(n&&"boolean"!=typeof n&&mo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=fa(t),e===r?(e=t,t=0):e=fa(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=bn();return mn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Hi(t,e)},In.reduce=function(t,e,n){var i=qs(t)?Pe:Be,r=arguments.length<3;return i(t,ro(e,4),n,r,hi)},In.reduceRight=function(t,e,n){var i=qs(t)?Te:Be,r=arguments.length<3;return i(t,ro(e,4),n,r,ui)},In.repeat=function(t,e,n){return e=(n?mo(t,e,n):e===r)?1:da(e),Gi(ya(t),e)},In.replace=function(){var t=arguments,e=ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},In.result=function(t,e,n){var i=-1,o=(e=gr(e,t)).length;for(o||(o=1,t=r);++i<o;){var s=null==t?r:t[Fo(e[i])];s===r&&(i=o,s=n),t=$s(s)?s.call(t):s}return t},In.round=kl,In.runInContext=t,In.sample=function(t){return(qs(t)?Kn:Xi)(t)},In.size=function(t){if(null==t)return 0;if(Gs(t))return sa(t)?rn(t):t.length;var e=uo(t);return e==k||e==P?t.size:Oi(t).length},In.snakeCase=Ya,In.some=function(t,e,n){var i=qs(t)?Ne:tr;return n&&mo(t,e,n)&&(e=r),i(t,ro(e,3))},In.sortedIndex=function(t,e){return er(t,e)},In.sortedIndexBy=function(t,e,n){return nr(t,e,ro(n,2))},In.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=er(t,e);if(i<n&&Bs(t[i],e))return i}return-1},In.sortedLastIndex=function(t,e){return er(t,e,!0)},In.sortedLastIndexBy=function(t,e,n){return nr(t,e,ro(n,2),!0)},In.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=er(t,e,!0)-1;if(Bs(t[n],e))return n}return-1},In.startCase=Xa,In.startsWith=function(t,e,n){return t=ya(t),n=null==n?0:ri(da(n),0,t.length),e=or(e),t.slice(n,n+e.length)==e},In.subtract=Sl,In.sum=function(t){return t&&t.length?ze(t,nl):0},In.sumBy=function(t,e){return t&&t.length?ze(t,ro(e,2)):0},In.template=function(t,e,n){var i=In.templateSettings;n&&mo(t,e,n)&&(e=r),t=ya(t),e=wa({},e,i,Kr);var o,s,a=wa({},e.imports,i.imports,Kr),l=Aa(a),h=qe(a,l),u=0,c=e.interpolate||bt,f="__p += '",d=Mt((e.escape||bt).source+"|"+c.source+"|"+(c===Z?ct:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zt+"]")+"\n";t.replace(d,function(e,n,i,r,a,l){return i||(i=r),f+=t.slice(u,l).replace(wt,$e),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),f+="';\n";var g=Ot.call(e,"variable")&&e.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(U,""):f).replace(q,"$1").replace(H,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Za(function(){return St(l,p+"return "+f).apply(r,h)});if(m.source=f,Ws(m))throw m;return m},In.times=function(t,e){if((t=da(t))<1||t>c)return[];var n=d,i=mn(t,d);e=ro(e),t-=d;for(var r=Ve(i,e);++n<t;)e(n);return r},In.toFinite=fa,In.toInteger=da,In.toLength=pa,In.toLower=function(t){return ya(t).toLowerCase()},In.toNumber=ga,In.toSafeInteger=function(t){return t?ri(da(t),-9007199254740991,c):0===t?t:0},In.toString=ya,In.toUpper=function(t){return ya(t).toUpperCase()},In.trim=function(t,e,n){if((t=ya(t))&&(n||e===r))return t.replace(it,"");if(!t||!(e=or(e)))return t;var i=on(t),o=on(e);return yr(i,Ge(i,o),Ye(i,o)+1).join("")},In.trimEnd=function(t,e,n){if((t=ya(t))&&(n||e===r))return t.replace(ot,"");if(!t||!(e=or(e)))return t;var i=on(t);return yr(i,0,Ye(i,on(e))+1).join("")},In.trimStart=function(t,e,n){if((t=ya(t))&&(n||e===r))return t.replace(rt,"");if(!t||!(e=or(e)))return t;var i=on(t);return yr(i,Ge(i,on(e))).join("")},In.truncate=function(t,e){var n=30,i="...";if(Qs(e)){var o="separator"in e?e.separator:o;n="length"in e?da(e.length):n,i="omission"in e?or(e.omission):i}var s=(t=ya(t)).length;if(Ze(t)){var a=on(t);s=a.length}if(n>=s)return t;var l=n-rn(i);if(l<1)return i;var h=a?yr(a,0,l).join(""):t.slice(0,l);if(o===r)return h+i;if(a&&(l+=h.length-l),ra(o)){if(t.slice(l).search(o)){var u,c=h;for(o.global||(o=Mt(o.source,ya(ft.exec(o))+"g")),o.lastIndex=0;u=o.exec(c);)var f=u.index;h=h.slice(0,f===r?l:f)}}else if(t.indexOf(or(o),l)!=l){var d=h.lastIndexOf(o);d>-1&&(h=h.slice(0,d))}return h+i},In.unescape=function(t){return(t=ya(t))&&X.test(t)?t.replace(G,sn):t},In.uniqueId=function(t){var e=++Dt;return ya(t)+e},In.upperCase=Ka,In.upperFirst=Wa,In.each=ys,In.eachRight=vs,In.first=Go,sl(In,(ml={},yi(In,function(t,e){Ot.call(In.prototype,e)||(ml[e]=t)}),ml),{chain:!1}),In.VERSION="4.17.20",be(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){In[t].placeholder=In}),be(["drop","take"],function(t,e){Vn.prototype[t]=function(n){n=n===r?1:gn(da(n),0);var i=this.__filtered__&&!e?new Vn(this):this.clone();return i.__filtered__?i.__takeCount__=mn(n,i.__takeCount__):i.__views__.push({size:mn(n,d),type:t+(i.__dir__<0?"Right":"")}),i},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),be(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ro(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),be(["head","last"],function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}}),be(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}}),Vn.prototype.compact=function(){return this.filter(nl)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Yi(function(t,e){return"function"==typeof t?new Vn(this):this.map(function(n){return Pi(n,t,e)})}),Vn.prototype.reject=function(t){return this.filter(Ds(ro(t)))},Vn.prototype.slice=function(t,e){t=da(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Vn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=da(e))<0?n.dropRight(-e):n.take(e-t)),n)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(d)},yi(Vn.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=In[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);o&&(In.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,l=e instanceof Vn,h=a[0],u=l||qs(e),c=function(t){var e=o.apply(In,Me([t],a));return i&&f?e[0]:e};u&&n&&"function"==typeof h&&1!=h.length&&(l=u=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=l&&!d;if(!s&&u){e=g?e:new Vn(this);var m=t.apply(e,a);return m.__actions__.push({func:fs,args:[c],thisArg:r}),new zn(m,f)}return p&&g?t.apply(this,a):(m=this.thru(c),p?i?m.value()[0]:m.value():m)})}),be(["pop","push","shift","sort","splice","unshift"],function(t){var e=Nt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);In.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(qs(r)?r:[],t)}return this[n](function(n){return e.apply(qs(n)?n:[],t)})}}),yi(Vn.prototype,function(t,e){var n=In[e];if(n){var i=n.name+"";Ot.call(Tn,i)||(Tn[i]=[]),Tn[i].push({name:e,func:n})}}),Tn[Fr(r,2).name]=[{name:"wrapper",func:r}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Cr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Cr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Cr(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=qs(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=mn(e,t+s);break;case"takeRight":t=gn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,l=a-s,h=i?a:s-1,u=this.__iteratees__,c=u.length,f=0,d=mn(l,this.__takeCount__);if(!n||!i&&r==l&&d==l)return ur(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var g=-1,m=t[h+=e];++g<c;){var y=u[g],v=y.type,b=(0,y.iteratee)(m);if(2==v)m=b;else if(!b){if(1==v)continue t;break t}}p[f++]=m}return p},In.prototype.at=ds,In.prototype.chain=function(){return cs(this)},In.prototype.commit=function(){return new zn(this.value(),this.__chain__)},In.prototype.next=function(){this.__values__===r&&(this.__values__=ca(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},In.prototype.plant=function(t){for(var e,n=this;n instanceof Bn;){var i=Ro(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},In.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:fs,args:[Qo],thisArg:r}),new zn(e,this.__chain__)}return this.thru(Qo)},In.prototype.toJSON=In.prototype.valueOf=In.prototype.value=function(){return ur(this.__wrapped__,this.__actions__)},In.prototype.first=In.prototype.head,se&&(In.prototype[se]=function(){return this}),In}();oe._=an,(i=(function(){return an}).call(e,n,e,t))===r||(t.exports=i)}).call(this)}).call(this,n("YuTi")(t))},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},b3AA:function(t,e,n){!function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}function r(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var o,s="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)o=Object.setPrototypeOf;else{var a;t:{var l={};try{l.__proto__={a:!0},a=l.a;break t}catch(Gm){}a=!1}o=a?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var h=o;function u(t,e){if(t.prototype=s(e.prototype),t.prototype.constructor=t,h)h(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.vB=e.prototype}var c="undefined"!=typeof window&&window===self?self:"undefined"!=typeof global&&null!=global?global:self,f="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};!function(t){if(t){for(var e=c,n=["Array","prototype","fill"],i=0;i<n.length-1;i++){var r=n[i];r in e||(e[r]={}),e=e[r]}(t=t(i=e[n=n[n.length-1]]))!=i&&null!=t&&f(e,n,{writable:!0,value:t})}}(function(t){return t||function(t,e,n){var i=this.length||0;for(0>e&&(e=Math.max(0,i+e)),(null==n||n>i)&&(n=i),0>(n=Number(n))&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}});var d="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||"object"==typeof window&&window.window===window&&window||{};function p(){}function g(t,e){var n=-1;return function(){var i=this,r=arguments;-1!==n&&d.clearTimeout(n),n=m(function(){n=-1,t.apply(i,r)},e)}}function m(t,e){return d.setTimeout(t,e)}function y(t){return d.document.createElement(t)}function v(t){throw Error(t)}function b(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),v(t)}function w(t,e,n,i){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==i&&(n+="."+i),v(n+" is not in the range "+e+": "+t)}function x(t){d.console&&d.console.log(t)}function k(){d.console&&d.console.log("Warning: List/Map/Set constructors no longer take an argument that enforces type.Instead they take an optional collection of Values to add to the collection. See 2.0 changelog for details.")}function S(t){return"object"==typeof t&&null!==t}function _(t){return Array.isArray(t)||d.NodeList&&t instanceof d.NodeList||d.HTMLCollection&&t instanceof d.HTMLCollection}function C(t){return Array.prototype.slice.call(t)}function M(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):v("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function P(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):v("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function T(){var t=U.pop();return void 0===t?[]:t}function N(t){t.length=0,U.push(t)}function A(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(S(t)&&t.constructor)return A(t.constructor);return typeof t}function E(t){var e=t;return S(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function L(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.gB;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function O(t,e,n){Object.defineProperty(Ln.prototype,t,{get:e,set:n})}function D(){var t=q;if(void 0===d.document)return t;if(0===t.length)for(var e=d.document.getElementsByTagName("canvas"),n=e.length,i=0;i<n;i++){var r=e[i];r.parentElement&&r.parentElement.B&&t.push(r.parentElement.B)}return t}function j(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,r=0;r<t.length;r+=2)n[i++]=e[t.substr(r,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=i=0;256>n;n++)r=e[n],e[n]=e[i=(i+e[n]+119)%256],e[i]=r;i=n=0;for(var o="",s=0;s<t.length;s++)r=e[n=(n+1)%256],e[n]=e[i=(i+e[n])%256],e[i]=r,o+=String.fromCharCode(t.charCodeAt(s)^e[(e[n]+e[i])%256]);return o}void 0===d.requestAnimationFrame&&(d.requestAnimationFrame=void 0===d.setImmediate?function(t){d.setTimeout(t,0)}:d.setImmediate);var F=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("MSIE 9.0"),I=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("MSIE 10.0"),R=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("Trident/7"),B=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("Edge/"),z=void 0!==d.navigator&&void 0!==d.navigator.platform&&0<=d.navigator.platform.toUpperCase().indexOf("MAC"),V=void 0!==d.navigator&&void 0!==d.navigator.platform&&null!==d.navigator.platform.match(/(iPhone|iPod|iPad)/i),U=[];Object.freeze([]);var q=[];function H(t,e,n){it(this),this.l=t,this.Qa=e,this.v=n}function G(t,e){return null==e||""===e?null:t[e]}function Y(){this.mx=[]}function X(){}p.className="Util",p.Dx="32ab5ff3b26f42dc0ed90f21452913b5",p.adym="gojs.net",p.vfo="28e647fdb063",p.className="Util",H.prototype.toString=function(){return"EnumValue."+this.Qa},c.Object.defineProperties(H.prototype,{classType:{get:function(){return this.l}},name:{get:function(){return this.Qa}},value:{get:function(){return this.v}}}),H.className="EnumValue",Y.prototype.toString=function(){return this.mx.join("")},Y.prototype.add=function(t){""!==t&&this.mx.push(t)},Y.className="StringBuilder",X.className="PropertyCollection";var K,W={iB:!1,nB:!1,kB:!1,mB:!1,sB:!1,qB:!1,jy:!1,jB:null,trace:function(t){d.console&&d.console.log(t)},lB:function(t,e,n,i){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(i.left,i.top+20),t.lineTo(i.left,i.top),t.lineTo(i.left+20,i.top),t.moveTo(i.right,i.bottom-20),t.lineTo(i.right,i.bottom),t.lineTo(i.right-20,i.bottom),t.stroke(),t.fillText("DB: "+Math.round(i.x)+", "+Math.round(i.y)+", "+Math.round(i.width)+", "+Math.round(i.height),i.left,i.top-5)},hB:function(t){var e,n={};for(e in t){if(n.x=e,"licenseKey"!==n.x){var i=t[n.x];if(void 0!==i.prototype){n.Em=Object.getOwnPropertyNames(i.prototype);for(var r={uk:0};r.uk<n.Em.length;(r={uk:r.uk}).uk++){var o=Object.getOwnPropertyDescriptor(i.prototype,n.Em[r.uk]);void 0!==o.get&&void 0===o.set&&Object.defineProperty(i.prototype,n.Em[r.uk],{set:function(t,e){return function(){throw Error("Property "+t.Em[e.uk]+" of "+t.x+" is read-only.")}}(n,r)})}}}n={Em:n.Em,x:n.x}}}};function $(){}function Z(t){this.key=-1,this.value=t}function J(t){this.sb=t,this.ef=null,t.Ha=null,this.ia=t.Aa,this.Pa=-1}function Q(t){this.sb=t,t.fh=null,this.ia=t.Aa,this.Pa=t.j.length}function tt(t){it(this),this.s=!1,this.j=[],this.Aa=0,this.fh=this.Ha=null,void 0!==t&&("function"==typeof t||"string"==typeof t?k():this.addAll(t))}function et(t){this.tg=t,t.Ha=null,this.ia=t.Aa,this.ka=null}function nt(t){it(this),this.s=!1,this.Hb={},this.Fb=0,this.Ha=null,this.Aa=0,this.Ze=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?k():this.addAll(t))}function it(t){t.__gohashid=st++}function rt(t){var e=t.__gohashid;return void 0===e&&(e=st++,t.__gohashid=e),e}function ot(t){return t.__gohashid}$.prototype.reset=function(){},$.prototype.next=function(){return!1},$.prototype.nd=function(){return!1},$.prototype.first=function(){return null},$.prototype.any=function(){return!1},$.prototype.all=function(){return!0},$.prototype.each=function(){return this},$.prototype.map=function(){return this},$.prototype.filter=function(){return this},$.prototype.Md=function(){},$.prototype.toString=function(){return"EmptyIterator"},c.Object.defineProperties($.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),$.prototype.first=$.prototype.first,$.prototype.hasNext=$.prototype.nd,$.prototype.next=$.prototype.next,$.prototype.reset=$.prototype.reset,$.className="EmptyIterator",K=new $,Z.prototype.reset=function(){this.key=-1},Z.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},Z.prototype.nd=function(){return this.next()},Z.prototype.first=function(){return this.key=0,this.value},Z.prototype.any=function(t){return this.key=-1,t(this.value)},Z.prototype.all=function(t){return this.key=-1,t(this.value)},Z.prototype.each=function(t){return this.key=-1,t(this.value),this},Z.prototype.map=function(t){return new Z(t(this.value))},Z.prototype.filter=function(t){return t(this.value)?new Z(this.value):K},Z.prototype.Md=function(){this.value=null},Z.prototype.toString=function(){return"SingletonIterator("+this.value+")"},c.Object.defineProperties(Z.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Z.prototype.first=Z.prototype.first,Z.prototype.hasNext=Z.prototype.nd,Z.prototype.next=Z.prototype.next,Z.prototype.reset=Z.prototype.reset,Z.className="SingletonIterator",J.prototype.reset=function(){var t=this.sb;t.Ha=null,this.ia=t.Aa,this.Pa=-1},J.prototype.next=function(){var t=this.sb;if(t.Aa!==this.ia&&0>this.key)return!1;var e=(t=t.j).length,n=++this.Pa,i=this.ef;if(null!==i)for(;n<e;){var r=t[n];if(i(r))return this.key=this.Pa=n,this.value=r,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Md()}return!1},J.prototype.nd=function(){return this.next()},J.prototype.first=function(){var t=this.sb;this.ia=t.Aa,this.Pa=0;var e=(t=t.j).length,n=this.ef;if(null!==n){for(var i=0;i<e;){var r=t[i];if(n(r))return this.key=this.Pa=i,this.value=r;i++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},J.prototype.any=function(t){var e=this.sb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,i=this.ef,r=0;r<n;r++){var o=e[r];if((null===i||i(o))&&t(o))return!0}return!1},J.prototype.all=function(t){var e=this.sb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,i=this.ef,r=0;r<n;r++){var o=e[r];if((null===i||i(o))&&!t(o))return!1}return!0},J.prototype.each=function(t){var e=this.sb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,i=this.ef,r=0;r<n;r++){var o=e[r];(null===i||i(o))&&t(o)}return this},J.prototype.map=function(t){var e=this.sb;e.Ha=null,this.Pa=-1;for(var n=[],i=(e=e.j).length,r=this.ef,o=0;o<i;o++){var s=e[o];(null===r||r(s))&&n.push(t(s))}return(t=new tt).j=n,t.nb(),t.iterator},J.prototype.filter=function(t){var e=this.sb;e.Ha=null,this.Pa=-1;for(var n=[],i=(e=e.j).length,r=this.ef,o=0;o<i;o++){var s=e[o];(null===r||r(s))&&t(s)&&n.push(s)}return(t=new tt).j=n,t.nb(),t.iterator},J.prototype.Md=function(){this.key=-1,this.value=null,this.ia=-1,this.ef=null,this.sb.Ha=this},J.prototype.toString=function(){return"ListIterator@"+this.Pa+"/"+this.sb.count},c.Object.defineProperties(J.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.ef},set:function(t){this.ef=t}},count:{get:function(){var t=this.ef;if(null!==t){for(var e=0,n=this.sb.j,i=n.length,r=0;r<i;r++)t(n[r])&&e++;return e}return this.sb.j.length}}}),J.prototype.first=J.prototype.first,J.prototype.hasNext=J.prototype.nd,J.prototype.next=J.prototype.next,J.prototype.reset=J.prototype.reset,J.className="ListIterator",Q.prototype.reset=function(){var t=this.sb;t.fh=null,this.ia=t.Aa,this.Pa=t.j.length},Q.prototype.next=function(){var t=this.sb;if(t.Aa!==this.ia&&0>this.key)return!1;var e=--this.Pa;return 0<=e?(this.key=e,this.value=t.j[e],!0):(this.Md(),!1)},Q.prototype.nd=function(){return this.next()},Q.prototype.first=function(){var t=this.sb;this.ia=t.Aa;var e=t.j;return this.Pa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},Q.prototype.any=function(t){var e=this.sb;e.fh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},Q.prototype.all=function(t){var e=this.sb;e.fh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},Q.prototype.each=function(t){var e=this.sb;e.fh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)t(e[n]);return this},Q.prototype.map=function(t){var e=this.sb;e.fh=null;var n=[],i=(e=e.j).length;for(this.Pa=i,--i;0<=i;i--)n.push(t(e[i]));return(t=new tt).j=n,t.nb(),t.iterator},Q.prototype.filter=function(t){var e=this.sb;e.fh=null;var n=[],i=(e=e.j).length;for(this.Pa=i,--i;0<=i;i--){var r=e[i];t(r)&&n.push(r)}return(t=new tt).j=n,t.nb(),t.iterator},Q.prototype.Md=function(){this.key=-1,this.value=null,this.ia=-1,this.sb.fh=this},Q.prototype.toString=function(){return"ListIteratorBackwards("+this.Pa+"/"+this.sb.count+")"},c.Object.defineProperties(Q.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.sb.j.length}}}),Q.prototype.first=Q.prototype.first,Q.prototype.hasNext=Q.prototype.nd,Q.prototype.next=Q.prototype.next,Q.prototype.reset=Q.prototype.reset,Q.className="ListIteratorBackwards",(e=tt.prototype).nb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},e.freeze=function(){return this.s=!0,this},e.da=function(){return this.s=!1,this},e.toString=function(){return"List()#"+ot(this)},e.add=function(t){return null===t||(this.s&&b(this,t),this.j.push(t),this.nb()),this},e.push=function(t){this.add(t)},e.addAll=function(t){if(null===t)return this;this.s&&b(this);var e=this.j;if(_(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.nb(),this},e.clear=function(){this.s&&b(this),this.j.length=0,this.nb()},e.contains=function(t){return null!==t&&-1!==this.j.indexOf(t)},e.has=function(t){return this.contains(t)},e.indexOf=function(t){return null===t?-1:this.j.indexOf(t)},e.J=function(t){var e=this.j;return(0>t||t>=e.length)&&w(t,"0 <= i < length",tt,"elt:i"),e[t]},e.get=function(t){return this.J(t)},e.Nc=function(t,e){var n=this.j;(0>t||t>=n.length)&&w(t,"0 <= i < length",tt,"setElt:i"),this.s&&b(this,t),n[t]=e},e.set=function(t,e){this.Nc(t,e)},e.first=function(){var t=this.j;return 0===t.length?null:t[0]},e.Wb=function(){var t=this.j,e=t.length;return 0<e?t[e-1]:null},e.pop=function(){this.s&&b(this);var t=this.j;return 0<t.length?t.pop():null},tt.prototype.any=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},tt.prototype.all=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},tt.prototype.each=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)t(e[i]);return this},tt.prototype.map=function(t){for(var e=new tt,n=[],i=this.j,r=i.length,o=0;o<r;o++)n.push(t(i[o]));return e.j=n,e.nb(),e},tt.prototype.filter=function(t){for(var e=new tt,n=[],i=this.j,r=i.length,o=0;o<r;o++){var s=i[o];t(s)&&n.push(s)}return e.j=n,e.nb(),e},(e=tt.prototype).vb=function(t,e){0>t&&w(t,">= 0",tt,"insertAt:i"),this.s&&b(this,t);var n=this.j;t>=n.length?n.push(e):n.splice(t,0,e),this.nb()},e.remove=function(t){if(null===t)return!1;this.s&&b(this,t);var e=this.j;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.nb(),!0)},e.delete=function(t){return this.remove(t)},e.bb=function(t){var e=this.j;(0>t||t>=e.length)&&w(t,"0 <= i < length",tt,"removeAt:i"),this.s&&b(this,t),t===e.length-1?e.pop():e.splice(t,1),this.nb()},e.removeRange=function(t,e){var n=this.j,i=n.length;if(0>t)t=0;else if(t>=i)return this;if(0>e)return this;if(e>=i&&(e=i-1),t>e)return this;this.s&&b(this);for(var r=t,o=e+1;o<i;)n[r++]=n[o++];return n.length=i-(e-t+1),this.nb(),this},tt.prototype.copy=function(){var t=new tt,e=this.j;return 0<e.length&&(t.j=Array.prototype.slice.call(e)),t},(e=tt.prototype).ma=function(){for(var t=this.j,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},e.Hw=function(){for(var t=new nt,e=this.j,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},e.sort=function(t){return this.s&&b(this),this.j.sort(t),this.nb(),this},e.rj=function(t,e,n){var i=this.j,r=i.length;void 0===e&&(e=0),void 0===n&&(n=r),this.s&&b(this);var o=n-e;if(1>=o)return this;if((0>e||e>=r-1)&&w(e,"0 <= from < length",tt,"sortRange:from"),2===o)return 0<t(n=i[e],r=i[e+1])&&(i[e]=r,i[e+1]=n,this.nb()),this;if(0===e)if(n>=r)i.sort(t);else for((e=i.slice(0,n)).sort(t),t=0;t<n;t++)i[t]=e[t];else if(n>=r)for((n=i.slice(e)).sort(t),t=e;t<r;t++)i[t]=n[t-e];else for((r=i.slice(e,n)).sort(t),t=e;t<n;t++)i[t]=r[t-e];return this.nb(),this},e.reverse=function(){return this.s&&b(this),this.j.reverse(),this.nb(),this},c.Object.defineProperties(tt.prototype,{_dataArray:{get:function(){return this.j}},count:{get:function(){return this.j.length}},size:{get:function(){return this.j.length}},length:{get:function(){return this.j.length}},iterator:{get:function(){if(0>=this.j.length)return K;var t=this.Ha;return null!==t?(t.reset(),t):new J(this)}},iteratorBackwards:{get:function(){if(0>=this.j.length)return K;var t=this.fh;return null!==t?(t.reset(),t):new Q(this)}}}),tt.prototype.reverse=tt.prototype.reverse,tt.prototype.sortRange=tt.prototype.rj,tt.prototype.sort=tt.prototype.sort,tt.prototype.toSet=tt.prototype.Hw,tt.prototype.toArray=tt.prototype.ma,tt.prototype.removeRange=tt.prototype.removeRange,tt.prototype.removeAt=tt.prototype.bb,tt.prototype.delete=tt.prototype.delete,tt.prototype.remove=tt.prototype.remove,tt.prototype.insertAt=tt.prototype.vb,tt.prototype.pop=tt.prototype.pop,tt.prototype.last=tt.prototype.Wb,tt.prototype.first=tt.prototype.first,tt.prototype.set=tt.prototype.set,tt.prototype.setElt=tt.prototype.Nc,tt.prototype.get=tt.prototype.get,tt.prototype.elt=tt.prototype.J,tt.prototype.indexOf=tt.prototype.indexOf,tt.prototype.has=tt.prototype.has,tt.prototype.contains=tt.prototype.contains,tt.prototype.clear=tt.prototype.clear,tt.prototype.addAll=tt.prototype.addAll,tt.prototype.push=tt.prototype.push,tt.prototype.add=tt.prototype.add,tt.prototype.thaw=tt.prototype.da,tt.prototype.freeze=tt.prototype.freeze,tt.className="List",et.prototype.reset=function(){var t=this.tg;t.Ha=null,this.ia=t.Aa,this.ka=null},et.prototype.next=function(){var t=this.tg;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Md(),!1)},et.prototype.nd=function(){return this.next()},et.prototype.first=function(){var t=this.tg;if(this.ia=t.Aa,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},et.prototype.any=function(t){var e=this.tg;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},et.prototype.all=function(t){var e=this.tg;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},et.prototype.each=function(t){var e=this.tg;for(this.ka=e.Ha=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},et.prototype.map=function(t){var e=this.tg;e.Ha=null;var n=new tt;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},et.prototype.filter=function(t){var e=this.tg;e.Ha=null;var n=new tt;for(e=e.ba;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.oa}return n.iterator},et.prototype.Md=function(){this.value=this.key=null,this.ia=-1,this.tg.Ha=this},et.prototype.toString=function(){return null!==this.ka?"SetIterator@"+this.ka.value:"SetIterator"},c.Object.defineProperties(et.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.tg.Fb}}}),et.prototype.first=et.prototype.first,et.prototype.hasNext=et.prototype.nd,et.prototype.next=et.prototype.next,et.prototype.reset=et.prototype.reset,et.className="SetIterator",(e=nt.prototype).nb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},e.freeze=function(){return this.s=!0,this},e.da=function(){return this.s=!1,this},e.toString=function(){return"Set()#"+ot(this)},e.add=function(t){if(null===t)return this;this.s&&b(this,t);var e=t;return S(t)&&(e=rt(t)),void 0===this.Hb[e]&&(this.Fb++,t=new ut(t,t),this.Hb[e]=t,null===(e=this.Ze)?this.ba=t:(t.Ol=e,e.oa=t),this.Ze=t,this.nb()),this},e.addAll=function(t){if(null===t)return this;if(this.s&&b(this),_(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},e.contains=function(t){if(null===t)return!1;var e=t;return(!S(t)||void 0!==(e=ot(t)))&&void 0!==this.Hb[e]},e.has=function(t){return this.contains(t)},e.zz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},e.Az=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},e.first=function(){var t=this.ba;return null===t?null:t.value},nt.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},nt.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},nt.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e.value),e=e.oa;return this},nt.prototype.map=function(t){for(var e=new nt,n=this.ba;null!==n;)e.add(t(n.value)),n=n.oa;return e},nt.prototype.filter=function(t){for(var e=new nt,n=this.ba;null!==n;){var i=n.value;t(i)&&e.add(i),n=n.oa}return e},(e=nt.prototype).remove=function(t){if(null===t)return!1;this.s&&b(this,t);var e=t;if(S(t)&&void 0===(e=ot(t)))return!1;if(void 0===(t=this.Hb[e]))return!1;var n=t.oa,i=t.Ol;return null!==n&&(n.Ol=i),null!==i&&(i.oa=n),this.ba===t&&(this.ba=n),this.Ze===t&&(this.Ze=i),delete this.Hb[e],this.Fb--,this.nb(),!0},e.delete=function(t){return this.remove(t)},e.Wq=function(t){if(null===t)return this;if(this.s&&b(this),_(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},e.RA=function(t){if(null===t||0===this.count)return this;this.s&&b(this);var e=new nt;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.Wq(t),this},e.clear=function(){this.s&&b(this),this.Hb={},this.Fb=0,null!==this.Ha&&this.Ha.reset(),this.Ze=this.ba=null,this.nb()},nt.prototype.copy=function(){var t,e=new nt,n=this.Hb;for(t in n)e.add(n[t].value);return e},nt.prototype.ma=function(){var t,e=Array(this.Fb),n=this.Hb,i=0;for(t in n)e[i]=n[t].value,i++;return e},nt.prototype.Gw=function(){var t,e=new tt,n=this.Hb;for(t in n)e.add(n[t].value);return e},c.Object.defineProperties(nt.prototype,{count:{get:function(){return this.Fb}},size:{get:function(){return this.Fb}},iterator:{get:function(){if(0>=this.Fb)return K;var t=this.Ha;return null!==t?(t.reset(),t):new et(this)}}}),nt.prototype.toList=nt.prototype.Gw,nt.prototype.toArray=nt.prototype.ma,nt.prototype.clear=nt.prototype.clear,nt.prototype.retainAll=nt.prototype.RA,nt.prototype.removeAll=nt.prototype.Wq,nt.prototype.delete=nt.prototype.delete,nt.prototype.remove=nt.prototype.remove,nt.prototype.first=nt.prototype.first,nt.prototype.containsAny=nt.prototype.Az,nt.prototype.containsAll=nt.prototype.zz,nt.prototype.has=nt.prototype.has,nt.prototype.contains=nt.prototype.contains,nt.prototype.addAll=nt.prototype.addAll,nt.prototype.add=nt.prototype.add,nt.prototype.thaw=nt.prototype.da,nt.prototype.freeze=nt.prototype.freeze;var st=1;function at(t){this.fa=t,this.ia=t.Aa,this.ka=null}function lt(t){nt.call(this),it(this),this.s=!0,this.fa=t}function ht(t){this.fa=t,t.Ye=null,this.ia=t.Aa,this.ka=null}function ut(t,e){this.key=t,this.value=e,this.Ol=this.oa=null}function ct(t){this.fa=t,t.Ha=null,this.ia=t.Aa,this.ka=null}function ft(t){it(this),this.s=!1,this.Hb={},this.Fb=0,this.Ye=this.Ha=null,this.Aa=0,this.Ze=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?k():this.addAll(t))}function dt(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):v("Invalid arguments to Point constructor: "+t+", "+e),this.s=!1}function pt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;""===t[e];)e++;return(i=t[e++])&&(r=parseFloat(i)),new dt(n,r)}return new dt}function gt(t){return t.x.toString()+" "+t.y.toString()}function mt(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}function yt(t,e){return e.Dd(t),t}function vt(t,e,n,i,r,o){var s=r-n,a=o-i,l=s*s+a*a,h=-(n-=t)*s-(i-=e)*a;return 0>=h||h>=l?(s=r-t,a=o-e,Math.min(n*n+i*i,s*s+a*a)):(t=s*i-a*n)*t/l}function bt(t,e,n,i){return(t=n-t)*t+(e=i-e)*e}function wt(t,e,n,i){return e=i-e,0==(t=n-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i)}nt.className="Set",nt.uniqueHash=it,nt.hashIdUnique=rt,nt.hashId=ot,at.prototype.reset=function(){this.ia=this.fa.Aa,this.ka=null},at.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=this.key=t=e.key,!0):(this.Md(),!1)},at.prototype.nd=function(){return this.next()},at.prototype.first=function(){var t=this.fa;return this.ia=t.Aa,null!==(t=t.ba)?(this.ka=t,this.value=this.key=t=t.key):null},at.prototype.any=function(t){var e=this.fa;for(this.ka=null,e=e.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},at.prototype.all=function(t){var e=this.fa;for(this.ka=null,e=e.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},at.prototype.each=function(t){var e=this.fa;for(this.ka=null,e=e.ba;null!==e;)t(e.key),e=e.oa;return this},at.prototype.map=function(t){var e=this.fa;this.ka=null;var n=new tt;for(e=e.ba;null!==e;)n.add(t(e.key)),e=e.oa;return n.iterator},at.prototype.filter=function(t){var e=this.fa;this.ka=null;var n=new tt;for(e=e.ba;null!==e;){var i=e.key;t(i)&&n.add(i),e=e.oa}return n.iterator},at.prototype.Md=function(){this.value=this.key=null,this.ia=-1},at.prototype.toString=function(){return null!==this.ka?"MapKeySetIterator@"+this.ka.value:"MapKeySetIterator"},c.Object.defineProperties(at.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Fb}}}),at.prototype.first=at.prototype.first,at.prototype.hasNext=at.prototype.nd,at.prototype.next=at.prototype.next,at.prototype.reset=at.prototype.reset,at.className="MapKeySetIterator",u(lt,nt),(e=lt.prototype).freeze=function(){return this},e.da=function(){return this},e.toString=function(){return"MapKeySet("+this.fa.toString()+")"},e.add=function(){return v("This Set is read-only: "+this.toString()),this},e.contains=function(t){return this.fa.contains(t)},e.has=function(t){return this.contains(t)},e.remove=function(){return v("This Set is read-only: "+this.toString()),!1},e.delete=function(t){return this.remove(t)},e.clear=function(){v("This Set is read-only: "+this.toString())},e.first=function(){var t=this.fa.ba;return null!==t?t.key:null},lt.prototype.any=function(t){for(var e=this.fa.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},lt.prototype.all=function(t){for(var e=this.fa.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},lt.prototype.each=function(t){for(var e=this.fa.ba;null!==e;)t(e.key),e=e.oa;return this},lt.prototype.map=function(t){for(var e=new nt,n=this.fa.ba;null!==n;)e.add(t(n.key)),n=n.oa;return e},lt.prototype.filter=function(t){for(var e=new nt,n=this.fa.ba;null!==n;){var i=n.key;t(i)&&e.add(i),n=n.oa}return e},lt.prototype.copy=function(){return new lt(this.fa)},lt.prototype.Hw=function(){var t,e=new nt,n=this.fa.Hb;for(t in n)e.add(n[t].key);return e},lt.prototype.ma=function(){var t,e=this.fa.Hb,n=Array(this.fa.Fb),i=0;for(t in e)n[i]=e[t].key,i++;return n},lt.prototype.Gw=function(){var t,e=new tt,n=this.fa.Hb;for(t in n)e.add(n[t].key);return e},c.Object.defineProperties(lt.prototype,{count:{get:function(){return this.fa.Fb}},size:{get:function(){return this.fa.Fb}},iterator:{get:function(){return 0>=this.fa.Fb?K:new at(this.fa)}}}),lt.prototype.toList=lt.prototype.Gw,lt.prototype.toArray=lt.prototype.ma,lt.prototype.toSet=lt.prototype.Hw,lt.prototype.first=lt.prototype.first,lt.prototype.clear=lt.prototype.clear,lt.prototype.delete=lt.prototype.delete,lt.prototype.remove=lt.prototype.remove,lt.prototype.has=lt.prototype.has,lt.prototype.contains=lt.prototype.contains,lt.prototype.add=lt.prototype.add,lt.prototype.thaw=lt.prototype.da,lt.prototype.freeze=lt.prototype.freeze,lt.className="MapKeySet",ht.prototype.reset=function(){var t=this.fa;t.Ye=null,this.ia=t.Aa,this.ka=null},ht.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Md(),!1)},ht.prototype.nd=function(){return this.next()},ht.prototype.first=function(){var t=this.fa;if(this.ia=t.Aa,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},ht.prototype.any=function(t){var e=this.fa;for(this.ka=e.Ye=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},ht.prototype.all=function(t){var e=this.fa;for(this.ka=e.Ye=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},ht.prototype.each=function(t){var e=this.fa;for(this.ka=e.Ye=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},ht.prototype.map=function(t){var e=this.fa;this.ka=e.Ye=null;var n=new tt;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},ht.prototype.filter=function(t){var e=this.fa;this.ka=e.Ye=null;var n=new tt;for(e=e.ba;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.oa}return n.iterator},ht.prototype.Md=function(){this.value=this.key=null,this.ia=-1,this.fa.Ye=this},ht.prototype.toString=function(){return null!==this.ka?"MapValueSetIterator@"+this.ka.value:"MapValueSetIterator"},c.Object.defineProperties(ht.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Fb}}}),ht.prototype.first=ht.prototype.first,ht.prototype.hasNext=ht.prototype.nd,ht.prototype.next=ht.prototype.next,ht.prototype.reset=ht.prototype.reset,ht.className="MapValueSetIterator",ut.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},ut.className="KeyValuePair",ct.prototype.reset=function(){var t=this.fa;t.Ha=null,this.ia=t.Aa,this.ka=null},ct.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.key=e.key,this.value=e.value,!0):(this.Md(),!1)},ct.prototype.nd=function(){return this.next()},ct.prototype.first=function(){var t=this.fa;return this.ia=t.Aa,null!==(t=t.ba)?(this.ka=t,this.key=t.key,this.value=t.value,t):null},ct.prototype.any=function(t){var e=this.fa;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},ct.prototype.all=function(t){var e=this.fa;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},ct.prototype.each=function(t){var e=this.fa;for(this.ka=e.Ha=null,e=e.ba;null!==e;)t(e),e=e.oa;return this},ct.prototype.map=function(t){var e=this.fa;this.ka=e.Ha=null;var n=new tt;for(e=e.ba;null!==e;)n.add(t(e)),e=e.oa;return n.iterator},ct.prototype.filter=function(t){var e=this.fa;this.ka=e.Ha=null;var n=new tt;for(e=e.ba;null!==e;)t(e)&&n.add(e),e=e.oa;return n.iterator},ct.prototype.Md=function(){this.value=this.key=null,this.ia=-1,this.fa.Ha=this},ct.prototype.toString=function(){return null!==this.ka?"MapIterator@"+this.ka:"MapIterator"},c.Object.defineProperties(ct.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Fb}}}),ct.prototype.first=ct.prototype.first,ct.prototype.hasNext=ct.prototype.nd,ct.prototype.next=ct.prototype.next,ct.prototype.reset=ct.prototype.reset,ct.className="MapIterator",(e=ft.prototype).nb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},e.freeze=function(){return this.s=!0,this},e.da=function(){return this.s=!1,this},e.toString=function(){return"Map()#"+ot(this)},e.add=function(t,e){this.s&&b(this,t);var n=t;S(t)&&(n=rt(t));var i=this.Hb[n];return void 0===i?(this.Fb++,t=new ut(t,e),this.Hb[n]=t,null===(n=this.Ze)?this.ba=t:(t.Ol=n,n.oa=t),this.Ze=t,this.nb()):i.value=e,this},e.set=function(t,e){return this.add(t,e)},e.addAll=function(t){if(null===t)return this;if(_(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else if(t instanceof ft)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},e.first=function(){return this.ba},ft.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},ft.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},ft.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e),e=e.oa;return this},ft.prototype.map=function(t){for(var e=new ft,n=this.ba;null!==n;)e.add(n.key,t(n)),n=n.oa;return e},ft.prototype.filter=function(t){for(var e=new ft,n=this.ba;null!==n;)t(n)&&e.add(n.key,n.value),n=n.oa;return e},(e=ft.prototype).contains=function(t){var e=t;return(!S(t)||void 0!==(e=ot(t)))&&void 0!==this.Hb[e]},e.has=function(t){return this.contains(t)},e.H=function(t){var e=t;return S(t)&&void 0===(e=ot(t))||void 0===(t=this.Hb[e])?null:t.value},e.get=function(t){return this.H(t)},e.remove=function(t){if(null===t)return!1;this.s&&b(this,t);var e=t;if(S(t)&&void 0===(e=ot(t)))return!1;if(void 0===(t=this.Hb[e]))return!1;var n=t.oa,i=t.Ol;return null!==n&&(n.Ol=i),null!==i&&(i.oa=n),this.ba===t&&(this.ba=n),this.Ze===t&&(this.Ze=i),delete this.Hb[e],this.Fb--,this.nb(),!0},e.delete=function(t){return this.remove(t)},e.clear=function(){this.s&&b(this),this.Hb={},this.Fb=0,null!==this.Ha&&this.Ha.reset(),null!==this.Ye&&this.Ye.reset(),this.Ze=this.ba=null,this.nb()},ft.prototype.copy=function(){var t,e=new ft,n=this.Hb;for(t in n){var i=n[t];e.add(i.key,i.value)}return e},ft.prototype.ma=function(){var t,e=this.Hb,n=Array(this.Fb),i=0;for(t in e){var r=e[t];n[i]=new ut(r.key,r.value),i++}return n},ft.prototype.Jf=function(){return new lt(this)},c.Object.defineProperties(ft.prototype,{count:{get:function(){return this.Fb}},size:{get:function(){return this.Fb}},iterator:{get:function(){if(0>=this.count)return K;var t=this.Ha;return null!==t?(t.reset(),t):new ct(this)}},iteratorKeys:{get:function(){return 0>=this.count?K:new at(this)}},iteratorValues:{get:function(){if(0>=this.count)return K;var t=this.Ye;return null!==t?(t.reset(),t):new ht(this)}}}),ft.prototype.toKeySet=ft.prototype.Jf,ft.prototype.toArray=ft.prototype.ma,ft.prototype.clear=ft.prototype.clear,ft.prototype.delete=ft.prototype.delete,ft.prototype.remove=ft.prototype.remove,ft.prototype.get=ft.prototype.get,ft.prototype.getValue=ft.prototype.H,ft.prototype.has=ft.prototype.has,ft.prototype.contains=ft.prototype.contains,ft.prototype.first=ft.prototype.first,ft.prototype.addAll=ft.prototype.addAll,ft.prototype.set=ft.prototype.set,ft.prototype.add=ft.prototype.add,ft.prototype.thaw=ft.prototype.da,ft.prototype.freeze=ft.prototype.freeze,ft.className="Map",dt.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},dt.prototype.h=function(t,e){return this.x=t,this.y=e,this},dt.prototype.Ig=function(t,e){return this.x=t,this.y=e,this},dt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},dt.prototype.copy=function(){var t=new dt;return t.x=this.x,t.y=this.y,t},(e=dt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},e.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.s=!0,this},e.da=function(){return Object.isFrozen(this)&&v("cannot thaw constant: "+this),this.s=!1,this},e.toString=function(){return"Point("+this.x+","+this.y+")"},e.w=function(t){return t instanceof dt&&this.x===t.x&&this.y===t.y},e.dj=function(t,e){return this.x===t&&this.y===e},e.Na=function(t){return Xe.A(this.x,t.x)&&Xe.A(this.y,t.y)},e.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.ce=function(t){return this.x-=t.x,this.y-=t.y,this},e.offset=function(t,e){return this.x+=t,this.y+=e,this},dt.prototype.rotate=function(t){if(0===t)return this;var e=this.x,n=this.y;if(0===e&&0===n)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));return this.x=t*e-i*n,this.y=i*e+t*n,this},(e=dt.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},e.Fe=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},e.md=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},e.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},e.Sa=function(t){return mt(t.x-this.x,t.y-this.y)},e.direction=function(t,e){return mt(t-this.x,e-this.y)},e.KA=function(t,e,n,i){return Xe.Oh(t,e,n,i,this.x,this.y,this),this},e.LA=function(t,e){return Xe.Oh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},e.WA=function(t,e,n,i){return Xe.Aq(this.x,this.y,t,e,n,i,this),this},e.XA=function(t,e){return Xe.Aq(this.x,this.y,t.x,t.y,e.width,e.height,this),this},e.qj=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},e.Jk=function(t,e,n,i,r){return this.x=t+r.x*n+r.offsetX,this.y=e+r.y*i+r.offsetY,this},e.transform=function(t){return t.sa(this),this},e.u=function(){return isFinite(this.x)&&isFinite(this.y)},dt.alloc=function(){var t=Ot.pop();return void 0===t?new dt:t},dt.allocAt=function(t,e){var n=Ot.pop();return void 0===n?new dt(t,e):(n.x=t,n.y=e,n)},dt.free=function(t){Ot.push(t)},dt.prototype.isReal=dt.prototype.u,dt.prototype.setSpot=dt.prototype.Jk,dt.prototype.setRectSpot=dt.prototype.qj,dt.prototype.snapToGridPoint=dt.prototype.XA,dt.prototype.snapToGrid=dt.prototype.WA,dt.prototype.projectOntoLineSegmentPoint=dt.prototype.LA,dt.prototype.projectOntoLineSegment=dt.prototype.KA,dt.intersectingLineSegments=function(t,e,n,i,r,o,s,a){return Xe.Iq(t,e,n,i,r,o,s,a)},dt.prototype.direction=dt.prototype.direction,dt.prototype.directionPoint=dt.prototype.Sa,dt.prototype.normalize=dt.prototype.normalize,dt.prototype.distanceSquared=dt.prototype.md,dt.prototype.distanceSquaredPoint=dt.prototype.Fe,dt.prototype.scale=dt.prototype.scale,dt.prototype.rotate=dt.prototype.rotate,dt.prototype.offset=dt.prototype.offset,dt.prototype.subtract=dt.prototype.ce,dt.prototype.add=dt.prototype.add,dt.prototype.equalsApprox=dt.prototype.Na,dt.prototype.equalTo=dt.prototype.dj,dt.prototype.equals=dt.prototype.w,dt.prototype.set=dt.prototype.set,dt.prototype.setTo=dt.prototype.Ig;var xt,kt,St,_t,Ct,Mt,Pt,Tt,Nt,At,Et,Lt,Ot=[];function Dt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):v("Invalid arguments to Size constructor: "+t+", "+e),this.s=!1}function jt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;""===t[e];)e++;return(i=t[e++])&&(r=parseFloat(i)),new Dt(n,r)}return new Dt}function Ft(t){return t.width.toString()+" "+t.height.toString()}dt.className="Point",dt.parse=pt,dt.stringify=gt,dt.distanceLineSegmentSquared=vt,dt.distanceSquared=bt,dt.direction=wt,dt.Origin=xt=new dt(0,0).ca(),dt.InfiniteTopLeft=kt=new dt(-1/0,-1/0).ca(),dt.InfiniteBottomRight=St=new dt(1/0,1/0).ca(),dt.SixPoint=_t=new dt(6,6).ca(),dt.NoPoint=Ct=new dt(NaN,NaN).ca(),dt.parse=pt,dt.stringify=gt,dt.distanceLineSegmentSquared=vt,dt.distanceSquared=bt,dt.direction=wt,Dt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},Dt.prototype.h=function(t,e){return this.width=t,this.height=e,this},Dt.prototype.Ig=function(t,e){return this.width=t,this.height=e,this},Dt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},Dt.prototype.copy=function(){var t=new Dt;return t.width=this.width,t.height=this.height,t},(e=Dt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},e.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.s=!0,this},e.da=function(){return Object.isFrozen(this)&&v("cannot thaw constant: "+this),this.s=!1,this},e.toString=function(){return"Size("+this.width+","+this.height+")"},e.w=function(t){return t instanceof Dt&&this.width===t.width&&this.height===t.height},e.dj=function(t,e){return this.width===t&&this.height===e},e.Na=function(t){return Xe.A(this.width,t.width)&&Xe.A(this.height,t.height)},e.u=function(){return isFinite(this.width)&&isFinite(this.height)},Dt.alloc=function(){var t=It.pop();return void 0===t?new Dt:t},Dt.free=function(t){It.push(t)},Dt.prototype.isReal=Dt.prototype.u,Dt.prototype.equalsApprox=Dt.prototype.Na,Dt.prototype.equalTo=Dt.prototype.dj,Dt.prototype.equals=Dt.prototype.w,Dt.prototype.set=Dt.prototype.set,Dt.prototype.setTo=Dt.prototype.Ig;var It=[];function Rt(t,e,n,i){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof dt?(n=t.x,t=t.y,e instanceof dt?(i=e.x,e=e.y,this.x=Math.min(n,i),this.y=Math.min(t,e),this.width=Math.abs(n-i),this.height=Math.abs(t-e)):e instanceof Dt?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):v("Incorrect arguments supplied to Rect constructor")):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof i&&(0<=i||isNaN(i))?(this.x=t,this.y=e,this.width=n,this.height=i):v("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this.s=!1}function Bt(t,e,n){t.width=e,t.height=n}function zt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;""===t[e];)e++;(i=t[e++])&&(r=parseFloat(i));for(var o=0;""===t[e];)e++;(i=t[e++])&&(o=parseFloat(i));for(var s=0;""===t[e];)e++;return(i=t[e++])&&(s=parseFloat(i)),new Rt(n,r,o,s)}return new Rt}function Vt(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Ut(t,e){return Xe.$(t.x,e.x)&&Xe.$(t.y,e.y)&&Xe.$(t.width,e.width)&&Xe.$(t.height,e.height)}function qt(t,e,n,i,r){var o=t.width;return n+r<=-o?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=n+r),e+i<=-(n=t.height)?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+i),t}function Ht(t,e,n,i,r){var o=Math.max(t.x,e),s=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+i),n=Math.min(t.y+t.height,n+r),t.x=o,t.y=s,t.width=Math.max(0,e-o),t.height=Math.max(0,n-s),t}function Gt(t,e){var n=t.width,i=t.x,r=e.x-10;return!(i>e.width+10+10+r||r>n+i||(n=t.height,(t=t.y)>e.height+10+10+(i=e.y-10)||i>n+t))}function Yt(t,e,n,i,r){var o=Math.min(t.x,e),s=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+i),n=Math.max(t.y+t.height,n+r),t.x=o,t.y=s,t.width=e-o,t.height=n-s,t}function Xt(t,e,n,i,r,o,s,a){return void 0===s&&(s=0),void 0===a&&(a=0),t<=r&&r+s<=t+n&&e<=o&&o+a<=e+i}function Kt(t,e,n,i,r,o,s,a){return!(t>s+r||r>n+t||e>a+o||o>i+e)}Dt.className="Size",Dt.parse=jt,Dt.stringify=Ft,Dt.ZeroSize=Mt=new Dt(0,0).ca(),Dt.OneSize=Pt=new Dt(1,1).ca(),Dt.SixSize=Tt=new Dt(6,6).ca(),Dt.EightSize=Nt=new Dt(8,8).ca(),Dt.TenSize=At=new Dt(10,10).ca(),Dt.InfiniteSize=Et=new Dt(1/0,1/0).ca(),Dt.NoSize=Lt=new Dt(NaN,NaN).ca(),Dt.parse=jt,Dt.stringify=Ft,(e=Rt.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.h=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},e.Ig=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},e.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.pd=function(t){return this.x=t.x,this.y=t.y,this},e.VA=function(t){return this.width=t.width,this.height=t.height,this},Rt.prototype.copy=function(){var t=new Rt;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(e=Rt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},e.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.s=!0,this},e.da=function(){return Object.isFrozen(this)&&v("cannot thaw constant: "+this),this.s=!1,this},e.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},e.w=function(t){return t instanceof Rt&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},e.dj=function(t,e,n,i){return this.x===t&&this.y===e&&this.width===n&&this.height===i},e.Na=function(t){return Xe.A(this.x,t.x)&&Xe.A(this.y,t.y)&&Xe.A(this.width,t.width)&&Xe.A(this.height,t.height)},e.aa=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},e.De=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},e.contains=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+i<=this.y+this.height},e.offset=function(t,e){return this.x+=t,this.y+=e,this},e.Hc=function(t,e){return qt(this,e,t,e,t)},e.oq=function(t){return qt(this,t.top,t.right,t.bottom,t.left)},e.Fw=function(t){return qt(this,-t.top,-t.right,-t.bottom,-t.left)},e.nA=function(t,e,n,i){return qt(this,t,e,n,i)},e.sA=function(t){return Ht(this,t.x,t.y,t.width,t.height)},e.Xv=function(t,e,n,i){return Ht(this,t,e,n,i)},e.Kc=function(t){return this.Yv(t.x,t.y,t.width,t.height)},e.Yv=function(t,e,n,i){var r=this.width,o=this.x;return!(1/0!==r&&1/0!==n&&(r+=o,n+=t,isNaN(n)||isNaN(r)||o>n||t>r)||(n=this.y,1/0!==(t=this.height)&&1/0!==i&&(t+=n,i+=e,isNaN(i)||isNaN(t)||n>i||e>t)))},e.Me=function(t){return Yt(this,t.x,t.y,0,0)},e.Pc=function(t){return Yt(this,t.x,t.y,t.width,t.height)},e.Nw=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),Yt(this,t,e,n,i)},e.Jk=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this},e.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.uA=function(){return 0===this.width&&0===this.height},Rt.alloc=function(){var t=Zt.pop();return void 0===t?new Rt:t},Rt.allocAt=function(t,e,n,i){var r=Zt.pop();return void 0===r?new Rt(t,e,n,i):r.h(t,e,n,i)},Rt.free=function(t){Zt.push(t)},c.Object.defineProperties(Rt.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new dt(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new Dt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new dt(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),Rt.prototype.isEmpty=Rt.prototype.uA,Rt.prototype.isReal=Rt.prototype.u,Rt.intersectsLineSegment=function(t,e,n,i,r,o,s,a){return Xe.Ay(t,e,n,i,r,o,s,a)},Rt.prototype.setSpot=Rt.prototype.Jk,Rt.prototype.union=Rt.prototype.Nw,Rt.prototype.unionRect=Rt.prototype.Pc,Rt.prototype.unionPoint=Rt.prototype.Me,Rt.prototype.intersects=Rt.prototype.Yv,Rt.prototype.intersectsRect=Rt.prototype.Kc,Rt.prototype.intersect=Rt.prototype.Xv,Rt.prototype.intersectRect=Rt.prototype.sA,Rt.prototype.grow=Rt.prototype.nA,Rt.prototype.subtractMargin=Rt.prototype.Fw,Rt.prototype.addMargin=Rt.prototype.oq,Rt.prototype.inflate=Rt.prototype.Hc,Rt.prototype.offset=Rt.prototype.offset,Rt.prototype.contains=Rt.prototype.contains,Rt.prototype.containsRect=Rt.prototype.De,Rt.prototype.containsPoint=Rt.prototype.aa,Rt.prototype.equalsApprox=Rt.prototype.Na,Rt.prototype.equalTo=Rt.prototype.dj,Rt.prototype.equals=Rt.prototype.w,Rt.prototype.setSize=Rt.prototype.VA,Rt.prototype.setPoint=Rt.prototype.pd,Rt.prototype.set=Rt.prototype.set,Rt.prototype.setTo=Rt.prototype.Ig;var Wt,$t,Zt=[];function Jt(t,e,n,i){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==i?(this.top=t,this.right=e,this.bottom=n,this.left=i):v("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this.s=!1}function Qt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new Jt;for(var r=NaN;""===t[e];)e++;if((i=t[e++])&&(r=parseFloat(i)),isNaN(r))return new Jt(n);for(var o=NaN;""===t[e];)e++;if((i=t[e++])&&(o=parseFloat(i)),isNaN(o))return new Jt(n,r);for(var s=NaN;""===t[e];)e++;return(i=t[e++])&&(s=parseFloat(i)),isNaN(s)?new Jt(n,r):new Jt(n,r,o,s)}return new Jt}function te(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}Rt.className="Rect",Rt.parse=zt,Rt.stringify=Vt,Rt.contains=Xt,Rt.intersects=Kt,Rt.ZeroRect=Wt=new Rt(0,0,0,0).ca(),Rt.NoRect=$t=new Rt(NaN,NaN,NaN,NaN).ca(),Rt.parse=zt,Rt.stringify=Vt,Rt.contains=Xt,Rt.intersects=Kt,Jt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Jt.prototype.Ig=function(t,e,n,i){return this.top=t,this.right=e,this.bottom=n,this.left=i,this},Jt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Jt.prototype.copy=function(){var t=new Jt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(e=Jt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},e.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.s=!0,this},e.da=function(){return Object.isFrozen(this)&&v("cannot thaw constant: "+this),this.s=!1,this},e.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},e.w=function(t){return t instanceof Jt&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},e.dj=function(t,e,n,i){return this.top===t&&this.right===e&&this.bottom===n&&this.left===i},e.Na=function(t){return Xe.A(this.top,t.top)&&Xe.A(this.right,t.right)&&Xe.A(this.bottom,t.bottom)&&Xe.A(this.left,t.left)},e.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Jt.alloc=function(){var t=Be.pop();return void 0===t?new Jt:t},Jt.free=function(t){Be.push(t)},Jt.prototype.isReal=Jt.prototype.u,Jt.prototype.equalsApprox=Jt.prototype.Na,Jt.prototype.equalTo=Jt.prototype.dj,Jt.prototype.equals=Jt.prototype.w,Jt.prototype.set=Jt.prototype.set,Jt.prototype.setTo=Jt.prototype.Ig;var ee,ne,ie,re,oe,se,ae,le,he,ue,ce,fe,de,pe,ge,me,ye,ve,be,we,xe,ke,Se,_e,Ce,Me,Pe,Te,Ne,Ae,Ee,Le,Oe,De,je,Fe,Ie,Re,Be=[];function ze(t,e,n,i){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this.s=!1}function Ve(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Ue(t){if("string"==typeof t){if("None"===(t=t.trim()))return ie;if("TopLeft"===t)return re;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return oe;if("TopRight"===t)return se;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return ae;if("Center"===t)return le;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return he;if("BottomLeft"===t)return ue;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return ce;if("BottomRight"===t)return fe;if("TopSide"===t)return de;if("LeftSide"===t)return pe;if("RightSide"===t)return ge;if("BottomSide"===t)return me;if("TopBottomSides"===t)return ye;if("LeftRightSides"===t)return ve;if("TopLeftSides"===t)return be;if("TopRightSides"===t)return we;if("BottomLeftSides"===t)return xe;if("BottomRightSides"===t)return ke;if("NotTopSide"===t)return Se;if("NotLeftSide"===t)return _e;if("NotRightSide"===t)return Ce;if("NotBottomSide"===t)return Me;if("AllSides"===t)return Pe;if("Default"===t)return Te;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];void 0!==i&&0<i.length&&(n=parseFloat(i));for(var r=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(r=parseFloat(i));for(var o=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(o=parseFloat(i));for(var s=0;""===t[e];)e++;return void 0!==(i=t[e++])&&0<i.length&&(s=parseFloat(i)),new ze(n,r,o,s)}return new ze}function qe(t){return t.jb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Jt.className="Margin",Jt.parse=Qt,Jt.stringify=te,Jt.ZeroMargin=ee=new Jt(0,0,0,0).ca(),Jt.TwoMargin=ne=new Jt(2,2,2,2).ca(),Jt.parse=Qt,Jt.stringify=te,ze.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ze.prototype.Ig=function(t,e,n,i){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=i,this},ze.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ze.prototype.copy=function(){var t=new ze;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(e=ze.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},e.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.s=!0,this},e.da=function(){return Object.isFrozen(this)&&v("cannot thaw constant: "+this),this.s=!1,this},e.toString=function(){return this.jb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.w(ie)?"None":this.w(re)?"TopLeft":this.w(oe)?"Top":this.w(se)?"TopRight":this.w(ae)?"Left":this.w(le)?"Center":this.w(he)?"Right":this.w(ue)?"BottomLeft":this.w(ce)?"Bottom":this.w(fe)?"BottomRight":this.w(de)?"TopSide":this.w(pe)?"LeftSide":this.w(ge)?"RightSide":this.w(me)?"BottomSide":this.w(ye)?"TopBottomSides":this.w(ve)?"LeftRightSides":this.w(be)?"TopLeftSides":this.w(we)?"TopRightSides":this.w(xe)?"BottomLeftSides":this.w(ke)?"BottomRightSides":this.w(Se)?"NotTopSide":this.w(_e)?"NotLeftSide":this.w(Ce)?"NotRightSide":this.w(Me)?"NotBottomSide":this.w(Pe)?"AllSides":this.w(Te)?"Default":"None"},e.w=function(t){return t instanceof ze&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},e.gw=function(){return new ze(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},e.Df=function(t){if(!this.Mc())return!1;if(!t.Mc())if(t.w(Ne))t=pe;else if(t.w(Ae))t=ge;else if(t.w(Ee))t=de;else{if(!t.w(Le))return!1;t=me}return(this.offsetY&(t=t.offsetY))===t},e.jb=function(){return!isNaN(this.x)&&!isNaN(this.y)},e.lc=function(){return isNaN(this.x)||isNaN(this.y)},e.Mc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},e.Rt=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},e.Mb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},ze.alloc=function(){var t=He.pop();return void 0===t?new ze:t},ze.free=function(t){He.push(t)},ze.prototype.isDefault=ze.prototype.Mb,ze.prototype.isNone=ze.prototype.Rt,ze.prototype.isSide=ze.prototype.Mc,ze.prototype.isNoSpot=ze.prototype.lc,ze.prototype.isSpot=ze.prototype.jb,ze.prototype.includesSide=ze.prototype.Df,ze.prototype.opposite=ze.prototype.gw,ze.prototype.equals=ze.prototype.w,ze.prototype.set=ze.prototype.set,ze.prototype.setTo=ze.prototype.Ig;var He=[];function Ge(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}ze.className="Spot",ze.parse=Ue,ze.stringify=qe,ze.None=ie=Ve(new ze(0,0,0,0),0).ca(),ze.Default=Te=Ve(new ze(0,0,-1,0),-1).ca(),ze.TopLeft=re=new ze(0,0,0,0).ca(),ze.TopCenter=oe=new ze(.5,0,0,0).ca(),ze.TopRight=se=new ze(1,0,0,0).ca(),ze.LeftCenter=ae=new ze(0,.5,0,0).ca(),ze.Center=le=new ze(.5,.5,0,0).ca(),ze.RightCenter=he=new ze(1,.5,0,0).ca(),ze.BottomLeft=ue=new ze(0,1,0,0).ca(),ze.BottomCenter=ce=new ze(.5,1,0,0).ca(),ze.BottomRight=fe=new ze(1,1,0,0).ca(),ze.MiddleTop=Oe=oe,ze.MiddleLeft=De=ae,ze.MiddleRight=je=he,ze.MiddleBottom=Fe=ce,ze.Top=Ee=oe,ze.Left=Ne=ae,ze.Right=Ae=he,ze.Bottom=Le=ce,ze.TopSide=de=Ve(new ze(0,0,1,1),1).ca(),ze.LeftSide=pe=Ve(new ze(0,0,1,2),1).ca(),ze.RightSide=ge=Ve(new ze(0,0,1,4),1).ca(),ze.BottomSide=me=Ve(new ze(0,0,1,8),1).ca(),ze.TopBottomSides=ye=Ve(new ze(0,0,1,9),1).ca(),ze.LeftRightSides=ve=Ve(new ze(0,0,1,6),1).ca(),ze.TopLeftSides=be=Ve(new ze(0,0,1,3),1).ca(),ze.TopRightSides=we=Ve(new ze(0,0,1,5),1).ca(),ze.BottomLeftSides=xe=Ve(new ze(0,0,1,10),1).ca(),ze.BottomRightSides=ke=Ve(new ze(0,0,1,12),1).ca(),ze.NotTopSide=Se=Ve(new ze(0,0,1,14),1).ca(),ze.NotLeftSide=_e=Ve(new ze(0,0,1,13),1).ca(),ze.NotRightSide=Ce=Ve(new ze(0,0,1,11),1).ca(),ze.NotBottomSide=Me=Ve(new ze(0,0,1,7),1).ca(),ze.AllSides=Pe=Ve(new ze(0,0,1,15),1).ca(),Ie=new ze(.156,.156).ca(),Re=new ze(.844,.844).ca(),ze.parse=Ue,ze.stringify=qe,Ge.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Ge.prototype.copy=function(){var t=new Ge;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},(e=Ge.prototype).toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},e.w=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},e.Pt=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},e.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},e.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=r,this},e.ew=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,r=-t.m21*e,o=t.m11*e,s=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,this.dx=this.m11*s+this.m21*t+this.dx,this.dy=this.m12*s+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=r,this},e.Ot=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=r,this.dy=o,this},Ge.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,n),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));var r=this.m12*t+this.m22*i,o=this.m11*-i+this.m21*t,s=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=r,this.m21=o,this.m22=s,this.translate(-e,-n),this},(e=Ge.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},e.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},e.sa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},e.Dd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},e.Xx=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,i=1.2*t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},e.Lw=function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,o=this.m11,s=this.m12,a=this.m21,l=this.m22,h=this.dx,u=this.dy,c=e*o+n*a+h,f=e*s+n*l+u,d=i*o+n*a+h,p=i*s+n*l+u;return n=e*o+r*a+h,e=e*s+r*l+u,o=i*o+r*a+h,i=i*s+r*l+u,r=Math.min(c,d),c=Math.max(c,d),d=Math.min(f,p),f=Math.max(f,p),r=Math.min(r,n),c=Math.max(c,n),d=Math.min(d,e),f=Math.max(f,e),r=Math.min(r,o),c=Math.max(c,o),d=Math.min(d,i),f=Math.max(f,i),t.h(r,d,c-r,f-d),t},Ge.alloc=function(){var t=Ye.pop();return void 0===t?new Ge:t},Ge.free=function(t){Ye.push(t)},Ge.prototype.transformRect=Ge.prototype.Lw,Ge.prototype.transformPoint=Ge.prototype.sa,Ge.prototype.scale=Ge.prototype.scale,Ge.prototype.translate=Ge.prototype.translate,Ge.prototype.rotate=Ge.prototype.rotate,Ge.prototype.invert=Ge.prototype.Ot,Ge.prototype.multiplyInverted=Ge.prototype.ew,Ge.prototype.multiply=Ge.prototype.multiply,Ge.prototype.reset=Ge.prototype.reset,Ge.prototype.isIdentity=Ge.prototype.Pt,Ge.prototype.equals=Ge.prototype.w,Ge.prototype.set=Ge.prototype.set;var Ye=[];Ge.className="Transform",Ge.xF="54a702f3e53909c447824c6706603faf4c";var Xe={eB:"7da71ca0ad381e90",Kg:(Math.sqrt(2)-1)/3*4,ex:null,sqrt:function(t){if(0>=t)return 0;var e=Xe.ex;if(null===e){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);Xe.ex=e}return 1>t?2e3>=(n=1/t)?1/e[0|n]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},A:function(t,e){return.5>(t-=e)&&-.5<t},$:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Nb:function(t,e,n,i,r,o,s){if(0>=r&&(r=1e-6),t<n)var a=t,l=n;else a=n,l=t;if(e<i)var h=e,u=i;else h=i,u=e;if(t===n)return h<=s&&s<=u&&t-r<=o&&o<=t+r;if(e===i)return a<=o&&o<=l&&e-r<=s&&s<=e+r;if(l+=r,(a-=r)<=o&&o<=l&&(u+=r,(h-=r)<=s&&s<=u))if(l-a>u-h){if(!(t-n>r||n-t>r))return!0;if((o=(i-e)/(n-t)*(o-t)+e)-r<=s&&s<=o+r)return!0}else{if(!(e-i>r||i-e>r))return!0;if((s=(n-t)/(i-e)*(s-e)+t)-r<=o&&o<=s+r)return!0}return!1},ut:function(t,e,n,i,r,o,s,a,l,h,u,c){if(Xe.Nb(t,e,s,a,c,n,i)&&Xe.Nb(t,e,s,a,c,r,o))return Xe.Nb(t,e,s,a,c,h,u);var f=(t+n)/2,d=(e+i)/2,p=(n+r)/2,g=(i+o)/2,m=((i=(f+p)/2)+(p=(p+(r=(r+s)/2))/2))/2,y=((n=(d+g)/2)+(g=(g+(o=(o+a)/2))/2))/2;return Xe.ut(t,e,f,d,i,n,m,y,l,h,u,c)||Xe.ut(m,y,p,g,r,o,s,a,l,h,u,c)},sz:function(t,e,n,i,r,o,s,a,l){var h=(n+r)/2,u=(i+o)/2;return l.h((((t+n)/2+h)/2+(h+(r+s)/2)/2)/2,(((e+i)/2+u)/2+(u+(o+a)/2)/2)/2),l},rz:function(t,e,n,i,r,o,s,a){var l=(n+r)/2,h=(i+o)/2;return wt(((t+n)/2+l)/2,((e+i)/2+h)/2,(l+(r+s)/2)/2,(h+(o+a)/2)/2)},lm:function(t,e,n,i,r,o,s,a,l,h){if(Xe.Nb(t,e,s,a,l,n,i)&&Xe.Nb(t,e,s,a,l,r,o))Yt(h,t,e,0,0),Yt(h,s,a,0,0);else{var u=(t+n)/2,c=(e+i)/2,f=(n+r)/2,d=(i+o)/2,p=((i=(u+f)/2)+(f=(f+(r=(r+s)/2))/2))/2,g=((n=(c+d)/2)+(d=(d+(o=(o+a)/2))/2))/2;Xe.lm(t,e,u,c,i,n,p,g,l,h),Xe.lm(p,g,f,d,r,o,s,a,l,h)}return h},Ce:function(t,e,n,i,r,o,s,a,l,h){if(Xe.Nb(t,e,s,a,l,n,i)&&Xe.Nb(t,e,s,a,l,r,o))0===h.length&&(h.push(t),h.push(e)),h.push(s),h.push(a);else{var u=(t+n)/2,c=(e+i)/2,f=(n+r)/2,d=(i+o)/2,p=((i=(u+f)/2)+(f=(f+(r=(r+s)/2))/2))/2,g=((n=(c+d)/2)+(d=(d+(o=(o+a)/2))/2))/2;Xe.Ce(t,e,u,c,i,n,p,g,l,h),Xe.Ce(p,g,f,d,r,o,s,a,l,h)}return h},kw:function(t,e,n,i,r,o,s,a,l,h){if(Xe.Nb(t,e,r,o,h,n,i))return Xe.Nb(t,e,r,o,h,a,l);var u=(t+n)/2,c=(e+i)/2,f=(u+(n=(n+r)/2))/2,d=(c+(i=(i+o)/2))/2;return Xe.kw(t,e,u,c,f,d,s,a,l,h)||Xe.kw(f,d,n,i,r,o,s,a,l,h)},tB:function(t,e,n,i,r,o,s){return s.h(((t+n)/2+(n+r)/2)/2,((e+i)/2+(i+o)/2)/2),s},jw:function(t,e,n,i,r,o,s,a){if(Xe.Nb(t,e,r,o,s,n,i))Yt(a,t,e,0,0),Yt(a,r,o,0,0);else{var l=(t+n)/2,h=(e+i)/2,u=(l+(n=(n+r)/2))/2,c=(h+(i=(i+o)/2))/2;Xe.jw(t,e,l,h,u,c,s,a),Xe.jw(u,c,n,i,r,o,s,a)}return a},Sq:function(t,e,n,i,r,o,s,a){if(Xe.Nb(t,e,r,o,s,n,i))0===a.length&&(a.push(t),a.push(e)),a.push(r),a.push(o);else{var l=(t+n)/2,h=(e+i)/2,u=(l+(n=(n+r)/2))/2,c=(h+(i=(i+o)/2))/2;Xe.Sq(t,e,l,h,u,c,s,a),Xe.Sq(u,c,n,i,r,o,s,a)}return a},qq:function(t,e,n,i,r,o,s,a,l,h,u,c,f,d){if(Xe.Nb(t,e,s,a,f,n,i)&&Xe.Nb(t,e,s,a,f,r,o)){if(t<l&&s<l&&t<u&&s<u||t>l&&s>l&&t>u&&s>u||e<h&&a<h&&e<c&&a<c||e>h&&a>h&&e>c&&a>c)return!1;var p=(t-s)*(h-c)-(e-a)*(l-u);if(0===p)return!1;if(f=((t*a-e*s)*(l-u)-(t-s)*(l*c-h*u))/p,p=((t*a-e*s)*(h-c)-(e-a)*(l*c-h*u))/p,(l>u?l-u:u-l)<(h>c?h-c:c-h)){if(e<a?s=e:(s=a,a=e),1e-5+p<s||p>a+1e-5)return!1}else if(t<s?a=t:(a=s,s=t),1e-5+f<a||f>s+1e-5)return!1;return d.h(f,p),!0}var g=(e+i)/2,m=(n+r)/2,y=(i+o)/2,v=((i=((p=(t+n)/2)+m)/2)+(m=(m+(r=(r+s)/2))/2))/2,b=((n=(g+y)/2)+(y=(y+(o=(o+a)/2))/2))/2,w=(u-l)*(u-l)+(c-h)*(c-h),x=!1,k=0,S=0;return Xe.qq(t,e,p,g,i,n,v,b,l,h,u,c,f,d)&&(t=(d.x-l)*(d.x-l)+(d.y-h)*(d.y-h))<w&&(w=t,x=!0,k=d.x,S=d.y),Xe.qq(v,b,m,y,r,o,s,a,l,h,u,c,f,d)&&(d.x-l)*(d.x-l)+(d.y-h)*(d.y-h)<w&&(x=!0,k=d.x,S=d.y),x&&(d.x=k,d.y=S),x},rq:function(t,e,n,i,r,o,s,a,l,h,u,c,f){var d=0;if(Xe.Nb(t,e,s,a,f,n,i)&&Xe.Nb(t,e,s,a,f,r,o)){if(0==(f=(t-s)*(h-c)-(e-a)*(l-u)))return d;var p=((t*a-e*s)*(l-u)-(t-s)*(l*c-h*u))/f,g=((t*a-e*s)*(h-c)-(e-a)*(l*c-h*u))/f;if(p>=u)return d;if((l>u?l-u:u-l)<(h>c?h-c:c-h)){if(e<a?(t=e,e=a):t=a,g<t||g>e)return d}else if(t<s?(e=t,t=s):e=s,p<e||p>t)return d;0<f?d++:0>f&&d--}else{g=(e+i)/2;var m=(n+r)/2,y=(i+o)/2,v=((i=((p=(t+n)/2)+m)/2)+(m=(m+(r=(r+s)/2))/2))/2,b=((n=(g+y)/2)+(y=(y+(o=(o+a)/2))/2))/2;d+=Xe.rq(t,e,p,g,i,n,v,b,l,h,u,c,f),d+=Xe.rq(v,b,m,y,r,o,s,a,l,h,u,c,f)}return d},Oh:function(t,e,n,i,r,o,s){return Xe.$(t,n)?(e<i?(n=e,e=i):n=i,o<n?(s.h(t,n),!1):o>e?(s.h(t,e),!1):(s.h(t,o),!0)):Xe.$(e,i)?(t<n?(i=t,t=n):i=n,r<i?(s.h(i,e),!1):r>t?(s.h(t,e),!1):(s.h(r,e),!0)):-5e-6>(r=((t-r)*(t-n)+(e-o)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)))?(s.h(t,e),!1):1.000005<r?(s.h(n,i),!1):(s.h(t+r*(n-t),e+r*(i-e)),!0)},Ie:function(t,e,n,i,r,o,s,a,l){return Xe.A(t,n)&&Xe.A(e,i)?(l.h(t,e),!1):Xe.$(r,s)?Xe.$(t,n)?(Xe.Oh(t,e,n,i,r,o,l),!1):Xe.Oh(t,e,n,i,r,(i-e)/(n-t)*(r-t)+e,l):(a=(a-o)/(s-r),Xe.$(t,n)?(n=a*(t-r)+o,e<i?(r=e,e=i):r=i,n<r?(l.h(t,r),!1):n>e?(l.h(t,e),!1):(l.h(t,n),!0)):Xe.$(a,s=(i-e)/(n-t))?(Xe.Oh(t,e,n,i,r,o,l),!1):(r=(s*t-a*r+o-e)/(s-a),Xe.$(s,0)?(t<n?(i=t,t=n):i=n,r<i?(l.h(i,e),!1):r>t?(l.h(t,e),!1):(l.h(r,e),!0)):Xe.Oh(t,e,n,i,r,s*(r-t)+e,l)))},rB:function(t,e,n,i,r){return Xe.Ie(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,r)},pB:function(t,e,n,i,r,o,s,a,l,h){function u(n,i){var r=(n-t)*(n-t)+(i-e)*(i-e);r<c&&(c=r,l.h(n,i))}var c=1/0;u(l.x,l.y);var f=0,d=0,p=0,g=0;if(r<s?(f=r,d=s):(f=s,d=r),o<a?(p=r,g=s):(p=s,g=r),f=(d-f)/2+h,h=(g-p)/2+h,r=(r+s)/2,o=(o+a)/2,0===f||0===h)return l;if(.5>(n>t?n-t:t-n)){if(0>(f=1-(n-r)*(n-r)/(f*f)))return l;i=-h*(f=Math.sqrt(f))+o,u(n,h*f+o),u(n,i)}else{if(0>(f=(a=2*(n=(i-e)/(n-t))*(e-n*t)/(h*h)-2*n*o/(h*h)-2*r/(f*f))*a-4*(i=1/(f*f)+n*n/(h*h))*(2*n*t*o/(h*h)-2*e*o/(h*h)+o*o/(h*h)+r*r/(f*f)-1+(e-n*t)*(e-n*t)/(h*h))))return l;u(h=(-a+(f=Math.sqrt(f)))/(2*i),n*h-n*t+e),u(f=(-a-f)/(2*i),n*f-n*t+e)}return l},cd:function(t,e,n,i,r,o,s,a,l){var h=1e21,u=t,c=e;if(Xe.Ie(t,e,t,i,r,o,s,a,l)){var f=(l.x-r)*(l.x-r)+(l.y-o)*(l.y-o);f<h&&(h=f,u=l.x,c=l.y)}return Xe.Ie(n,e,n,i,r,o,s,a,l)&&(f=(l.x-r)*(l.x-r)+(l.y-o)*(l.y-o))<h&&(h=f,u=l.x,c=l.y),Xe.Ie(t,e,n,e,r,o,s,a,l)&&(e=(l.x-r)*(l.x-r)+(l.y-o)*(l.y-o))<h&&(h=e,u=l.x,c=l.y),Xe.Ie(t,i,n,i,r,o,s,a,l)&&(t=(l.x-r)*(l.x-r)+(l.y-o)*(l.y-o))<h&&(h=t,u=l.x,c=l.y),l.h(u,c),1e21>h},oB:function(t,e,n,i,r,o,s,a,l){return s=r-s,r=0==(n=t-n)||0===s?0===n?(e=(o-a)/s)*(a=t)+(o-e*r):(o=(e-i)/n)*(a=r)+(e-o*t):(i=(e-i)/n)*(a=(o-(a=(o-a)/s)*r-(t=e-i*t))/(i-a))+t,l.h(a,r),l},Mt:function(t,e,n){return Xe.Ay(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},Ay:function(t,e,n,i,r,o,s,a){var l=t+n,h=e+i;return r===s?(o<a?(s=o,o=a):s=a,t<=r&&r<=l&&s<=h&&o>=e):o===a?(r<s?(a=r,r=s):a=s,e<=o&&o<=h&&a<=l&&r>=t):!!(Xt(t,e,n,i,r,o)||Xt(t,e,n,i,s,a)||Xe.Iq(t,e,l,e,r,o,s,a)||Xe.Iq(l,e,l,h,r,o,s,a)||Xe.Iq(l,h,t,h,r,o,s,a)||Xe.Iq(t,h,t,e,r,o,s,a))},Iq:function(t,e,n,i,r,o,s,a){return 0>=Xe.xt(t,e,n,i,r,o)*Xe.xt(t,e,n,i,s,a)&&0>=Xe.xt(r,o,s,a,t,e)*Xe.xt(r,o,s,a,n,i)},xt:function(t,e,n,i,r,o){return n-=t,0==(o=(t=r-t)*(i-=e)-(e=o-e)*n)&&0<(o=t*n+e*i)&&0>(o=(t-n)*n+(e-i)*i)&&(o=0),0>o?-1:0<o?1:0},Pq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},by:function(t,e,n,i,r,o){var s=Math.PI;o||(i*=s/180,r*=s/180);var a=i>r?-1:1;o=[];var l=s/2,h=i;if(1e-5>(i=Math.min(2*s,Math.abs(r-i))))return l=h+a*Math.min(i,l),a=t+n*Math.cos(h),h=e+n*Math.sin(h),t+=n*Math.cos(l),e+=n*Math.sin(l),o.push([a,h,n=(a+t)/2,l=(h+e)/2,n,l,t,e]),o;for(;1e-5<i;)r=h+a*Math.min(i,l),o.push(Xe.Cz(n,h,r,t,e)),i-=Math.abs(r-h),h=r;return o},Cz:function(t,e,n,i,r){var o=(n-e)/2,s=t*Math.cos(o),a=t*Math.sin(o),l=-a,h=s*s+l*l,u=h+s*s+l*a;return a=s-(h=4/3*(Math.sqrt(2*h*u)-u)/(s*a-l*s))*l,l=-(s=l+h*s),h=o+e,o=Math.cos(h),h=Math.sin(h),[i+t*Math.cos(e),r+t*Math.sin(e),i+a*o-s*h,r+a*h+s*o,i+a*o-l*h,r+a*h+l*o,i+t*Math.cos(n),r+t*Math.sin(n)]},Aq:function(t,e,n,i,r,o,s){var a=n=Math.floor((t-n)/r)*r+n;return n+r-t<r/2&&(a=n+r),t=i=Math.floor((e-i)/o)*o+i,i+o-e<o/2&&(t=i+o),s.h(a,t),s},qy:function(t,e){var n,i=Math.max(t,e);t=Math.min(t,e);do{e=i%t,i=n=t,t=e}while(0<e);return n},Hz:function(t,e,n,i){var r=0>n,o=0>i;if(t<e)var s=1,a=0;else s=0,a=1;var l=0===s?t:e,h=0===s?n:i;return(0===s?r:o)&&(h=-h),n=0===(s=a)?n:i,(0===s?r:o)&&(n=-n),Xe.Iz(l,0===s?t:e,h,n,0,0)},Iz:function(t,e,n,i,r,o){if(0<i)if(0<n){r=t*t,t*=n;var s=e*i,a=-(o=e*e)+s,l=-o+Math.sqrt(t*t+s*s);e=a;for(var h=0;9999999999>h&&(e=.5*(a+l))!==a&&e!==l;++h){var u=t/(e+r),c=s/(e+o);if(0<(u=u*u+c*c-1))a=e;else{if(!(0>u))break;l=e}}n=r*n/(e+r)-n,i=o*i/(e+o)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else(o=t*n)<(i=t*t-e*e)?(i=o/i,o=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,n=Math.sqrt(n*n+o*o)):n=Math.abs(n-t);return n},Oe:new X,Ym:new X,Sh:new X,Th:0};function Ke(t){it(this),this.s=!1,void 0===t&&(t=hn),this.pa=t,this.mc=this.fc=this.ad=this.$c=0,this.Ej=new tt,this.Vr=this.Ej.Aa,this.Dr=(new Rt).freeze(),this.qa=!0,this.en=this.Sk=null,this.fn=NaN,this.nf=re,this.pf=fe,this.ul=this.vl=NaN,this.Rf=_s}function We(t,e){return t.type===sn&&e.type===hn&&!!(1===e.figures.count&&(e=e.figures.J(0),1===e.segments.count&&Xe.A(t.startX,e.startX)&&Xe.A(t.startY,e.startY)&&(e=e.segments.J(0),e.type===mn&&Xe.A(t.endX,e.endX)&&Xe.A(t.endY,e.endY))))}function $e(t){return t.toString()}function Ze(t,e){function n(){return g>=w-1||null!==c[g+1].match(x)}function i(){return g++,c[g]}function r(){var t=new dt(parseFloat(i()),parseFloat(i()));return m===m.toLowerCase()&&(t.x=b.x+t.x,t.y=b.y+t.y),t}function o(){return b=r()}function s(){return v=r()}function a(){var t=y.toLowerCase();return"c"!==t&&"s"!==t&&"q"!==t&&"t"!==t?b:new dt(2*b.x-v.x,2*b.y-v.y)}void 0===e&&(e=!1);var l=new RegExp("(["+un+"])(["+un+"])","gm"),h=new RegExp("(["+un+"])([^s])","gm"),u=new RegExp("([^s])(["+un+"])","gm"),c=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(l,"$1 $2")).replace(l,"$1 $2")).replace(h,"$1 $2")).replace(u,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<c.length;t++)if(null!==(h=c[t]).match(/(\.[0-9]*)(\.)/gm)){l=T(),u="";for(var f=!1,d=0;d<h.length;d++){var p=h[d];"."!==p||f?"."===p?(l.push(u),u="."):u+=p:(f=!0,u+=p)}for(l.push(u),c.splice(t,1),h=0;h<l.length;h++)c.splice(t+h,0,l[h]);t+=l.length-1,N(l)}var g=-1,m="",y="";l=new dt(0,0);var v=new dt(0,0),b=new dt(0,0),w=c.length;t=nu(null),u=h=!1,f=!0,d=null;for(var x=new RegExp("["+un+"]");!(g>=w-1);)if(y=m,""!==(m=i()))switch(m.toUpperCase()){case"X":f=!0,u=h=!1;break;case"M":for(d=o(),null===t.gc||!0===f?(Zh(t,d.x,d.y,h,!u),f=!1):t.moveTo(d.x,d.y),l=b;!n();)d=o(),t.lineTo(d.x,d.y);break;case"L":for(;!n();)d=o(),t.lineTo(d.x,d.y);break;case"H":for(;!n();)b=new dt((m===m.toLowerCase()?b.x:0)+parseFloat(i()),b.y),t.lineTo(b.x,b.y);break;case"V":for(;!n();)b=new dt(b.x,(m===m.toLowerCase()?b.y:0)+parseFloat(i())),t.lineTo(b.x,b.y);break;case"C":for(;!n();){d=r(),p=s();var k=o();Qh(t,d.x,d.y,p.x,p.y,k.x,k.y)}break;case"S":for(;!n();)d=a(),p=s(),k=o(),Qh(t,d.x,d.y,p.x,p.y,k.x,k.y);break;case"Q":for(;!n();)d=s(),p=o(),tu(t,d.x,d.y,p.x,p.y);break;case"T":for(;!n();)v=d=a(),p=o(),tu(t,d.x,d.y,p.x,p.y);break;case"B":for(;!n();){d=parseFloat(i()),p=parseFloat(i()),k=parseFloat(i());var S=parseFloat(i()),_=parseFloat(i()),C=_,M=!1;n()||(C=parseFloat(i()),n()||(M=0!==parseFloat(i()))),m===m.toLowerCase()&&(k+=b.x,S+=b.y),t.arcTo(d,p,k,S,_,C,M)}break;case"A":for(;!n();)d=Math.abs(parseFloat(i())),p=Math.abs(parseFloat(i())),k=parseFloat(i()),_=S=!1,M=C=0,1===(C=i()).length?(S=!!parseFloat(C),_=!!parseFloat(i()),C=parseFloat(i())):2===C.length?(S=!!parseFloat(C[0]),_=!!parseFloat(C[1]),C=parseFloat(i())):(S=!!parseFloat(C[0]),_=!!parseFloat(C[1]),C=parseFloat(C.slice(2))),M=parseFloat(i()),m===m.toLowerCase()&&(C=b.x+C,M=b.y+M),b.h(C,M),eu(t,d,p,k,S,_,C,M);break;case"Z":Jh(t),b=l;break;case"F":for(d="",p=1;c[g+p];)if(null!==c[g+p].match(/[Uu]/))p++;else{if(null!==c[g+p].match(x)){d=c[g+p];break}p++}d.match(/[Mm]/)?h=!0:0<t.gc.segments.length&&(t.gc.isFilled=!0);break;case"U":for(d="",p=1;c[g+p];)if(null!==c[g+p].match(/[Ff]/))p++;else{if(null!==c[g+p].match(x)){d=c[g+p];break}p++}d.match(/[Mm]/)?u=!0:t.cr(!1)}if(l=t.Ht,iu=t,e)for(e=l.figures.iterator;e.next();)e.value.isFilled=!0;return l}function Je(t,e){for(var n=t.length,i=dt.alloc(),r=0;r<n;r++){var o=t[r];i.x=o[0],i.y=o[1],e.sa(i),o[0]=i.x,o[1]=i.y,i.x=o[2],i.y=o[3],e.sa(i),o[2]=i.x,o[3]=i.y,i.x=o[4],i.y=o[5],e.sa(i),o[4]=i.x,o[5]=i.y,i.x=o[6],i.y=o[7],e.sa(i),o[6]=i.x,o[7]=i.y}dt.free(i)}function Qe(t,e,n){switch(t.type){case sn:case an:case ln:n?e.h(t.$c,t.ad,0,0):Yt(e,t.$c,t.ad,0,0),Yt(e,t.fc,t.mc,0,0);break;case hn:var i=t.figures;t=i.j,i=i.length;for(var r=0;r<i;r++){var o=t[r];n&&0===r?e.h(o.startX,o.startY,0,0):Yt(e,o.startX,o.startY,0,0);for(var s=o.segments.j,a=s.length,l=o.startX,h=o.startY,u=0;u<a;u++){var c=s[u];switch(c.type){case mn:case gn:Yt(e,l=c.endX,h=c.endY,0,0);break;case yn:Xe.lm(l,h,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,e),l=c.endX,h=c.endY;break;case vn:Xe.jw(l,h,c.point1X,c.point1Y,c.endX,c.endY,.5,e),l=c.endX,h=c.endY;break;case bn:case wn:var f=c.type===bn?dn(c,o):pn(c,o,l,h),d=f.length;if(0===d){Yt(e,l=c.centerX,h=c.centerY,0,0);break}c=null;for(var p=0;p<d;p++)Xe.lm((c=f[p])[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.5,e);null!==c&&(l=c[6],h=c[7]);break;default:v("Unknown Segment type: "+c.type)}}}break;default:v("Unknown Geometry type: "+t.type)}}function tn(t,e,n,i,r){var o=e.x;e=e.y;for(var s,a,l,h,u=t.bounds.x-20,c=0,f=t.figures.j,d=f.length,p=0;p<d;p++){var g=f[p];if(g.isFilled){if(i&&g.aa(o,e,n))return!0;for(var m=g.segments,y=s=g.startX,b=a=g.startY,w=m.j,x=0;x<=m.length;x++){var k=void 0;if(x!==m.length){var S=(k=w[x]).type;t=k.endX,h=k.endY}else S=mn,t=y,h=b;switch(S){case gn:if(y=en(o,e,u,e,s,a,y,b),isNaN(y))return!0;c+=y,y=t,b=h;break;case mn:if(s=en(o,e,u,e,s,a,t,h),isNaN(s))return!0;c+=s;break;case yn:c+=l=Xe.rq(s,a,k.point1X,k.point1Y,k.point2X,k.point2Y,t,h,u,e,o,e,.5);break;case vn:c+=l=Xe.rq(s,a,(s+2*k.point1X)/3,(a+2*k.point1Y)/3,(2*k.point1X+t)/3,(2*k.point1Y+h)/3,t,h,u,e,o,e,.5);break;case bn:case wn:var _=(S=k.type===bn?dn(k,g):pn(k,g,s,a)).length;if(0===_){if(s=en(o,e,u,e,s,a,k.centerX,k.centerY),isNaN(s))return!0;c+=s;break}k=null;for(var C=0;C<_;C++){if(k=S[C],0===C){if(l=en(o,e,u,e,s,a,k[0],k[1]),isNaN(l))return!0;c+=l}c+=l=Xe.rq(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],u,e,o,e,.5)}null!==k&&(t=k[6],h=k[7]);break;default:v("Unknown Segment type: "+k.type)}s=t,a=h}if(0!==c)return!0;c=0}else if(g.aa(o,e,r?n:n+2))return!0}return 0!==c}function en(t,e,n,i,r,o,s,a){if(Xe.Nb(r,o,s,a,.05,t,e))return NaN;var l=(t-n)*(o-a);if(0===l)return 0;var h=((t*i-e*n)*(r-s)-(t-n)*(r*a-o*s))/l;if(e=(t*i-e*n)*(o-a)/l,h>=t)return 0;if((r>s?r-s:s-r)<(o>a?o-a:a-o)){if(o<a){if(e<o||e>a)return 0}else if(e<a||e>o)return 0}else if(r<s){if(h<r||h>s)return 0}else if(h<s||h>r)return 0;return 0<l?1:-1}function nn(t,e,n,i){for(var r=(t=t.figures.j).length,o=0;o<r;o++)if(t[o].aa(e,n,i))return!0;return!1}function rn(t){if(null===t.Sk){var e=t.Sk=[],n=t.en=[],i=[],r=[];if(t.type===sn)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(r);else if(t.type===an)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),n.push(r);else if(t.type===ln){var o=new cn;o.startX=t.endX,o.startY=(t.startY+t.endY)/2;var s=new fn(bn);if(s.startAngle=0,s.sweepAngle=360,s.centerX=(t.startX+t.endX)/2,s.centerY=(t.startY+t.endY)/2,s.radiusX=Math.abs(t.startX-t.endX)/2,s.radiusY=Math.abs(t.startY-t.endY)/2,o.add(s),0===(r=(t=dn(s,o)).length))i.push(s.centerX),i.push(s.centerY);else{s=o.startX,o=o.startY;for(var a=0;a<r;a++){var l=t[a];Xe.Ce(s,o,l[2],l[3],l[4],l[5],l[6],l[7],.5,i),s=l[6],o=l[7]}}e.push(i),n.push(on(i))}else for(t=t.figures.iterator;t.next();){(i=[]).push((r=t.value).startX),i.push(r.startY),a=s=r.startX,l=o=r.startY;for(var h=r.segments.j,u=h.length,c=0;c<u;c++){var f=h[c];switch(f.type){case gn:4<=i.length&&(e.push(i),n.push(on(i))),(i=[]).push(f.endX),i.push(f.endY),a=s=f.endX,l=o=f.endY;break;case mn:i.push(f.endX),i.push(f.endY),s=f.endX,o=f.endY;break;case yn:Xe.Ce(s,o,f.point1X,f.point1Y,f.point2X,f.point2Y,f.endX,f.endY,.5,i),s=f.endX,o=f.endY;break;case vn:Xe.Sq(s,o,f.point1X,f.point1Y,f.endX,f.endY,.5,i),s=f.endX,o=f.endY;break;case bn:var d=dn(f,r),p=d.length;if(0===p){i.push(f.centerX),i.push(f.centerY),s=f.centerX,o=f.centerY;break}for(var g=0;g<p;g++){var m=d[g];Xe.Ce(s,o,m[2],m[3],m[4],m[5],m[6],m[7],.5,i),s=m[6],o=m[7]}break;case wn:if(0===(p=(d=pn(f,r,s,o)).length)){i.push(f.centerX),i.push(f.centerY),s=f.centerX,o=f.centerY;break}for(g=0;g<p;g++)Xe.Ce(s,o,(m=d[g])[2],m[3],m[4],m[5],m[6],m[7],.5,i),s=m[6],o=m[7];break;default:v("Segment not of valid type: "+f.type)}f.isClosed&&(i.push(a),i.push(l))}4<=i.length&&(e.push(i),n.push(on(i)))}}}function on(t){for(var e=[],n=0,i=0,r=t.length,o=0;o<r;o+=2){var s=t[o],a=t[o+1];0!==o&&e.push(Math.sqrt(bt(n,i,s,a))),n=s,i=a}return e}Xe.za=Xe.eB,Ke.prototype.copy=function(){var t=new Ke;t.pa=this.pa,t.$c=this.$c,t.ad=this.ad,t.fc=this.fc,t.mc=this.mc;for(var e=this.Ej.j,n=e.length,i=t.Ej,r=0;r<n;r++){var o=e[r].copy();i.add(o)}return t.Vr=this.Vr,t.Dr.assign(this.Dr),t.qa=this.qa,t.Sk=this.Sk,t.en=this.en,t.fn=this.fn,t.nf=this.nf.G(),t.pf=this.pf.G(),t.vl=this.vl,t.ul=this.ul,t.Rf=this.Rf,t},(e=Ke.prototype).ca=function(){return this.freeze(),Object.freeze(this),this},e.freeze=function(){this.s=!0;var t=this.figures;t.freeze();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].freeze();return this},e.da=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this),this.s=!1;var t=this.figures;t.da();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].da();return this},e.Na=function(t){if(!(t instanceof Ke))return!1;if(this.type!==t.type)return this.type===sn&&t.type===hn?We(this,t):t.type===sn&&this.type===hn&&We(t,this);if(this.type===hn){var e=this.figures.j,n=e.length;if(n!==(t=t.figures.j).length)return!1;for(var i=0;i<n;i++)if(!e[i].Na(t[i]))return!1;return!0}return Xe.A(this.startX,t.startX)&&Xe.A(this.startY,t.startY)&&Xe.A(this.endX,t.endX)&&Xe.A(this.endY,t.endY)},e.ib=function(t){t.classType===Ke&&(this.type=t)},e.toString=function(t){switch(void 0===t&&(t=-1),this.type){case sn:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case an:var e=new Rt(this.startX,this.startY,0,0);return e.Nw(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case ln:if((e=new Rt(this.startX,this.startY,0,0)).Nw(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case hn:e="";for(var i=(n=this.figures.j).length,r=0;r<i;r++){var o=n[r];0<r&&(e+=" x "),o.isFilled&&(e+="F "),e+=o.toString(t)}return e;default:return this.type.toString()}},e.bw=function(){if(this.qa||this.Vr!==this.figures.Aa)return!0;for(var t=this.figures.j,e=t.length,n=0;n<e;n++)if(t[n].bw())return!0;return!1},Ke.prototype.computeBounds=function(){this.qa=!1,this.en=this.Sk=null,this.fn=NaN,this.Vr=this.figures.Aa;for(var t=this.figures.j,e=t.length,n=0;n<e;n++){var i=t[n];i.qa=!1;var r=i.segments;i.$s=r.Aa,r=(i=r.j).length;for(var o=0;o<r;o++){var s=i[o];s.qa=!1,s.Qe=null}}(t=this.Dr).da(),isNaN(this.vl)||isNaN(this.ul)?t.h(0,0,0,0):t.h(0,0,this.vl,this.ul),Qe(this,t,!1),Yt(t,0,0,0,0),t.freeze()},Ke.prototype.ay=function(){var t=new Rt;return Qe(this,t,!0),t},Ke.prototype.normalize=function(){this.s&&b(this);var t=this.ay();return this.offset(-t.x,-t.y),new dt(-t.x,-t.y)},Ke.prototype.offset=function(t,e){return this.s&&b(this),this.transform(1,0,0,1,t,e),this},Ke.prototype.scale=function(t,e){return this.s&&b(this),this.transform(t,0,0,e,0,0),this},Ke.prototype.rotate=function(t,e,n){this.s&&b(this),void 0===e&&(e=0),void 0===n&&(n=0);var i=Ge.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),Ge.free(i),this},(e=Ke.prototype).transform=function(t,e,n,i,r,o){switch(this.type){case sn:case an:case ln:var s=this.$c,a=this.ad;this.$c=s*t+a*n+r,this.ad=s*e+a*i+o,this.fc=(s=this.fc)*t+(a=this.mc)*n+r,this.mc=s*e+a*i+o;break;case hn:for(var l=this.figures.j,h=l.length,u=0;u<h;u++){var c=l[u];c.startX=(s=c.startX)*t+(a=c.startY)*n+r,c.startY=s*e+a*i+o;for(var f=(c=c.segments.j).length,d=0;d<f;d++){var p=c[d];switch(p.type){case mn:case gn:p.endX=(s=p.endX)*t+(a=p.endY)*n+r,p.endY=s*e+a*i+o;break;case yn:p.point1X=(s=p.point1X)*t+(a=p.point1Y)*n+r,p.point1Y=s*e+a*i+o,p.point2X=(s=p.point2X)*t+(a=p.point2Y)*n+r,p.point2Y=s*e+a*i+o,p.endX=(s=p.endX)*t+(a=p.endY)*n+r,p.endY=s*e+a*i+o;break;case vn:p.point1X=(s=p.point1X)*t+(a=p.point1Y)*n+r,p.point1Y=s*e+a*i+o,p.endX=(s=p.endX)*t+(a=p.endY)*n+r,p.endY=s*e+a*i+o;break;case bn:p.centerX=(s=p.centerX)*t+(a=p.centerY)*n+r,p.centerY=s*e+a*i+o,0!==e&&(0>(s=180*Math.atan2(e,t)/Math.PI)&&(s+=360),p.startAngle+=s),0>t&&(p.startAngle=180-p.startAngle,p.sweepAngle=-p.sweepAngle),0>i&&(p.startAngle=-p.startAngle,p.sweepAngle=-p.sweepAngle),p.radiusX*=Math.sqrt(t*t+n*n),void 0!==p.radiusY&&(p.radiusY*=Math.sqrt(e*e+i*i));break;case wn:p.endX=(s=p.endX)*t+(a=p.endY)*n+r,p.endY=s*e+a*i+o,0!==e&&(0>(s=180*Math.atan2(e,t)/Math.PI)&&(s+=360),p.xAxisRotation+=s),0>t&&(p.xAxisRotation=180-p.xAxisRotation,p.isClockwiseArc=!p.isClockwiseArc),0>i&&(p.xAxisRotation=-p.xAxisRotation,p.isClockwiseArc=!p.isClockwiseArc),p.radiusX*=Math.sqrt(t*t+n*n),p.radiusY*=Math.sqrt(e*e+i*i);break;default:v("Unknown Segment type: "+p.type)}}}}return this.qa=!0,this},e.aa=function(t,e){void 0===e&&(e=0);var n=this.$c,i=this.ad,r=this.fc,o=this.mc;switch(this.type){case sn:return Xe.Nb(n,i,r,o,e,t.x,t.y);case an:var s=Rt.allocAt(Math.min(n,r)-e,Math.min(i,o)-e,Math.abs(r-n)+2*e,Math.abs(o-i)+2*e);return t=s.aa(t),Rt.free(s),t;case ln:s=Math.min(n,r)-e;var a=Math.min(i,o)-e;return n=(Math.abs(r-n)+2*e)/2,e=(Math.abs(o-i)+2*e)/2,!(0>=n||0>=e)&&1>=(s=t.x-(s+n))*s/(n*n)+(a=t.y-(a+e))*a/(e*e);case hn:return tn(this,t,e,!0,!1);default:return!1}},e.Sv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new dt),this.type===sn)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,r=n.length,o=this.flattenedTotalLength*t,s=0,a=0;a<r;a++){var l=i[a],h=l.length;for(t=0;t<h;t++){var u=l[t];if(s+u>=o)return i=o-s,e.h((a=(n=n[a])[2*t])+(n[2*t+2]-a)*(i=0===u?0:i/u),(r=n[2*t+1])+(n[2*t+3]-r)*i),e;s+=u}}return e},e.sy=function(t){if(0>t?t=0:1<t&&(t=1),this.type===sn)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,i=e.length,r=this.flattenedTotalLength*t,o=0,s=0;s<i;s++){var a=n[s],l=a.length;for(t=0;t<l;t++){var h=a[t];if(o+h>=r)return e=(r=e[s])[2*t],n=r[2*t+1],i=r[2*t+2],t=r[2*t+3],1>Math.abs(i-e)&&1>Math.abs(t-n)?0:1>Math.abs(i-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=i-e?0:180:180*Math.atan2(t-n,i-e)/Math.PI;o+=h}}return NaN},e.Tv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===sn)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,i=this.flattenedLengths,r=n.length,o=this.flattenedTotalLength*t,s=0,a=0;a<r;a++){var l=i[a],h=l.length;for(t=0;t<h;t++){var u=l[t];if(s+u>=o)return i=o-s,i=0===u?0:i/u,n=(u=n[a])[2*t],a=u[2*t+1],r=u[2*t+2],t=u[2*t+3],e[0]=n+(r-n)*i,e[1]=a+(t-a)*i,e[2]=1>Math.abs(r-n)&&1>Math.abs(t-a)?0:1>Math.abs(r-n)?0<=t-a?90:270:1>Math.abs(t-a)?0<=r-n?0:180:180*Math.atan2(t-a,r-n)/Math.PI,e;s+=u}}return e},e.ty=function(t){if(this.type===sn){var e=this.startX,n=this.startY,i=this.endX,r=this.endY;if(e!==i||n!==r){var o=t.x;if(t=t.y,e===i){if(n<r){var s=n;i=r}else s=r,i=n;return t<=s?s===n?0:1:t>=i?i===n?0:1:Math.abs(t-n)/(i-s)}if(n===r)return e<i?s=e:(s=i,i=e),o<=s?s===e?0:1:o>=i?i===e?0:1:Math.abs(o-e)/(i-s);s=(i-e)*(i-e)+(r-n)*(r-n);var a=dt.alloc();return Xe.Oh(e,n,i,r,o,t,a),t=a.x,o=a.y,dt.free(a),Math.sqrt(((t-e)*(t-e)+(o-n)*(o-n))/s)}}else{if(this.type!==an){e=this.flattenedSegments,n=this.flattenedLengths,o=this.flattenedTotalLength,i=dt.alloc(),r=1/0,a=s=0,y=e.length;for(var l=v=0,h=0;h<y;h++)for(var u=e[h],c=n[h],f=u.length,d=0;d<f;d+=2){var p=u[d],g=u[d+1];if(0!==d){Xe.Oh(v,l,p,g,t.x,t.y,i);var m=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);m<r&&(r=m,s=a,s+=Math.sqrt((i.x-v)*(i.x-v)+(i.y-l)*(i.y-l))),a+=c[(d-2)/2]}v=p,l=g}return dt.free(i),0>(t=s/o)?0:1<t?1:t}a=this.startY;var y=this.endX;if(r=this.endY,(s=this.startX)!==y||a!==r){o=2*(e=y-s)+2*(n=r-a),i=t.x,t=t.y,i=Math.min(Math.max(i,s),y),t=Math.min(Math.max(t,a),r),s=Math.abs(i-s),y=Math.abs(i-y),a=Math.abs(t-a),r=Math.abs(t-r);var v=Math.min(s,y,a,r);if(v===a)return i/o;if(v===y)return(e+t)/o;if(v===r)return(2*e+n-i)/o;if(v===s)return(2*e+2*n-t)/o}}return 0},e.add=function(t){return this.Ej.add(t),this},e.Tm=function(t,e,n,i,r,o,s,a){return this.s&&b(this),this.nf=new ze(t,e,r,o).freeze(),this.pf=new ze(n,i,s,a).freeze(),this},c.Object.defineProperties(Ke.prototype,{flattenedSegments:{get:function(){return rn(this),this.Sk}},flattenedLengths:{get:function(){return rn(this),this.en}},flattenedTotalLength:{get:function(){var t=this.fn;if(isNaN(t)){if(this.type===sn){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===an)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,i=t=0;i<n;i++)for(var r=e[i],o=r.length,s=0;s<o;s++)t+=r[s];this.fn=t}return t}},type:{get:function(){return this.pa},set:function(t){this.pa!==t&&(this.s&&b(this,t),this.pa=t,this.qa=!0)}},startX:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.s&&b(this,t),this.$c=t,this.qa=!0)}},startY:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.s&&b(this,t),this.ad=t,this.qa=!0)}},endX:{get:function(){return this.fc},set:function(t){this.fc!==t&&(this.s&&b(this,t),this.fc=t,this.qa=!0)}},endY:{get:function(){return this.mc},set:function(t){this.mc!==t&&(this.s&&b(this,t),this.mc=t,this.qa=!0)}},figures:{get:function(){return this.Ej},set:function(t){this.Ej!==t&&(this.s&&b(this,t),this.Ej=t,this.qa=!0)}},spot1:{get:function(){return this.nf},set:function(t){this.s&&b(this,t),this.nf=t.G()}},spot2:{get:function(){return this.pf},set:function(t){this.s&&b(this,t),this.pf=t.G()}},defaultStretch:{get:function(){return this.Rf},set:function(t){this.s&&b(this,t),this.Rf=t}},bounds:{get:function(){return this.bw()&&this.computeBounds(),this.Dr}}}),Ke.prototype.setSpots=Ke.prototype.Tm,Ke.prototype.add=Ke.prototype.add,Ke.prototype.getFractionForPoint=Ke.prototype.ty,Ke.prototype.getPointAndAngleAlongPath=Ke.prototype.Tv,Ke.prototype.getAngleAlongPath=Ke.prototype.sy,Ke.prototype.getPointAlongPath=Ke.prototype.Sv,Ke.prototype.containsPoint=Ke.prototype.aa,Ke.prototype.transform=Ke.prototype.transform,Ke.prototype.rotate=Ke.prototype.rotate,Ke.prototype.scale=Ke.prototype.scale,Ke.prototype.offset=Ke.prototype.offset,Ke.prototype.normalize=Ke.prototype.normalize,Ke.prototype.computeBoundsWithoutOrigin=Ke.prototype.ay,Ke.prototype.equalsApprox=Ke.prototype.Na;var sn=new H(Ke,"Line",0),an=new H(Ke,"Rectangle",1),ln=new H(Ke,"Ellipse",2),hn=new H(Ke,"Path",3),un="UuBbMmZzLlHhVvCcSsQqTtAaFfXx";function cn(t,e,n,i){it(this),this.nx=null,this.s=!1,void 0===n&&(n=!0),this.gs=n,void 0===i&&(i=!0),this.ms=i,this.$c=void 0!==t?t:0,this.ad=void 0!==e?e:0,this.Ul=new tt,this.$s=this.Ul.Aa,this.qa=!0}function fn(t,e,n,i,r,o,s,a){it(this),this.s=!1,void 0===t&&(t=mn),this.pa=t,this.fc=void 0!==e?e:0,this.mc=void 0!==n?n:0,void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),t===wn?(0>(t=o%360)&&(t+=360),this.ye=t,this.Oi=0,this.Pi=Math.max(i,0),this.ph=Math.max(r,0),this.Dl="boolean"==typeof s?s:"number"==typeof s&&!!s,this.Wk=!!a):(this.ye=i,this.Oi=r,t===bn&&(o=Math.max(o,0)),this.Pi=o,"number"==typeof s?(t===bn&&(s=Math.max(s,0)),this.ph=s):this.ph=0,this.Wk=this.Dl=!1),this.Jj=!1,this.qa=!0,this.Qe=null}function dn(t,e){if(null!==t.Qe&&!1===e.qa)return t.Qe;var n=t.radiusX,i=t.radiusY;if(void 0===i&&(i=n),0===n||0===i)return t.Qe=[],t.Qe;e=t.ye;var r=t.Oi,o=Xe.by(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==i){var s=Ge.alloc();s.reset(),n<i?s.scale(1,i/n):s.scale(n/i,1),Je(o,s),Ge.free(s)}for(n=o.length,i=0;i<n;i++)(s=o[i])[0]+=e,s[1]+=r,s[2]+=e,s[3]+=r,s[4]+=e,s[5]+=r,s[6]+=e,s[7]+=r;return t.Qe=o,t.Qe}function pn(t,e,n,i){function r(t,e,n,i){return(t*i<e*n?-1:1)*Math.acos((t*n+e*i)/(Math.sqrt(t*t+e*e)*Math.sqrt(n*n+i*i)))}if(null!==t.Qe&&!1===e.qa)return t.Qe;var o=t.ph;0===(e=t.Pi)&&(e=1e-4),0===o&&(o=1e-4);var s=Math.PI/180*t.ye,a=t.Dl,l=t.Wk,h=t.fc,u=t.mc,c=Math.cos(s),f=Math.sin(s),d=c*(n-h)/2+f*(i-u)/2,p=d*d/(e*e)+(s=-f*(n-h)/2+c*(i-u)/2)*s/(o*o);return 1<p&&(e*=Math.sqrt(p),o*=Math.sqrt(p)),p=(a===l?-1:1)*Math.sqrt((e*e*o*o-e*e*s*s-o*o*d*d)/(e*e*s*s+o*o*d*d)),isNaN(p)&&(p=0),a=p*e*s/o,p=p*-o*d/e,isNaN(a)&&(a=0),isNaN(p)&&(p=0),n=(n+h)/2+c*a-f*p,i=(i+u)/2+f*a+c*p,u=r(1,0,(d-a)/e,(s-p)/o),s=r(c=(d-a)/e,h=(s-p)/o,d=(-d-a)/e,a=(-s-p)/o),-1>=(d=(c*d+h*a)/(Math.sqrt(c*c+h*h)*Math.sqrt(d*d+a*a)))?s=Math.PI:1<=d&&(s=0),!l&&0<s&&(s-=2*Math.PI),l&&0>s&&(s+=2*Math.PI),l=e>o?1:e/o,d=e>o?o/e:1,e=Xe.by(0,0,e>o?e:o,u,u+s,!0),(o=Ge.alloc()).reset(),o.translate(n,i),o.rotate(t.ye,0,0),o.scale(l,d),Je(e,o),Ge.free(o),t.Qe=e,t.Qe}Ke.className="Geometry",Ke.stringify=$e,Ke.fillPath=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",i=0;i<e;i++){var r=t[i];n=null!==r.match(/[Ff]/)?0===i?n+r:n+"X"+(" "===r[0]?"":" ")+r:n+(0===i?"":"X ")+"F"+(" "===r[0]?"":" ")+r}return n},Ke.parse=Ze,Ke.Line=sn,Ke.Rectangle=an,Ke.Ellipse=ln,Ke.Path=hn,cn.prototype.copy=function(){var t=new cn;t.gs=this.gs,t.ms=this.ms,t.$c=this.$c,t.ad=this.ad;for(var e=this.Ul.j,n=e.length,i=t.Ul,r=0;r<n;r++){var o=e[r].copy();i.add(o)}return t.$s=this.$s,t.qa=this.qa,t.nx=this.nx,t},(e=cn.prototype).Na=function(t){if(!(t instanceof cn&&Xe.A(this.startX,t.startX)&&Xe.A(this.startY,t.startY)))return!1;var e=this.segments.j,n=e.length;if(n!==(t=t.segments.j).length)return!1;for(var i=0;i<n;i++)if(!e[i].Na(t[i]))return!1;return!0},e.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.j,i=n.length,r=0;r<i;r++)e+=" "+n[r].toString(t);return e},e.freeze=function(){this.s=!0;var t=this.segments;t.freeze();var e=t.j;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},e.da=function(){this.s=!1;var t=this.segments;t.da();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].da();return this},e.bw=function(){if(this.qa)return!0;var t=this.segments;if(this.$s!==t.Aa)return!0;for(var e=(t=t.j).length,n=0;n<e;n++)if(t[n].qa)return!0;return!1},e.add=function(t){return this.Ul.add(t),this},e.aa=function(t,e,n){for(var i=this.startX,r=this.startY,o=i,s=r,a=this.segments.j,l=a.length,h=0;h<l;h++){var u=a[h];switch(u.type){case gn:o=u.endX,s=u.endY,i=u.endX,r=u.endY;break;case mn:if(Xe.Nb(i,r,u.endX,u.endY,n,t,e))return!0;i=u.endX,r=u.endY;break;case yn:if(Xe.ut(i,r,u.point1X,u.point1Y,u.point2X,u.point2Y,u.endX,u.endY,.5,t,e,n))return!0;i=u.endX,r=u.endY;break;case vn:if(Xe.kw(i,r,u.point1X,u.point1Y,u.endX,u.endY,.5,t,e,n))return!0;i=u.endX,r=u.endY;break;case bn:case wn:var c=u.type===bn?dn(u,this):pn(u,this,i,r),f=c.length;if(0===f){if(Xe.Nb(i,r,u.centerX,u.centerY,n,t,e))return!0;i=u.centerX,r=u.centerY;break}for(var d=null,p=0;p<f;p++)if(d=c[p],0===p&&Xe.Nb(i,r,d[0],d[1],n,t,e)||Xe.ut(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,t,e,n))return!0;null!==d&&(i=d[6],r=d[7]);break;default:v("Unknown Segment type: "+u.type)}if(u.isClosed&&(i!==o||r!==s)&&Xe.Nb(i,r,o,s,n,t,e))return!0}return!1},c.Object.defineProperties(cn.prototype,{isFilled:{get:function(){return this.gs},set:function(t){this.s&&b(this,t),this.gs=t}},isShadowed:{get:function(){return this.ms},set:function(t){this.s&&b(this,t),this.ms=t}},startX:{get:function(){return this.$c},set:function(t){this.s&&b(this,t),this.$c=t,this.qa=!0}},startY:{get:function(){return this.ad},set:function(t){this.s&&b(this,t),this.ad=t,this.qa=!0}},segments:{get:function(){return this.Ul},set:function(t){this.s&&b(this,t),this.Ul=t,this.qa=!0}}}),cn.prototype.add=cn.prototype.add,cn.prototype.equalsApprox=cn.prototype.Na,cn.className="PathFigure",fn.prototype.copy=function(){var t=new fn;return t.pa=this.pa,t.fc=this.fc,t.mc=this.mc,t.ye=this.ye,t.Oi=this.Oi,t.Pi=this.Pi,t.ph=this.ph,t.Dl=this.Dl,t.Wk=this.Wk,t.Jj=this.Jj,t.qa=this.qa,t},(e=fn.prototype).Na=function(t){if(!(t instanceof fn)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case gn:case mn:return Xe.A(this.endX,t.endX)&&Xe.A(this.endY,t.endY);case yn:return Xe.A(this.endX,t.endX)&&Xe.A(this.endY,t.endY)&&Xe.A(this.point1X,t.point1X)&&Xe.A(this.point1Y,t.point1Y)&&Xe.A(this.point2X,t.point2X)&&Xe.A(this.point2Y,t.point2Y);case vn:return Xe.A(this.endX,t.endX)&&Xe.A(this.endY,t.endY)&&Xe.A(this.point1X,t.point1X)&&Xe.A(this.point1Y,t.point1Y);case bn:return Xe.A(this.startAngle,t.startAngle)&&Xe.A(this.sweepAngle,t.sweepAngle)&&Xe.A(this.centerX,t.centerX)&&Xe.A(this.centerY,t.centerY)&&Xe.A(this.radiusX,t.radiusX)&&Xe.A(this.radiusY,t.radiusY);case wn:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&Xe.A(this.xAxisRotation,t.xAxisRotation)&&Xe.A(this.endX,t.endX)&&Xe.A(this.endY,t.endY)&&Xe.A(this.radiusX,t.radiusX)&&Xe.A(this.radiusY,t.radiusY);default:return!1}},e.ib=function(t){t.classType===fn&&(this.type=t)},e.toString=function(t){switch(void 0===t&&(t=-1),this.type){case gn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case mn:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case yn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case vn:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case bn:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case wn:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.Jj?"z":"")},e.freeze=function(){return this.s=!0,this},e.da=function(){return this.s=!1,this},e.close=function(){return this.Jj=!0,this},c.Object.defineProperties(fn.prototype,{isClosed:{get:function(){return this.Jj},set:function(t){this.Jj!==t&&(this.Jj=t,this.qa=!0)}},type:{get:function(){return this.pa},set:function(t){this.s&&b(this,t),this.pa=t,this.qa=!0}},endX:{get:function(){return this.fc},set:function(t){this.s&&b(this,t),this.fc=t,this.qa=!0}},endY:{get:function(){return this.mc},set:function(t){this.s&&b(this,t),this.mc=t,this.qa=!0}},point1X:{get:function(){return this.ye},set:function(t){this.s&&b(this,t),this.ye=t,this.qa=!0}},point1Y:{get:function(){return this.Oi},set:function(t){this.s&&b(this,t),this.Oi=t,this.qa=!0}},point2X:{get:function(){return this.Pi},set:function(t){this.s&&b(this,t),this.Pi=t,this.qa=!0}},point2Y:{get:function(){return this.ph},set:function(t){this.s&&b(this,t),this.ph=t,this.qa=!0}},centerX:{get:function(){return this.ye},set:function(t){this.s&&b(this,t),this.ye=t,this.qa=!0}},centerY:{get:function(){return this.Oi},set:function(t){this.s&&b(this,t),this.Oi=t,this.qa=!0}},radiusX:{get:function(){return this.Pi},set:function(t){0>t&&w(t,">= zero",fn,"radiusX"),this.s&&b(this,t),this.Pi=t,this.qa=!0}},radiusY:{get:function(){return this.ph},set:function(t){0>t&&w(t,">= zero",fn,"radiusY"),this.s&&b(this,t),this.ph=t,this.qa=!0}},startAngle:{get:function(){return this.fc},set:function(t){this.fc!==t&&(this.s&&b(this,t),0>(t%=360)&&(t+=360),this.fc=t,this.qa=!0)}},sweepAngle:{get:function(){return this.mc},set:function(t){this.s&&b(this,t),360<t&&(t=360),-360>t&&(t=-360),this.mc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.Wk},set:function(t){this.s&&b(this,t),this.Wk=t,this.qa=!0}},isLargeArc:{get:function(){return this.Dl},set:function(t){this.s&&b(this,t),this.Dl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.ye},set:function(t){0>(t%=360)&&(t+=360),this.s&&b(this,t),this.ye=t,this.qa=!0}}}),fn.prototype.equalsApprox=fn.prototype.Na;var gn=new H(fn,"Move",0),mn=new H(fn,"Line",1),yn=new H(fn,"Bezier",2),vn=new H(fn,"QuadraticBezier",3),bn=new H(fn,"Arc",4),wn=new H(fn,"SvgArc",4);function xn(){this.B=null,this.uv=new dt(0,0).freeze(),this.Du=new dt(0,0).freeze(),this.vr=this.xs=0,this.wr=1,this.Ai="",this.ot=this.Pr=!1,this.Mr=this.yr=0,this.Pg=this.Zr=this.ks=!1,this.Ur=null,this.jt=0,this.ld=this.it=null}function kn(){this.B=null,this.Qa="",this.Hs=this.gt=null}function Sn(){this.rn=Cn,this.ff=this.ws="",this.Zo=this.$o=this.gp=this.hp=this.fp=this.B=this.$b=null}fn.className="PathSegment",fn.Move=gn,fn.Line=mn,fn.Bezier=yn,fn.QuadraticBezier=vn,fn.Arc=bn,fn.SvgArc=wn,xn.prototype.copy=function(){var t=new xn;return this.clone(t)},xn.prototype.clone=function(t){return t.B=this.B,t.uv.assign(this.viewPoint),t.Du.assign(this.documentPoint),t.xs=this.xs,t.vr=this.vr,t.wr=this.wr,t.Ai=this.Ai,t.Pr=this.Pr,t.ot=this.ot,t.yr=this.yr,t.Mr=this.Mr,t.ks=this.ks,t.Zr=this.Zr,t.Pg=this.Pg,t.Ur=this.Ur,t.jt=this.jt,t.it=this.it,t.ld=this.ld,t},xn.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},xn.prototype.Dq=function(t,e){var n=this.diagram;return null===n||io(n,this.event,t,e),e},xn.prototype.hA=function(t,e){var n=this.diagram;return null===n||(io(n,this.event,t,e),e.assign(n.ju(e))),e},c.Object.defineProperties(xn.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},viewPoint:{get:function(){return this.uv},set:function(t){this.uv.assign(t)}},documentPoint:{get:function(){return this.Du},set:function(t){this.Du.assign(t)}},modifiers:{get:function(){return this.xs},set:function(t){this.xs=t}},button:{get:function(){return this.vr},set:function(t){if(this.vr=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.wr},set:function(t){this.wr=t}},key:{get:function(){return this.Ai},set:function(t){this.Ai=t}},down:{get:function(){return this.Pr},set:function(t){this.Pr=t}},up:{get:function(){return this.ot},set:function(t){this.ot=t}},clickCount:{get:function(){return this.yr},set:function(t){this.yr=t}},delta:{get:function(){return this.Mr},set:function(t){this.Mr=t}},isMultiTouch:{get:function(){return this.ks},set:function(t){this.ks=t}},handled:{get:function(){return this.Zr},set:function(t){this.Zr=t}},bubbles:{get:function(){return this.Pg},set:function(t){this.Pg=t}},event:{get:function(){return this.Ur},set:function(t){this.Ur=t}},isTouchEvent:{get:function(){var t=d.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=d.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.jt},set:function(t){this.jt=t}},targetDiagram:{get:function(){return this.it},set:function(t){this.it=t}},targetObject:{get:function(){return this.ld},set:function(t){this.ld=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),xn.prototype.getMultiTouchDocumentPoint=xn.prototype.hA,xn.prototype.getMultiTouchViewPoint=xn.prototype.Dq,xn.className="InputEvent",kn.prototype.copy=function(){var t=new kn;return t.B=this.B,t.Qa=this.Qa,t.gt=this.gt,t.Hs=this.Hs,t},kn.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},c.Object.defineProperties(kn.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},subject:{get:function(){return this.gt},set:function(t){this.gt=t}},parameter:{get:function(){return this.Hs},set:function(t){this.Hs=t}}}),kn.className="DiagramEvent",Sn.prototype.clear=function(){this.Zo=this.$o=this.gp=this.hp=this.fp=this.B=this.$b=null},Sn.prototype.copy=function(){var t=new Sn;t.rn=this.rn,t.ws=this.ws,t.ff=this.ff,t.$b=this.$b,t.B=this.B,t.fp=this.fp;var e=this.hp;return t.hp=S(e)&&"function"==typeof e.G?e.G():e,t.gp=S(e=this.gp)&&"function"==typeof e.G?e.G():e,t.$o=S(e=this.$o)&&"function"==typeof e.G?e.G():e,t.Zo=S(e=this.Zo)&&"function"==typeof e.G?e.G():e,t},Sn.prototype.ib=function(t){t.classType===Sn&&(this.change=t)},Sn.prototype.toString=function(){var t="";return t=this.change===_n?t+"* ":this.change===Cn?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===_n?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=E(this.object)),null!==this.oldValue&&(t+="  old: "+E(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+E(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},Sn.prototype.H=function(t){return t?this.oldValue:this.newValue},Sn.prototype.jA=function(t){return t?this.oldParam:this.newParam},Sn.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},Sn.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},Sn.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},Sn.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},c.Object.defineProperties(Sn.prototype,{model:{get:function(){return this.$b},set:function(t){this.$b=t}},diagram:{get:function(){return this.B},set:function(t){this.B=t}},change:{get:function(){return this.rn},set:function(t){this.rn=t}},modelChange:{get:function(){return this.ws},set:function(t){this.ws=t}},propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},isTransactionFinished:{get:function(){return this.rn===_n&&("CommittedTransaction"===this.ff||"FinishedUndo"===this.ff||"FinishedRedo"===this.ff)}},object:{get:function(){return this.fp},set:function(t){this.fp=t}},oldValue:{get:function(){return this.hp},set:function(t){this.hp=t}},oldParam:{get:function(){return this.gp},set:function(t){this.gp=t}},newValue:{get:function(){return this.$o},set:function(t){this.$o=t}},newParam:{get:function(){return this.Zo},set:function(t){this.Zo=t}}}),Sn.prototype.redo=Sn.prototype.redo,Sn.prototype.canRedo=Sn.prototype.canRedo,Sn.prototype.undo=Sn.prototype.undo,Sn.prototype.canUndo=Sn.prototype.canUndo,Sn.prototype.getParam=Sn.prototype.jA,Sn.prototype.getValue=Sn.prototype.H,Sn.prototype.clear=Sn.prototype.clear;var _n=new H(Sn,"Transaction",-1),Cn=new H(Sn,"Property",0),Mn=new H(Sn,"Insert",1),Pn=new H(Sn,"Remove",2);function Tn(){this.v=(new tt).freeze(),this.Qa="",this.l=!1}function Nn(){this.bv=new nt,this.hd=!1,this.I=(new tt).freeze(),this.Rd=-1,this.v=999,this.oe=!1,this.Jr=null,this.Wi=0,this.l=!1,this.ue=(new tt).freeze(),this.Ll=new tt,this.Ku=!0,this.Ru=this.hs=this.Vu=this.Uu=!1}function An(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&x("Ending transaction without having started a transaction: "+n);var i=1===t.transactionLevel,r=t.currentTransaction;i&&e&&(t.isInternalTransaction||t.Bb("CommittingTransaction",n,r));var o=0;if(0<t.transactionLevel&&(t.Wi--,t.isEnabled)){var s=t.ue.count;0<s&&(""===n&&(n=t.ue.J(0)),t.ue.da(),t.ue.bb(s-1),t.ue.freeze()),0<(s=t.Ll.count)&&(o=t.Ll.J(s-1),t.Ll.bb(s-1))}if(i){if(e){if(t.hs=!1,null===r&&""!==n&&(r=t.currentTransaction),t.isEnabled&&null!==r){for(r.isComplete||(r.isComplete=!0,r.name=n),(e=t.history).da(),i=e.count-1;i>t.historyIndex;i--)null!==(o=e.J(i))&&o.clear(),e.bb(i),t.hs=!0;0<=(i=t.maxHistoryLength)&&(0===i?e.clear():e.count>=i&&(null!==(o=e.J(0))&&o.clear(),e.bb(0),t.Rd--)),0===i||0!==e.count&&e.get(e.count-1)===r||(e.add(r),t.Rd++),e.freeze()}t.isInternalTransaction||t.Bb("CommittedTransaction",n,r)}else{t.oe=!0;try{t.isEnabled&&null!==r&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Bb("RolledBackTransaction",n,r),t.oe=!1}null!==r&&r.clear()}return t.Jr=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==r){for(t=o,r=(n=r.changes).count-1;r>=t;r--)null!==(e=n.J(r))&&e.undo(),n.da(),n.bb(r);n.freeze()}return!1}function En(){it(this),this.B=Xo,this.Qa="",this.hd=!0,this.Qc=!1,this.bx=null,this.hz=new xn,this.rt=-1}function Ln(){En.call(this),this.name="ToolManager",this.Ac=new tt,this.Rc=new tt,this.Jd=new tt,this.T=this.Ja=850,this.v=new Dt(2,2).ca(),this.cb=5e3,this.Ka=Dn,this.I=In,this.Ir=this.l=null,this.dk=-1}function On(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}Sn.className="ChangedEvent",Sn.Transaction=_n,Sn.Property=Cn,Sn.Insert=Mn,Sn.Remove=Pn,Tn.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.J(n);null!==i&&(e+="\n  "+i.toString())}}return e},Tn.prototype.clear=function(){var t=this.changes;t.da();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),t.freeze()},Tn.prototype.canUndo=function(){return this.isComplete},Tn.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.J(t);null!==e&&e.undo()}},Tn.prototype.canRedo=function(){return this.isComplete},Tn.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.J(e);null!==n&&n.redo()}},Tn.prototype.hw=function(){if(this.isComplete){var t=this.changes;t.da();for(var e=new ft,n=0;n<t.count;n++){var i=t.J(n);if(null!==i&&i.change===Cn&&i.object){var r=e.get(i.object);r||(r=new ft,e.set(i.object,r));var o=r.get(i.propertyName);null===o?r.set(i.propertyName,-1):(0<o&&t.Nc(o,null),r.set(i.propertyName,n))}}for(n=e=0;n<t.count;n++)null!==(i=t.J(n))&&(n>e&&t.Nc(e,i),e++);for(;t.length>e;)t.pop();t.freeze()}},c.Object.defineProperties(Tn.prototype,{changes:{get:function(){return this.v}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isComplete:{get:function(){return this.l},set:function(t){this.l=t}}}),Tn.prototype.optimize=Tn.prototype.hw,Tn.prototype.redo=Tn.prototype.redo,Tn.prototype.canRedo=Tn.prototype.canRedo,Tn.prototype.undo=Tn.prototype.undo,Tn.prototype.canUndo=Tn.prototype.canUndo,Tn.prototype.clear=Tn.prototype.clear,Tn.className="Transaction",Nn.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.J(i);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,i=0;i<n;i++)e+="\n "+this.history.J(i).toString(t-1);return e},Nn.prototype.clear=function(){var t=this.history;t.da();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),this.Rd=-1,t.freeze(),this.oe=!1,this.Jr=null,this.Wi=0,this.ue.da(),this.ue.clear(),this.ue.freeze(),this.Ll.clear(),this.Ru=this.hs=this.Vu=this.Uu=!1},Nn.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(e=Nn.prototype).Tx=function(t){this.bv.add(t)},e.My=function(t){this.bv.remove(t)},e.va=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Ku&&(this.Ku=!1,this.Wi++,this.isInternalTransaction||this.Bb("StartingFirstTransaction",t,this.currentTransaction),0<this.Wi&&this.Wi--),this.isEnabled&&(this.ue.da(),this.ue.add(t),this.ue.freeze(),this.Ll.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.Wi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Bb("StartedTransaction",t,this.currentTransaction)),e},e.Wa=function(t){return void 0===t&&(t=""),An(this,!0,t)},e.Hf=function(){return An(this,!1,"")},Nn.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Nn.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.oe=!0,this.Bb("StartingUndo","Undo",t),this.Rd--,t.undo()}catch(e){x("undo error: "+e.toString())}finally{this.Bb("FinishedUndo","Undo",t),this.oe=!1}}},Nn.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Nn.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.oe=!0,this.Bb("StartingRedo","Redo",t),this.Rd++,t.redo()}catch(e){x("redo error: "+e.toString())}finally{this.Bb("FinishedRedo","Redo",t),this.oe=!1}}},Nn.prototype.Bb=function(t,e,n){void 0===n&&(n=null);var i=new Sn;for(i.change=_n,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)i.model=e=t.value,e.vt(i)},Nn.prototype.Wv=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.Jr=e=new Tn);var n=t.copy();(e=e.changes).da(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ku&&(null!==(t=t.diagram)&&!1===t.mj||x("Change not within a transaction: "+n.toString()))}},Nn.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},c.Object.defineProperties(Nn.prototype,{models:{get:function(){return this.bv.iterator}},isEnabled:{get:function(){return this.hd},set:function(t){this.hd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.J(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.J(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.oe}},history:{get:function(){return this.I}},maxHistoryLength:{get:function(){return this.v},set:function(t){this.v=t}},historyIndex:{get:function(){return this.Rd}},currentTransaction:{get:function(){return this.Jr}},transactionLevel:{get:function(){return this.Wi}},isInTransaction:{get:function(){return 0<this.Wi}},checksTransactionLevel:{get:function(){return this.l},set:function(t){this.l=t}},nestedTransactionNames:{get:function(){return this.ue}},isPendingClear:{get:function(){return this.Uu},set:function(t){this.Uu=t}},isPendingUnmodified:{get:function(){return this.Vu},set:function(t){this.Vu=t}},isInternalTransaction:{get:function(){return this.Ru},set:function(t){this.Ru=t}},isJustDiscarded:{get:function(){return this.hs}}}),Nn.prototype.handleChanged=Nn.prototype.Wv,Nn.prototype.redo=Nn.prototype.redo,Nn.prototype.undo=Nn.prototype.undo,Nn.prototype.canUndo=Nn.prototype.canUndo,Nn.prototype.rollbackTransaction=Nn.prototype.Hf,Nn.prototype.commitTransaction=Nn.prototype.Wa,Nn.prototype.startTransaction=Nn.prototype.va,Nn.prototype.removeModel=Nn.prototype.My,Nn.prototype.addModel=Nn.prototype.Tx,Nn.prototype.clear=Nn.prototype.clear,Nn.className="UndoManager",En.prototype.toString=function(){return""!==this.name?this.name+" Tool":A(this.constructor)},En.prototype.updateAdornments=function(){},En.prototype.canStart=function(){return this.isEnabled},En.prototype.doStart=function(){},En.prototype.doActivate=function(){this.isActive=!0},En.prototype.doDeactivate=function(){this.isActive=!1},En.prototype.doStop=function(){},En.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},En.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},En.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},En.prototype.doMouseMove=function(){},En.prototype.doMouseUp=function(){this.stopTool()},En.prototype.doMouseWheel=function(){},En.prototype.canStartMultiTouch=function(){return!0},En.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.Dq(0,dt.allocAt(NaN,NaN)),i=e.Dq(1,dt.allocAt(NaN,NaN));if(n.u()&&i.u()&&(this.doCancel(),t.tm("hasGestureZoom"))){t.Nl=t.scale;var r=i.x-n.x,o=i.y-n.y;t.ov=Math.sqrt(r*r+o*o),e.bubbles=!1}dt.free(n),dt.free(i)},En.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.Dq(0,dt.allocAt(NaN,NaN)),i=e.Dq(1,dt.allocAt(NaN,NaN));if(n.u()&&i.u()&&(this.doCancel(),t.tm("hasGestureZoom"))){var r=i.x-n.x,o=i.y-n.y;o=Math.sqrt(r*r+o*o)/t.ov,r=new dt((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2);var s=t.commandHandler;if((o*=t.Nl)!==t.scale&&s.canResetZoom(o)){var a=t.zoomPoint;t.zoomPoint=r,s.resetZoom(o),t.zoomPoint=a}e.bubbles=!1}dt.free(n),dt.free(i)},En.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},En.prototype.doKeyUp=function(){},En.prototype.va=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.va(t)},En.prototype.Jg=function(){var t=this.diagram;return null===this.transactionResult?t.Hf():t.Wa(this.transactionResult)},En.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.qm(e.documentPoint,!1);if(null!==n){if(z?e.meta:e.control){for(t.R("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.R("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.R("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.R("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(z?e.meta:e.control)||e.shift||t.clearSelection()}},En.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(t){return!t.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.Ub(i.documentPoint,t,e),i.targetObject=t,function(t,e,n){if(e.handled=!1,null===t||t.Hg()){var i=0;e.left?i=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(i=3);var r="ObjectSingleClicked";if(null!==t){switch(i){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}0!==i&&n.R(r,t)}else{switch(i){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}0!==i&&n.R(r)}if(null!==t)for(;null!==t;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(t,i,n),i.handled},En.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.qc){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.aa(e.documentPoint)?t.Ub(e.documentPoint,null,null):null;e.targetObject=i;var r=!1;if(i!==t.zj){var o=t.zj,s=o;for(t.zj=i,this.doCurrentObjectChanged(o,i),e.handled=!1;null!==o;){var a=o.mouseLeave;if(null!==a){if(i===o)break;if(null!==i&&i.Gg(o))break;if(a(e,o,i),r=!0,e.handled)break}o=o.panel}for(o=s,e.handled=!1;null!==i;){if(null!==(s=i.mouseEnter)){if(o===i)break;if(null!==o&&o.Gg(i))break;if(s(e,i,o),r=!0,e.handled)break}i=i.panel}i=t.zj}if(null!==i){for(o=i,s="";null!==o&&""===(s=o.cursor);)o=o.panel;for(t.currentCursor=s,e.handled=!1,o=i;null!==o&&(null===(i=o.mouseOver)||(i(e,o),r=!0,!e.handled));)o=o.panel}else t.currentCursor="",null!==(i=t.mouseOver)&&(i(e),r=!0);r&&t.Db(),t.skipsUndoManager=n}},En.prototype.doCurrentObjectChanged=function(){},En.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.u()){var i=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(null!==i&&(r===jn&&!e.shift||r===Dn&&e.control))(0<n?i.canIncreaseZoom():i.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===jn&&e.shift||r===Dn&&!e.control){i=t.position.copy();var o=0<n?n:-n,s=e.event,a=s.deltaMode;if(r=s.deltaX,s=s.deltaY,(I||R||B)&&(a=1,0<r&&(r=3),0>r&&(r=-3),0<s&&(s=3),0>s&&(s=-3)),void 0===a||void 0===r||void 0===s||0===r&&0===s||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll("pixel",0<n?"up":"down",o=3*o*t.scrollVerticalLineChange):e.shift&&t.allowHorizontalScroll&&t.scroll("pixel",0<n?"left":"right",o=3*o*t.scrollHorizontalLineChange);else{switch(a){case 0:n="pixel";break;case 1:n="line";break;case 2:n="page";break;default:n="pixel"}0!==r&&t.allowHorizontalScroll&&(0<(r*=t.scrollHorizontalLineChange/16)?t.scroll(n,"left",-r):t.scroll(n,"right",r)),0!==s&&t.allowVerticalScroll&&(0<(s*=t.scrollVerticalLineChange/16)?t.scroll(n,"up",-s):t.scroll(n,"down",s))}t.position.w(i)||(e.bubbles=!1)}}},En.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.hz);this.rt=m(function(){n.doWaitAfter(i)},t)},En.prototype.cancelWaitAfter=function(){-1!==this.rt&&d.clearTimeout(this.rt),this.rt=-1},En.prototype.doWaitAfter=function(){},En.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.Ub(t,function(t){for(;null!==t&&!(t.panel instanceof Pu);)t=t.panel;return t}))?null:t.part.category===e?t:null},En.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var i=n.toolManager.dragSize,r=i.width;return i=i.height,n.firstInput.isTouchEvent&&(r+=6,i+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>i},c.Object.defineProperties(En.prototype,{diagram:{get:function(){return this.B},set:function(t){t instanceof Dr&&(this.B=t)}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isEnabled:{get:function(){return this.hd},set:function(t){this.hd=t}},isActive:{get:function(){return this.Qc},set:function(t){this.Qc=t}},transactionResult:{get:function(){return this.bx},set:function(t){this.bx=t}}}),En.prototype.stopTransaction=En.prototype.Jg,En.prototype.startTransaction=En.prototype.va,En.className="Tool",u(Ln,En),Ln.prototype.initializeStandardTools=function(){},Ln.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Pu&&this.Ir===t){var n=e.adornedObject;(null!==t?n.part===t:null===n)?this.showToolTip(e,n):this.hideToolTip()}},Ln.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Rn&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Bn)return void(e.bubbles=!0);if(this.gestureBehavior===Rn)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var r=this.mouseDownTools.J(i);if(r.diagram=this.diagram,r.canStart())return t.doFocus(),t.currentTool=r,void(t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===Dn?this.mouseWheelBehavior=jn:this.mouseWheelBehavior===jn&&(this.mouseWheelBehavior=Dn)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Ln.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Bn)return void(e.bubbles=!0);if(this.gestureBehavior===Rn)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var r=this.mouseMoveTools.J(i);if(r.diagram=this.diagram,r.canStart())return t.doFocus(),t.currentTool=r,void(t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove()))}On(this,t),null===(t=e.event)||"mousemove"!==t.type&&"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Ln.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof Pu&&(e===t||e.Gg(t))||this.hideToolTip()},Ln.prototype.doWaitAfter=function(t){var e=this.diagram;e.ta&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.ck=!0,e.doMouseUp()))},Ln.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Ub(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},Ln.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Ub(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof Pu)||e!==t&&!e.Gg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Ln.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Pu){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionToolTip(t,e)}else t instanceof Ei&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,-1!==this.dk&&(d.clearTimeout(this.dk),this.dk=-1),0<(t=this.toolTipDuration)&&1/0!==t){var r=this;this.dk=m(function(){r.hideToolTip()},t)}},Ln.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>r.right&&(n.x-=i.width+5/e.scale),n.x<r.x&&(n.x=r.x),n.y=n.y+20/e.scale+i.height>r.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<r.y&&(n.y=r.y),t.position=n}},Ln.prototype.hideToolTip=function(){-1!==this.dk&&(d.clearTimeout(this.dk),this.dk=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof Pu?(t.remove(e),null!==this.Ir&&this.Ir.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof Ei&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Ln.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.J(n);if(i.diagram=this.diagram,i.canStart())return t.doFocus(),t.currentTool=i,void(t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp()))}t.doFocus(),this.doDeactivate()},Ln.prototype.doMouseWheel=function(){this.standardMouseWheel()},Ln.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Ln.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Ln.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.J(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((i=this.mouseMoveTools.J(n)).name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((i=this.mouseUpTools.J(n)).name===t)return i;return null},Ln.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var r=this.mouseDownTools.J(i);if(r.name===t)return null!==e?this.mouseDownTools.Nc(i,e):this.mouseDownTools.bb(i),r}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if((r=this.mouseMoveTools.J(i)).name===t)return null!==e?this.mouseMoveTools.Nc(i,e):this.mouseMoveTools.bb(i),r;for(n=this.mouseUpTools.length,i=0;i<n;i++)if((r=this.mouseUpTools.J(i)).name===t)return null!==e?this.mouseUpTools.Nc(i,e):this.mouseUpTools.bb(i),r;return null},Ln.prototype.Xa=function(t,e,n){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&n.add(e)},c.Object.defineProperties(Ln.prototype,{mouseWheelBehavior:{get:function(){return this.Ka},set:function(t){this.Ka=t}},gestureBehavior:{get:function(){return this.I},set:function(t){this.I=t}},currentToolTip:{get:function(){return this.l},set:function(t){this.l=t,this.Ir=null!==t&&t instanceof Pu?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Ac}},mouseMoveTools:{get:function(){return this.Rc}},mouseUpTools:{get:function(){return this.Jd}},hoverDelay:{get:function(){return this.Ja},set:function(t){this.Ja=t}},holdDelay:{get:function(){return this.T},set:function(t){this.T=t}},dragSize:{get:function(){return this.v},set:function(t){this.v=t.G()}},toolTipDuration:{get:function(){return this.cb},set:function(t){this.cb=t}}}),Ln.prototype.replaceStandardTool=Ln.prototype.Xa;var Dn=new H(Ln,"WheelScroll",0),jn=new H(Ln,"WheelZoom",1),Fn=new H(Ln,"WheelNone",2),In=new H(Ln,"GestureZoom",3),Rn=new H(Ln,"GestureCancel",4),Bn=new H(Ln,"GestureNone",5);function zn(){En.call(this),this.name="Dragging",this.I=this.Rc=!0,this.v=this.cb=this.Ja=this.pg=null,this.On=this.Jd=!1,this.$l=new dt(NaN,NaN),this.et=new dt,this.Ac=!0,this.gl=100,this.Wg=[],this.jr=(new nt).freeze(),this.Ka=new Fs,this.xo=null,this.T="copy",this.Uh="",this.Vh="no-drop"}function Vn(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.vk()&&1===e.count&&e.first()instanceof Qu?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.ik(),t.pg=n.toolManager.findTool("Relinking"),null===t.pg&&(t.pg=new mi,t.pg.diagram=n)):(t.draggedLink=null,t.pg=null))}}function Un(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,$n(t,e.lastInput,null),e.skipsUndoManager=n,t.Wg.length=0}function qn(){var t=oi;Gn(t),Kn(t);var e=t.diagram;t.$l.u()&&(e.position=t.$l),e.If()}function Hn(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?null!==i.currentTransaction&&0<i.currentTransaction.changes.count&&(n.undoManager.Hf(),n.va("Drag")):Kn(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Jf():n.selection,e=n.nk(e,n,!0),n=new ft,i=t.draggedParts.iterator;i.next();){var r=i.key;if(r.Lc()&&r.canCopy()){var o=e.H(r);null!==o&&(o.location=r.location,o.Ta(),n.add(o,t.yd(o.location)))}}for(e=e.iterator;e.next();)(i=e.value)instanceof Qu&&i.canCopy()&&n.add(i,t.yd());t.copiedParts=n,Vn(t,n.Jf()),null!==t.draggedLink&&nc(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2))}}}function Gn(t){var e=t.diagram;if(null!==t.copiedParts&&(e.cu(t.copiedParts.Jf(),!1),t.copiedParts=null,null!==t.draggedParts))for(var n=t.draggedParts.iterator;n.next();)n.key instanceof Qu&&(n.value.point=new dt(0,0));e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Yn(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.pg){var e=t.pg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.pg=null}}function Xn(t,e,n){var i=t.diagram,r=t.startPoint,o=dt.alloc();o.assign(i.lastInput.documentPoint),t.moveParts(e,o.ce(r),n),dt.free(o),!0===i.Ge("temporaryPixelRatio")&&null===i.wh&&30<i.Wx&&(Rr(i),i.Vq())}function Kn(t){if(null!==t.draggedParts){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var i=n.key;i.Lc()&&(i.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if((i=n.key)instanceof Qu&&i.suspendsRouting){var r=n.value.point;t.draggedParts.add(i,t.yd()),nc(i,-r.x,-r.y)}e.dd()}}function Wn(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Qn(t,!1));var i=t.findDragOverObject(e),r=n.lastInput;r.targetObject=i,t.doUpdateCursor(i);var o=n.skipsUndoManager,s=!1;try{if(n.skipsUndoManager=!0,s=$n(t,r,i),!t.isActive&&null===oi)return;var a=null!==i?i.part:null;if(null===a||n.handlesDragDropForTopLevelParts&&a.isTopLevel&&!(a instanceof Xu)){var l=n.mouseDragOver;null!==l&&(l(r),s=!0)}if(!t.isActive&&null===oi)return;if(t.doDragOver(e,i),!t.isActive&&null===oi)return}finally{n.skipsUndoManager=o,s&&n.dd()}t.xo=i,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Bt(r.viewPoint)}function $n(t,e,n){var i=!1,r=t.Wg.length,o=0<r?t.Wg[0]:null;if(n===o)return!1;e.handled=!1;for(var s=0;s<r;s++){var a=t.Wg[s],l=a.mouseDragLeave;if(null!==l&&(l(e,a,n),i=!0,e.handled))break}if(t.Wg.length=0,!t.isActive&&null===oi||null===n)return i;for(e.handled=!1,r=n;null!==r;)t.Wg.push(r),r=Zn(r);for(r=t.Wg.length,n=0;n<r&&(null===(a=(s=t.Wg[n]).mouseDragEnter)||(a(e,s,o),i=!0,!e.handled));n++);return i}function Zn(t){var e=t.panel;return null!==e?e:t instanceof ou&&!(t instanceof Xu)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function Jn(t,e,n){var i=t.pg;if(null===i)return null;var r=t.diagram.Eg(e,i.portGravity,function(t){return i.findValidLinkablePort(t,n)});t=dt.alloc();var o=1/0,s=null;for(r=r.iterator;r.next();){var a=r.value;if(null!==a.part){var l=a.ga(le,t);(l=e.Fe(l))<o&&(s=a,o=l)}}return dt.free(t),s}function Qn(t,e){var n=t.draggedLink;if(null!==n&&!(2>n.pointsCount)){var i=t.diagram;if(!i.isReadOnly){var r=t.pg;if(null!==r){var o=null,s=null;null===n.fromNode&&null!==(o=Jn(t,n.i(0),!1))&&(s=o.part);var a=null,l=null;null===n.toNode&&null!==(a=Jn(t,n.i(n.pointsCount-1),!0))&&(l=a.part),r.isValidLink(s,o,l,a)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=s,null!==o&&(n.fromPortId=o.portId),n.toNode=l,null!==a&&(n.toPortId=a.portId),n.fromPort!==i.Hy&&i.R("LinkRelinked",n,i.Hy),n.toPort!==i.Iy&&i.R("LinkRelinked",n,i.Iy)):yi(r,s,o,l,a):yi(r,null,null,null,null)}}}}function ti(t,e){var n=t.diagram;t.dragsLink&&Qn(t,!0),Un(t);var i=t.findDragOverObject(e),r=n.lastInput;if(r.targetObject=i,null!==i){r.handled=!1;for(var o=i;null!==o;){var s=o.mouseDrop;if(null!==s&&(s(r,o),r.handled))break;ei(t,r,o),o=Zn(o)}}else null!==(o=n.mouseDrop)&&o(r);if(t.isActive||null!==oi){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)(o=r.key)instanceof Tu&&o.linksConnected.each(function(t){t.suspendsRouting=!1});if(t.doDropOnto(e,i),t.isActive||null!==oi){for(t=Rt.alloc(),e=n.selection.iterator;e.next();)(i=e.value)instanceof Tu&&ni(n,i,t);Rt.free(t)}}}function ei(t,e,n){n=n.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof Xu||null!==(n=t.mouseDrop)&&n(e)}function ni(t,e,n){var i=!1;if(e.getAvoidableRect(n),t.viewportBounds.De(n)&&(i=!0),0!==(t=t.Qv(n,function(t){return t.part},function(t){return t instanceof Qu},!0,function(t){return t instanceof Qu},i)).count)for(t=t.iterator;t.next();)!(n=t.value).Ed(e)&&n.isAvoiding&&n.Ua()}function ii(t,e,n,i){if(null===t.copiedParts){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!n,r.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=r.nk(e,r,!0);var o=Rt.alloc();r=i=1/0;for(var s=-1/0,a=-1/0,l=e.iterator;l.next();){var h=l.value;if(h.isVisible()){var u=h.location;h=u.x,u=u.y,isNaN(h)||isNaN(u)||(h<i&&(i=h),u<r&&(r=u),h>s&&(s=h),u>a&&(a=u))}}for(1/0===i?o.h(0,0,0,0):o.h(i,r,s-i,a-r),i=o.x+o.width/2,r=o.y+o.height/2,Rt.free(o),o=t.et,s=new ft,a=dt.alloc(),l=e.iterator;l.next();)(h=l.value)instanceof Qu&&h.canCopy()&&null!==(u=n.H(h))&&(u.points=h.points,nc(u,o.x-i,o.y-r),u.suspendsRouting=!0,s.add(u,t.yd()));for(e=e.iterator;e.next();)(h=e.value).Lc()&&h.canCopy()&&null!==(l=n.H(h))&&(a.h(o.x-(i-(h=h.location).x),o.y-(r-h.y)),l.location=a,l.Ta(),s.add(l,t.yd(a)));dt.free(a),t.copiedParts=s,Vn(t,s.Jf()),null!==t.draggedLink&&nc(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2))}}}Ln.className="ToolManager",Ln.WheelScroll=Dn,Ln.WheelZoom=jn,Ln.WheelNone=Fn,Ln.GestureZoom=In,Ln.GestureCancel=Rn,Ln.GestureNone=Bn,u(zn,En),zn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.gl))&&null!==this.findDraggablePart()},zn.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.qm(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},zn.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.qm(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.R("ChangingSelection",t.selection),e=t.lastInput,(z?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.R("ChangedSelection",t.selection))}}},zn.prototype.doActivate=function(){var t=this.diagram;this.xo=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(oi=null,this.isActive=!0,this.$l.set(t.position),Vn(this,t.selection),this.Wg.length=0,t.animationManager.Oc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.iu=!0,!0===t.Ge("temporaryPixelRatio")&&30<t.Wx&&Rr(t),ko(t,this.draggedParts),this.va("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.On=!1,oi=this,si=this.diagram,this.doSimulatedDragOut()))},zn.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},zn.prototype.yd=function(t){return new Ss(void 0===t?xt:this.isGridSnapEnabled?new dt(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},zn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.If(),Un(this),So(t,this.draggedParts),this.draggedParts=this.currentPart=this.xo=null,this.On=this.isDragOutStarted=!1,0<ri.count){for(var e=ri,n=e.length,i=0;i<n;i++){var r=e.J(i);Yn(r),Gn(r),Un(r),r.diagram.If()}e.clear()}Yn(this),this.$l.h(NaN,NaN),oi=si=null,Gn(this),t.isMouseCaptured=!1,t.currentCursor="",t.iu=!1,this.Jg(),Br(t,!0)},zn.prototype.doCancel=function(){Gn(this),Kn(this);var t=this.diagram;this.$l.u()&&(t.position=this.$l),this.stopTool()},zn.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},zn.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},zn.prototype.moveParts=function(t,e,n){var i=this.diagram;null!==i&&bo(i,t,e,this.dragOptions,n)},zn.prototype.findDragOverObject=function(t){var e=this;return Wr(this.diagram,t,null,function(t){return!(t=null===t||!!(null===(t=t.part)||t instanceof Pu||t.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(t)||e.copiedParts&&e.copiedParts.contains(t)))})},zn.prototype.doUpdateCursor=function(t){var e=this.diagram;this.xo!==t&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))},zn.prototype.doDragOver=function(){},zn.prototype.doDropOnto=function(){},zn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Hn(this,!1),ko(t,this.copiedParts),Xn(this,this.copiedParts,!1),So(t,this.copiedParts)):this.mayMove()?(Gn(this),Xn(this,this.draggedParts,!0)):this.mayDragOut()?(Hn(this,!1),Xn(this,this.copiedParts,!1)):Gn(this),Wn(this,t.lastInput.documentPoint))}},zn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&null!==this.copiedParts?(Gn(this),Hn(this,!0),ko(t,this.copiedParts),Xn(this,this.copiedParts,!1),So(t,this.copiedParts),null!==this.copiedParts&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(t){t.isSelected=!0}))):(e=!0,Gn(this),this.mayMove()&&(Xn(this,this.draggedParts,!0),Wn(this,t.lastInput.documentPoint))),this.On=!0,ti(this,t.lastInput.documentPoint),this.isActive){var i=n?this.copiedParts.Jf():this.draggedParts.Jf();this.copiedParts=null,e&&function(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof Tu&&(null===(n=n.containingGroup)||null===n.placeholder||t.draggedParts.contains(n)||n.placeholder.o())}}(this),t.Oa(),So(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.R(n?"SelectionCopied":"SelectionMoved",i)}this.stopTool(),n&&t.R("ChangedSelection",t.selection)}}},zn.prototype.simulatedMouseMove=function(t,e,n){if(null===oi)return!1;var i=oi.diagram;n instanceof Dr||(n=null);var r=si;return n!==r&&(null!==r&&r!==i&&(r.If(),oi.isDragOutStarted=!1,null!==(r=r.toolManager.findTool("Dragging"))&&r.doSimulatedDragLeave()),si=n,null!==n&&n!==i&&(qn(),null!==(r=n.toolManager.findTool("Dragging"))&&(ri.contains(r)||ri.add(r),r.doSimulatedDragEnter()))),!(null===n||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert||(null!==(i=n.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.er(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),0))},zn.prototype.simulatedMouseUp=function(t,e,n){if(null===oi)return!1;var i=si,r=oi.diagram;if(null===n)return oi.doCancel(),!0;if(n!==i){var o=i.toolManager.findTool("Dragging");if(null!==i&&i!==r&&null!==o)return i.If(),oi.isDragOutStarted=!1,o.doSimulatedDragLeave(),!1;si=n,null!==(i=n.toolManager.findTool("Dragging"))&&(qn(),ri.contains(i)||ri.add(i),i.doSimulatedDragEnter())}return n!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new dt),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.er(e),n.lastInput.down=!1,n.lastInput.up=!0,null!==(t=n.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=oi)&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0)},zn.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(z?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},zn.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},zn.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},zn.prototype.computeBorder=function(t,e,n){return this.On||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},zn.prototype.gA=function(){return oi},zn.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&null!==oi&&oi.diagram.model.dataFormat===t.model.dataFormat},zn.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Oc(),oo(t),t.animationManager.Oc(),null!==oi&&(oi.diagram.iu=!1),this.doUpdateCursor(t.grid)}},zn.prototype.doSimulatedDragLeave=function(){null!==oi&&oi.doSimulatedDragOut(),this.doCancel()},zn.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.on=!0;var e=oi;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;ii(this,e.draggedParts.Jf(),!1,t.firstInput),Xn(this,this.copiedParts,!1),Wn(this,t.lastInput.documentPoint)}t.animationManager.on=!1},zn.prototype.doSimulatedDrop=function(){var t=this.diagram,e=oi;if(null!==e){var n=e.diagram;if(e.On=!0,Gn(this),!this.mayDragIn())return;t.animationManager.on=!0,t.R("ChangingSelection",t.selection),this.va("Drop"),ii(this,e.draggedParts.Jf(),!0,t.lastInput),Xn(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(t){t.isSelected=!0})),ti(this,t.lastInput.documentPoint),t.Oa(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new nt,this.copiedParts=null,t.doFocus(),t.R("ExternalObjectsDropped",e,n),this.Jg(),t.R("ChangedSelection",t.selection)}t.animationManager.on=!1},zn.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.iu=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.xo=null},zn.prototype.computeMove=function(t,e,n,i){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,i):new dt},c.Object.defineProperties(zn.prototype,{isCopyEnabled:{get:function(){return this.Rc},set:function(t){this.Rc=t}},copiesEffectiveCollection:{get:function(){return this.I},set:function(t){this.I=t}},dragOptions:{get:function(){return this.Ka},set:function(t){this.Ka=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Ac},set:function(t){this.Ac=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.w(t)||(t=t.G(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.T},set:function(t){this.T=t}},moveCursor:{get:function(){return this.Uh},set:function(t){this.Uh=t}},nodropCursor:{get:function(){return this.Vh},set:function(t){this.Vh=t}},currentPart:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiedParts:{get:function(){return this.v},set:function(t){this.v=t}},draggedParts:{get:function(){return this.cb},set:function(t){this.cb=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Jf():null!==this.draggedParts?this.draggedParts.Jf():this.jr}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Jd},set:function(t){this.Jd=t}},startPoint:{get:function(){return this.et},set:function(t){this.et.w(t)||this.et.assign(t)}},delay:{get:function(){return this.gl},set:function(t){this.gl=t}}}),zn.prototype.getDraggingSource=zn.prototype.gA;var ri=null,oi=null,si=null;function ai(){En.call(this),this.Vh=100,this.Ka=!1,this.mi="pointer";var t=new Qu,e=new ih;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new ih).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.$w=t,t=new Tu,(e=new ih).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Pt,t.add(e),t.selectable=!1,t.layerName="Tool",this.Zw=t,this.l=e,t=new Tu,(e=new ih).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Pt,t.add(e),t.selectable=!1,t.layerName="Tool",this.ax=t,this.v=e,this.Uh=this.Jd=this.Ac=this.cb=this.Rc=null,this.Ja=!0,this.$y=new ft,this.jr=this.Fi=this.Yw=null}function li(t,e,n,i){if(e===n)return!0;var r=e.fromNode;return!(null===r||!r.isLinkLabel||(i.add(r),!li(t,r.labeledLink,n,i)))||!(null===(e=e.toNode)||!e.isLinkLabel||(i.add(e),!li(t,e.labeledLink,n,i)))}function hi(t,e,n,i,r){if(e===n)return!0;if(null===e||null===n)return!1;for(var o=e.linksConnected;o.next();){var s=o.value;if(s!==i&&(!r||s.isTreeLink)&&s.toNode===e&&(s=s.fromNode)!==e&&hi(t,s,n,i,r))return!0}return!1}function ui(t,e,n,i,r){if(n===i)return!0;if(null===n||null===i||e.contains(n))return!1;e.add(n);for(var o=n.linksConnected;o.next();){var s=o.value;if(s!==r&&s.toNode===n&&(s=s.fromNode)!==n&&ui(t,e,s,i,r))return!0}return!1}function ci(t,e,n,i,r){if(n===i)return!0;if(null===n||null===i||e.contains(n))return!1;e.add(n);for(var o=n.linksConnected;o.next();){var s=o.value;if(s!==r){var a=s.fromNode;if(s=s.toNode,(a=a===n?s:a)!==n&&ci(t,e,a,i,r))return!0}}return!1}function fi(){ai.call(this),this.name="Linking",this.T={},this.I=null,this.K=di,this.Zm=null}zn.className="DraggingTool",ri=new tt,O("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Xa("Dragging",t,this.mouseMoveTools)}),Ln.prototype.doCancel=function(){null!==oi&&oi.doCancel(),En.prototype.doCancel.call(this)},u(ai,En),ai.prototype.doStop=function(){this.diagram.If(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},ai.prototype.copyPortProperties=function(t,e,n,i,r){if(null!==t&&null!==e&&null!==n&&null!==i){var o=e.Af(),s=Dt.alloc();s.width=e.naturalBounds.width*o,s.height=e.naturalBounds.height*o,i.desiredSize=s,Dt.free(s),r?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=le,o=dt.alloc(),n.location=e.ga(le,o),dt.free(o),i.angle=e.jj(),null!==this.portTargeted&&this.portTargeted(t,e,n,i,r)}},ai.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=Pt,e.fromSpot=ie,e.toSpot=ie),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},ai.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},ai.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof Tu){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Bt(t.lastInput.viewPoint)}},ai.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof Tu))return null;for(;null!==t;){var i=e?t.toLinkable:t.fromLinkable;if(!0===i&&(null!==t.portId||t instanceof Tu)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===i)break;t=t.panel}return null},ai.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,i=this.portGravity;0>=i&&(i=.1);var r=this,o=e.Eg(n,i,function(e){return r.findValidLinkablePort(e,t)},null,!0);for(i=1/0,e=null,o=o.iterator;o.next();){var s=o.value,a=s.part;if(a instanceof Tu){var l=s.ga(le,dt.alloc()),h=n.x-l.x,u=n.y-l.y;dt.free(l),(l=h*h+u*u)<i&&(null!==(h=this.validPortsCache.H(s))?h&&(e=s,i=l):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,a,s)||!t&&this.isValidLink(a,s,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(s,!0),e=s,i=l):this.validPortsCache.add(s,!1))}}return null!==e&&(n=e.part)instanceof Tu&&(null===n.layer||n.layer.allowLink)?e:null},ai.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.zq(e).count>=n)return!1}return!0},ai.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Cd(e).count>=n)return!1}return!0},ai.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},ai.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof Tu))return!1;null===(t=t.portId)&&(t="");var i=e.part;if(!(i instanceof Tu))return!1;for(null===(e=e.portId)&&(e=""),e=i.Cd(e);e.next();)if((i=e.value).fromNode===n&&i.fromPortId===t)return!0;return!1},ai.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(null===e||null===i||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var r=t.linkValidation;if(null!==r&&!r(t,e,n,i,this.originalLink))return!1}return!(null!==n&&null!==(r=n.linkValidation)&&!r(t,e,n,i,this.originalLink))&&(null===(r=this.linkValidation)||r(t,e,n,i,this.originalLink))},ai.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var i=new nt;return i.add(t),li(this,n,e,i)},ai.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==is){if(i===as){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var r=i.value;if(r!==n&&r.isTreeLink&&r.toNode===e)return!1}return!hi(this,t,e,n,!0)}if(i===ls){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if((r=i.value)!==n&&r.isTreeLink&&r.fromNode===t)return!1;return!hi(this,t,e,n,!0)}if(i===rs)return t===e?t=!0:((i=new nt).add(e),t=ui(this,i,t,e,n)),!t;if(i===os)return!hi(this,t,e,n,!1);if(i===ss)return t===e?t=!0:((i=new nt).add(e),t=ci(this,i,t,e,n)),!t}return!0},c.Object.defineProperties(ai.prototype,{portGravity:{get:function(){return this.Vh},set:function(t){0<=t&&(this.Vh=t)}},isUnconnectedLinkValid:{get:function(){return this.Ka},set:function(t){this.Ka=t}},linkingCursor:{get:function(){return this.mi},set:function(t){this.mi=t}},temporaryLink:{get:function(){return this.$w},set:function(t){this.$w=t}},temporaryFromNode:{get:function(){return this.Zw},set:function(t){(this.Zw=t)&&(this.l=t.port)}},temporaryFromPort:{get:function(){return this.l},set:function(t){if(null!==this.l){var e=this.l.panel;if(null!==e){var n=e.W.indexOf(this.l);e.bb(n),e.vb(n,t)}}this.l=t}},temporaryToNode:{get:function(){return this.ax},set:function(t){(this.ax=t)&&(this.v=t.port)}},temporaryToPort:{get:function(){return this.v},set:function(t){if(null!==this.v){var e=this.v.panel;if(null!==e){var n=e.W.indexOf(this.v);e.bb(n),e.vb(n,t)}}this.v=t}},originalLink:{get:function(){return this.Rc},set:function(t){this.Rc=t}},originalFromNode:{get:function(){return this.cb},set:function(t){this.cb=t}},originalFromPort:{get:function(){return this.Ac},set:function(t){this.Ac=t}},originalToNode:{get:function(){return this.Jd},set:function(t){this.Jd=t}},originalToPort:{get:function(){return this.Uh},set:function(t){this.Uh=t}},isForwards:{get:function(){return this.Ja},set:function(t){this.Ja=t}},validPortsCache:{get:function(){return this.$y}},targetPort:{get:function(){return this.Yw},set:function(t){this.Yw=t}},linkValidation:{get:function(){return this.Fi},set:function(t){this.Fi=t}},portTargeted:{get:function(){return this.jr},set:function(t){this.jr=t}}}),ai.className="LinkingBaseTool",u(fi,ai),fi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Qt()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},fi.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Ub(t.firstInput.documentPoint,null,null)),null===e||!(e.part instanceof Tu))return null;if((t=this.direction)===di||t===pi){var n=this.findValidLinkablePort(e,!1);if(null!==n)return this.isForwards=!0,n}return t!==di&&t!==gi||null===(e=this.findValidLinkablePort(e,!0))?null:(this.isForwards=!1,e)},fi.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null!==e&&(this.va(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof Tu&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof Tu&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0)},fi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Jg()},fi.prototype.doStop=function(){ai.prototype.doStop.call(this),this.startObject=null},fi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.transactionResult=null,n=null,i=null,r=null,o=null;try{var s=this.targetPort=this.findTargetPort(this.isForwards);if(null!==s){var a=s.part;a instanceof Tu&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),i=a,r=s):(e=a,n=s,null!==this.originalToNode&&(i=this.originalToNode,r=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(i=this.originalToNode,r=this.originalToPort);null!==e||null!==i?null!==(o=this.insertLink(e,n,i,r))?(null===s&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),o.isSelected=!0),this.transactionResult=this.name,t.R("LinkDrawn",o)):this.doNoLink(e,n,i,r):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),o&&t.allowSelect&&t.R("ChangedSelection",t.selection)}}},fi.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof Qu)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},fi.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},fi.prototype.doNoLink=function(){},c.Object.defineProperties(fi.prototype,{archetypeLinkData:{get:function(){return this.T},set:function(t){this.T=t}},archetypeLabelNodeData:{get:function(){return this.I},set:function(t){this.I=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Zm},set:function(t){this.Zm=t}}});var di=new H(fi,"Either",0),pi=new H(fi,"ForwardsOnly",0),gi=new H(fi,"BackwardsOnly",0);function mi(){ai.call(this),this.name="Relinking";var t=new ih;t.figure="Diamond",t.desiredSize=Nt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.T=t,(t=new ih).figure="Diamond",t.desiredSize=Nt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Zm=t,this.I=null,this.Ex=new Rt}function yi(t,e,n,i,r){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==i?(t.copyPortProperties(i,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function vi(){En.call(this),this.name="LinkReshaping";var t=new ih;t.figure="Rectangle",t.desiredSize=Tt,t.fill="lightblue",t.stroke="dodgerblue",this.v=t,(t=new ih).figure="Diamond",t.desiredSize=Nt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.I=t,this.T=3,this.ru=this.l=null,this.Fx=new dt,this.Gs=new tt}function bi(t,e,n,i,r,o){return o?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-r.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-r.x)<t.resegmentingDistance}fi.className="LinkingTool",fi.Either=di,fi.ForwardsOnly=pi,fi.BackwardsOnly=gi,u(mi,ai),mi.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Qu){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.selectionObject;null!==i&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Ff()&&null===(n=t.rk(e))&&(n=this.makeAdornment(i,!1),t.Eh(e,n))}null===n&&t.Gf(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(i=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Ff()&&(null===(n=t.rk(e))?(n=this.makeAdornment(i,!0),t.Eh(e,n)):n.o()),null===n&&t.Gf(e)}},mi.prototype.makeAdornment=function(t,e){var n=new Pu;return n.type=Ml.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},mi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Qt()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},mi.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var n=e.part;if(!(n instanceof Pu&&n.adornedPart instanceof Qu))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.va(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Ex.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=Mt),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=Mt),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0},mi.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;n!==Tc&&n!==Pc||(n=Cc),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},mi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Jg()},mi.prototype.doStop=function(){ai.prototype.doStop.call(this),this.handle=null},mi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,r=this.originalToPort,o=this.originalLink;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var s=this.targetPort.part;s instanceof Tu&&(this.isForwards?(i=s,r=this.targetPort):(e=s,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=i=null:n=e=null:o=null;null!==o?(this.reconnectLink(o,this.isForwards?i:e,this.isForwards?r:n,this.isForwards),null===this.targetPort&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint,o.Ua()),t.allowSelect&&(o.isSelected=!0),this.transactionResult=this.name,t.R("LinkRelinked",o,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Jq(this.Ex)}this.stopTool()},mi.prototype.reconnectLink=function(t,e,n,i){return n=null!==n&&null!==n.portId?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},mi.prototype.doNoRelink=function(){},c.Object.defineProperties(mi.prototype,{fromHandleArchetype:{get:function(){return this.T},set:function(t){this.T=t}},toHandleArchetype:{get:function(){return this.Zm},set:function(t){this.Zm=t}},handle:{get:function(){return this.I},set:function(t){if(null!==t&&!(t.part instanceof Pu))throw Error("new handle is not in an Adornment: "+t);this.I=t}}}),mi.className="RelinkingTool",O("linkingTool",function(){return this.findTool("Linking")},function(t){this.Xa("Linking",t,this.mouseMoveTools)}),O("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Xa("Relinking",t,this.mouseDownTools)}),u(vi,En),vi.prototype.Uv=function(t){return t&&t.Ns&&0!==t.Ns.value?t.Ns:wi},vi.prototype.Sm=function(t,e){t.Ns=e},vi.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Qu){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;null!==n&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Ff()&&(null===(e=t.rk(this.name))||e.Ax!==t.pointsCount||e.Px!==t.resegmentable)&&null!==(e=this.makeAdornment(n))&&(e.Ax=t.pointsCount,e.Px=t.resegmentable,t.Eh(this.name,e))}null===e&&t.Gf(this.name)}},vi.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,r=null;if(null!==e.points&&1<n){(r=new Pu).type=Ml.Link,n=e.firstPickIndex;var o=e.lastPickIndex,s=i?1:0;if(e.resegmentable&&e.computeCurve()!==Mc)for(var a=n+s;a<o-s;a++){var l=this.makeResegmentHandle(t,a);null!==l&&(l.segmentIndex=a,l.segmentFraction=.5,l.fromMaxLinks=999,r.add(l))}for(s=n+1;s<o;s++)if(null!==(a=this.makeHandle(t,s))){if(a.segmentIndex=s,s!==n)if(s===n+1&&i){l=e.i(n);var h=e.i(n+1);Xe.A(l.x,h.x)&&Xe.A(l.y,h.y)&&(h=e.i(n-1)),Xe.A(l.x,h.x)?(this.Sm(a,ki),a.cursor="n-resize"):Xe.A(l.y,h.y)&&(this.Sm(a,xi),a.cursor="w-resize")}else s===o-1&&i?(l=e.i(o-1),h=e.i(o),Xe.A(l.x,h.x)&&Xe.A(l.y,h.y)&&(l=e.i(o+1)),Xe.A(l.x,h.x)?(this.Sm(a,ki),a.cursor="n-resize"):Xe.A(l.y,h.y)&&(this.Sm(a,xi),a.cursor="w-resize")):s!==o&&(this.Sm(a,Si),a.cursor="move");r.add(a)}r.adornedObject=t}return r},vi.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},vi.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},vi.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof Qu){if(this.ru=e,t.isMouseCaptured=!0,this.va(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.vb(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.vb(this.handle.segmentIndex+1,i),e.points=n,e.Lb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.Fx=e.i(this.handle.segmentIndex),this.Gs=e.points.copy(),this.isActive=!0}}},vi.prototype.doDeactivate=function(){this.Jg(),this.ru=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},vi.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Gs),this.stopTool()},vi.prototype.getResegmentingPoint=function(){return this.handle.ga(le)},vi.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},vi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var n=this.handle.segmentIndex,i=e.i(n-1),r=e.i(n),o=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var s=e.i(n-2);if(Math.abs(i.x-r.x)<this.resegmentingDistance&&Math.abs(i.y-r.y)<this.resegmentingDistance&&(bi(this,s,i,r,o,!0)||bi(this,s,i,r,o,!1))){var a=e.points.copy();bi(this,s,i,r,o,!0)?(a.Nc(n-2,new dt(s.x,(o.y+s.y)/2)),a.Nc(n+1,new dt(o.x,(o.y+s.y)/2))):(a.Nc(n-2,new dt((o.x+s.x)/2,s.y)),a.Nc(n+1,new dt((o.x+s.x)/2,o.y))),a.bb(n),a.bb(n-1),e.points=a,e.Lb()}else s=e.i(n+2),Math.abs(r.x-o.x)<this.resegmentingDistance&&Math.abs(r.y-o.y)<this.resegmentingDistance&&(bi(this,i,r,o,s,!0)||bi(this,i,r,o,s,!1))&&(a=e.points.copy(),bi(this,i,r,o,s,!0)?(a.Nc(n-1,new dt(i.x,(i.y+s.y)/2)),a.Nc(n+2,new dt(s.x,(i.y+s.y)/2))):(a.Nc(n-1,new dt((i.x+s.x)/2,i.y)),a.Nc(n+2,new dt((i.x+s.x)/2,s.y))),a.bb(n+1),a.bb(n),e.points=a,e.Lb())}}else s=dt.alloc(),Xe.Oh(i.x,i.y,o.x,o.y,r.x,r.y,s)&&s.Fe(r)<this.resegmentingDistance*this.resegmentingDistance&&((i=e.points.copy()).bb(n),e.points=i,e.Lb()),dt.free(s)}t.Oa(),this.transactionResult=this.name,t.R("LinkReshaped",this.adornedLink,this.Gs)}this.stopTool()},vi.prototype.reshape=function(t){var e=this.adornedLink;e.Rh();var n=this.handle.segmentIndex,i=this.Uv(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,i===ki?(e.L(n,e.i(n-1).x,t.y),e.L(n+1,e.i(n+2).x,t.y)):i===xi&&(e.L(n,t.x,e.i(n-1).y),e.L(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,i===ki?(e.L(n-1,e.i(n-2).x,t.y),e.L(n,e.i(n+1).x,t.y)):i===xi&&(e.L(n-1,t.x,e.i(n-2).y),e.L(n,t.x,e.i(n+1).y));else{var r=e.i(i=n),o=e.i(i-1),s=e.i(i+1);Xe.A(o.x,r.x)&&Xe.A(r.y,s.y)?(Xe.A(o.x,e.i(i-2).x)&&!Xe.A(o.y,e.i(i-2).y)?(e.m(i,t.x,o.y),n++,i++):e.L(i-1,t.x,o.y),Xe.A(s.y,e.i(i+2).y)&&!Xe.A(s.x,e.i(i+2).x)?e.m(i+1,s.x,t.y):e.L(i+1,s.x,t.y)):Xe.A(o.y,r.y)&&Xe.A(r.x,s.x)?(Xe.A(o.y,e.i(i-2).y)&&!Xe.A(o.x,e.i(i-2).x)?(e.m(i,o.x,t.y),n++,i++):e.L(i-1,o.x,t.y),Xe.A(s.x,e.i(i+2).x)&&!Xe.A(s.y,e.i(i+2).y)?e.m(i+1,t.x,s.y):e.L(i+1,t.x,s.y)):Xe.A(o.x,r.x)&&Xe.A(r.x,s.x)?(Xe.A(o.x,e.i(i-2).x)&&!Xe.A(o.y,e.i(i-2).y)?(e.m(i,t.x,o.y),n++,i++):e.L(i-1,t.x,o.y),Xe.A(s.x,e.i(i+2).x)&&!Xe.A(s.y,e.i(i+2).y)?e.m(i+1,t.x,s.y):e.L(i+1,t.x,s.y)):Xe.A(o.y,r.y)&&Xe.A(r.y,s.y)&&(Xe.A(o.y,e.i(i-2).y)&&!Xe.A(o.x,e.i(i-2).x)?(e.m(i,o.x,t.y),n++,i++):e.L(i-1,o.x,t.y),Xe.A(s.y,e.i(i+2).y)&&!Xe.A(s.x,e.i(i+2).x)?e.m(i+1,s.x,t.y):e.L(i+1,s.x,t.y)),e.L(n,t.x,t.y)}else e.L(n,t.x,t.y),r=e.fromPort,null!==(i=e.fromNode)&&null!==(o=i.findVisibleNode())&&o!==i&&(r=(i=o).port),1===n&&e.computeSpot(!0,r).lc()&&(o=r.ga(le,dt.alloc()),i=e.getLinkPointFromPoint(i,r,o,t,!0,dt.alloc()),e.L(0,i.x,i.y),dt.free(o),dt.free(i)),r=e.toPort,null!==(i=e.toNode)&&null!==(o=i.findVisibleNode())&&o!==i&&(r=(i=o).port),n===e.pointsCount-2&&e.computeSpot(!1,r).lc()&&(n=r.ga(le,dt.alloc()),t=e.getLinkPointFromPoint(i,r,n,t,!1,dt.alloc()),e.L(e.pointsCount-1,t.x,t.y),dt.free(n),dt.free(t));e.xf()},vi.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.Uv(this.handle)){case Si:return t;case ki:return new dt(e.i(n).x,t.y);case xi:return new dt(t.x,e.i(n).y);default:case wi:return e.i(n)}},c.Object.defineProperties(vi.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},midHandleArchetype:{get:function(){return this.I},set:function(t){this.I=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Pu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedLink:{get:function(){return this.ru}},resegmentingDistance:{get:function(){return this.T},set:function(t){this.T=t}},originalPoint:{get:function(){return this.Fx}},originalPoints:{get:function(){return this.Gs}}}),vi.prototype.setReshapingBehavior=vi.prototype.Sm,vi.prototype.getReshapingBehavior=vi.prototype.Uv;var wi=new H(vi,"None",0),xi=new H(vi,"Horizontal",1),ki=new H(vi,"Vertical",2),Si=new H(vi,"All",3);function _i(){En.call(this),this.name="Resizing",this.fg=new Dt(1,1).freeze(),this.eg=new Dt(9999,9999).freeze(),this.Qg=new Dt(NaN,NaN).freeze(),this.I=!1,this.T=!0,this.ee=null;var t=new ih;t.alignmentFocus=le,t.figure="Rectangle",t.desiredSize=Tt,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Fs=new dt,this.Cx=new Dt,this.ip=new dt,this.Iu=new Dt(0,0),this.Hu=new Dt(1/0,1/0),this.Gu=new Dt(1,1),this.zx=!0}function Ci(){En.call(this),this.name="Rotating",this.Ka=45,this.Ja=2,this.ip=new dt,this.ee=null;var t=new ih;t.figure="Ellipse",t.desiredSize=Nt,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Bx=0,this.iv=new dt(NaN,NaN),this.I=0,this.T=50}function Mi(){En.call(this),this.name="ClickSelecting"}function Pi(){En.call(this),this.name="Action",this.Nk=null}function Ti(){En.call(this),this.name="ClickCreating",this.vj=null,this.v=!0,this.l=!1,this.tx=new dt(0,0)}function Ni(){En.call(this),this.name="DragSelecting",this.gl=175,this.v=!1;var t=new ou;t.layerName="Tool",t.selectable=!1;var e=new ih;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.l=t}function Ai(){En.call(this),this.name="Panning",this.fv=new dt,this.gz=new dt,this.Pg=!1;var t=this;this.Ix=function(){var e=t.diagram;null!==e&&e.removeEventListener(d.document,"scroll",t.Ix,!1),t.stopTool()}}function Ei(){this.T=this.I=this.l=this.v=null}function Li(t,e,n){this.text=t,this.$x=e,this.visible=n}function Oi(){En.call(this),this.name="ContextMenu",this.v=this.xu=this.l=null,this.yx=new dt,this.yu=null,this.Tu=!1;var t=this;this.sv=function(){t.stopTool()}}function Di(t){return t.preventDefault(),!1}function ji(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(null!==n){if(!(n instanceof Ei)){var i=e.Ub(e.lastInput.documentPoint,null,null);null!==i&&i.Gg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(Fi(t,!0),t.isActive||t.stopTool())}function Fi(t,e,n){if(void 0===n&&(n=null),!t.Tu&&(t.Tu=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Tu=!1,!e)){if(t.isActive=!0,e=Ii,null===n&&(n=t.findObjectWithContextMenu()),null!==n){var i=n.contextMenu;null!==i?(t.currentObject=n instanceof Ys?n:null,t.showContextMenu(i,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof Pu&&!t.currentContextMenu.visible&&t.stopTool()}}vi.className="LinkReshapingTool",vi.None=wi,vi.Horizontal=xi,vi.Vertical=ki,vi.All=Si,O("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Xa("LinkReshaping",t,this.mouseDownTools)}),u(_i,En),_i.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Qu)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.rk(this.name);if(null!==e&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()&&(null!==n&&n.adornedObject===e||(n=this.makeAdornment(e)),null!==n))return e=e.jj(),bu(t)&&this.updateResizeHandles(n,e),void t.Eh(this.name,n)}t.Gf(this.name)}},_i.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new Pu).type=Ml.Spot,e.locationSpot=le;var n=new Ju;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,re)),e.add(this.makeHandle(t,se)),e.add(this.makeHandle(t,fe)),e.add(this.makeHandle(t,ue)),e.add(this.makeHandle(t,Oe)),e.add(this.makeHandle(t,je)),e.add(this.makeHandle(t,Fe)),e.add(this.makeHandle(t,De))}else if(ql(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},_i.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},_i.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Mb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.lc()&&(n=le),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else{if(!(1<=n.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof Ml)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},_i.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},_i.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,this.zx=t.animationManager.isEnabled,t.animationManager.isEnabled=!1,this.va(this.name),this.Fs.set(this.adornedObject.ga(this.handle.alignment.gw())),this.ip.set(this.adornedObject.part.location),this.Cx.set(this.adornedObject.desiredSize),this.Gu=this.computeCellSize(),this.Iu=this.computeMinSize(),this.Hu=this.computeMaxSize(),this.isActive=!0))},_i.prototype.doDeactivate=function(){var t=this.diagram;this.Jg(),this.ee=this.handle=null,this.isActive=t.isMouseCaptured=!1,t.animationManager.isEnabled=this.zx},_i.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},_i.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Iu,n=this.Hu,i=this.Gu,r=this.adornedObject.Jt(t.lastInput.documentPoint,dt.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,n,i,o),this.resize(e),t.dd(),dt.free(r)}},_i.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Iu,n=this.Hu,i=this.Gu,r=this.adornedObject.Jt(t.lastInput.documentPoint,dt.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,n,i,o),this.resize(e),dt.free(r),t.Oa(),this.transactionResult=this.name,t.R("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},_i.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(null!==n){if(n.desiredSize=t.size,(t=n.part).Ta(),n=n.ga(this.handle.alignment.gw()),t instanceof Xu){var i=new tt;if(i.add(t),!this.dragsMembers&&null===t.placeholder){var r=new Fs;r.dragsMembers=!1}e.moveParts(i,this.oppositePoint.copy().ce(n),!0,r)}else t.location=t.location.copy().ce(n).add(this.oppositePoint);e.dd()}},_i.prototype.computeResize=function(t,e,n,i,r,o){e.lc()&&(e=le);var s=this.adornedObject.naturalBounds,a=s.x,l=s.y,h=s.x+s.width,u=s.y+s.height,c=1;if(!o){var f=s.height;0>=(c=s.width)&&(c=1),0>=f&&(f=1),c=f/c}return f=dt.alloc(),Xe.Aq(t.x,t.y,a,l,r.width,r.height,f),t=s.copy(),0>=e.x?0>=e.y?(t.x=Math.max(f.x,h-i.width),t.x=Math.min(t.x,h-n.width),t.width=Math.max(h-t.x,n.width),t.y=Math.max(f.y,u-i.height),t.y=Math.min(t.y,u-n.height),t.height=Math.max(u-t.y,n.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.x=h-t.width,t.y=u-t.height)):1<=e.y?(t.x=Math.max(f.x,h-i.width),t.x=Math.min(t.x,h-n.width),t.width=Math.max(h-t.x,n.width),t.height=Math.max(Math.min(f.y-l,i.height),n.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.x=h-t.width)):(t.x=Math.max(f.x,h-i.width),t.x=Math.min(t.x,h-n.width),t.width=h-t.x,o||(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c,t.y=l+.5*(u-l-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(f.x-a,i.width),n.width),t.y=Math.max(f.y,u-i.height),t.y=Math.min(t.y,u-n.height),t.height=Math.max(u-t.y,n.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.y=u-t.height)):1<=e.y?(t.width=Math.max(Math.min(f.x-a,i.width),n.width),t.height=Math.max(Math.min(f.y-l,i.height),n.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width))):(t.width=Math.max(Math.min(f.x-a,i.width),n.width),o||(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c,t.y=l+.5*(u-l-t.height))):0>=e.y?(t.y=Math.max(f.y,u-i.height),t.y=Math.min(t.y,u-n.height),t.height=u-t.y,o||(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width,t.x=a+.5*(h-a-t.width))):1<=e.y&&(t.height=Math.max(Math.min(f.y-l,i.height),n.height),o||(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width,t.x=a+.5*(h-a-t.width))),dt.free(f),t},_i.prototype.computeReshape=function(){var t=Cs;return this.adornedObject instanceof ih&&(t=oh(this.adornedObject)),!(t===Ms||this.diagram.lastInput.shift)},_i.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},_i.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},_i.prototype.computeCellSize=function(){var t=new Dt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},c.Object.defineProperties(_i.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Pu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ee},set:function(t){if(null!==t&&t.part instanceof Pu)throw Error("new handle must not be in an Adornment: "+t);this.ee=t}},minSize:{get:function(){return this.fg},set:function(t){if(!this.fg.w(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.fg.h(e,t)}}},maxSize:{get:function(){return this.eg},set:function(t){if(!this.eg.w(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.eg.h(e,t)}}},cellSize:{get:function(){return this.Qg},set:function(t){this.Qg.w(t)||this.Qg.assign(t)}},isGridSnapEnabled:{get:function(){return this.I},set:function(t){this.I=t}},dragsMembers:{get:function(){return this.T},set:function(t){this.T=t}},oppositePoint:{get:function(){return this.Fs},set:function(t){this.Fs.w(t)||this.Fs.assign(t)}},originalDesiredSize:{get:function(){return this.Cx}},originalLocation:{get:function(){return this.ip}}}),_i.className="ResizingTool",O("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Xa("Resizing",t,this.mouseDownTools)}),u(Ci,En),Ci.prototype.updateAdornments=function(t){if(null!==t){if(t.Nh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()){var n=t.rk(this.name);if(null!==n&&n.adornedObject===e||(n=this.makeAdornment(e)),null!==n)return n.angle=e.jj(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.Eh(this.name,n)}t.Gf(this.name)}},Ci.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new Pu).type=Ml.Position,e.locationSpot=le;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(ql(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Ci.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Ci.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.va(this.name),this.Bx=this.adornedObject.angle,this.iv=this.computeRotationPoint(this.adornedObject),this.ip=this.adornedObject.part.location.copy(),this.isActive=!0)},Ci.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.jb()?t.ga(e.rotationSpot):t===e||t===n?n.ga(e.locationSpot):t.ga(le)},Ci.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.Jt(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+i:45===n?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):90===n?e.y=t.naturalBounds.height+i:135===n?(e.x=-i,e.y=t.naturalBounds.height+i):180===n?e.x=-i:225===n?(e.x=-i,e.y=-i):270===n?e.y=-i:315===n&&(e.x=t.naturalBounds.width+i,e.y=-i),t.ga(e)},Ci.prototype.doDeactivate=function(){var t=this.diagram;this.Jg(),this.ee=this.handle=null,this.iv=new dt(NaN,NaN),this.isActive=t.isMouseCaptured=!1},Ci.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},Ci.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},Ci.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Oa(),this.transactionResult=this.name,t.R("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},Ci.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Ta();var n=e.locationObject,i=e.rotateObject;(n===i||n.Gg(i))&&(n=this.ip.copy(),e.location=n.ce(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.dd()}},Ci.prototype.computeRotate=function(t){t=this.rotationPoint.Sa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.jj()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},c.Object.defineProperties(Ci.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Pu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ee},set:function(t){if(null!==t&&t.part instanceof Pu)throw Error("new handle must not be in an Adornment: "+t);this.ee=t}},snapAngleMultiple:{get:function(){return this.Ka},set:function(t){this.Ka=t}},snapAngleEpsilon:{get:function(){return this.Ja},set:function(t){this.Ja=t}},originalAngle:{get:function(){return this.Bx}},rotationPoint:{get:function(){return this.iv}},handleAngle:{get:function(){return this.I},set:function(t){this.I=t}},handleDistance:{get:function(){return this.T},set:function(t){this.T=t}}}),Ci.className="RotatingTool",O("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Xa("Rotating",t,this.mouseDownTools)}),u(Mi,En),Mi.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Mi.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Mi.className="ClickSelectingTool",u(Pi,En),Pi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.Ub(e.documentPoint,function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t});return null!==n&&!!n.isActionable&&(this.Nk=n,t.zj=t.Ub(e.documentPoint,null,null),!0)},Pi.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Nk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Pi.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Nk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},Pi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Nk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(t){for(;null!==t.panel&&(!t.isActionable||t!==e);)t=t.panel;return t},function(t){return t===e})}this.stopTool()},Pi.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.Nk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},Pi.prototype.doStop=function(){this.Nk=null},Pi.className="ActionTool",u(Ti,En),Ti.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.tx=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.tx))return!1}else if(1!==t.lastInput.clickCount)return!1;return t.currentTool===this||null===t.qm(t.lastInput.documentPoint,!0)},Ti.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},Ti.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;var i=null;try{if(e.R("ChangingSelection",e.selection),this.va(this.name),n instanceof ou)n.Lc()&&(ql(n),null!==(i=n.copy())&&e.add(i));else if(null!==n){var r=e.model.copyNodeData(n);S(r)&&(e.model.uf(r),i=e.xc(r))}if(null!==i){var o=dt.allocAt(t.x,t.y);this.isGridSnapEnabled&&xo(this.diagram,i,t,o),i.location=o,e.allowSelect&&(e.clearSelection(!0),i.isSelected=!0),dt.free(o)}e.Oa(),this.transactionResult=this.name,e.R("PartCreated",i)}finally{this.Jg(),e.R("ChangedSelection",e.selection)}return i},c.Object.defineProperties(Ti.prototype,{archetypeNodeData:{get:function(){return this.vj},set:function(t){this.vj=t}},isDoubleClick:{get:function(){return this.v},set:function(t){this.v=t}},isGridSnapEnabled:{get:function(){return this.l},set:function(t){this.l=t}}}),Ti.className="ClickCreatingTool",u(Ni,En),Ni.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.qm(e.documentPoint,!0)))},Ni.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Ni.prototype.doDeactivate=function(){var t=this.diagram;t.If(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Ni.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),n=this.box.$a("SHAPE");null===n&&(n=this.box.qb());var i=Dt.alloc().h(e.width,e.height);e=dt.allocAt(e.x,e.y),n.desiredSize=i,this.box.position=e,Dt.free(i),dt.free(e),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Bt(t.lastInput.viewPoint)}},Ni.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.R("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Ni.prototype.computeBoxBounds=function(){var t=this.diagram;return new Rt(t.firstInput.documentPoint,t.lastInput.documentPoint)},Ni.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.py(t,this.isPartialInclusion),z?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new tt,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},c.Object.defineProperties(Ni.prototype,{delay:{get:function(){return this.gl},set:function(t){this.gl=t}},isPartialInclusion:{get:function(){return this.v},set:function(t){this.v=t}},box:{get:function(){return this.l},set:function(t){this.l=t}}}),Ni.className="DragSelectingTool",u(Ai,En),Ai.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Ai.prototype.doActivate=function(){var t=this.diagram;this.Pg?(t.lastInput.bubbles=!0,t.addEventListener(d.document,"scroll",this.Ix,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.fv.assign(t.position)),this.isActive=!0},Ai.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Ai.prototype.doCancel=function(){var t=this.diagram;t.position=this.fv,t.isMouseCaptured=!1,this.stopTool()},Ai.prototype.doMouseMove=function(){this.move()},Ai.prototype.doMouseUp=function(){this.move(),this.stopTool()},Ai.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.Pg)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,i=t.lastInput.documentPoint,r=e.x+n.x-i.x;n=e.y+n.y-i.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.gz.h(r,n)}},c.Object.defineProperties(Ai.prototype,{bubbles:{get:function(){return this.Pg},set:function(t){this.Pg=t}},originalPosition:{get:function(){return this.fv}}}),Ai.className="PanningTool",O("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Xa("ClickCreating",t,this.mouseUpTools)}),O("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Xa("ClickSelecting",t,this.mouseUpTools)}),O("panningTool",function(){return this.findTool("Panning")},function(t){this.Xa("Panning",t,this.mouseMoveTools)}),O("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Xa("DragSelecting",t,this.mouseMoveTools)}),O("actionTool",function(){return this.findTool("Action")},function(t){this.Xa("Action",t,this.mouseDownTools)}),c.Object.defineProperties(Ei.prototype,{mainElement:{get:function(){return this.I},set:function(t){this.I=t}},show:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},hide:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},valueFunction:{get:function(){return this.T},set:function(t){this.T=t}}}),Ei.className="HTMLInfo",Li.className="ContextMenuButtonInfo",u(Oi,En),Oi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},Oi.prototype.doStart=function(){this.yx.set(this.diagram.firstInput.documentPoint)},Oi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},Oi.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,n=null;if(t instanceof Dr||(n=t instanceof Ys?t:e.Ub(e.lastInput.documentPoint,null,function(t){return!t.layer.isTemporary})),null!==n){for(t=n;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(null!==e.contextMenu)return e;return null},Oi.prototype.doActivate=function(){},Oi.prototype.doMouseDown=function(){if(En.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Pu){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&ji(this)},Oi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Pu){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}ji(this)},Oi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},Oi.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Pu){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionContextMenu(t,e)}else t instanceof Ei&&t.show(e,n,this);this.currentContextMenu=t},Oi.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>r.right&&(n.x-=i.width+5/e.scale),n.x<r.x&&(n.x=r.x),n.y+i.height>r.bottom&&(n.y-=i.height+5/e.scale),n.y<r.y&&(n.y=r.y),t.position=n}},Oi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof Pu?(t.remove(e),null!==this.xu&&this.xu.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof Ei&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},Oi.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.yu&&(this.yu=function(t){var e=new tt;return e.add(new Li("Copy",function(t){t.commandHandler.copySelection()},function(t){return t.commandHandler.canCopySelection()})),e.add(new Li("Cut",function(t){t.commandHandler.cutSelection()},function(t){return t.commandHandler.canCutSelection()})),e.add(new Li("Delete",function(t){t.commandHandler.deleteSelection()},function(t){return t.commandHandler.canDeleteSelection()})),e.add(new Li("Paste",function(e){e.commandHandler.pasteSelection(t.mouseDownPoint)},function(e){return e.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new Li("Select All",function(t){t.commandHandler.selectAll()},function(t){return t.commandHandler.canSelectAll()})),e.add(new Li("Undo",function(t){t.commandHandler.undo()},function(t){return t.commandHandler.canUndo()})),e.add(new Li("Redo",function(t){t.commandHandler.redo()},function(t){return t.commandHandler.canRedo()})),e.add(new Li("Scroll To Part",function(t){t.commandHandler.scrollToPart()},function(t){return t.commandHandler.canScrollToPart()})),e.add(new Li("Zoom To Fit",function(t){t.commandHandler.zoomToFit()},function(t){return t.commandHandler.canZoomToFit()})),e.add(new Li("Reset Zoom",function(t){t.commandHandler.resetZoom()},function(t){return t.commandHandler.canResetZoom()})),e.add(new Li("Group Selection",function(t){t.commandHandler.groupSelection()},function(t){return t.commandHandler.canGroupSelection()})),e.add(new Li("Ungroup Selection",function(t){t.commandHandler.ungroupSelection()},function(t){return t.commandHandler.canUngroupSelection()})),e.add(new Li("Edit Text",function(t){t.commandHandler.editTextBlock()},function(t){return t.commandHandler.canEditTextBlock()})),e}(this)),zi.innerHTML="",Bi.addEventListener("click",this.sv,!1);var e=this,n=y("ul");n.className="goCXul",zi.appendChild(n),n.innerHTML="";for(var i=this.yu.iterator;i.next();){var r=i.value,o=r.visible;if("function"==typeof r.$x&&("function"!=typeof o||o(t))){(o=y("li")).className="goCXli";var s=y("a");s.className="goCXa",s.href="#",s.az=r.$x,s.addEventListener("click",function(n){return this.az(t),e.stopTool(),n.preventDefault(),!1},!1),s.textContent=r.text,o.appendChild(s),n.appendChild(o)}}zi.style.display="block",Bi.style.display="block"},Oi.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===Ii){zi.style.display="none",Bi.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(Bi,"click",this.sv,!1),this.currentContextMenu=null}},c.Object.defineProperties(Oi.prototype,{currentContextMenu:{get:function(){return this.l},set:function(t){this.l=t,this.xu=t instanceof Pu?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Ri&&null===Ii&&Zo&&function(t){var e=new Ei;e.show=function(t,e,n){n.showDefaultContextMenu()},e.hide=function(t,e){e.hideDefaultContextMenu()},Ii=e,t.sv=function(){t.stopTool()},e=y("div");var n=y("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=y("style");d.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(i=t.diagram)&&(i.addEventListener(e,"contextmenu",Di,!1),i.addEventListener(e,"selectstart",Di,!1),i.addEventListener(n,"contextmenu",Di,!1)),e.className="goCXforeground",n.className="goCXbackground",d.document.body&&(d.document.body.appendChild(e),d.document.body.appendChild(n)),zi=e,Bi=n,Ri=!0}(this),Ii},set:function(t){null===t&&(Ri=!0),Ii=t}},currentObject:{get:function(){return this.v},set:function(t){this.v=t}},mouseDownPoint:{get:function(){return this.yx}}});var Ii=null,Ri=!1,Bi=null,zi=null;function Vi(){En.call(this),this.name="TextEditing",this.xh=new dh,this.Ka=null,this.Ja=Ki,this.Ui=null,this.ia=$i,this.I=1,this.T=!0,this.v=null,this.l=new Ei,this.Cu=null,function(t,e){if(Zo){var n=y("textarea");t.Cu=n,n.addEventListener("input",function(){if(null!==t.textBlock){var e=t.Gy(this.value);this.style.width=20+e.measuredBounds.width*this.YA+"px",this.rows=e.lineCount}},!1),n.addEventListener("keydown",function(e){if(null!==t.textBlock){var n=e.which;13===n?(!1===t.textBlock.isMultiline&&e.preventDefault(),t.acceptText(Yi)):9===n?(t.acceptText(Gi),e.preventDefault()):27===n&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==$i){var e=t.Cu;t.ia===Zi&&(t.ia=Ji),"function"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==$i){var e=t.Cu;"function"==typeof e.focus&&e.focus(),"function"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(t,e,i){if(t instanceof dh&&i instanceof Vi)if(i.state===tr)n.style.border="3px solid red",n.focus();else{var r=t.ga(le),o=e.position,s=e.scale,a=t.Af()*s;a<i.minimumEditorScale&&(a=i.minimumEditorScale);var l=t.naturalBounds.width*a+6,h=t.naturalBounds.height*a+2,u=(r.x-o.x)*s;r=(r.y-o.y)*s,n.value=t.text,e.div.style.font=t.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*a+"%",n.style.lineHeight="normal",n.style.width=l+"px",n.style.left=(u-l/2|0)-1+"px",n.style.top=(r-h/2|0)-1+"px",n.style.textAlign=t.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=t.lineCount,n.YA=a,n.className="goTXarea",e.div.appendChild(n),n.focus(),i.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(t){t.div.removeChild(n)}}}(this,this.l)}function Ui(t){var e=t.textBlock,n=t.diagram,i=t.currentTextEditor;if(null!==e&&null!==i){var r=e.text,o="";null!==i.valueFunction&&(o=i.valueFunction()),t.isValidText(e,r,o)?(t.va(t.name),t.ia=er,t.transactionResult=t.name,e.text=o,t.doSuccess(r,o),null!==n&&n.R("TextEdited",e,r),t.Jg(),t.stopTool(),null!==n&&n.doFocus()):(t.ia=tr,t.doError(r,o),i.show(e,n,t))}}Oi.className="ContextMenuTool",O("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Xa("ContextMenu",t,this.mouseUpTools)}),u(Vi,En),Vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||nr&&nr!==this&&(nr.acceptText(Hi),nr&&nr!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Ub(t.lastInput.documentPoint);return!!(null!==e&&e instanceof dh&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===Ki&&!e.isSelected||this.starting===Wi&&2>t.lastInput.clickCount)},Vi.prototype.doStart=function(){nr=this,null!==this.textBlock&&this.doActivate()},Vi.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.Ub(t.lastInput.documentPoint)),null!==e&&e instanceof dh&&(this.textBlock=e,null!==e.part)){this.isActive=!0,this.ia=Zi;var n=this.defaultTextEditor;null!==e.textEditor&&(n=e.textEditor),this.xh=this.textBlock.copy();var i=new Rt(this.textBlock.ga(re),this.textBlock.ga(fe));t.ww(i),n.show(e,t,this),this.currentTextEditor=n}}}},Vi.prototype.doCancel=function(){this.stopTool()},Vi.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},Vi.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Hi)},Vi.prototype.acceptText=function(t){switch(t){case Hi:this.ia===er?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():this.ia!==Zi&&this.ia!==tr&&this.ia!==Ji||(this.ia=Qi,Ui(this));break;case qi:case Yi:case Gi:Yi===t&&!0===this.textBlock.isMultiline||this.ia!==Zi&&this.ia!==tr&&this.ia!==Ji||(this.ia=Qi,Ui(this))}},Vi.prototype.doError=function(t,e){var n=this.textBlock;null!==n.errorFunction&&n.errorFunction(this,t,e)},Vi.prototype.doSuccess=function(t,e){var n=this.textBlock;null!==n.textEdited&&n.textEdited(n,t,e)},Vi.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.ia=$i,this.textBlock=null,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.isActive=!1)},Vi.prototype.doStop=function(){nr=null},Vi.prototype.isValidText=function(t,e,n){var i=this.textValidation;return!(null!==i&&!i(t,e,n)||null!==(i=t.textValidation)&&!i(t,e,n))},Vi.prototype.Gy=function(t){var e=this.xh;return e.text=t,e.measure(this.textBlock.Bi,1/0),e},c.Object.defineProperties(Vi.prototype,{textBlock:{get:function(){return this.Ka},set:function(t){this.Ka=t}},currentTextEditor:{get:function(){return this.v},set:function(t){this.v=t}},defaultTextEditor:{get:function(){return this.l},set:function(t){this.l=t}},starting:{get:function(){return this.Ja},set:function(t){this.Ja=t}},textValidation:{get:function(){return this.Ui},set:function(t){this.Ui=t}},minimumEditorScale:{get:function(){return this.I},set:function(t){this.I=t}},selectsTextOnActivate:{get:function(){return this.T},set:function(t){this.T=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),Vi.prototype.measureTemporaryTextBlock=Vi.prototype.Gy;var qi=new H(Vi,"LostFocus",0),Hi=new H(Vi,"MouseDown",1),Gi=new H(Vi,"Tab",2),Yi=new H(Vi,"Enter",3),Xi=new H(Vi,"SingleClick",0),Ki=new H(Vi,"SingleClickSelected",1),Wi=new H(Vi,"DoubleClick",2),$i=new H(Vi,"StateNone",0),Zi=new H(Vi,"StateActive",1),Ji=new H(Vi,"StateEditing",2),Qi=new H(Vi,"StateValidating",3),tr=new H(Vi,"StateInvalid",4),er=new H(Vi,"StateValidated",5),nr=null;function ir(){pr||(fr(),pr=!0),this.B=Xo,this.rl=this.df=this.qc=this.ns=this.hc=!1,this.Nx=!0,this.sl=gr,this.on=!1,this.wi=this.hd=!0,this.Xg=600,this.kx=this.Mx=!1,this.Pe=new nt,this.Ld=new vr,this.Ld.Sc=this,this.Ok=new nt,this.pv=new nt,this.kt=new nt}function rr(t,e){or(t,e)&&(t.df=!0)}function or(t,e){return!(!t.hd||!t.canStart(e))&&(t.Pe.add(e),t.defaultAnimation.isAnimating&&t.Oc(),t.qc=!0)}function sr(t){if(t.hd&&t.qc){var e=t.Ld,n=t.B,i=t.Pe.contains("Model");i&&(t.rl=!0,t.sl===gr?(e.isViewportUnconstrained=!0,e.kc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.sl===yr&&e.kc.clear(),t.Nx=!(t.sl!==mr||!n.Rs.w(n.la)),n.R("InitialAnimationStarting",t)),i&&!t.wi||0===e.kc.count?(t.Pe.clear(),t.qc=!1,t.df=!1,e.kc.clear(),br(e,n),t.rl=!1,n.M()):(t.Pe.clear(),n.Ae=!1,i=e.kc.get(n),n.autoScale!==ts&&null!==i&&(delete i.start.scale,delete i.end.scale),d.requestAnimationFrame(function(){!1===t.qc||e.hc||(n.Ge("temporaryPixelRatio")&&Rr(n),zr(n),t.qc=!1,t.df=!1,e.start(),lr(t),n.Oa(),Sr(e,0),oo(n,!0),hr(t),n.R("AnimationStarting",t))}))}}function ar(t,e,n,i){e instanceof Qu&&(null!==e.fromNode||null!==e.toNode)||t.Ld.add(e,"position",n,i,!1)}function lr(t){if(!t.ns){var e=t.B;t.Mx=e.skipsUndoManager,t.kx=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.ns=!0}}function hr(t){var e=t.B;e.skipsUndoManager=t.Mx,e.skipsModelSourceBindings=t.kx,t.ns=!1}function ur(t,e,n){t.df&&!e.w(n)&&(t.B.mj||(e=n.copy()),wr(t.Ld,t.B,"position",e,n))}function cr(t,e,n,i,r){null===t&&(t="rgba(0,0,0,0)"),null===e&&(e="rgba(0,0,0,0)"),Ua(t),qa();var o=al.l,s=al.I,a=al.v;t=al.T,Ua(e),qa();var l=al.I,h=al.v;return e=al.T,"hsla("+(o=r(n,o,al.l-o,i))+", "+(s=r(n,s,l-s,i))+"%, "+(a=r(n,a,h-a,i))+"%, "+(n=r(n,t,e-t,i))+")"}function fr(){var t=new ft;t.add("position:diagram",function(t,e,n,i,r,o){t.position=new dt(i(r,e.x,n.x-e.x,o),i(r,e.y,n.y-e.y,o))}),t.add("position",function(t,e,n,i,r,o){r<o?t.br(i(r,e.x,n.x-e.x,o),i(r,e.y,n.y-e.y,o),!1):t.position=new dt(i(r,e.x,n.x-e.x,o),i(r,e.y,n.y-e.y,o))}),t.add("location",function(t,e,n,i,r,o){r<o?t.br(i(r,e.x,n.x-e.x,o),i(r,e.y,n.y-e.y,o),!0):t.location=new dt(i(r,e.x,n.x-e.x,o),i(r,e.y,n.y-e.y,o))}),t.add("position:placeholder",function(t,e,n,i,r,o){r<o?t.br(i(r,e.x,n.x-e.x,o),i(r,e.y,n.y-e.y,o),!1):t.position=new dt(i(r,e.x,n.x-e.x,o),i(r,e.y,n.y-e.y,o))}),t.add("position:node",function(t,e,n,i,r,o){var s=t.actualBounds,a=n.actualBounds;n=a.x+a.width/2-s.width/2,s=a.y+a.height/2-s.height/2,r<o?t.br(i(r,e.x,n-e.x,o),i(r,e.y,s-e.y,o),!1):t.position=new dt(i(r,e.x,n-e.x,o),i(r,e.y,s-e.y,o))}),t.add("desiredSize",function(t,e,n,i,r,o){t.desiredSize=new Rt(i(r,e.width,n.width-e.width,o),i(r,e.height,n.height-e.height,o))}),t.add("width",function(t,e,n,i,r,o){t.width=i(r,e,n-e,o)}),t.add("height",function(t,e,n,i,r,o){t.height=i(r,e,n-e,o)}),t.add("fill",function(t,e,n,i,r,o){t.fill=cr(e,n,r,o,i)}),t.add("stroke",function(t,e,n,i,r,o){t.stroke=cr(e,n,r,o,i)}),t.add("strokeWidth",function(t,e,n,i,r,o){t.strokeWidth=i(r,e,n-e,o)}),t.add("strokeDashOffset",function(t,e,n,i,r,o){t.strokeDashOffset=i(r,e,n-e,o)}),t.add("background",function(t,e,n,i,r,o){t.background=cr(e,n,r,o,i)}),t.add("areaBackground",function(t,e,n,i,r,o){t.areaBackground=cr(e,n,r,o,i)}),t.add("opacity",function(t,e,n,i,r,o){t.opacity=i(r,e,n-e,o)}),t.add("scale",function(t,e,n,i,r,o){t.scale=i(r,e,n-e,o)}),t.add("angle",function(t,e,n,i,r,o){t.angle=i(r,e,n-e,o)}),dr=t}Vi.className="TextEditingTool",Vi.LostFocus=qi,Vi.MouseDown=Hi,Vi.Tab=Gi,Vi.Enter=Yi,Vi.SingleClick=Xi,Vi.SingleClickSelected=Ki,Vi.DoubleClick=Wi,Vi.StateNone=$i,Vi.StateActive=Zi,Vi.StateEditing=Ji,Vi.StateValidating=Qi,Vi.StateInvalid=tr,Vi.StateValidated=er,O("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Xa("TextEditing",t,this.mouseUpTools)}),ir.prototype.ae=function(t){this.B=t},ir.prototype.canStart=function(){return!0},(e=ir.prototype).Yt=function(t){return this.Ld.Yt(t)},e.$v=function(t){return this.Ld.$v(t)},e.Oc=function(t){var e=this.Ld;if(!0===this.qc&&(this.rl=this.df=this.qc=!1,this.Pe.clear(),0<e.kc.count&&this.B.Db()),this.hc){if(e.nm(!0),e.kc.clear(),br(e,null),!0===t)for(t=this.Ok.ma(),e=0;e<t.length;e++)t[e].nm(!0)}else e.kc.clear(),br(e,this.B)},e.nm=function(t){t===this.defaultAnimation&&this.defaultAnimation.kc.clear(),this.Ok.remove(t),0===this.Ok.count&&(this.hc=!1,this.B.Db()),t===this.defaultAnimation&&(this.defaultAnimation.kc.clear(),this.B.R("AnimationFinished",this))},e.gk=function(t,e){this.df&&(this.Pe.contains("Expand Tree")||this.Pe.contains("Expand SubGraph"))&&this.Ld.gk(t,e)},e.ek=function(t,e){this.df&&(this.Pe.contains("Collapse Tree")||this.Pe.contains("Collapse SubGraph"))&&(this.Ld.ek(t,e),wr(this.Ld,e,"position",e.position,e.position))},c.Object.defineProperties(ir.prototype,{animationReasons:{get:function(){return this.Pe}},isEnabled:{get:function(){return this.hd},set:function(t){this.hd=t}},duration:{get:function(){return this.Xg},set:function(t){1>t&&w(t,">= 1",ir,"duration"),this.Xg=t}},isAnimating:{get:function(){return this.hc}},isTicking:{get:function(){return this.ns}},isInitial:{get:function(){return this.wi},set:function(t){this.wi=t}},defaultAnimation:{get:function(){return this.Ld}},activeAnimations:{get:function(){return this.Ok}},initialAnimationStyle:{get:function(){return this.sl},set:function(t){this.sl=t}}}),ir.prototype.stopAnimation=ir.prototype.Oc;var dr=null,pr=!1,gr=new H(ir,"Default",1),mr=new H(ir,"AnimateLocations",2),yr=new H(ir,"None",3);function vr(){this.tv=this.Lx=this.Sc=this.B=null,this.Al=this.hc=this.l=!1,this.Un=this.zd=0,this.Gr=this.Fu=_r,this.zl=this.xp=!1,this.jv=1,this.hv=0,this.rd=this.Xg=NaN,this.ox=0,this.Vn=null,this.v=xt,this.kc=new ft,this.dv=new ft,this.gm=new nt,this.ev=new nt,this.lx=hs}function br(t,e){if(t.dv.clear(),t.zl=!1,t.hv=0,t.rd=NaN,0<t.gm.count&&t.gm.clear(),0<t.ev.count&&t.ev.clear(),null!==e)for(t=e.links;t.next();)t.value.qg=null}function wr(t,e,n,i,r,o){var s=t.kc;if(e instanceof Dr&&"position"===n&&(n="position:diagram"),s.contains(e)){var a=s.H(e),l=a.start,h=a.end;void 0===l[n]&&(l[n]=xr(i)),h[n]=xr(r)}else h={},(l={})[n]=xr(i),h[n]=xr(r),a=l.position,e instanceof Ys&&a instanceof dt&&!a.u()&&e.diagram.animationManager.Pe.contains("Expand SubGraph")&&a.assign(h.position),a=new Mr(l,h,o),s.add(e,a);(s=l[n])instanceof dt&&!s.u()&&s.assign(t.v),o&&0===n.indexOf("position:")&&e instanceof ou?a.Lv.location=xr(e.location):o&&(a.Lv[n]=xr(i))}function xr(t){return t instanceof dt||t instanceof Dt?t.copy():t}function kr(t,e){if(!t.Al||e){var n=t.Sc;if(!1!==t.hc){var i=+new Date,r=i>t.Un?t.rd:i-t.zd;e&&((r=t.ox)<t.rd?(t.zd=+new Date-r,t.Un=t.zd+t.rd):r=t.rd),lr(n),Sr(t,r),oo(t.B,!0),hr(n),i>t.Un&&(t.xp&&!t.zl?(t.zd=+new Date,t.Un=t.zd+t.rd,t.zl=!0):t.nm(!1))}}}function Sr(t,e){for(var n=t.rd,i=t.kc.iterator,r=t.zl;i.next();){var o=i.key;if(!(o instanceof Ys&&null===o.diagram)){var s=i.value,a=r?s.end:s.start;s=r?s.start:s.end;var l,h=dr;for(l in s)"position"===l&&(s["position:placeholder"]||s["position:node"])||null===h.get(l)||h.get(l)(o,a[l],s[l],t.Gr,e,n,t)}}}function _r(t,e,n,i){return 1>(t/=i/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Cr(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e}function Mr(t,e,n){this.start=t,this.end=e,this.Lv={},this.Fv=n,this.mw=!1}function Pr(t,e,n){this.ld=null,this.ff=t,this.Xp=n||Tr,this.Tk=null,void 0!==e&&(this.Tk=e,void 0===n&&(this.Xp=Nr))}ir.className="AnimationManager",ir.defineAnimationEffect=function(t,e){pr||(fr(),pr=!0),dr.add(t,e)},ir.Default=gr,ir.AnimateLocations=mr,ir.None=yr,vr.prototype.suspend=function(){this.Al=!0},vr.prototype.advanceTo=function(t,e){e&&(this.Al=!1),this.xp&&t>=this.rd&&(this.zl=!0,t-=this.rd),this.ox=t,kr(this,!0),lr(this.Sc),oo(this.B),hr(this.Sc),this.B.Je()},(e=vr.prototype).start=function(){if(0!==this.kc.count&&!this.hc){for(var t=this.B,e=this.kc.iterator;e.next();){var n=e.value.end,i=e.key;if(n["position:placeholder"]){var r=i.findVisibleNode();if(r instanceof Xu&&null!==r.placeholder){var o=r.placeholder;(r=o.ga(re)).x+=(o=o.padding).left,r.y+=o.top,n["position:placeholder"]=r}}null===t&&(i instanceof Dr?t=i:i instanceof Ys&&(t=i.diagram))}null!==t&&(this.B=t,!1!==(e=this.Sc=t.animationManager).isEnabled&&(this.rd=isNaN(this.Xg)?e.duration:this.Xg,this.Gr=this.Fu,e.rl&&e.sl===gr&&this===e.defaultAnimation&&(this.Gr=Cr,this.rd=isNaN(this.Xg)?600===e.duration?900:e.duration:this.Xg),this.lx=t.scrollMode,this.isViewportUnconstrained&&(t.Ri=us),lr(e),this.gm.each(function(e){e.data=null,t.add(e)}),hr(e),this.hc=!0,this.zd=+new Date,this.Un=this.zd+this.rd,function(t,e){function n(){if(0<r.kt.count&&(i.addAll(r.kt),r.kt.clear(),r.hc=!0),!1!==r.hc&&0!==i.count){r.pv.addAll(i);for(var t=r.pv.iterator;t.next();){var e=t.value;if(!1!==e.hc){t:if(0<e.gm.count)var o=!0;else{for(o=e.kc.iterator;o.next();){var s=o.key;if(s instanceof Ys&&null!==s.diagram||s instanceof Dr){o=!0;break t}}o=!1}o?kr(e,!1):e.Al=!0}}r.pv.clear(),lr(r),oo(r.B),hr(r),d.requestAnimationFrame(n)}}var i=t.Ok,r=t;t.hc?t.kt.add(e):(t.hc=!0,i.add(e),d.requestAnimationFrame(function(){n()}))}(e,this)))}},e.nz=function(t,e){t.Lc()&&(this.gm.add(t),this.B=e)},e.add=function(t,e,n,i,r){"position"===e&&n.w(i)||(null===this.B&&(t instanceof Dr?this.B=t:t instanceof Ys&&null!==t.diagram&&(this.B=t.diagram)),t instanceof ou&&!t.isAnimated||wr(this,t,e,n,i,r))},e.Yt=function(t){return!!this.hc&&null!==(t=this.kc.H(t))&&t.mw},e.$v=function(t){return!!this.hc&&null!==(t=this.kc.H(t))&&(t.start.position||t.start.location)},e.stop=function(){this.hc&&this.nm(!0)},e.nm=function(t){if(null!==this.tv&&this.tv.Ep.remove(this.Lx),this.hc){var e=this.B,n=this.Sc;this.Al=this.hc=n.rl=!1,lr(n);for(var i=this.kc,r=this.gm.iterator;r.next();)e.remove(r.value);for(r=this.ev.iterator;r.next();)r.value.o();r=this.xp,i=i.iterator;for(var o=dr;i.next();){var s,a=i.key,l=i.value,h=r?l.end:l.start,u=r?l.start:l.end,c=l.Lv;for(s in u)if(null!==o.get(s)){var f=s;!l.Fv||"position:node"!==f&&"position:placeholder"!==f||(f="position"),o.get(f)(a,h[s],void 0!==c[s]?c[s]:l.Fv?h[s]:u[s],this.Gr,this.rd,this.rd,this)}l.Fv&&void 0!==c.location&&a instanceof ou&&(a.location=c.location),l.mw&&a instanceof ou&&a.Ob(!1)}if(n.defaultAnimation===this)for(s=this.B.links;s.next();)null===(r=s.value).qg?null!==(i=r.path)&&(r.ed=!1,r.o(),i.o()):(r.points=r.qg,r.qg=null);e.Tt.clear(),Br(e,!1),e.Oa(),e.M(),oo(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.lx),hr(n),this.hv++,!t&&this.jv>this.hv?(this.zl=!1,this.start()):(this.Vn&&this.Vn(this),br(this,null),n.nm(this),e.Db())}},e.gk=function(t,e){var n=e.actualBounds,i=null;if(e instanceof Xu&&(i=e.placeholder),null!==i?((n=i.ga(re)).x+=(i=i.padding).left,n.y+=i.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new dt(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof Xu)for(t=t.memberParts;t.next();)(i=t.value)instanceof Tu&&this.gk(i,e)},e.ek=function(t,e){if(t.isVisible()){var n=null;if(e instanceof Xu&&(n=e.placeholder),null!==n?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:node",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(n=this.kc).contains(t)&&(n.H(t).mw=!0),t instanceof Xu)for(t=t.memberParts;t.next();)(n=t.value)instanceof Tu&&this.ek(n,e)}},e.kA=function(t){var e=this.dv.get(t);return null===e&&this.dv.add(t,e={}),e},c.Object.defineProperties(vr.prototype,{duration:{get:function(){return this.Xg},set:function(t){1>t&&w(t,">= 1",vr,"duration"),this.Xg=t}},reversible:{get:function(){return this.xp},set:function(t){this.xp=t}},runCount:{get:function(){return this.jv},set:function(t){0<t?this.jv=t:v("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Vn},set:function(t){this.Vn!==t&&(this.Vn=t)}},easing:{get:function(){return this.Fu},set:function(t){this.Fu=t}},isViewportUnconstrained:{get:function(){return this.l},set:function(t){this.l=t}},isAnimating:{get:function(){return this.hc}}}),vr.prototype.getTemporaryState=vr.prototype.kA,vr.prototype.stop=vr.prototype.stop,vr.prototype.add=vr.prototype.add,vr.prototype.addTemporaryPart=vr.prototype.nz,vr.className="Animation",vr.EaseLinear=function(t,e,n,i){return n*t/i+e},vr.EaseInOutQuad=_r,vr.EaseInQuad=function(t,e,n,i){return n*(t/=i)*t+e},vr.EaseOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},vr.EaseInExpo=function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},vr.EaseOutExpo=Cr,Mr.className="AnimationState",Pr.prototype.copy=function(){var t=new Pr(this.ff);t.Xp=this.Xp;var e=this.Tk;if(null!==e){var n={};void 0!==e.duration&&(n.ky=e.duration),void 0!==e.finished&&(n.ky=e.finished),void 0!==e.easing&&(n.ky=e.easing),t.Tk=n}return t},c.Object.defineProperties(Pr.prototype,{propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},animationSettings:{get:function(){return this.Tk},set:function(t){this.Tk=t}},startCondition:{get:function(){return this.Xp},set:function(t){this.Xp=t}}});var Tr=new H(Pr,"Default",1),Nr=new H(Pr,"Immediate",2),Ar=new H(Pr,"Bundled",3);function Er(){it(this),this.B=null,this.Da=new tt,this.Qa="",this.gb=1,this.v=!1,this.l=this.Mi=this.I=this.gi=this.fi=this.ei=this.di=this.bi=this.ci=this.ai=this.ii=this.$h=this.hi=this.Zh=this.Yh=!0,this.jp=[]}function Lr(t,e){var n=1;return 1!==t.gb&&(e.globalAlpha=(n=e.globalAlpha)*t.gb),n}function Or(t,e,n){if(e=function(t,e,n){var i=n.zOrder;if(isNaN(i))return e;var r=(t=t.Da).count;if(1>=r)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var o=e-1,s=NaN;0<=o&&(s=t.J(o).zOrder,isNaN(s));)o--;for(var a=e+1,l=NaN;a<r&&(l=t.J(a).zOrder,isNaN(l));)a++;if(!isNaN(s)&&s>i)for(;;){if(-1===o||s<=i){if(++o===e)break;return t.bb(e),t.vb(o,n),o}for(s=NaN;0<=--o&&(s=t.J(o).zOrder,isNaN(s)););}else if(!isNaN(l)&&l<i)for(;;){if(a===r||l>=i){if(--a===e)break;return t.bb(e),t.vb(a,n),a}for(l=NaN;++a<r&&(l=t.J(a).zOrder,isNaN(l)););}return e}(t,e,n),n instanceof Xu&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var i=-1,r=t.Da.j,o=r.length,s=0;s<o;s++){var a=r[s];if(a===n&&(e=s,0<=i))break;if(0>i&&a.containingGroup===n&&(i=s,0<=e))break}!(0>i)&&i<e&&((r=t.Da).bb(e),r.vb(i,n))}null!==(n=n.containingGroup)&&Or(t,-1,n)}}function Dr(t){if(1<arguments.length&&v("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),vs||(bs(),vs=!0),it(this),Xo=this,q=[],this.Rb=!0,this.Sc=new ir,this.Sc.ae(this),this.ob=17,this.yl=this.lv=!1,this.Qs="default",this.Ea=null,Zo){var e=this,n=function(){e.removeEventListener(d.document,"DOMContentLoaded",n,!1),e.setRTL()};null!==d.document.body?this.setRTL():e.addEventListener(d.document,"DOMContentLoaded",n,!1)}this.La=new tt,this.wa=this.xa=0,this.Ql=this.ta=null,this.Hx=new ft,this.gf=this.Gb=null,this.tw(),this.Ij=null,this.sw(),this.gb=1,this.la=new dt(NaN,NaN).freeze(),this.Rs=new dt(NaN,NaN),this.Ln=this.ya=1,this.cs=new dt(NaN,NaN).freeze(),this.ds=NaN,this.vs=1e-4,this.ts=100,this.pb=new Ge,this.tt=new dt(NaN,NaN).freeze(),this.Xr=new Rt(NaN,NaN,NaN,NaN).freeze(),this.Qi=new Jt(0,0,0,0).freeze(),this.Ri=hs,this.Zs=!1,this.Ss=this.Ms=null,this.Og=ts,this.yj=Te,this.Yf=ts,this.mo=Te,this.es=this.bs=re,this.Cc=!0,this.wl=!1,this.sd=new nt,this.Vg=new ft,this.il=!0,this.ln=250,this.wj=-1,this.nn=new Jt(16,16,16,16).freeze(),this.Cj=this.Ae=!1,this.Fj=!0,this.Vf=new xn,this.Vf.diagram=this,this.kd=new xn,this.kd.diagram=this,this.gh=new xn,this.gh.diagram=this,this.se=this.Nf=null,this.ck=!1,this.Nr=this.Or=null,this.gn=d.PointerEvent&&(I||R||B)&&d.navigator&&!1!==d.navigator.msPointerEnabled,Io(this),this.Bh=new nt,this.os=!0,this.nt=cs,this.Pu=!1,this.pt=is,this.Ka=null,Ko.add("Model",Uf),this.Hr=this.Kr=this.lt=null,this.Kn=this.Fr="auto",this.gg=this.ys=this.ig=this.jg=this.lg=this.Pf=this.Tf=this.Of=null,this.$r=!1,this.Qf=this.wg=this.kg=this.hg=null,this.zs=!1,this.Ks={},this.Xj=[null,null],this.zr=null,this.Lr=this.ct=this.nv=this.ug=!1,this.Wu=!0,this.vi=this.ic=!1,this.$b=null;var i=this;this.Ac=function(t){var e=i.partManager;if(t.model===e.diagram.model&&e.diagram.Z){e.diagram.Z=!1;try{""===t.modelChange&&t.change===Cn&&e.updateDataBindings(t.object,t.propertyName)}finally{e.diagram.Z=!0}}},this.Rc=function(t){i.partManager.doModelChanged(t)},this.vv=!0,this.Rd=-2,this.Ni=new ft,this.Js=new tt,this.$f=!1,this.Zh=this.Yh=this.lr=this.hd=!0,this.mr=!1,this.tr=this.rr=this.gi=this.fi=this.ei=this.di=this.bi=this.ci=this.ai=this.qr=this.ii=this.$h=this.hi=this.nr=!0,this.Zf=this.Su=!1,this.sr=this.pr=this.ol=this.nl=!0,this.Ys=this.Us=16,this.Ts=this.Gp=!1,this.Hp=this.Ws=null,this.Vs=this.Xs=0,this.hb=new Jt(5).freeze(),this.mv=(new nt).freeze(),this.us=999999999,this.Mu=(new nt).freeze(),this.ui=this.ti=this.si=!0,this.Xe=this.le=!1,this.jc=null,this.Ng=!0,this.me=!1,this.xx=new nt,this.Nu=new nt,this.Fc=null,this.Nl=1,this.ov=0,this.Wd={scale:1,position:new dt,bounds:new Rt,cw:!1},this.Ox=new Rt(NaN,NaN,NaN,NaN).freeze(),this.im=new Dt(NaN,NaN).freeze(),this.Mn=new Rt(NaN,NaN,NaN,NaN).freeze(),this.ps=!1,this.Do=this.ko=this.bp=this.Au=this.zu=this.Bu=this.bg=this.eh=this.cf=this.Rr=null,Ir(this),this.Ib=null,this.jo=!1,this.zj=null,this.partManager=new Uf,this.toolManager=new Ln,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Qr=null,this.bl=new Fs,this.Es=this.Ds=null,this.Zp=!1,this.commandHandler=Fr(),this.model=Pd(),this.ug=!0,Vr(this),this.layout=new uf,this.ug=!1,this.px=this.Eu=null,this.Sb=1,this.wh=null,this.Po=1,this.Vo=0,this.cv=[0,0,0,0,0],this.Wo=0,this.td=1,this.Nj=0,this.yo=new dt,this.mt=500,this.mn=new dt,this.ne=!1,this.Cm=this.Dm=this.Bm=this.Am=this.Ck=this.Ek=this.Dk=this.Ak=this.Bk=this.Sw=this.Iw=this.Jw=this.Kw=null,this.Vq=function(){},this.preventDefault=null,this.oo=!1,this.ri=new ws,this.$p=!1,void 0!==t&&ks(this,t),this.Wn=null,this.Xn=Ct,this.Rb=!1}function jr(t,e){t.animationManager.Oc(!0),t.mv=(new nt).freeze(),t.Mu=(new nt).freeze();var n=t.skipsUndoManager;null!==t.model&&(t.skipsUndoManager=!0);var i=null;null!==t.Ib&&null!==(i=t.Ib.part)&&t.remove(i);var r=[],o=t.La.length;if(e){for(e=0;e<o;e++)for(var s=t.La.j[e].parts;s.next();){var a=s.value;a!==i&&null===a.data&&r.push(a)}for(e=0;e<r.length;e++)t.remove(r[e])}for(e=0;e<o;e++)t.La.j[e].clear();return t.partManager.clear(),t.sd.clear(),t.Vg.clear(),t.Bh.clear(),t.zj=null,U=[],null!==i&&(t.add(i),t.partManager.parts.remove(i)),null!==t.model&&(t.skipsUndoManager=n),r}function Fr(){return null}function Ir(t){t.cf=new ft;var e=new Tu,n=new dh;n.bind(new Dd("text","",E)),e.add(n),t.Bu=e,t.cf.add("",e),e=new Tu,(n=new dh).stroke="brown",n.bind(new Dd("text","",E)),e.add(n),t.cf.add("Comment",e),(e=new Tu).selectable=!1,e.avoidable=!1,(n=new ih).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new Dt(3,3).ca(),e.add(n),t.cf.add("LinkLabel",e),t.eh=new ft,(e=new Xu).selectionObjectName="GROUPPANEL",e.type=Ml.Vertical,(n=new dh).font="bold 12pt sans-serif",n.bind(new Dd("text","",E)),e.add(n),(n=new Ml(Ml.Auto)).name="GROUPPANEL";var i=new ih;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),(i=new Ju).padding=new Jt(5,5,5,5).ca(),n.add(i),e.add(n),t.zu=e,t.eh.add("",e),t.bg=new ft,e=new Qu,(n=new ih).isPanelMain=!0,e.add(n),(n=new ih).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Au=e,t.bg.add("",e),e=new Qu,(n=new ih).isPanelMain=!0,n.stroke="brown",e.add(n),t.bg.add("Comment",e),(e=new Pu).type=Ml.Auto,(n=new ih).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new Ju).margin=new Jt(1.5,1.5,1.5,1.5).ca(),e.add(n),t.bp=e,t.ko=e,(e=new Pu).type=Ml.Link,(n=new ih).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.Do=e}function Rr(t){30<t.Vo&&(t.wh=1)}function Br(t,e){null!==t.wh&&(t.wh=null,e&&t.Vq(),W&&W.jy||(t.Vo=0,t.cv=[0,0,0,0,0],t.Wo=0))}function zr(t){if(null!==t.ta){var e=t.Ea;if(0!==e.clientWidth&&0!==e.clientHeight){t.lv||t.setScrollWidth();var n=t.Xe?t.ob:0,i=t.le?t.ob:0,r=t.Sb;t.Sb=t.computePixelRatio(),t.Sb!==r&&(t.wl=!0,t.Db()),e.clientWidth===t.xa+n&&e.clientHeight===t.wa+i||(t.ti=!0,t.Cc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===ts&&(t.Cj=!0,e.C()),t.ic||t.Db())}}}function Vr(t){var e=new Er;e.name="Background",t.km(e),(e=new Er).name="",t.km(e),(e=new Er).name="Foreground",t.km(e),(e=new Er).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.km(e),(e=new Er).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.km(e),(e=new Er).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Rx(e,t.pm("Background"))}function Ur(t){t.Ib=new Ml(Ml.Grid),t.Ib.name="GRID";var e=new ih;e.figure="LineH",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Ib.add(e),(e=new ih).figure="LineH",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Ib.add(e),(e=new ih).figure="LineH",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Ib.add(e),(e=new ih).figure="LineV",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Ib.add(e),(e=new ih).figure="LineV",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Ib.add(e),(e=new ih).figure="LineV",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Ib.add(e),(e=new ou).add(t.Ib),e.layerName="Grid",e.zOrder=0,e.isInDocumentBounds=!1,e.isAnimated=!1,e.pickable=!1,e.locationObjectName="GRID",t.add(e),t.partManager.parts.remove(e),t.Ib.visible=!1}function qr(){this.B.Ts?this.B.Ts=!1:this.B.isEnabled?this.B.ey(this):mo(this.B)}function Hr(t){this.B.isEnabled?(this.B.Xs=t.target.scrollTop,this.B.Vs=t.target.scrollLeft):mo(this.B)}function Gr(t){if(t.fixedBounds.u()){var e=t.fixedBounds.copy();return e.oq(t.hb),e}for(var n=!0,i=t.La.j,r=i.length,o=0;o<r;o++){var s=i[o];if(s.visible&&s.isInDocumentBounds)for(var a=(s=s.Da.j).length,l=0;l<a;l++){var h=s[l];h.isInDocumentBounds&&h.isVisible()&&(h=h.actualBounds).u()&&(n?(n=!1,e=h.copy()):e.Pc(h))}}return n&&(e=new Rt(0,0,0,0)),e.oq(t.hb),e}function Yr(t,e){if((e||t.me)&&!t.Rb&&null!==t.ta&&t.documentBounds.u()){if(e){var n=t.initialPosition;if(n.u())return void(t.position=n);(n=dt.alloc()).qj(t.documentBounds,t.initialDocumentSpot);var i=t.viewportBounds;i=Rt.allocAt(0,0,i.width,i.height);var r=dt.alloc();r.qj(i,t.initialViewportSpot),r.h(n.x-r.x,n.y-r.y),t.position=r,Rt.free(i),dt.free(r),dt.free(n)}t.Rb=!0,n=t.Og,e&&t.Yf!==ts&&(n=t.Yf),i=n!==ts?Xr(t,n):t.scale,n=t.viewportBounds.copy(),r=t.xa/i;var o=t.wa/i,s=t.yj,a=t.mo;e&&!s.jb()&&(a.jb()||a.Mb())&&(s=a.Mb()?le:a),Kr(t,t.documentBounds,r,o,s,e),e=t.scale,t.scale=i,t.Rb=!1,(i=t.viewportBounds).Na(n)||t.Rq(n,i,e,!1),co(t),ro(t,!0,!1)}}function Xr(t,e){var n=t.Ln;if(null===t.ta)return n;t.Ta();var i=t.documentBounds;if(!i.u())return n;var r=i.width,o=t.xa+(t.Xe?t.ob:0),s=t.wa+(t.le?t.ob:0),a=o/r,l=s/(i=i.height);return e===es?((e=Math.min(l,a))>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===ns?((e=l>a?(s-t.ob)/i:(o-t.ob)/r)>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function Kr(t,e,n,i,r,o){var s=dt.allocAt(t.la.x,t.la.y),a=s.x,l=s.y;if(null!==t.Wn){var h=dt.alloc();a=(h=t.Wn.ga(re,h)).x-t.Xn.x/t.scale,l=h.y-t.Xn.y/t.scale,r=ie,dt.free(h)}(o||t.scrollMode===hs)&&(r.jb()&&(n>e.width&&(a=e.x+(r.x*e.width+r.offsetX)-(r.x*n-r.offsetX)),i>e.height&&(l=e.y+(r.y*e.height+r.offsetY)-(r.y*i-r.offsetY))),o=n-e.width,n<e.width+(r=t.Qi).left+r.right?(a=Math.min(a+n/2,e.right+Math.max(o,r.right)-n/2),a=Math.max(a,e.left-Math.max(o,r.left)+n/2),a-=n/2):a>e.left?a=e.left:a<e.right-n&&(a=e.right-n),n=i-e.height,i<e.height+r.top+r.bottom?(l=Math.min(l+i/2,e.bottom+Math.max(n,r.bottom)-i/2),l=Math.max(l,e.top-Math.max(n,r.top)+i/2),l-=i/2):l>e.top?l=e.top:l<e.bottom-i&&(l=e.bottom-i)),s.x=isFinite(a)?a:-t.hb.left,s.y=isFinite(l)?l:-t.hb.top,null!==t.positionComputation&&(e=t.positionComputation(t,s),s.x=e.x,s.y=e.y),t.Sc.qc&&ur(t.Sc,t.la,s),t.la.h(s.x,s.y),dt.free(s)}function Wr(t,e,n,i){for(void 0===n&&(n=null),void 0===i&&(i=null),so(t),t=t.La.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&null!==(r=r.Ub(e,n,i)))return r}return null}function $r(t,e,n){var i=t.kd;return t.kd=t.gh,t.gh=i,i.diagram=t,i.event=e,n?no(t,e,i):(i.viewPoint=t.kd.viewPoint,i.documentPoint=t.kd.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,void 0===e.buttons||F||(i.buttons=e.buttons),z&&0===e.button&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=Zr(e),i.targetObject=null,i}function Zr(t){var e=t.target.B;if(!e){var n=t.path;n||"function"!=typeof t.composedPath||(n=t.composedPath()),n&&n[0]&&(e=n[0].B)}return e||null}function Jr(t,e,n,i){var r=to(t,e,!0,!1,!0,i);return no(t,n,r),r.targetDiagram=Zr(e),r.targetObject=null,i||r.clone(t.Vf),r}function Qr(t,e,n,i){var r;return i=to(t,e,!1,!1,!1,i),null!==n?((r=d.document.elementFromPoint(n.clientX,n.clientY))&&r.B?(e=n,n=r.B):(e=void 0!==e.targetTouches?e.targetTouches[0]:e,n=t),i.targetDiagram=n,no(t,e,i)):null!==t.kd?(i.documentPoint=t.kd.documentPoint,i.viewPoint=t.kd.viewPoint,i.targetDiagram=t.kd.targetDiagram):null!==t.Vf&&(i.documentPoint=t.Vf.documentPoint,i.viewPoint=t.Vf.viewPoint,i.targetDiagram=t.Vf.targetDiagram),i.targetObject=null,i}function to(t,e,n,i,r,o){var s=t.kd;t.kd=t.gh,t.gh=s,s.diagram=t,s.clickCount=1;var a=s.delta=0;return e.ctrlKey&&(a+=1),e.altKey&&(a+=2),e.shiftKey&&(a+=4),e.metaKey&&(a+=8),s.modifiers=a,s.button=0,s.buttons=1,s.event=e,s.timestamp=e.timeStamp,t.gn&&e instanceof d.PointerEvent&&"touch"!==e.pointerType&&(s.button=e.button,void 0===e.buttons||F||(s.buttons=e.buttons),z&&0===e.button&&e.ctrlKey&&(s.button=2)),s.down=n,s.up=i,s.handled=!1,s.bubbles=r,s.isMultiTouch=o,s}function eo(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function no(t,e,n){var i=t.ta,r=t.xa,o=t.wa,s=0,a=0;null!==i&&(i=i.getBoundingClientRect(),s=e.clientX-r/i.width*i.left,a=e.clientY-o/i.height*i.top),n.viewPoint.h(s,a),null!==t.pb?(e=dt.allocAt(s,a),t.pb.Dd(e),n.documentPoint.assign(e),dt.free(e)):n.documentPoint.h(s,a)}function io(t,e,n,i){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else{if(null===t.Xj[0])return;e=t.Xj[n]}null!==(n=t.ta)&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.xa/n.width*n.left,e.clientY-t.wa/n.height*n.top))}function ro(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.Rb||!t.ti||mo(t)||(e&&so(t),n&&Yr(t,!1))}function oo(t,e){if(!t.ic&&(t.Ae=!1,null!==t.Ea||t.im.u())){t.ic=!0;var n=t.animationManager,i=t.Js;if(!n.isAnimating&&0!==i.length){for(var r=i.j,o=r.length,s=0;s<o;s++){var a=r[s];fa(a,!1),a.o()}i.clear()}0<(i=t.Nu).count&&(i.each(function(t){t.Rw()}),i.clear()),r=i=!1,n.isAnimating&&(r=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.qc||zr(t),ro(t,!1,!0),null!==t.Ib&&(t.Ib.visible&&!t.jo&&(Po(t),t.jo=!0),!t.Ib.visible&&t.jo&&(t.jo=!1)),so(t),o=!1,t.me&&!t.Ng||(t.me?jo(t,!t.Cj):(t.va("Initial Layout"),!1===n.isEnabled&&n.Oc(),jo(t,!1)),o=!0),t.Cj=!1,so(t),t.ct||function(t){t.ic||so(t),t.Ta()}(t),ro(t,!0,!1),s=!1,o?((n=Rt.alloc()).assign(t.viewportBounds),t.me||(s=t.me=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function(t){var e=t.ya;if(t.Yf!==ts)t.scale=Xr(t,t.Yf);else if(t.Og!==ts)t.scale=Xr(t,t.Og);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.ya!==e&&(co(t),ro(t,!0,!1)),Yr(t,!0),t.Hd(e=t.La.j,e.length,t),t.R("InitialLayoutCompleted"),t.Rs.assign(t.la),Po(t)}(t)),t.R("LayoutCompleted"),n.w(t.viewportBounds)||ro(t,!0,!1),Rt.free(n)):n.rl&&n.Nx&&(t.Yf!==ts?t.scale=Xr(t,t.Yf):t.Og!==ts?t.scale=Xr(t,t.Og):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),Yr(t,!0)),so(t),o&&s&&t.Wa("Initial Layout"),t.Cv(),e||t.ac(t.Gb),r&&(t.skipsUndoManager=i),t.ic=!1}}function so(t){if((t.ic||!t.animationManager.isTicking)&&0!==t.sd.count){for(var e=0;23>e;e++){var n=t.sd.iterator;if(null===n||0===t.sd.count)break;t.sd=new nt,t.Rw(n,t.sd)}t.nodes.each(function(t){t instanceof Xu&&0!=(65536&t.P)!=0&&(t.P=65536^t.P)})}}function ao(t,e){for(var n=T(),i=T(),r=e.memberParts;r.next();){var o=r.value;o.isVisible()&&(o instanceof Xu?(ca(o)||da(o)||mu(o))&&ao(t,o):o instanceof Qu?o.fromNode===e||o.toNode===e?i.push(o):n.push(o):(o.measure(1/0,1/0),o.arrange()))}for(t=n.length,r=0;r<t;r++)(o=n[r]).measure(1/0,1/0),o.arrange();for(N(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)(n=i[e]).measure(1/0,1/0),n.arrange();N(i)}function lo(t,e,n,i,r,o,s,a,l,h){if(null!==t.Ea){null===t.ta&&v("No canvas specified"),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=!1),void 0===h&&(h=!1),po(t),t.Gb.sc(!0),fo(t),t.vi=!0;var u=t.ya;t.ya=r;var c=t.La.j,f=c.length;try{var d=new Rt(o.x,o.y,i.width/r,i.height/r),p=d.copy();p.oq(n),Po(t,p),so(t),t.Hd(c,f,t,d),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),null!==a&&""!==a&&(e.fillStyle=a,e.fillRect(0,0,i.width,i.height));var g=t.Sb;e.scale(g,g);var m=Ge.alloc();if(m.reset(),m.translate(n.left,n.top),m.scale(r),0===o.x&&0===o.y||m.translate(-o.x,-o.y),e.setTransform(m.m11,m.m12,m.m21,m.m22,m.dx,m.dy),Ge.free(m),ho(t,e),e.globalAlpha=t.gb,null!==s){var y=new nt,b=s.iterator;for(b.reset();b.next();){var w=b.value;!1===h&&"Grid"===w.layer.name||null===w||y.add(w)}var x=function(n){if(n.visible&&0!==n.gb&&(l||!n.isTemporary)){var i=n.Da.j,r=i.length;if(0!==r){var o=Lr(n,e),s=n.jp;s.length=0;for(var a=t.scale,h=Rt.alloc(),u=0;u<r;u++){var c=i[u];y.contains(c)&&n.bj(e,c,t,s,a,h,!1)}Rt.free(h),e.globalAlpha=o}}}}else if(!l&&h){var k=t.grid.part,S=k.layer;x=function(n){n===S?k.ac(e,t):n.ac(e,t,l)}}else x=function(n){n.ac(e,t,l)};for(n=0;n<f;n++)x(c[n]);t.vi=!1,t.ri&&xs(t.ri,t)&&t.Rr()}finally{t.ya=u,t.Gb.sc(!0),fo(t),t.Hd(c,f,t),Po(t)}}}function ho(t,e){null!==(t=t.gf)&&(void 0!==t.imageSmoothingEnabled&&e.Py(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function uo(t,e){var n,i=t instanceof Ml,r=t instanceof Dr;for(n in e){""===n&&v("Setting properties requires non-empty property names");var o=t,s=n;if(i||r){var a=n.indexOf(".");if(0<a){var l=n.substring(0,a);i?o=t.$a(l):null==(o=t[l])&&(o=t.toolManager[l]),S(o)?s=n.substr(a+1):v("Unable to find object named: "+l+" in "+t.toString()+" when trying to set property: "+n)}}if("_"!==s[0]&&!L(o,s)){if(r&&"ModelChanged"===s){t.Ux(e[s]);continue}if(r&&"Changed"===s){t.Fh(e[s]);continue}if(r&&L(t.toolManager,s))o=t.toolManager;else{if(r&&Ro(t,s)){t.fk(s,e[s]);continue}if(t instanceof od&&"Changed"===s){t.Fh(e[s]);continue}v('Trying to set undefined property "'+s+'" on object: '+o.toString())}}o[s]=e[n],"_"===s[0]&&o instanceof Ys&&o.Qx(s)}}function co(t){!1===t.ti&&(t.ti=!0)}function fo(t){!1===t.ui&&(t.ui=!0)}function po(t){!1!==t.wl&&(t.wl=!1,go(t,t.xa,t.wa))}function go(t,e,n){var i=t.Sb;t.ta.resize(e*i,n*i,e,n)&&(t.Cc=!0,t.Gb.sc(!0))}function mo(t){var e=t.ta;if(null===e)return!0;var n=t.Ea,i=t.xa,r=t.wa,o=t.viewportBounds.copy();if(!o.u())return!0;var s=!1,a=t.Xe?t.ob:0,l=t.le?t.ob:0,h=n.clientWidth||i+a,u=n.clientHeight||r+l;if(h===i+a&&u===r+l||(t.Xe=!1,t.le=!1,l=a=0,t.xa=h,t.wa=u,s=t.wl=!0),!(s||t.Xe||t.le||t.nl||t.ol))return!0;t.ti=!1;var c=t.viewportBounds,f=t.documentBounds,d=0,p=0,g=0,m=0;n=c.width;var y=c.height,v=t.Qi;t.contentAlignment.jb()?(f.width>n&&(d=v.left,p=v.right),f.height>y&&(g=v.top,m=v.bottom)):(d=v.left,p=v.right,g=v.top,m=v.bottom),v=f.width+d+p;var b=f.height+g+m;d=f.x-d;var w=c.x;p=f.right+p;var x=c.right+a;g=f.y-g;var k=c.y;f=f.bottom+m,c=c.bottom+l;var S="1px",_="1px";if(h=v>h/(m=t.scale),u=b>u/m,t.scrollMode===hs&&(h||u)&&(h&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(h=1,d+1<w&&(h=Math.max((w-d)*m+t.xa,h)),p>x+1&&(h=Math.max((p-x)*m+t.xa,h)),n+a+1<v&&(h=Math.max((v-n)*m+t.xa,h)),S=h.toString()+"px"),u&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(h=1,g+1<k&&(h=Math.max((k-g)*m+t.wa,h)),f>c+1&&(h=Math.max((f-c)*m+t.wa,h)),y+l+1<b&&(h=Math.max((b-y)*m+t.wa,h)),_=h.toString()+"px")),u="1px"!==_,(h="1px"!==S)&&u||!h&&!u||(u&&(x-=t.ob),h&&(c-=t.ob),v<n+a||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(a=1,d+1<w&&(a=Math.max((w-d)*m+t.xa,a)),p>x+1&&(a=Math.max((p-x)*m+t.xa,a)),n+1<v&&(a=Math.max((v-n)*m+t.xa,a)),S=a.toString()+"px"),a=t.wa,(h="1px"!==S)!==t.le&&(a=h?t.wa-t.ob:t.wa+t.ob),b<y+l||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(l=1,g+1<k&&(l=Math.max((k-g)*m+a,l)),f>c+1&&(l=Math.max((f-c)*m+a,l)),y+1<b&&(l=Math.max((b-y)*m+a,l)),_=l.toString()+"px"),u="1px"!==_),t.Gp&&h===t.le&&u===t.Xe)return i===t.xa&&r===t.wa||t.dd(),!1;if(h!==t.le&&(t.wa="1px"===S?t.wa+t.ob:Math.max(t.wa-t.ob,1),s=!0),t.le=h,t.Hp.style.width=S,u!==t.Xe&&(t.xa="1px"===_?t.xa+t.ob:Math.max(t.xa-t.ob,1),s=!0,t.yl&&(l=dt.alloc(),u?(e.style.left=t.ob+"px",t.position=l.h(t.la.x+t.ob/t.scale,t.la.y)):(e.style.left="0px",t.position=l.h(t.la.x-t.ob/t.scale,t.la.y)),dt.free(l))),t.Xe=u,t.Hp.style.height=_,t.Ts=!0,s&&(t.wl=!0),l=(e=t.Ws).scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(n+1<v?l=(t.position.x-d)*m:d+1<w?l=e.scrollWidth-e.clientWidth:p>x+1&&(l=t.position.x*m)),t.yl)switch(t.Qs){case"negative":l=-(e.scrollWidth-l-e.clientWidth);break;case"reverse":l=e.scrollWidth-l-e.clientWidth}return e.scrollLeft=l,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(y+1<b?e.scrollTop=(t.position.y-g)*m:g+1<k?e.scrollTop=e.scrollHeight-e.clientHeight:f>c+1&&(e.scrollTop=t.position.y*m)),u=t.wa,e.style.width=(h=t.xa)+(t.Xe?t.ob:0)+"px",e.style.height=u+(t.le?t.ob:0)+"px",i===h&&r===u&&!t.animationManager.qc||(t.Rq(o,t.viewportBounds,m,s),!1)}function yo(t,e,n){var i=e.layer;null!==i&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),n&&e.pk(),0<=(n=i.Jc(-1,e,!1))&&t.ab(Pn,"parts",i,e,null,n,null),null!==(t=e.layerChanged)&&t(e,i,null))}function vo(t,e,n,i,r,o){if(!e.contains(n)&&(void 0===o&&(o=!1),!i||o||n.canMove()||n.canCopy()))if(void 0===r&&(r=wo(t)),n instanceof Tu){if(e.add(n,t.yd(r,n,n.location)),n instanceof Xu&&(null!==n.placeholder||r.dragsMembers))for(o=n.memberParts;o.next();)vo(t,e,o.value,i,r,r.groupsAlwaysMove);for(o=n.linksConnected;o.next();){var s=o.value;if(!e.contains(s)){var a=s.fromNode,l=s.toNode;null!==a&&e.contains(a)&&null!==l&&e.contains(l)&&vo(t,e,s,i,r)}}if(r.dragsTree)for(n=n.Rv();n.next();)vo(t,e,n.value,i,r)}else if(n instanceof Qu)for(e.add(n,t.yd(r,n)),n=n.labelNodes;n.next();)vo(t,e,n.value,i,r);else n instanceof Pu||e.add(n,t.yd(r,n,n.location))}function bo(t,e,n,i,r){if(null!==e&&0!==e.count){var o=dt.alloc(),s=dt.alloc();s.assign(n),isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),(n=t.Zp)||ko(t,e);for(var a=T(),l=T(),h=e.iterator,u=dt.alloc();h.next();){var c=h.key,f=h.value;if(c.Lc()){var d=_o(t,c,e);null!==d?a.push(new js(c,f,d)):r&&!c.canMove()||(o.assign(d=f.point),t.computeMove(c,o.add(s),i,u),c.location=u,void 0===f.shifted&&(f.shifted=new dt),f.shifted.assign(u.ce(d)))}else h.key instanceof Qu&&l.push(h.ka)}for(dt.free(u),r=a.length,h=0;h<r;h++)o.assign((c=a[h]).info.point),void 0===c.Vv.shifted&&(c.Vv.shifted=new dt),c.node.location=o.add(c.Vv.shifted);for(r=dt.alloc(),h=dt.alloc(),c=l.length,f=0;f<c;f++){var p=l[f];if((d=p.key)instanceof Qu)if(d.suspendsRouting){d.qg=null,u=d.fromNode;var g=d.toNode;if(null!==t.draggedLink&&i.dragsLink)if(g=p.value.point,null===d.dragComputation)e.add(d,t.yd(i,d,s)),nc(d,s.x-g.x,s.y-g.y);else{p=dt.allocAt(0,0),(u=d.i(0))&&u.u()&&p.assign(u);var m=u=dt.alloc().assign(p).add(s);i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&xo(t,d,u,m=dt.alloc(),i),u.assign(d.dragComputation(d,u,m)).ce(p),e.add(d,t.yd(i,d,u)),nc(d,u.x-g.x,u.y-g.y),dt.free(p),dt.free(u),m!==u&&dt.free(m)}else null!==u&&(r.assign(u.location),null!==(m=e.H(u))&&r.ce(m.point)),null!==g&&(h.assign(g.location),null!==(m=e.H(g))&&h.ce(m.point)),null!==u&&null!==g?r.Na(h)?(u=p.value.point,(g=o).assign(r),g.ce(u),e.add(d,t.yd(i,d,r)),nc(d,g.x,g.y)):(d.suspendsRouting=!1,d.Ua()):(p=p.value.point,e.add(d,t.yd(i,d,u=null!==u?r:null!==g?h:s)),nc(d,u.x-p.x,u.y-p.y))}else null!==d.fromNode&&null!==d.toNode||(u=p.value.point,e.add(d,t.yd(i,d,s)),nc(d,s.x-u.x,s.y-u.y))}dt.free(o),dt.free(s),dt.free(r),dt.free(h),N(a),N(l),n||(so(t),So(t,e))}}function wo(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.bl}function xo(t,e,n,i,r){if(void 0===r&&(r=wo(t)),i.assign(n),null!==e){var o=t.grid;t=(e=r.gridSnapCellSize).width,e=e.height;var s=r.gridSnapOrigin,a=s.x;if(s=s.y,r=r.gridSnapCellSpot,null!==o){var l=o.gridCellSize;isNaN(t)&&(t=l.width),isNaN(e)&&(e=l.height),o=o.gridOrigin,isNaN(a)&&(a=o.x),isNaN(s)&&(s=o.y)}(o=dt.allocAt(0,0)).Jk(0,0,t,e,r),Xe.Aq(n.x,n.y,a+o.x,s+o.y,t,e,i),dt.free(o)}}function ko(t,e){if(null!==e)for(t.Zp=!0,t=e.iterator;t.next();)(e=t.key)instanceof Qu&&(e.suspendsRouting=!0)}function So(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof Qu&&(n.suspendsRouting=!1,ac(n)&&n.Ua())}t.Zp=!1}}function _o(t,e,n){if(null!==(e=e.containingGroup)){if(null!==(t=_o(t,e,n)))return t;if(null!==(t=n.H(e)))return t}return null}function Co(t,e,n){if(null!==e.diagram&&e.diagram!==t&&v("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&v("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&v("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&v("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.La).count;for(var i=0;i<n;i++)t.J(i).name===e&&v("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function Mo(t,e,n){var i=t.animationManager;if(t.Rb||t.ic)t.ya=n,i.df&&i.Ld.add(i.B,"scale",e,t.ya);else if(null===t.ta)t.ya=n;else{t.Rb=!0;var r=t.viewportBounds.copy(),o=t.xa,s=t.wa;r.width=t.xa/e,r.height=t.wa/e;var a=t.zoomPoint.x,l=t.zoomPoint.y,h=t.contentAlignment;isNaN(a)&&(h.Mc()?h.Df(pe)?a=0:h.Df(ge)&&(a=o-1):a=h.jb()?h.x*(o-1):o/2),isNaN(l)&&(h.Mc()?h.Df(de)?l=0:h.Df(me)&&(l=s-1):l=h.jb()?h.y*(s-1):s/2),null===t.scaleComputation||t.animationManager.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),o=dt.allocAt(t.la.x+a/e-a/n,t.la.y+l/e-l/n),t.position=o,dt.free(o),t.ya=n,t.Rq(r,t.viewportBounds,e,!1),t.Rb=!1,Yr(t,!1),i.df&&i.Ld.add(i.B,"scale",e,t.ya),t.M(),co(t)}}function Po(t,e){void 0===e&&(e=null);var n=t.Ib;if(null!==n&&n.visible){for(var i=Dt.alloc(),r=1,o=1,s=n.W.j,a=s.length,l=0;l<a;l++){var h=s[l],u=h.interval;2>u||(Al(h.figure)?o=o*u/Xe.qy(o,u):r=r*u/Xe.qy(r,u))}if(i.h(o*(s=n.gridCellSize).width,r*s.height),null!==e)r=e.width,o=e.height,t=e.x,s=e.y;else{if((e=Rt.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.u())return void Rt.free(e);r=e.width,o=e.height,t=e.x,s=e.y,Rt.free(e)}n.width=r+2*i.width,n.height=o+2*i.height,e=dt.alloc(),Xe.Aq(t,s,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),Dt.free(i),n.part.location=e,dt.free(e)}}function To(t){var e=t.isModified;t.vv!==e&&(t.vv=e,t.R("Modified"))}function No(t,e){for(var n=(e=e.W.j).length,i=0;i<n;i++)Ao(t,e[i])}function Ao(t,e){if(e instanceof zh){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){var i=e.Yg;if(null!==i&&(i.ml instanceof Event&&null!==e.Bc&&e.Bc(e,i.ml),!0===i.js&&(null!==e.qf&&e.qf(e,i.kv),null!==e.diagram&&e.diagram.Js.add(e))),n=n.getAttribute("src"),null===(i=t.Ni.H(n)))(i=[]).push(e),t.Ni.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function Eo(t,e){if(e instanceof zh){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n=n.getAttribute("src");var i=t.Ni.H(n);if(null!==i)for(var r=0;r<i.length;r++)if(i[r]===e){i.splice(r,1),0===i.length&&(t.Ni.remove(n),Vh(n));break}}}}function Lo(t,e){t.si=!1;var n=t.Mn;n.w(e)||(e=e.G(),t.Mn=e,Yr(t,!1),t.R("DocumentBoundsChanged",null,n.copy()),co(t))}function Oo(t,e){for(var n=t.Bh.iterator;n.next();)Do(t,n.value,e);null!==t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function Do(t,e,n){if(null!==e){for(var i=e.Kl.iterator;i.next();)Do(t,i.value,n);null!==e.layout&&(n?e.layout.isValidLayout=!1:e.layout.C())}}function jo(t,e){if(t.Ng&&!t.Lr){var n=t.Z;t.Z=!0;var i=t.undoManager.transactionLevel,r=t.layout,o=t.animationManager;try{0===i&&(t.undoManager.isInternalTransaction=!0,t.va("Layout")),1>=i&&!o.isAnimating&&!o.qc&&(e||rr(o,"Layout")),t.Ng=!1;for(var s=t.Bh.iterator;s.next();)Fo(t,s.value,e,i);r.isValidLayout||(!e||r.isRealtime||null===r.isRealtime||0===i?(r.doLayout(t),so(t),r.isValidLayout=!0):t.Ng=!0)}finally{e=t.undoManager.isInternalTransaction,0===i&&(t.Wa("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==i&&1!==i||sr(o),t.Z=n}}}function Fo(t,e,n,i){if(null!==e){for(var r=e.Kl.iterator;r.next();)Fo(t,r.value,n,i);null===(r=e.layout)||r.isValidLayout||(!n||r.isRealtime||0===i?(e.Ph=!e.location.u(),r.doLayout(e),e.C(32),ao(t,e),r.isValidLayout=!0):t.Ng=!0)}}function Io(t){function e(t){var e=t.toLowerCase(),r=new tt;n.add(t,r),n.add(e,r),i.add(t,t),i.add(e,t)}var n=new ft,i=new ft;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Or=n,t.Nr=i}function Ro(t,e){var n=t.Nr.H(e);return null!==n?n:t.Nr.H(e.toLowerCase())}function Bo(t,e){var n=t.Or.H(e);return null!==n||null!==(n=t.Or.H(e.toLowerCase()))?n:void v("Unknown DiagramEvent name: "+e)}function zo(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.Zp||e.isComplexRoutingRealtime}function Vo(t,e,n,i){if(null===t.Fc&&(t.Fc=new Hc),t.Fc.Nt||t.Fc.group!==n||t.Fc.Sy!==i){if(null===n){(e=t.computeOccupiedArea()).Hc(100,100),t.Fc.initialize(e),e=Rt.alloc();for(var r=t.nodes;r.next();){var o=r.value,s=o.layer;null!==s&&s.visible&&!s.isTemporary&&Uo(t,o,i,e)}Rt.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).Hc(20,20),t.Fc.initialize(e)),e=Rt.alloc(),r=n.memberParts;r.next();)(o=r.value)instanceof Tu&&Uo(t,o,i,e);Rt.free(e)}t.Fc.group=n,t.Fc.Sy=i,t.Fc.Nt=!1}else e&&Xc(t.Fc);return t.Fc}function Uo(t,e,n,i){if(e!==n)if(e.isVisible()&&e.avoidable&&!e.isLinkLabel){var r=(e=e.getAvoidableRect(i)).x,o=e.y;if(Gc(t=t.Fc,r,o))for(n=(o-t.xd)/t.ec|0,i=Math.min((r+e.width-t.wd)/t.dc|0,t.Xi),e=Math.min((o+e.height-t.xd)/t.ec|0,t.Yi),r=(r-t.wd)/t.dc|0;r<=i;r++)if((o=t.Qb[r]).fill)o.fill(Qc,n,e+1);else for(var s=n;s<=e;s++)o[s]=Qc}else if(e instanceof Xu)for(e=e.memberParts;e.next();)(r=e.value)instanceof Tu&&Uo(t,r,n,i)}function qo(t,e){null!==t.Fc&&!t.Fc.Nt&&(void 0===e&&(e=null),null===e||e.avoidable&&!e.isLinkLabel)&&(t.Fc.Nt=!0)}function Ho(t){-1===t.wj&&(t.wj=m(function(){if(-1!==t.wj&&(t.If(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.mn);e.Na(t.position)||(t.position=e,t.lastInput.documentPoint=t.ju(t.mn),t.doMouseMove(),t.si=!0,Lo(t,t.documentBounds.copy().Pc(t.computeBounds())),t.Cc=!0,t.dd(),Ho(t))}},t.ln))}function Go(t,e,n){function i(){var t=+new Date;for(o=!0,s.reset();s.next();)if(!s.value[0].Gl){o=!1;break}o||t-h>l?e(n,r,a):d.requestAnimationFrame(i)}for(var r=n.callback,o=!0,s=t.Ni.iterator;s.next();)if(!s.value[0].Gl){o=!1;break}if("function"!=typeof r||o)return e(n,r,t);var a=t,l=n.callbackTimeout||300,h=+new Date;return d.requestAnimationFrame(function(){i()}),null}function Yo(t,e,n,i){if(t.animationManager.Oc(),t.dd(),null===t.ta)return null;"object"!=typeof e&&v("properties argument must be an Object.");var r=e.size||null,o=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(o="NaN");var s=e.maxSize;void 0===e.maxSize&&(s="SVG"===n?new Dt(1/0,1/0):new Dt(2e3,2e3));var a=e.position||null,l=e.parts||null,h=void 0===e.padding?1:e.padding,u=e.background||null,c=e.omitTemporary;void 0===c&&(c=!0);var f=e.document||document,d=e.elementFinished||null,p=e.showTemporary;void 0===p&&(p=!c),void 0===(e=e.showGrid)&&(e=p),null!==r&&isNaN(r.width)&&isNaN(r.height)&&(r=null),"number"==typeof h?h=new Jt(h):h instanceof Jt||v("MakeImage padding must be a Margin or a number."),h.left=Math.max(h.left,0),h.right=Math.max(h.right,0),h.top=Math.max(h.top,0),h.bottom=Math.max(h.bottom,0),t.Gb.sc(!0);var g=(c=new La(null,f)).context;if(!(r||o||l||a))return c.width=t.xa+Math.ceil(h.left+h.right),c.height=t.wa+Math.ceil(h.top+h.bottom),"SVG"===n?null===i?null:(i.resize(c.width,c.height,c.width,c.height),i.ownerDocument=f,i.xq=d,lo(t,i.context,h,new Dt(c.width,c.height),t.ya,t.la,l,u,p,e),i.context):(t.il=!1,lo(t,g,h,new Dt(c.width,c.height),t.ya,t.la,l,u,p,e),t.il=!0,c.context);var m=t.Ln,y=t.documentBounds.copy();if(y.Fw(t.hb),p)for(var b=t.La.j,w=b.length,x=0;x<w;x++){var k=b[x];if(k.visible&&k.isTemporary)for(var S=(k=k.Da.j).length,_=0;_<S;_++){var C=k[_];C.isInDocumentBounds&&C.isVisible()&&(C=C.actualBounds).u()&&y.Pc(C)}}if(b=new dt(y.x,y.y),null!==l){for(w=!0,(x=l.iterator).reset();x.next();)if((k=x.value)instanceof ou&&(null===(S=k.layer)||S.visible)&&(null===S||p||!S.isTemporary)&&k.isVisible()&&(k=k.actualBounds).u())if(w){w=!1;var M=k.copy()}else M.Pc(k);w&&(M=new Rt(0,0,0,0)),y.width=M.width,y.height=M.height,b.x=M.x,b.y=M.y}return null!==a&&a.u()&&(b=a,o||(o=m)),M=a=0,null!==h&&(a=h.left+h.right,M=h.top+h.bottom),w=x=0,null!==r&&(x=r.width,w=r.height,isFinite(x)&&(x=Math.max(0,x-a)),isFinite(w)&&(w=Math.max(0,w-M))),null!==r&&null!==o?("NaN"===o&&(o=m),r.u()?(r=x,y=w):isNaN(w)?(r=x,y=y.height*o):(r=y.width*o,y=w)):null!==r?r.u()?(o=Math.min(x/y.width,w/y.height),r=x,y=w):isNaN(w)?(r=x,y=y.height*(o=x/y.width)):(r=y.width*(o=w/y.height),y=w):null!==o?"NaN"===o&&s.u()?(o=Math.min((s.width-a)/y.width,(s.height-M)/y.height))>m?(o=m,r=y.width,y=y.height):(r=s.width,y=s.height):(r=y.width*o,y=y.height*o):(o=m,r=y.width,y=y.height),null!==h?(r+=a,y+=M):h=new Jt(0),null!==s&&(m=s.width,s=s.height,isNaN(m)&&(m=2e3),isNaN(s)&&(s=2e3),isFinite(m)&&(r=Math.min(r,m)),isFinite(s)&&(y=Math.min(y,s))),c.width=Math.ceil(r),c.height=Math.ceil(y),"SVG"===n?null===i?null:(i.resize(c.width,c.height,c.width,c.height),i.ownerDocument=f,i.xq=d,lo(t,i.context,h,new Dt(Math.ceil(r),Math.ceil(y)),o,b,l,u,p,e),i.context):(t.il=!1,lo(t,g,h,new Dt(Math.ceil(r),Math.ceil(y)),o,b,l,u,p,e),t.il=!0,c.context)}Pr.className="AnimationTrigger",Pr.Default=Tr,Pr.Immediate=Nr,Pr.Bundled=Ar,(e=Er.prototype).clear=function(){this.Da.clear(),this.jp.length=0},e.ae=function(t){this.B=t},e.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,i=0,r=0,o=0,s=0,a=this.Da.iterator;a.next();){var l=a.value;l instanceof Xu?r++:l instanceof Tu?i++:l instanceof Qu?o++:l instanceof Pu?s++:n++}if(a="",0<n&&(a+=n+" Parts "),0<i&&(a+=i+" Nodes "),0<r&&(a+=r+" Groups "),0<o&&(a+=o+" Links "),0<s&&(a+=s+" Adornments "),1<t)for(t=this.Da.iterator;t.next();)a+="\n    "+(n=t.value).toString(),null!==(i=n.data)&&ot(i)&&(a+=" #"+ot(i)),n instanceof Tu?a+=" "+E(i):n instanceof Qu&&(a+=" "+E(n.fromNode)+" "+E(n.toNode));return e+" "+this.Da.count+": "+a},e.Ub=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.Mi)return null;var i=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(i=!0);for(var r=dt.alloc(),o=this.Da.j,s=o.length;s--;){var a=o[s];if((!0!==i||!1!==bu(a))&&a.isVisible()&&(r.assign(t),yt(r,a.Bd),null!==(a=a.Ub(r,e,n))&&(null!==e&&(a=e(a)),null!==a&&(null===n||n(a)))))return dt.free(r),a}return dt.free(r),null},e.fj=function(t,e,n,i){if(void 0===e&&(e=null),void 0===n&&(n=null),i instanceof tt||i instanceof nt||(i=new nt),!1===this.Mi)return i;var r=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(r=!0);for(var o=dt.alloc(),s=this.Da.j,a=s.length;a--;){var l=s[a];if((!0!==r||!1!==bu(l))&&l.isVisible()){o.assign(t),yt(o,l.Bd);var h=l;l.fj(o,e,n,i)&&(null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||i.add(h))}}return dt.free(o),i},e.zf=function(t,e,n,i,r){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),r instanceof tt||r instanceof nt||(r=new nt),!1===this.Mi)return r;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.De(t)&&(o=!0);for(var s=this.Da.j,a=s.length;a--;){var l=s[a];if((!0!==o||!1!==bu(l))&&l.isVisible()){var h=l;l.zf(t,e,n,i,r)&&(null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||r.add(h))}}return r},e.Qv=function(t,e,n,i,r,o,s){if(!1===this.Mi)return r;for(var a=this.Da.j,l=a.length;l--;){var h=a[l];if((!0!==s||!1!==bu(h))&&o(h)&&h.isVisible()){var u=h;h.zf(t,e,n,i,r)&&(null!==e&&(u=e(u)),null===u||null!==n&&!n(u)||r.add(u))}}return r},e.Eg=function(t,e,n,i,r,o){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof tt||r instanceof nt)&&(o=r),r=!0),o instanceof tt||o instanceof nt||(o=new nt),!1===this.Mi)return o;var s=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(s=!0);for(var a=dt.alloc(),l=dt.alloc(),h=this.Da.j,u=h.length;u--;){var c=h[u];if((!0!==s||!1!==bu(c))&&c.isVisible()){a.assign(t),yt(a,c.Bd),l.h(t.x+e,t.y),yt(l,c.Bd);var f=c;c.Eg(a,l,n,i,r,o)&&(null!==n&&(f=n(f)),null===f||null!==i&&!i(f)||o.add(f))}}return dt.free(a),dt.free(l),o},e.Hd=function(t,e){if(this.visible){var n=this.Da.j,i=n.length;if(0!==i){t=T();for(var r=T(),o=0;o<i;o++){var s=n[o];if(s.wx=o,s instanceof Qu){if(!1===s.ed)continue}else if(s instanceof Pu&&null!==s.adornedPart)continue;Gt(s.actualBounds,e)?(s.Hd(!0),t.push(s)):(s.Hd(!1),null!==s.adornments&&0<s.adornments.count&&r.push(s))}for(e=0;e<t.length;e++)for(su(n=t[e]),n=n.adornments;n.next();)(i=n.value).measure(1/0,1/0),i.arrange(),i.Hd(!0);for(e=0;e<r.length;e++)su(r[e]);N(t),N(r)}}},e.ac=function(t,e,n){if(this.visible&&0!==this.gb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var i=(n=this.Da.j).length;if(0!==i){var r=Lr(this,t),o=this.jp;o.length=0;for(var s=e.scale,a=Rt.alloc(),l=0;l<i;l++)this.bj(t,n[l],e,o,s,a,!0);Rt.free(a),t.globalAlpha=r}}},e.bj=function(t,e,n,i,r,o,s){if(!s||bu(e)){if(null!==i&&e instanceof Qu&&(e.isOrthogonal&&i.push(e),!1===e.ed))return;s=e.actualBounds,i=!1;var a=e.containingGroup;if(null!==a&&a.isClipping&&a.type!==Ml.Spot&&e.isVisible()){if((i=a.resizeObject)instanceof Ml&&(i=i.qb()),i.sm(o),i instanceof ih&&o.Hc(-i.strokeWidth,-i.strokeWidth),!o.Kc(s))return;i=!o.De(s)}i&&(t.save(),t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip()),s.width*r>n.Po||s.height*r>n.Po?e.ac(t,n):(o=e.naturalBounds,0===(r=e.actualBounds).width||0===r.height||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(n=e.transform,null!==e.areaBackground&&(Qs(e,t,e.areaBackground,!0,!0,o,r),t.fillRect(r.x,r.y,r.width,r.height)),null===e.areaBackground&&null===e.background&&(Qs(e,t,"rgba(0,0,0,0.3)",!0,!1,o,r),t.fillRect(r.x,r.y,r.width,r.height)),null!==e.background&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Qs(e,t,e.background,!0,!1,o,r),t.fillRect(0,0,o.width/2,o.height/2),n.Pt()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))))),i&&(t.restore(),t.sc(!0))}},e.g=function(t,e,n,i,r){var o=this.diagram;null!==o&&o.ab(Cn,t,this,e,n,i,r)},e.lj=function(t,e,n){var i=this.Da;if(e.Ci=this,t>=i.count)t=i.count;else if(i.J(t)===e)return-1;return i.vb(t,e),e.Gq(n),null!==(i=this.diagram)&&(n?i.M():i.lj(e)),Or(this,t,e),t},e.Jc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.Jc(t,e,n);var i=this.Da;if(0>t||t>=i.length){if(0>(t=i.indexOf(e)))return-1}else if(i.J(t)!==e&&0>(t=i.indexOf(e)))return-1;return e.Hq(n),i.bb(t),null!==(i=this.diagram)&&(n?i.M():i.Jc(e)),e.Ci=null,t},c.Object.defineProperties(Er.prototype,{parts:{get:function(){return this.Da.iterator}},partsBackwards:{get:function(){return this.Da.iteratorBackwards}},diagram:{get:function(){return this.B}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&v("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&v("Layer.name is already present in this diagram: "+t);for(this.Qa=t,this.g("name",e,t),t=this.Da.iterator;t.next();)t.value.layerName=this.Qa}}},opacity:{get:function(){return this.gb},set:function(t){var e=this.gb;e!==t&&((0>t||1<t)&&w(t,"0 <= value <= 1",Er,"opacity"),this.gb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.M())}},isTemporary:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(this.v=t,this.isInDocumentBounds=!1,this.g("isTemporary",e,t))}},visible:{get:function(){return this.I},set:function(t){var e=this.I;if(e!==t){for(this.I=t,this.g("visible",e,t),e=this.Da.iterator;e.next();)e.value.Ob(t);null!==(t=this.diagram)&&t.M()}}},pickable:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==this.diagram&&this.diagram.Oa())}},allowCopy:{get:function(){return this.Yh},set:function(t){var e=this.Yh;e!==t&&(this.Yh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowSelect",e,t))}}}),Er.prototype.findObjectsNear=Er.prototype.Eg,Er.prototype.findObjectsIn=Er.prototype.zf,Er.prototype.findObjectsAt=Er.prototype.fj,Er.prototype.findObjectAt=Er.prototype.Ub,Er.className="Layer",Dr.prototype.clear=function(){this.animationManager.Oc(),this.model.clear(),Jo=null,Qo="",jr(this,!1),this.Oa(),this.Ta(),this.M()},Dr.prototype.reset=function(){this.clear(),this.Rb=!0,this.Sc=new ir,this.Sc.ae(this),this.ob=17,this.yl=this.lv=!1,this.Qs="default",this.La=new tt,this.Hx=new ft,this.gf=null,this.tw(),this.Ij=null,this.sw(),this.gb=1,this.la=new dt(NaN,NaN).freeze(),this.Rs=new dt(NaN,NaN),this.Ln=this.ya=1,this.cs=new dt(NaN,NaN).freeze(),this.ds=NaN,this.vs=1e-4,this.ts=100,this.pb=new Ge,this.tt=new dt(NaN,NaN).freeze(),this.Xr=new Rt(NaN,NaN,NaN,NaN).freeze(),this.Qi=new Jt(0,0,0,0).freeze(),this.Ri=hs,this.Zs=!1,this.Ss=this.Ms=null,this.Og=ts,this.yj=Te,this.Yf=ts,this.mo=Te,this.es=this.bs=re,this.Cc=!0,this.wl=!1,this.sd=new nt,this.Vg=new ft,this.il=!0,this.ln=250,this.wj=-1,this.nn=new Jt(16,16,16,16).freeze(),this.Cj=this.Ae=!1,this.Fj=!0,this.Vf=new xn,this.Vf.diagram=this,this.kd=new xn,this.kd.diagram=this,this.gh=new xn,this.gh.diagram=this,this.se=this.Nf=null,this.ck=!1,this.Nr=this.Or=null,this.gn=d.PointerEvent&&(I||R||B)&&d.navigator&&!1!==d.navigator.msPointerEnabled,Io(this),this.Bh=new nt,this.os=!0,this.nt=cs,this.Pu=!1,this.pt=is,this.Hr=this.Kr=this.lt=null,this.Kn=this.Fr="auto",this.gg=this.ys=this.ig=this.jg=this.lg=this.Pf=this.Tf=this.Of=null,this.$r=!1,this.Qf=this.wg=this.kg=this.hg=null,this.zs=!1,this.Ks={},this.Xj=[null,null],this.zr=null,this.Lr=this.ct=this.nv=this.ug=!1,this.Wu=!0,this.vi=this.ic=!1,this.vv=!0,this.Rd=-2,this.Ni=new ft,this.Js=new tt,this.$f=!1,this.Zh=this.Yh=this.lr=this.hd=!0,this.mr=!1,this.tr=this.rr=this.gi=this.fi=this.ei=this.di=this.bi=this.ci=this.ai=this.qr=this.ii=this.$h=this.hi=this.nr=!0,this.Zf=this.Su=!1,this.sr=this.pr=this.ol=this.nl=!0,this.Ys=this.Us=16,this.Ts=this.Gp=!1,this.Vs=this.Xs=0,this.hb=new Jt(5).freeze(),this.mv=(new nt).freeze(),this.us=999999999,this.Mu=(new nt).freeze(),this.ui=this.ti=this.si=!0,this.Xe=this.le=!1,this.jc=null,this.Ng=!0,this.me=!1,this.xx=new nt,this.Nu=new nt,this.Fc=null,this.Nl=1,this.ov=0,this.Wd={scale:1,position:new dt,bounds:new Rt,cw:!1},this.Ox=new Rt(NaN,NaN,NaN,NaN).freeze(),this.im=new Dt(NaN,NaN).freeze(),this.Mn=new Rt(NaN,NaN,NaN,NaN).freeze(),this.ps=!1,this.Do=this.ko=this.bp=this.Au=this.zu=this.Bu=this.bg=this.eh=this.cf=null,Ir(this),this.Ib=null,this.jo=!1,this.zj=null,this.partManager=new Uf,this.toolManager=new Ln,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Qr=null,this.bl=new Fs,this.Es=this.Ds=null,this.Zp=!1,this.commandHandler=Fr(),this.ug=!0,Vr(this),this.layout=new uf,this.ug=!1,this.model=Pd(),this.model.undoManager=new Nn,this.me=!1,this.Fj=!0,this.Ae=!1,this.Sb=1,this.wh=null,this.Po=1,this.Vo=0,this.cv=[0,0,0,0,0],this.Wo=0,this.td=1,this.Nj=0,this.yo=new dt,this.mt=500,this.mn=new dt,this.$p=this.oo=this.ne=!1,this.Wn=null,this.Xn=Ct,this.Rb=!1,this.M()},Dr.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=d.document.body);var e=y("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.Qs=n},Dr.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=d.document.body);var e=0;if(Zo){var n=$o;e=Wo,null===n&&((n=$o=y("p")).style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",(e=Wo=y("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var i=n.offsetWidth;e.style.overflow="scroll",i===(n=n.offsetWidth)&&(n=e.clientWidth),t.removeChild(e),0!=(e=i-n)||V||(e=11)}this.ob=e,this.lv=!0},Dr.prototype.ib=function(t){t.classType===Dr&&(this.autoScale=t)},Dr.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.La.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},Dr.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,{capture:i,passive:!1})},Dr.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,{capture:i})},Dr.prototype.computePixelRatio=function(){return null!==this.wh?this.wh:d.devicePixelRatio||1},Dr.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},Dr.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},Dr.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},Dr.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},Dr.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},Dr.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},Dr.prototype.doFocus=function(){this.focus()},Dr.prototype.focus=function(){if(this.ta)if(this.scrollsPageOnFocus)this.ta.focus();else{var t=d.scrollX||d.pageXOffset,e=d.scrollY||d.pageYOffset;this.ta.focus(),d.scrollTo(t,e)}},Dr.prototype.wz=function(){this.B.R("GainedFocus")},Dr.prototype.vz=function(){this.B.R("LostFocus")},Dr.prototype.ey=function(t){if(null!==this.ta){this.Gp=!0;var e=this.documentBounds,n=this.viewportBounds,i=this.Qi,r=e.x-i.left,o=e.y-i.top,s=e.width+i.left+i.right,a=e.height+i.top+i.bottom,l=e.right+i.right;i=e.bottom+i.bottom;var h=n.x;e=n.y;var u=n.width,c=n.height,f=n.right,d=n.bottom;n=this.scale;var p=t.scrollLeft;if(this.yl)switch(this.Qs){case"negative":p=p+t.scrollWidth-t.clientWidth;break;case"reverse":p=t.scrollWidth-p-t.clientWidth}var g=p;u<s||c<a?(p=dt.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Vs!==g&&(p.x=g/n+r,this.Vs=g),this.allowVerticalScroll&&this.Xs!==t.scrollTop&&(p.y=t.scrollTop/n+o,this.Xs=t.scrollTop),this.position=p,dt.free(p),this.ti=this.Gp=!1):(p=dt.alloc(),t.dz&&this.allowHorizontalScroll&&(r<h&&(this.position=p.h(g+r,this.position.y)),l>f&&(this.position=p.h(-(this.Ws.scrollWidth-this.xa)+g-this.xa/n+l,this.position.y))),t.ez&&this.allowVerticalScroll&&(o<e&&(this.position=p.h(this.position.x,t.scrollTop+o)),i>d&&(this.position=p.h(this.position.x,-(this.Ws.scrollHeight-this.wa)+t.scrollTop-this.wa/n+i))),dt.free(p),fo(this),this.ti=this.Gp=!1,l=(e=this.documentBounds).right,f=(n=this.viewportBounds).right,i=e.bottom,d=n.bottom,r=e.x,h=n.x,o=e.y,e=n.y,u>=s&&r>=h&&l<=f&&(this.Hp.style.width="1px"),c>=a&&o>=e&&i<=d&&(this.Hp.style.height="1px"))}},Dr.prototype.computeBounds=function(){return 0<this.sd.count&&so(this),Gr(this)},Dr.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(_(t))for(var i=0;i<t.length;i++){var r=t[i];!e&&r instanceof Qu||(r.Ta(),null===n?n=r.actualBounds.copy():n.Pc(r.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof Qu||(i.Ta(),null===n?n=i.actualBounds.copy():n.Pc(i.actualBounds));return null===n?new Rt(NaN,NaN,0,0):n},Dr.prototype.zoomToFit=function(){var t=this.Ri;this.Ri=hs,this.scale=Xr(this,es),t!==hs&&(Yr(this,!1),Kr(this,this.documentBounds,this.xa/this.ya,this.wa/this.ya,this.yj,!1)),this.Ri=t},(e=Dr.prototype).fB=function(t,e){void 0===e&&(e=es);var n=t.width,i=t.height;if(!(0===n||0===i||isNaN(n)&&isNaN(i))){var r=1;if(e===es||e===ns)if(isNaN(n))r=this.viewportBounds.height*this.scale/i;else if(isNaN(i))r=this.viewportBounds.width*this.scale/n;else{r=this.xa;var o=this.wa;r=e===ns?o/i>r/n?(o-(this.le?this.ob:0))/i:(r-(this.Xe?this.ob:0))/n:Math.min(o/i,r/n)}this.scale=r,this.position=new dt(t.x,t.y)}},e.oz=function(t,e){this.Ta();var n=this.documentBounds,i=this.viewportBounds;this.position=new dt(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},e.fA=function(t){if(t instanceof Ys){this.Wn=t;var e=dt.alloc();this.Xn=this.er(t.ga(re,e)),dt.free(e)}else this.Wn=null,this.Xn=Ct},e.qm=function(t,e){if(void 0===e&&(e=!0),e){if((t=Wr(this,t,function(t){return t.part},function(t){return t.canSelect()}))instanceof ou)return t}else if((t=Wr(this,t,function(t){return t.part}))instanceof ou)return t;return null},e.Ub=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),so(this);for(var i=this.La.iteratorBackwards;i.next();){var r=i.value;if(r.visible&&null!==(r=r.Ub(t,e,n)))return r}return null},e.Uz=function(t,e,n){return void 0===e&&(e=!0),function(t,e,n,i,r){for(void 0===n&&(n=null),void 0===i&&(i=null),r instanceof tt||r instanceof nt||(r=new nt),so(t),t=t.La.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.fj(e,n,i,r)}return r}(this,t,function(t){return t.part},e?function(t){return t instanceof ou&&t.canSelect()}:null,n)},e.fj=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),i instanceof tt||i instanceof nt||(i=new nt),so(this);for(var r=this.La.iteratorBackwards;r.next();){var o=r.value;o.visible&&o.fj(t,e,n,i)}return i},e.py=function(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!0),function(t,e,n,i,r){var o=null;for(void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=!1),r instanceof tt||r instanceof nt||(r=new nt),so(t),t=t.La.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.zf(e,o,n,i,r)}return r}(this,t,function(t){return t instanceof ou&&(!n||t.canSelect())},e,i)},e.zf=function(t,e,n,i,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),r instanceof tt||r instanceof nt||(r=new nt),so(this);for(var o=this.La.iteratorBackwards;o.next();){var s=o.value;s.visible&&s.zf(t,e,n,i,r)}return r},e.Qv=function(t,e,n,i,r,o){var s=new nt;so(this);for(var a=this.La.iteratorBackwards;a.next();){var l=a.value;l.visible&&l.Qv(t,e,n,i,s,r,o)}return s},e.Vz=function(t,e,n,i,r){return void 0===n&&(n=!0),void 0===i&&(i=!0),function(t,e,n,i,r,o){var s=null;for(void 0===s&&(s=null),void 0===i&&(i=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof tt||r instanceof nt)&&(o=r),r=!0),o instanceof tt||o instanceof nt||(o=new nt),so(t),t=t.La.iteratorBackwards;t.next();){var a=t.value;a.visible&&!a.isTemporary&&a.Eg(e,n,s,i,r,o)}return o}(this,t,e,function(t){return t instanceof ou&&(!i||t.canSelect())},n,r)},e.Eg=function(t,e,n,i,r,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof tt||r instanceof nt)&&(o=r),r=!0),o instanceof tt||o instanceof nt||(o=new nt),so(this);for(var s=this.La.iteratorBackwards;s.next();){var a=s.value;a.visible&&a.Eg(t,e,n,i,r,o)}return o},Dr.prototype.acceptEvent=function(t){return $r(this,t,t instanceof MouseEvent)},Dr.prototype.xA=function(t){var e=this.B;if(!this.B.isEnabled)return!1;var n=$r(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),eo(n,t)},Dr.prototype.yA=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=$r(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),eo(n,t)},Dr.prototype.Jz=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=$r(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),eo(n,t)},Dr.prototype.Kz=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=$r(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),eo(n,t)},Dr.prototype.getMouse=function(t){var e=this.ta;if(null===e)return new dt(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.xa/n.width*n.left,t=t.clientY-this.wa/n.height*n.top,null!==this.pb?yt(new dt(e,t),this.pb):new dt(e,t)},(e=Dr.prototype).Oa=function(){this.si||(this.si=!0,this.Db(!0))},e.Je=function(){this.Rb||this.ic||(this.M(),co(this),fo(this),this.Oa(),this.dd())},e.wA=function(){return this.Ae},e.Ez=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.Oc(),e.isEnabled=!1,oo(this),this.me=!1,this.Rs=new dt(NaN,NaN),e.isEnabled=n,this.ic=!0;var i=this;null!==t&&m(function(){i.ic=!1,rr(e,"Model"),t()},1)},e.Db=function(t){if(void 0===t&&(t=!1),!0!==this.Ae&&!(this.Rb||!1===t&&this.ic)){this.Ae=!0;var e=this;d.requestAnimationFrame(function(){e.Ae&&e.dd()})}},e.dd=function(){this.Fj&&!this.Ae||(this.Fj&&(this.Fj=!1),oo(this))},e.Rw=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Lc()||n instanceof Xu||(n.oj()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof Xu&&n.isVisible()&&ao(this,n);for(t.reset();t.next();)(n=t.value)instanceof Qu&&n.isVisible()&&(n.oj()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof Pu&&n.isVisible()&&(n.oj()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},e.Hd=function(t,e,n,i){if(this.ui||this.animationManager.isAnimating){void 0===i&&(i=n.viewportBounds);for(var r=0;r<e;r++)t[r].Hd(n,i)}},e.ac=function(t,e){if(void 0===e&&(e=null),null!==this.Ea){null===this.ta&&v("No canvas specified");var n=this.animationManager;if(!n.qc&&(!n.isAnimating||n.isTicking)){var i=new Date;if(po(this),"0"!==this.Ea.style.opacity){var r=t!==this.Gb,o=this.La.j,s=o.length,a=this;if(this.Hd(o,s,a),r)t.sc(!0),fo(this);else if(!this.Cc&&null===e&&!n.isAnimating)return;s=this.la;var l=this.ya,h=Math.round(s.x*l)/l,u=Math.round(s.y*l)/l;for((n=this.pb).reset(),1!==l&&n.scale(l),0===s.x&&0===s.y||n.translate(-h,-u),l=this.Sb,t.setTransform(1,0,0,1,0,0),t.scale(l,l),t.clearRect(0,0,this.xa,this.wa),1!==this.gb&&(t.globalAlpha=this.gb),ho(this,t),h=null!==e?function(n){var i=e;if(n.visible&&0!==n.gb){var r=n.Da.j,o=r.length;if(0!==o){var s=Lr(n,t),l=n.jp;l.length=0;for(var h=a.scale,u=Rt.alloc(),c=0;c<o;c++){var f=r[c];i.contains(f)||n.bj(t,f,a,l,h,u,!0)}Rt.free(u),t.globalAlpha=s}}}:function(e){e.ac(t,a)},s=o.length,u=0;u<s;u++)t.setTransform(1,0,0,1,0,0),t.scale(l,l),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),h(o[u]);if(o=!1,this.ri?xs(this.ri,this)&&(o=this.Rr()):o=!0,o&&(Ge.prototype.Dd=Ge.prototype.Xx),r?(this.Gb.sc(!0),fo(this)):this.Cc=this.ui=!1,o=+new Date-+i,i=this.cv,(r=W&&W.jy)||null===this.wh){for(i[this.Wo]=o,this.Wo=(this.Wo+1)%i.length,n=o=0;n<i.length;n++)o+=i[n];this.Vo=o/i.length}if(1!==this.gb&&(t.globalAlpha=1),r)for(t.setTransform(1,0,0,1,0,0),r=0;r<i.length;r++)t.fillText(i[r].toString(),20,150+20*r)}}}},e.Ge=function(t){return this.gf[t]},e.Qy=function(t,e){"minDrawingLength"===t&&(this.Po=e),this.gf[t]=e,this.Je()},e.tw=function(){this.gf=new X,this.gf.drawShadows=!0,this.gf.textGreeking=!0,this.gf.viewportOptimizations=!(V||I||R),this.gf.temporaryPixelRatio=!0,this.gf.pictureRatioOptimization=!0,this.Po=this.gf.minDrawingLength=1},e.tm=function(t){return this.Ij[t]},e.UA=function(t,e){this.Ij[t]=e},e.sw=function(){this.Ij=new X,this.Ij.extraTouchArea=10,this.Ij.extraTouchThreshold=10,this.Ij.hasGestureZoom=!0},e.Bw=function(t){uo(this,t)},e.Cv=function(){if(0===this.undoManager.transactionLevel&&0!==this.Vg.count){for(;0<this.Vg.count;){var t=this.Vg;for(this.Vg=new ft,t=t.iterator;t.next();){var e=t.key;e.Jq(t.value),e.bc()}}this.M()}},e.M=function(t){if(void 0===t&&(t=null),null===t)this.Cc=!0,this.Db();else{var e=this.viewportBounds;null!==t&&t.u()&&e.Kc(t)&&(this.Cc=!0,this.Db())}this.R("InvalidateDraw")},e.By=function(t,e){if(!0!==this.Cc){this.Cc=!0;var n=!0===this.Ge("temporaryPixelRatio");if(!0===this.Ge("viewportOptimizations")&&this.scrollMode!==us&&this.Qi.dj(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,r=Math.max(t.x,e.x),o=Math.max(t.y,e.y);if(i=Rt.allocAt(r,o,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-r)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-o)*i),!this.$p&&0<i.width&&0<i.height){if(!(this.ic||(this.Ae=!1,null===this.Ea||(this.ic=!0,this.Cv(),this.documentBounds.u()||Lo(this,this.computeBounds()),r=this.ta,null===r||r instanceof Ca)))){var s=this.Sb;o=this.xa*s;var a=this.wa*s,l=this.scale*s,h=Math.round(Math.round(e.x*l)-Math.round(t.x*l));e=Math.round(Math.round(e.y*l)-Math.round(t.y*l)),t=this.px,(l=this.Eu).width!==o&&(l.width=o),l.height!==a&&(l.height=a),t.clearRect(0,0,o,a),l=190*s;var u=70*s,c=Math.max(h,0),f=Math.max(e,0),d=Math.floor(o-c),p=Math.floor(a-f);t.drawImage(r.Ga,c,f,d,p,0,0,d,p),xs(this.ri,this)&&t.clearRect(0,0,l,u),r=T(),t=T(),p=Math.abs(h),d=Math.abs(e);var g=0===c?0:o-p;c=dt.allocAt(g,0),p=dt.allocAt(p+g,a),t.push(new Rt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y)));var m=this.pb;if(m.reset(),m.scale(s,s),1!==this.ya&&m.scale(this.ya),(0!==(s=this.la).x||0!==s.y)&&isFinite(s.x)&&isFinite(s.y)&&m.translate(-s.x,-s.y),yt(c,m),yt(p,m),r.push(new Rt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),c.h(0,g=0===f?0:a-d),p.h(o,d+g),t.push(new Rt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),yt(c,m),yt(p,m),r.push(new Rt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),xs(this.ri,this)&&(c.h(o=0<h?0:-h,a=0<e?0:-e),p.h(l+o,u+a),t.push(new Rt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),yt(c,m),yt(p,m),r.push(new Rt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y)))),dt.free(c),dt.free(p),ro(this,!1,!0),null===this.Ea&&v("No div specified"),null===this.ta&&v("No canvas specified"),!this.animationManager.qc&&(o=this.Gb,this.Cc)){for(po(this),a=this.Sb,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,this.xa*a,this.wa*a),o.drawImage(this.Eu.Ga,0<h?0:Math.round(-h),0<e?0:Math.round(-e)),h=this.la,s=this.ya,l=Math.round(h.x*s)/s,u=Math.round(h.y*s)/s,(e=this.pb).reset(),1!==s&&e.scale(s),0===h.x&&0===h.y||e.translate(-l,-u),o.save(),o.beginPath(),h=t.length,s=0;s<h;s++)0!==(l=t[s]).width&&0!==l.height&&o.rect(Math.floor(l.x),Math.floor(l.y),Math.ceil(l.width),Math.ceil(l.height));for(o.clip(),o.setTransform(1,0,0,1,0,0),o.scale(a,a),o.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.Hd(e=this.La.j,h=e.length,this),ho(this,o),o.globalAlpha=this.gb,a=0;a<h;a++)if(l=r,(s=e[a]).visible&&0!==s.gb){u=Lr(s,o),(f=s.jp).length=0,c=this.scale,d=Rt.alloc(),m=(p=s.Da.j).length,g=l.length;for(var y=0;y<m;y++){var b=p[y],w=hu(b,b.actualBounds);t:{for(var x=2/c,k=4/c,S=0;S<g;S++){var _=l[S];if(0!==_.width&&0!==_.height&&w.Yv(_.x-x,_.y-x,_.width+k,_.height+k)){w=!0;break t}}w=!1}w&&s.bj(o,b,this,f,c,d,!0)}Rt.free(d),o.globalAlpha=u}o.restore(),o.sc(!0),this.ri&&xs(this.ri,this)&&this.Rr(),this.Cc=this.ui=!1,this.Vq()}N(r),N(t),this.ic=!1}}else this.dd();Rt.free(i),n&&(Rr(this),this.dd(),Br(this,!0))}else n?(Rr(this),this.dd(),Br(this,!0)):this.dd()}},e.add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&v("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.pm(t.layerName))&&(e=this.pm("")),null===e&&v('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.lj(99999999,t,t.diagram===this);0<=n&&this.ab(Mn,"parts",e,null,t,null,n),e.isTemporary||this.Oa(),t.C(1),null!==(n=t.layerChanged)&&n(t,null,e)}},e.lj=function(t){this.partManager.lj(t);var e=this;Ll(t,function(t){No(e,t)}),(t instanceof Pu||t instanceof Xu&&null!==t.placeholder)&&t.o(),null!==t.data&&Ll(t,function(t){Xf(e.partManager,t)}),!0!==da(t)&&!0!==mu(t)||this.sd.add(t),pu(t,!0,this),_u(t)?(t.actualBounds.u()&&this.M(hu(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(hu(t,t.actualBounds)),this.Db()},e.Jc=function(t){t.ik(),this.partManager.Jc(t);var e=this;null!==t.data&&Ll(t,function(t){Kf(e.partManager,t,e)}),this.sd.remove(t),_u(t)?(t.actualBounds.u()&&this.M(hu(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(hu(t,t.actualBounds)),this.Db()},e.remove=function(t){yo(this,t,!0)},e.cu=function(t,e){if(_(t))for(var n=t.length,i=0;i<n;i++){var r=t[i];e&&!r.canDelete()||this.remove(r)}else for((n=new nt).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},e.nk=function(t,e,n){return this.partManager.nk(t,e,n)},Dr.prototype.moveParts=function(t,e,n,i){if(void 0===i&&(i=wo(this)),null!==this.toolManager){var r=new ft;if(null!==t)if(_(t))for(var o=0;o<t.length;o++)vo(this,r,t[o],n,i);else for(t=t.iterator;t.next();)vo(this,r,t.value,n,i);else{for(t=this.parts;t.next();)vo(this,r,t.value,n,i);for(t=this.nodes;t.next();)vo(this,r,t.value,n,i);for(t=this.links;t.next();)vo(this,r,t.value,n,i)}bo(this,r,e,i,n)}},Dr.prototype.computeMove=function(t,e,n,i){if(void 0===i&&(i=new dt),i.assign(e),null===t)return i;var r=e,o=n.isGridSnapEnabled;o&&(n.isGridSnapRealtime||this.lastInput.up)&&xo(this,t,e,r=dt.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,r):r;var s=t.minLocation,a=s.x;isNaN(a)&&(a=o?Math.round(1e3*t.location.x)/1e3:t.location.x),s=s.y,isNaN(s)&&(s=o?Math.round(1e3*t.location.y)/1e3:t.location.y);var l=t.maxLocation,h=l.x;return isNaN(h)&&(h=o?Math.round(1e3*t.location.x)/1e3:t.location.x),l=l.y,isNaN(l)&&(l=o?Math.round(1e3*t.location.y)/1e3:t.location.y),i.h(Math.max(a,Math.min(n.x,h)),Math.max(s,Math.min(n.y,l))),r!==e&&dt.free(r),i},(e=Dr.prototype).yd=function(t,e,n){if(void 0===n)return new Ss(xt);var i=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(i=!1),new Ss(i?new dt(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3):n.copy())},e.km=function(t){Co(this,t,null),t.ae(this);var e=this.La,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.J(n).isTemporary;)n--;e.vb(n+1,t),null!==this.$b&&this.ab(Mn,"layers",this,null,t,null,n+1),this.M(),this.Oa()},e.Rx=function(t,e){Co(this,t,e),t.ae(this);var n=this.La,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.$b&&this.ab(Pn,"layers",this,t,null,i,null));var r,o=n.count;for(r=0;r<o;r++)if(n.J(r)===e){n.vb(r,t);break}null!==this.$b&&this.ab(Mn,"layers",this,null,t,null,r),this.M(),0>i&&this.Oa()},e.jz=function(t,e){Co(this,t,e),t.ae(this);var n=this.La,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.$b&&this.ab(Pn,"layers",this,t,null,i,null));var r,o=n.count;for(r=0;r<o;r++)if(n.J(r)===e){n.vb(r+1,t);break}null!==this.$b&&this.ab(Mn,"layers",this,null,t,null,r+1),this.M(),0>i&&this.Oa()},e.NA=function(t){if(t.diagram!==this&&v("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.La,n=e.indexOf(t);if(e.remove(t)){for(e=t.Da.copy().iterator;e.next();){var i=e.value,r=i.layerName;i.layerName=r!==t.name?r:""}null!==this.$b&&this.ab(Pn,"layers",this,t,null,n,null),this.M(),this.Oa()}}},e.pm=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},e.Ux=function(t){null===this.se&&(this.se=new tt),this.se.add(t),this.model.Fh(t)},e.PA=function(t){null!==this.se&&(this.se.remove(t),0===this.se.count&&(this.se=null)),this.model.Ik(t)},e.Fh=function(t){null===this.Nf&&(this.Nf=new tt),this.Nf.add(t)},e.Ik=function(t){null!==this.Nf&&(this.Nf.remove(t),0===this.Nf.count&&(this.Nf=null))},e.vt=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Wv(t),t.change!==_n&&(this.isModified=!0),null!==this.Nf)for(var e=this.Nf,n=e.length,i=0;i<n;i++)e.J(i)(t)},e.ab=function(t,e,n,i,r,o,s){void 0===o&&(o=null),void 0===s&&(s=null);var a=new Sn;a.diagram=this,a.change=t,a.propertyName=e,a.object=n,a.oldValue=i,a.oldParam=o,a.newValue=r,a.newParam=s,this.vt(a)},e.g=function(t,e,n,i,r){this.ab(Cn,t,this,e,n,i,r)},Dr.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i=t.change;if(i===Cn){var r=t.object;if(Ed(r,t.propertyName,t.H(e)),r instanceof Ys){var o=r.part;null!==o&&o.Lb()}this.isModified=!0}else if(i===Mn){var s=t.object,a=t.newParam,l=t.newValue;if(s instanceof Ml){if("number"==typeof a&&l instanceof Ys){e?s.Jc(a):s.vb(a,l);var h=s.part;null!==h&&h.Lb()}else if("number"==typeof a&&l instanceof Jl)if(e)l.isRow?s.qw(a):s.ow(a);else{var u=l.isRow?s.getRowDefinition(l.index):s.getColumnDefinition(l.index);u.zt(l)}}else if(s instanceof Er){var c=!0===t.oldParam;"number"==typeof a&&l instanceof ou&&(e?(l.isSelected=!1,l.isHighlighted=!1,l.Lb(),s.Jc(c?a:-1,l,c)):s.lj(a,l,c))}else s instanceof Dr?"number"==typeof a&&l instanceof Er&&(e?this.La.bb(a):(l.ae(this),this.La.vb(a,l))):v("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(i===Pn){var f=t.object,d=t.oldParam,p=t.oldValue;if(f instanceof Ml)"number"==typeof d&&p instanceof Ys?e?f.vb(d,p):f.Jc(d):"number"==typeof d&&p instanceof Jl&&(e?(u=p.isRow?f.getRowDefinition(p.index):f.getColumnDefinition(p.index)).zt(p):p.isRow?f.qw(d):f.ow(d));else if(f instanceof Er){var g=!0===t.newParam;"number"==typeof d&&p instanceof ou&&(e?0>f.Da.indexOf(p)&&f.lj(d,p,g):(p.isSelected=!1,p.isHighlighted=!1,p.Lb(),f.Jc(g?d:-1,p,g)))}else f instanceof Dr?"number"==typeof d&&p instanceof Er&&(e?(p.ae(this),this.La.vb(d,p)):this.La.bb(d)):v("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else i!==_n&&v("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},Dr.prototype.va=function(t){return this.undoManager.va(t)},Dr.prototype.Wa=function(t){return this.undoManager.Wa(t)},Dr.prototype.Hf=function(){return this.undoManager.Hf()},Dr.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.va(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Wa(e):this.undoManager.Hf(),this.skipsUndoManager=n}},Dr.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},Dr.prototype.gr=function(){this.partManager.gr()},Dr.prototype.Rq=function(t,e,n,i){if(!t.w(e)){void 0===i&&(i=!1),i||co(this),fo(this);var r=this.layout;null===r||!r.isViewportSized||this.autoScale!==ts||i||t.width===e.width&&t.height===e.height||r.C(),r=this.currentTool,!0===this.Zf&&r instanceof Ln&&(this.lastInput.documentPoint=this.ju(this.lastInput.viewPoint),On(r,this)),this.Rb||this.By(t,e),Po(this),this.Wd.scale=n,this.Wd.position.x=t.x,this.Wd.position.y=t.y,this.Wd.bounds.assign(t),this.Wd.cw=i,this.R("ViewportBoundsChanged",this.Wd,t),this.isVirtualized&&this.links.each(function(t){t.isAvoiding&&t.actualBounds.Kc(e)&&t.Ua()})}},Dr.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.R("ChangingSelection",e);for(var n=e.ma(),i=n.length,r=0;r<i;r++)n[r].isSelected=!1;e.da(),e.clear(),e.freeze(),t||this.R("ChangedSelection",e)}},Dr.prototype.select=function(t){null!==t&&t.layer.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.R("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.R("ChangedSelection",this.selection))},Dr.prototype.TA=function(t){if(this.R("ChangingSelection",this.selection),this.clearSelection(!0),_(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof ou||v("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof ou||v("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.R("ChangedSelection",this.selection)},Dr.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.ma(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.da(),t.clear(),t.freeze()}},(e=Dr.prototype).pA=function(t){null!==t&&t.layer.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},e.qA=function(t){t=(new nt).addAll(t);for(var e=this.highlighteds.copy().Wq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof ou||v("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},e.scroll=function(t,e,n){void 0===n&&(n=1);var i="up"===e||"down"===e,r=0;if("pixel"===t)r=n;else if("line"===t)r=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=i?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(r=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return r=this.documentBounds,n=this.viewportBounds,i=dt.alloc(),"up"===e?this.position=i.h(n.x,r.y):"left"===e?this.position=i.h(r.x,n.y):"down"===e?this.position=i.h(n.x,r.bottom-n.height):"right"===e&&(this.position=i.h(r.right-n.width,n.y)),void dt.free(i);v("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-r:"down"===e?n.y=this.position.y+r:"left"===e?n.x=this.position.x-r:"right"===e?n.x=this.position.x+r:v("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},e.ww=function(t){var e=this.viewportBounds;e.De(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},e.wt=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},e.er=function(t){var e=this.pb;e.reset(),1!==this.ya&&e.scale(this.ya);var n=this.la;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.pb)},e.bB=function(t){var e=this.pb,n=t.x,i=t.y,r=n+t.width,o=i+t.height,s=e.m11,a=e.m12,l=e.m21,h=e.m22,u=e.dx,c=e.dy,f=n*s+i*l+u;e=n*a+i*h+c;var d=r*s+i*l+u;return t=r*a+i*h+c,i=n*s+o*l+u,n=n*a+o*h+c,s=r*s+o*l+u,r=r*a+o*h+c,o=Math.min(f,d),f=Math.max(f,d),d=Math.min(e,t),e=Math.max(e,t),o=Math.min(o,i),f=Math.max(f,i),d=Math.min(d,n),e=Math.max(e,n),o=Math.min(o,s),f=Math.max(f,s),new Rt(o,d=Math.min(d,r),f-o,(e=Math.max(e,r))-d)},e.ju=function(t){var e=this.pb;e.reset(),1!==this.ya&&e.scale(this.ya);var n=this.la;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),yt(t.copy(),this.pb)},Dr.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,i=t.propertyName;if(n===_n&&"S"===i[0])if("StartingFirstTransaction"===i){var r=this;(t=this.toolManager).mouseDownTools.each(function(t){t.diagram=r}),t.mouseMoveTools.each(function(t){t.diagram=r}),t.mouseUpTools.each(function(t){t.diagram=r}),this.ic||this.me||(this.Cj=!0,this.Fj&&(this.Ae=!0))}else"StartingUndo"===i||"StartingRedo"===i?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Oc(),this.R("ChangingSelection",this.selection)):"StartedTransaction"===i&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Oc();else if(this.Z){this.Z=!1;try{if(""===t.modelChange&&n===_n){"FinishedUndo"!==i&&"FinishedRedo"!==i||(this.R("ChangedSelection",this.selection),so(this));var o=this.animationManager;"RolledBackTransaction"===i&&o.Oc(),this.Cj=!0,this.dd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||sr(o),"CommittedTransaction"===i&&this.undoManager.isJustDiscarded&&(this.Rd=Math.min(this.Rd,this.undoManager.historyIndex-1)),"CommittedTransaction"!==i&&"RolledBackTransaction"!==i||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var s=t.isTransactionFinished;if(s&&(To(this),this.Tt.clear(),function(t){for(t=t.Ok.iterator;t.next();)t.value.Al=!1}(this.animationManager)),!this.zs&&s&&this.lastInput.targetDiagram){this.zs=!0;var a=this;m(function(){a.currentTool.standardMouseOver(),a.zs=!1},10)}}}finally{this.Z=!0}}}},Dr.prototype.Gd=function(){this.partManager.Gd()},Dr.prototype.ek=function(t,e){this.Sc.ek(t,e)},Dr.prototype.gk=function(t,e){this.Sc.gk(t,e)},Dr.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},Dr.prototype.Cb=function(t){return this.partManager.Cb(t)},Dr.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(e=Dr.prototype).xc=function(t){return this.partManager.xc(t)},e.ej=function(t){return this.partManager.ej(t)},e.wc=function(t){return this.partManager.wc(t)},e.Ft=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Ft.apply(this.partManager,e instanceof Array?e:r(i(e)))},e.Et=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Et.apply(this.partManager,e instanceof Array?e:r(i(e)))},e.Ta=function(){this.si&&Lo(this,this.computeBounds())},e.Zz=function(){for(var t=new nt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},e.Yz=function(){return this.Bh.iterator},e.AA=function(t){so(this),t&&Oo(this,!0),this.Cj=!0,oo(this)},e.eA=function(){for(var t=new tt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.hj()&&t.add(n)}return t.iterator},e.fk=function(t,e){null!==(t=Bo(this,t))&&t.add(e)},e.Gm=function(t,e){null!==(t=Bo(this,t))&&t.remove(e)},e.R=function(t,e,n){var i=Bo(this,t),r=new kn;if(r.diagram=this,null!==(t=Ro(this,t))&&(r.name=t),void 0!==e&&(r.subject=e),void 0!==n&&(r.parameter=n),1===(e=i.length))i.J(0)(r);else if(0!==e)for(i=i.ma(),n=0;n<e;n++)(0,i[n])(r)},e.xk=function(t,e){return void 0===e&&(e=null),Vo(this,!1,null,e).xk(t.x,t.y,t.width,t.height)},Dr.prototype.computeOccupiedArea=function(){return this.isVirtualized?this.viewportBounds.copy():this.si?Gr(this):this.documentBounds.copy()},Dr.prototype.Bt=function(t){this.mn.assign(t),this.computeAutoScrollPosition(this.mn).Na(this.position)?this.If():Ho(this)},Dr.prototype.If=function(){-1!==this.wj&&(d.clearTimeout(this.wj),this.wj=-1)},Dr.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.nn;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var i=this.viewportBounds,r=this.scale;i=Rt.allocAt(0,0,i.width*r,i.height*r);var o=dt.allocAt(0,0);if(t.x>=i.x&&t.x<i.x+n.left&&this.allowHorizontalScroll){var s=Math.max(this.scrollHorizontalLineChange,1);o.x-=s|=0,t.x<i.x+n.left/2&&(o.x-=s),t.x<i.x+n.left/4&&(o.x-=4*s)}else t.x<=i.x+i.width&&t.x>i.x+i.width-n.right&&this.allowHorizontalScroll&&(s=Math.max(this.scrollHorizontalLineChange,1),o.x+=s|=0,t.x>i.x+i.width-n.right/2&&(o.x+=s),t.x>i.x+i.width-n.right/4&&(o.x+=4*s));return t.y>=i.y&&t.y<i.y+n.top&&this.allowVerticalScroll?(s=Math.max(this.scrollVerticalLineChange,1),o.y-=s|=0,t.y<i.y+n.top/2&&(o.y-=s),t.y<i.y+n.top/4&&(o.y-=4*s)):t.y<=i.y+i.height&&t.y>i.y+i.height-n.bottom&&this.allowVerticalScroll&&(s=Math.max(this.scrollVerticalLineChange,1),o.y+=s|=0,t.y>i.y+i.height-n.bottom/2&&(o.y+=s),t.y>i.y+i.height-n.bottom/4&&(o.y+=4*s)),o.Na(xt)||(e=new dt(e.x+o.x/r,e.y+o.y/r)),Rt.free(i),dt.free(o),e},(e=Dr.prototype).Vt=function(){return null},e.dw=function(){return null},e.mz=function(t,e){this.Hx.add(t,e)},e.CA=function(t){return Zo?(void 0===t&&(t=new X),t.returnType="Image",this.Ey(t)):null},e.Ey=function(t){return void 0===t&&(t=new X),Go(this,this.DA,t)},e.DA=function(t,e,n){var i=Yo(n,t,"canvas",null);if(null===i)return null;var r=null;if(null!==(n=i.Y.canvas))switch(r=t.returnType,r=void 0===r?"string":r.toLowerCase(),r){case ms+"data":r=i.getImageData(0,0,n.width,n.height);break;case ms:(i=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),r=i;break;case"blob":return"function"!=typeof e&&v('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:r=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(r),null):r},c.Object.defineProperties(Dr.prototype,{div:{get:function(){return this.Ea},set:function(t){if(this.Ea!==t){q=[];var e=this.Ea;null!==e?(e.B=void 0,e.goDiagram=void 0,e.innerHTML="",null!==this.ta&&(this.removeEventListener(e=this.ta.Ga,"touchstart",this.Kw,!1),this.removeEventListener(e,"touchmove",this.Jw,!1),this.removeEventListener(e,"touchend",this.Iw,!1),this.ta.hy()),this.Ql&&(this.Ql.disconnect(),this.Ql=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(t){t.cancelWaitAfter()}),e.mouseMoveTools.each(function(t){t.cancelWaitAfter()}),e.mouseUpTools.each(function(t){t.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Gb=this.ta=null,this.removeEventListener(d,"resize",this.Sw,!1),this.removeEventListener(d,"mousemove",this.Bk,!0),this.removeEventListener(d,"mousedown",this.Ak,!0),this.removeEventListener(d,"mouseup",this.Dk,!0),this.removeEventListener(d,"wheel",this.Ek,!0),this.removeEventListener(d,"mouseout",this.Ck,!0),Xo===this&&(Xo=null)):this.me=!1,this.Ea=null,null!==t&&((e=t.B)&&(e.div=null),ks(this,t),this.Je())}}},Wx:{get:function(){return this.Vo}},mj:{get:function(){return this.me}},draggedLink:{get:function(){return this.Qr},set:function(t){this.Qr!==t&&(this.Qr=t,null!==t&&(this.Ds=t.fromPort,this.Es=t.toPort))}},Hy:{get:function(){return this.Ds},set:function(t){this.Ds=t}},Iy:{get:function(){return this.Es},set:function(t){this.Es=t}},animationManager:{get:function(){return this.Sc}},undoManager:{get:function(){return this.$b.undoManager}},skipsUndoManager:{get:function(){return this.ug},set:function(t){this.ug=t,this.$b.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Lr},set:function(t){this.Lr=t}},opacity:{get:function(){return this.gb},set:function(t){var e=this.gb;e!==t&&((0>t||1<t)&&w(t,"0 <= value <= 1",Dr,"opacity"),this.gb=t,this.g("opacity",e,t),this.M())}},validCycle:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(this.pt=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.La.iterator}},isModelReadOnly:{get:function(){var t=this.$b;return null!==t&&t.isReadOnly},set:function(t){var e=this.$b;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.hd},set:function(t){var e=this.hd;e!==t&&(this.hd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.lr},set:function(t){var e=this.lr;e!==t&&(this.lr=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Yh},set:function(t){var e=this.Yh;e!==t&&(this.Yh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.mr},set:function(t){var e=this.mr;e!==t&&(this.mr=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.nr},set:function(t){var e=this.nr;e!==t&&(this.nr=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.qr},set:function(t){var e=this.qr;e!==t&&(this.qr=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.rr},set:function(t){var e=this.rr;e!==t&&(this.rr=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.tr},set:function(t){var e=this.tr;e!==t&&(this.tr=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.ol},set:function(t){var e=this.ol;e!==t&&(this.ol=t,co(this),this.M(),this.g("hasVerticalScrollbar",e,t),Yr(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.nl},set:function(t){var e=this.nl;e!==t&&(this.nl=t,co(this),this.M(),this.g("hasHorizontalScrollbar",e,t),Yr(this,!1))}},allowHorizontalScroll:{get:function(){return this.pr},set:function(t){var e=this.pr;e!==t&&(this.pr=t,this.g("allowHorizontalScroll",e,t),Yr(this,!1))}},allowVerticalScroll:{get:function(){return this.sr},set:function(t){var e=this.sr;e!==t&&(this.sr=t,this.g("allowVerticalScroll",e,t),Yr(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Us},set:function(t){var e=this.Us;e!==t&&(0>t&&w(t,">= 0",Dr,"scrollHorizontalLineChange"),this.Us=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.Ys},set:function(t){var e=this.Ys;e!==t&&(0>t&&w(t,">= 0",Dr,"scrollVerticalLineChange"),this.Ys=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.gh},set:function(t){this.gh=t}},previousInput:{get:function(){return this.kd},set:function(t){this.kd=t}},firstInput:{get:function(){return this.Vf},set:function(t){this.Vf=t}},currentCursor:{get:function(){return this.Fr},set:function(t){if(""===t&&(t=this.Kn),this.Fr!==t){var e=this.ta,n=this.Ea;if(null!==e){this.Fr=t;var i=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Kn},set:function(t){""===t&&(t="auto");var e=this.Kn;e!==t&&(this.Kn=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Of},set:function(t){var e=this.Of;e!==t&&(this.Of=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Tf},set:function(t){var e=this.Tf;e!==t&&(this.Tf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Pf},set:function(t){var e=this.Pf;e!==t&&(this.Pf=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.lg},set:function(t){var e=this.lg;e!==t&&(this.lg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.jg},set:function(t){var e=this.jg;e!==t&&(this.jg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.ig},set:function(t){var e=this.ig;e!==t&&(this.ig=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.ys},set:function(t){var e=this.ys;e!==t&&(this.ys=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.gg},set:function(t){var e=this.gg;e!==t&&(this.gg=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.$r},set:function(t){var e=this.$r;e!==t&&(this.$r=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.kg},set:function(t){var e=this.kg;e!==t&&(this.kg=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.wg},set:function(t){var e=this.wg;e!==t&&(this.wg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Qf},set:function(t){var e=this.Qf;e!==t&&(this.Qf=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.zr},set:function(t){this.zr!==t&&(this.zr=t,t.ae(this))}},toolManager:{get:function(){return this.lt},set:function(t){this.lt!==t&&(this.lt=t,t.diagram=this)}},defaultTool:{get:function(){return this.Kr},set:function(t){var e=this.Kr;e!==t&&(this.Kr=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.Hr},set:function(t){var e=this.Hr;null!==e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.Hr=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.mv}},maxSelectionCount:{get:function(){return this.us},set:function(t){var e=this.us;if(e!==t)if(0<=t&&!isNaN(t)){if(this.us=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.R("ChangingSelection",this.selection),e=this.selection.ma();for(var n=0;n<t;n++)e[n].isSelected=!1;this.R("ChangedSelection",this.selection)}}else w(t,">= 0",Dr,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.bp},set:function(t){var e=this.bp;e!==t&&(this.bp=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.ko},set:function(t){var e=this.ko;e!==t&&(this.ko=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Do},set:function(t){var e=this.Do;e!==t&&(this.Do=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Mu}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.oo&&this.Rd!==t.historyIndex:this.oo},set:function(t){if(this.oo!==t){this.oo=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Rd=e.historyIndex),t||To(this)}}},model:{get:function(){return this.$b},set:function(t){var e=this.$b;if(e!==t){this.currentTool.doCancel(),null!==e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&v("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Oc(!0);var n=jr(this,!0);this.me=!1,this.Fj=!0,this.Rd=-2,this.Ae=!1;var i=this.ic;this.ic=!0,rr(this.animationManager,"Model"),null!==e&&(null!==this.se&&this.se.each(function(t){e.Ik(t)}),e.Ik(this.Rc)),this.$b=t,this.partManager=function(t){return null!==(t=Ko.get(t))?new t:new Uf}(this.$b.type);for(var r=0;r<n.length;r++)this.add(n[r]);t.Fh(this.Ac),this.partManager.addAllModeledParts(),t.Ik(this.Ac),t.Fh(this.Rc),null!==this.se&&this.se.each(function(e){t.Fh(e)}),this.ic=i,this.Rb||this.M(),null!==e&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.Wu},set:function(t){this.Wu=t}},Tt:{get:function(){return this.xx}},skipsModelSourceBindings:{get:function(){return this.nv},set:function(t){this.nv=t}},iu:{get:function(){return this.ct},set:function(t){this.ct=t}},nodeTemplate:{get:function(){return this.cf.H("")},set:function(t){var e=this.cf.H("");e!==t&&(this.cf.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Gd())}},nodeTemplateMap:{get:function(){return this.cf},set:function(t){var e=this.cf;e!==t&&(this.cf=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Gd())}},groupTemplate:{get:function(){return this.eh.H("")},set:function(t){var e=this.eh.H("");e!==t&&(this.eh.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Gd())}},groupTemplateMap:{get:function(){return this.eh},set:function(t){var e=this.eh;e!==t&&(this.eh=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Gd())}},linkTemplate:{get:function(){return this.bg.H("")},set:function(t){var e=this.bg.H("");e!==t&&(this.bg.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Gd())}},linkTemplateMap:{get:function(){return this.bg},set:function(t){var e=this.bg;e!==t&&(this.bg=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Gd())}},isMouseCaptured:{get:function(){return this.Su},set:function(t){var e=this.ta;null!==e&&((e=e.Ga)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.gn?(this.removeEventListener(e,"pointermove",this.Bm,!1),this.removeEventListener(e,"pointerdown",this.Am,!1),this.removeEventListener(e,"pointerup",this.Dm,!1),this.removeEventListener(e,"pointerout",this.Cm,!1),this.addEventListener(d,"pointermove",this.Bm,!0),this.addEventListener(d,"pointerdown",this.Am,!0),this.addEventListener(d,"pointerup",this.Dm,!0),this.addEventListener(d,"pointerout",this.Cm,!0)):(this.removeEventListener(e,"mousemove",this.Bk,!1),this.removeEventListener(e,"mousedown",this.Ak,!1),this.removeEventListener(e,"mouseup",this.Dk,!1),this.removeEventListener(e,"mouseout",this.Ck,!1),this.addEventListener(d,"mousemove",this.Bk,!0),this.addEventListener(d,"mousedown",this.Ak,!0),this.addEventListener(d,"mouseup",this.Dk,!0),this.addEventListener(d,"mouseout",this.Ck,!0)),this.removeEventListener(e,"wheel",this.Ek,!1),this.addEventListener(d,"wheel",this.Ek,!0),this.addEventListener(d,"selectstart",this.preventDefault,!1)):(this.gn?(this.removeEventListener(d,"pointermove",this.Bm,!0),this.removeEventListener(d,"pointerdown",this.Am,!0),this.removeEventListener(d,"pointerup",this.Dm,!0),this.removeEventListener(d,"pointerout",this.Cm,!0),this.addEventListener(e,"pointermove",this.Bm,!1),this.addEventListener(e,"pointerdown",this.Am,!1),this.addEventListener(e,"pointerup",this.Dm,!1),this.addEventListener(e,"pointerout",this.Cm,!1)):(this.removeEventListener(d,"mousemove",this.Bk,!0),this.removeEventListener(d,"mousedown",this.Ak,!0),this.removeEventListener(d,"mouseup",this.Dk,!0),this.removeEventListener(d,"mouseout",this.Ck,!0),this.addEventListener(e,"mousemove",this.Bk,!1),this.addEventListener(e,"mousedown",this.Ak,!1),this.addEventListener(e,"mouseup",this.Dk,!1),this.addEventListener(e,"mouseout",this.Ck,!1)),this.removeEventListener(d,"wheel",this.Ek,!0),this.removeEventListener(d,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Ek,!1)),this.Su=t))}},position:{get:function(){return this.la},set:function(t){var e=dt.alloc().assign(this.la);if(!e.w(t)){var n=this.viewportBounds.copy();this.la.assign(t),ur(this.animationManager,e,this.la),this.Rb||null===this.ta&&!this.im.u()||(this.Rb=!0,Kr(this,this.Mn,this.xa/(t=this.scale),this.wa/t,this.yj,!1),this.Rb=!1),this.Rb||this.Rq(n,this.viewportBounds,this.ya,!1)}dt.free(e)}},initialPosition:{get:function(){return this.cs},set:function(t){this.cs.w(t)||(this.cs=t.G())}},initialScale:{get:function(){return this.ds},set:function(t){this.ds!==t&&(this.ds=t)}},grid:{get:function(){return null===this.Ib&&Ur(this),this.Ib},set:function(t){var e=this.Ib;if(e!==t){null===e&&(Ur(this),e=this.Ib),t.type!==Ml.Grid&&v("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;null!==n&&n.remove(e),this.Ib=t,t.name="GRID",null!==n&&n.add(t),Po(this),this.M(),this.g("grid",e,t)}}},viewportBounds:{get:function(){var t=this.Ox,e=this.la,n=this.ya;return null===this.ta?(this.im.u()&&t.h(e.x,e.y,this.xa/n,this.wa/n),t):(t.h(e.x,e.y,Math.max(this.xa,0)/n,Math.max(this.wa,0)/n),t)}},viewSize:{get:function(){return this.im},set:function(t){var e=this.viewSize;e.w(t)||(this.im=t=t.G(),this.xa=t.width,this.wa=t.height,this.Oa(),this.g("viewSize",e,t))}},fixedBounds:{get:function(){return this.Xr},set:function(t){var e=this.Xr;e.w(t)||(-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||v("fixedBounds width/height must not be Infinity"),this.Xr=t=t.G(),this.Oa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Qi},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.Qi;e.w(t)||(this.Qi=t=t.G(),this.g("scrollMargin",e,t),this.Vq())}},scrollMode:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,t===hs&&Yr(this,!1),this.g("scrollMode",e,t),this.M())}},scrollsPageOnFocus:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Ms},set:function(t){var e=this.Ms;e!==t&&(this.Ms=t,Yr(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Ss},set:function(t){var e=this.Ss;e!==t&&(this.Ss=t,Mo(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Mn}},isVirtualized:{get:function(){return this.ps},set:function(t){var e=this.ps;e!==t&&(this.ps=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&Mo(this,e,t)}},defaultScale:{get:function(){return this.Ln},set:function(t){this.Ln=t}},autoScale:{get:function(){return this.Og},set:function(t){var e=this.Og;e!==t&&(this.Og=t,this.g("autoScale",e,t),t!==ts&&Yr(this,!1))}},initialAutoScale:{get:function(){return this.Yf},set:function(t){var e=this.Yf;e!==t&&(this.Yf=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.es},set:function(t){var e=this.es;e!==t&&(t.jb()||v("initialViewportSpot must be a specific Spot: "+t),this.es=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.bs},set:function(t){var e=this.bs;e!==t&&(t.jb()||v("initialViewportSpot must be a specific Spot: "+t),this.bs=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.vs},set:function(t){var e=this.vs;e!==t&&(0<t?(this.vs=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):w(t,"> 0",Dr,"minScale"))}},maxScale:{get:function(){return this.ts},set:function(t){var e=this.ts;e!==t&&(0<t?(this.ts=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):w(t,"> 0",Dr,"maxScale"))}},zoomPoint:{get:function(){return this.tt},set:function(t){this.tt.w(t)||(this.tt=t=t.G())}},contentAlignment:{get:function(){return this.yj},set:function(t){var e=this.yj;e.w(t)||(this.yj=t=t.G(),this.g("contentAlignment",e,t),Yr(this,!1))}},initialContentAlignment:{get:function(){return this.mo},set:function(t){var e=this.mo;e.w(t)||(this.mo=t=t.G(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.hb},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.hb;e.w(t)||(this.hb=t=t.G(),this.Oa(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ka},set:function(t){var e=this.Ka;e!==t&&(null!==t.diagram&&v("Cannot share PartManagers between Diagrams: "+t.toString()),null!==e&&e.ae(null),this.Ka=t,t.ae(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.jc},set:function(t){var e=this.jc;e!==t&&(this.jc=t,t.diagram=this,t.group=null,this.Ng=!0,this.g("layout",e,t),this.Db())}},isTreePathToChildren:{get:function(){return this.os},set:function(t){var e=this.os;if(e!==t&&(this.os=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Fu(t.value)}},treeCollapsePolicy:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(t!==cs&&t!==fs&&t!==ds&&v("Unknown Diagram.treeCollapsePolicy: "+t),this.nt=t,this.g("treeCollapsePolicy",e,t))}},He:{get:function(){return this.Pu},set:function(t){this.Pu=t}},autoScrollInterval:{get:function(){return this.ln},set:function(t){var e=this.ln;e!==t&&(this.ln=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.nn},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.nn;e.w(t)||(this.nn=t=t.G(),this.Oa(),this.g("autoScrollRegion",e,t))}}}),c.Object.defineProperties(Dr,{licenseKey:{get:function(){return ps.Wb()},set:function(t){ps.add(t)}},version:{get:function(){return gs}}}),Dr.prototype.makeImageData=Dr.prototype.Ey,Dr.prototype.makeImage=Dr.prototype.CA,Dr.prototype.addRenderer=Dr.prototype.mz,Dr.prototype.makeSVG=Dr.prototype.dw,Dr.prototype.makeSvg=Dr.prototype.Vt,Dr.prototype.stopAutoScroll=Dr.prototype.If,Dr.prototype.doAutoScroll=Dr.prototype.Bt,Dr.prototype.isUnoccupied=Dr.prototype.xk,Dr.prototype.raiseDiagramEvent=Dr.prototype.R,Dr.prototype.removeDiagramListener=Dr.prototype.Gm,Dr.prototype.addDiagramListener=Dr.prototype.fk,Dr.prototype.findTreeRoots=Dr.prototype.eA,Dr.prototype.layoutDiagram=Dr.prototype.AA,Dr.prototype.findTopLevelGroups=Dr.prototype.Yz,Dr.prototype.findTopLevelNodesAndLinks=Dr.prototype.Zz,Dr.prototype.ensureBounds=Dr.prototype.Ta,Dr.prototype.findLinksByExample=Dr.prototype.Et,Dr.prototype.findNodesByExample=Dr.prototype.Ft,Dr.prototype.findLinkForData=Dr.prototype.wc,Dr.prototype.findNodeForData=Dr.prototype.ej,Dr.prototype.findPartForData=Dr.prototype.xc,Dr.prototype.findLinkForKey=Dr.prototype.findLinkForKey,Dr.prototype.findNodeForKey=Dr.prototype.Cb,Dr.prototype.findPartForKey=Dr.prototype.findPartForKey,Dr.prototype.rebuildParts=Dr.prototype.Gd,Dr.prototype.transformViewToDoc=Dr.prototype.ju,Dr.prototype.transformRectDocToView=Dr.prototype.bB,Dr.prototype.transformDocToView=Dr.prototype.er,Dr.prototype.centerRect=Dr.prototype.wt,Dr.prototype.scrollToRect=Dr.prototype.ww,Dr.prototype.scroll=Dr.prototype.scroll,Dr.prototype.highlightCollection=Dr.prototype.qA,Dr.prototype.highlight=Dr.prototype.pA,Dr.prototype.selectCollection=Dr.prototype.TA,Dr.prototype.select=Dr.prototype.select,Dr.prototype.updateAllRelationshipsFromData=Dr.prototype.gr,Dr.prototype.updateAllTargetBindings=Dr.prototype.updateAllTargetBindings,Dr.prototype.commit=Dr.prototype.commit,Dr.prototype.rollbackTransaction=Dr.prototype.Hf,Dr.prototype.commitTransaction=Dr.prototype.Wa,Dr.prototype.startTransaction=Dr.prototype.va,Dr.prototype.raiseChanged=Dr.prototype.g,Dr.prototype.raiseChangedEvent=Dr.prototype.ab,Dr.prototype.removeChangedListener=Dr.prototype.Ik,Dr.prototype.addChangedListener=Dr.prototype.Fh,Dr.prototype.removeModelChangedListener=Dr.prototype.PA,Dr.prototype.addModelChangedListener=Dr.prototype.Ux,Dr.prototype.findLayer=Dr.prototype.pm,Dr.prototype.removeLayer=Dr.prototype.NA,Dr.prototype.addLayerAfter=Dr.prototype.jz,Dr.prototype.addLayerBefore=Dr.prototype.Rx,Dr.prototype.addLayer=Dr.prototype.km,Dr.prototype.moveParts=Dr.prototype.moveParts,Dr.prototype.copyParts=Dr.prototype.nk,Dr.prototype.removeParts=Dr.prototype.cu,Dr.prototype.remove=Dr.prototype.remove,Dr.prototype.add=Dr.prototype.add,Dr.prototype.clearDelayedGeometries=Dr.prototype.Cv,Dr.prototype.setProperties=Dr.prototype.Bw,Dr.prototype.resetInputOptions=Dr.prototype.sw,Dr.prototype.setInputOption=Dr.prototype.UA,Dr.prototype.getInputOption=Dr.prototype.tm,Dr.prototype.resetRenderingHints=Dr.prototype.tw,Dr.prototype.setRenderingHint=Dr.prototype.Qy,Dr.prototype.getRenderingHint=Dr.prototype.Ge,Dr.prototype.maybeUpdate=Dr.prototype.dd,Dr.prototype.requestUpdate=Dr.prototype.Db,Dr.prototype.delayInitialization=Dr.prototype.Ez,Dr.prototype.isUpdateRequested=Dr.prototype.wA,Dr.prototype.redraw=Dr.prototype.Je,Dr.prototype.invalidateDocumentBounds=Dr.prototype.Oa,Dr.prototype.findObjectsNear=Dr.prototype.Eg,Dr.prototype.findPartsNear=Dr.prototype.Vz,Dr.prototype.findObjectsIn=Dr.prototype.zf,Dr.prototype.findPartsIn=Dr.prototype.py,Dr.prototype.findObjectsAt=Dr.prototype.fj,Dr.prototype.findPartsAt=Dr.prototype.Uz,Dr.prototype.findObjectAt=Dr.prototype.Ub,Dr.prototype.findPartAt=Dr.prototype.qm,Dr.prototype.focusObject=Dr.prototype.fA,Dr.prototype.alignDocument=Dr.prototype.oz,Dr.prototype.zoomToRect=Dr.prototype.fB,Dr.prototype.zoomToFit=Dr.prototype.zoomToFit,Dr.prototype.diagramScroll=Dr.prototype.ey,Dr.prototype.focus=Dr.prototype.focus,Dr.prototype.reset=Dr.prototype.reset,Dr.useDOM=function(t){Zo=!!t&&void 0!==d.document},Dr.isUsingDOM=function(){return Zo};var Xo=null,Ko=new ft,Wo=null,$o=null,Zo=void 0!==d.document,Jo=null,Qo="",ts=new H(Dr,"None",0),es=new H(Dr,"Uniform",1),ns=new H(Dr,"UniformToFill",2),is=new H(Dr,"CycleAll",10),rs=new H(Dr,"CycleNotDirected",11),os=new H(Dr,"CycleNotDirectedFast",12),ss=new H(Dr,"CycleNotUndirected",13),as=new H(Dr,"CycleDestinationTree",14),ls=new H(Dr,"CycleSourceTree",15),hs=new H(Dr,"DocumentScroll",1),us=new H(Dr,"InfiniteScroll",2),cs=new H(Dr,"TreeParentCollapsed",21),fs=new H(Dr,"AllParentsCollapsed",22),ds=new H(Dr,"AnyParentsCollapsed",23),ps=new tt,gs="2.1.35",ms="image",ys=null,vs=!1;function bs(){if(Zo){var t=d.document.createElement("canvas"),e=t.getContext("2d"),n=j("7ca11abfd022028846");e[n]=j("398c3597c01238");for(var i=["5da73c80a36455d5038e4972187c3cae51fd22",p.Dx+"4ae6247590da4bb21c324ba3a84e385776",Ge.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",Xe.za],r=1;5>r;r++)e[j("7ca11abfd7330390")](j(i[r-1]),10,15*r);for(e[n]=j("39f046ebb36e4b"),n=1;5>n;n++)e[j("7ca11abfd7330390")](j(i[n-1]),10,15*n);4===i.length&&"5"===i[0][0]&&"7"===i[3][0]||(Ge.prototype.Dd=Ge.prototype.Xx),ys=t}}function ws(){this.fz=null,this.l="zz@orderNum",this.Ue="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.l=!0:null}function xs(t,e){if(e.Gb.setTransform(e.Sb,0,0,e.Sb,0,0),null===t.Ue){e="f";var n=d[j("76a715b2f73f148a")][j("72ba13b5")];if(t.Ue=!0,Zo){var i=Dr[j("76a115b6ed251eaf4692")];if(i)for(var r=ps.iterator;r.next()&&!(6>(i=j(i=r.value).split(j("39e9"))).length);){var o=j(i[1]).split(".");if("7da71ca0"!==i[4])break;var s=j(p[j("6cae19")]).split(".");if(o[0]>s[0]||o[0]===s[0]&&o[1]>=s[1]){for(o=n[j("76ad18b4f73e")],s=n[j("73a612b6fb191d")](j("35e7"))+2;s<o;s++)e+=n[s];if(0>(o=e[j("73a612b6fb191d")](j(i[2])))&&j(i[2])!==j("7da71ca0ad381e90")&&(o=e[j("73a612b6fb191d")](j("76a715b2ef3e149757"))),0>o&&(o=e[j("73a612b6fb191d")](j("76a715b2ef3e149757"))),0>o&&(o=n[j("73a612b6fb191d")](j("7baa19a6f76c1988428554"))),t.Ue=!(0<=o&&o<e[j("73a612b6fb191d")](j("35"))||-1===e[j("73a612b6fb191d")](j("35"))),!t.Ue)break;if("#"!==(o=j(i[2]))[0])break;s=d.document.createElement("div");for(var a=i[0].replace(/[A-Za-z]/g,"");4>a.length;)a+="9";if(a=a.substr(a.length-4),i="",i+=["gsh","gsf"][parseInt(a.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(a.substr(0,1),10)%4],s[j("79a417a0f0181a8946")]=i,d.document[j("78a712aa")]){if(d.document[j("78a712aa")][j("7bb806b6ed32388c4a875b")](s),a=d.getComputedStyle(s).getPropertyValue(j("78a704b7e62456904c9b12701b6532a8")),d.document[j("78a712aa")][j("68ad1bbcf533388c4a875b")](s),!a)break;if(-1!==a.indexOf(parseInt(o[1]+o[2],16))&&-1!==a.indexOf(parseInt(o[3]+o[4],16))){t.Ue=!1;break}if(F||I||R||B)for(i="."+i,o=0;o<document.styleSheets.length;o++)for(var l in s=document.styleSheets[o].rules||document.styleSheets[o].cssRules)if(i===s[l].selectorText){t.Ue=!1;break}}else t.Ue=null,t.Ue=!1}}else{for(l=n[j("76ad18b4f73e")],r=n[j("73a612b6fb191d")](j("35e7"))+2;r<l;r++)e+=n[r];n=e[j("73a612b6fb191d")](j("7da71ca0ad381e90")),t.Ue=!(0<=n&&n<e[j("73a612b6fb191d")](j("35")))}}}return 0<t.Ue&&t!==t.fz}function ks(t,e){if(Zo){if(null!=e||v("Diagram setup requires an argument DIV."),null!==t.Ea&&v("Diagram has already completed setup."),"string"==typeof e?t.Ea=d.document.getElementById(e):e instanceof HTMLDivElement?t.Ea=e:v("No DIV or DIV id supplied: "+e),null===t.Ea&&v("Invalid DIV id; could not get element with id: "+e),void 0!==t.Ea.B&&v("Invalid div id; div already has a Diagram associated with it."),!t.Ql&&d.ResizeObserver){var n=g(function(){t.Db()},250);t.Ql=new d.ResizeObserver(function(){n()}),t.Ql.observe(t.Ea)}"static"===d.getComputedStyle(t.Ea,null).position&&(t.Ea.style.position="relative");var i="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.Ea.style["-webkit-tap-highlight-color"]=i,t.Ea.style["-ms-touch-action"]="none",t.Ea.innerHTML="",t.Ea.B=t,t.Ea.goDiagram=t,t.Ea.go=d.go;var r=t.$p?new Ca(t):new La(t);if(void 0!==r.style&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px","rtl"===d.getComputedStyle(t.Ea,null).getPropertyValue("direction")&&(t.yl=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none"),t.ta=r,t.Gb=r.context,i=t.Gb,t.Sb=t.computePixelRatio(),t.xa=t.Ea.clientWidth||1,t.wa=t.Ea.clientHeight||1,go(t,t.xa,t.wa),t.Ea.insertBefore(r.Ga,t.Ea.firstChild),(r=new La(null)).width=1,r.height=1,t.Eu=r,t.px=r.context,Zo){r=y("div");var o=y("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.xa+"px",r.style.height=t.wa+"px",r.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",t.Ea.appendChild(r),r.appendChild(o),r.onscroll=qr,r.addEventListener("mousedown",Hr),r.addEventListener("touchstart",Hr,{passive:!0}),r.B=t,r.dz=!0,r.ez=!0,t.Ws=r,t.Hp=o}t.Vq=g(function(){t.wh=null,t.M()},300),t.Sw=g(function(){zr(t)},250),t.preventDefault=function(t){return t.preventDefault(),!1},t.Bk=function(e){if(t.isEnabled){t.Zf=!0;var n=$r(t,e,!0);t.doMouseMove(),t.currentTool.isBeyondDragSize()&&(t.td=0),eo(n,e)}},t.Ak=function(e){if(t.isEnabled)if(t.Zf=!0,t.ne)e.preventDefault();else{var n=$r(t,e,!0);n.down=!0,n.clickCount=e.detail,(I||R)&&(e.timeStamp-t.Nj<t.mt&&!t.currentTool.isBeyondDragSize()?t.td++:t.td=1,t.Nj=e.timeStamp,n.clickCount=t.td),n.clone(t.firstInput),t.doMouseDown(),1===e.button?e.preventDefault():eo(n,e)}},t.Dk=function(e){if(t.isEnabled)if(t.ne&&2===e.button)e.preventDefault();else if(t.ne&&0===e.button&&(t.ne=!1),t.ck)e.preventDefault();else{t.Zf=!0;var n=$r(t,e,!0);n.up=!0,n.clickCount=e.detail,(I||R)&&(n.clickCount=t.td),n.bubbles=e.bubbles,n.targetDiagram=Zr(e),t.doMouseUp(),t.If(),eo(n,e)}},t.Ek=function(e){if(t.isEnabled){var n=$r(t,e,!0);n.bubbles=!0;var i=0,r=0;n.delta=0,void 0!==e.deltaX?(0!==e.deltaX&&(i=0<e.deltaX?1:-1),0!==e.deltaY&&(r=0<e.deltaY?1:-1),n.delta=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-i:-r):void 0!==e.wheelDeltaX?(0!==e.wheelDeltaX&&(i=0<e.wheelDeltaX?-1:1),0!==e.wheelDeltaY&&(r=0<e.wheelDeltaY?-1:1),n.delta=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?-i:-r):void 0!==e.wheelDelta&&0!==e.wheelDelta&&(n.delta=0<e.wheelDelta?1:-1),t.doMouseWheel(),eo(n,e)}},t.Ck=function(e){t.isEnabled&&(t.Zf=!1,$r(t,e,!0),(e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())},t.Kw=function(e){if(t.isEnabled){t.ck=!1,t.ne=!0;var n=Jr(t,e,e.targetTouches[0],1<e.touches.length),i=null;if(0<e.targetTouches.length?i=e.targetTouches[0]:0<e.changedTouches.length&&(i=e.changedTouches[0]),null!==i){var r=i.screenX;i=i.screenY;var o=t.yo;e.timeStamp-t.Nj<t.mt&&!(25<Math.abs(o.x-r)||25<Math.abs(o.y-i))?t.td++:t.td=1,n.clickCount=t.td,t.Nj=e.timeStamp,t.yo.h(r,i)}t.doMouseDown(),eo(n,e)}},t.Jw=function(e){if(t.isEnabled){var n=null;0<e.targetTouches.length?n=e.targetTouches[0]:0<e.changedTouches.length&&(n=e.changedTouches[0]),n=Qr(t,e,n,1<e.touches.length),t.doMouseMove(),eo(n,e)}},t.Iw=function(e){if(t.isEnabled)if(t.ck)e.preventDefault();else if(!(1<e.touches.length)){var n=null,i=null;0<e.targetTouches.length?i=e.targetTouches[0]:0<e.changedTouches.length&&(i=e.changedTouches[0]);var r=to(t,e,!1,!0,!1,!1);null!==i&&(null!==(n=d.document.elementFromPoint(i.clientX,i.clientY))&&n.B instanceof Dr&&n.B!==t&&no(n.B,i,r),no(t,i,r),r.clickCount=t.td),r.targetDiagram=null===n?Zr(e):n.B?n.B:null,r.targetObject=null,t.doMouseUp(),eo(r,e),t.ne=!1}},t.Am=function(e){if(t.isEnabled){t.Zf=!0;var n=t.Ks;void 0===n[e.pointerId]&&(n[e.pointerId]=e);var i=!1;if(null!==(n=t.Xj)[0]&&n[0].pointerId===e.pointerId)n[0]=e;else if(null!==n[1]&&n[1].pointerId===e.pointerId)n[1]=e,i=!0;else if(null===n[0])n[0]=e;else{if(null!==n[1])return void e.preventDefault();n[1]=e,i=!0}"touch"!==e.pointerType&&"pen"!==e.pointerType||(t.ck=!1,t.ne=!0),n=Jr(t,e,e,i),i=t.yo;var r="touch"===e.pointerType||"pen"===e.pointerType?25:10;e.timeStamp-t.Nj<t.mt&&!(Math.abs(i.x-e.screenX)>r||Math.abs(i.y-e.screenY)>r)?t.td++:t.td=1,n.clickCount=t.td,t.Nj=e.timeStamp,t.yo.Ig(e.screenX,e.screenY),t.doMouseDown(),1===e.button?e.preventDefault():eo(n,e)}},t.Bm=function(e){if(t.isEnabled){t.Zf=!0;var n=t.Xj;if(null!==n[0]&&n[0].pointerId===e.pointerId)n[0]=e;else{if(null!==n[1]&&n[1].pointerId===e.pointerId)return void(n[1]=e);if(null!==n[0])return;n[0]=e}n[0].pointerId===e.pointerId&&((n=Qr(t,e,e,null!==n[1])).targetDiagram=Zr(e),t.doMouseMove(),eo(n,e))}},t.Dm=function(e){if(t.isEnabled){t.Zf=!0;var n="touch"===e.pointerType||"pen"===e.pointerType,i=t.Ks;if(n&&t.ck)delete i[e.pointerId],e.preventDefault();else if(null!==(i=t.Xj)[0]&&i[0].pointerId===e.pointerId){i[0]=null,i=to(t,e,!1,!0,!0,!1);var r=d.document.elementFromPoint(e.clientX,e.clientY);null!==r&&r.B instanceof Dr&&r.B!==t&&no(r.B,e,i),no(t,e,i),i.clickCount=t.td,i.targetDiagram=null===r?Zr(e):r.B?r.B:null,i.targetObject=null,t.doMouseUp(),eo(i,e),n&&(t.ne=!1)}else null!==i[1]&&i[1].pointerId===e.pointerId&&(i[1]=null)}},t.Cm=function(e){if(t.isEnabled){t.Zf=!1;var n=t.Ks;n[e.pointerId]&&delete n[e.pointerId],null!==(n=t.Xj)[0]&&n[0].pointerId===e.pointerId&&(n[0]=null),null!==n[1]&&n[1].pointerId===e.pointerId&&(n[1]=null),"touch"!==e.pointerType&&"pen"!==e.pointerType&&((e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())}},t.Rr=i.Y["d"+Ds[1]+Ds[2]+"wI"+ms.slice(1,5)]["b"+Fd.slice(1,e)](i.Y,ys,e,e),i.sc(!0),function(t){var e=t.ta.Ga;e instanceof HTMLCanvasElement&&(t.gn?(t.addEventListener(e,"pointerdown",t.Am,!1),t.addEventListener(e,"pointermove",t.Bm,!1),t.addEventListener(e,"pointerup",t.Dm,!1),t.addEventListener(e,"pointerout",t.Cm,!1)):(t.addEventListener(e,"touchstart",t.Kw,!1),t.addEventListener(e,"touchmove",t.Jw,!1),t.addEventListener(e,"touchend",t.Iw,!1),t.addEventListener(e,"mousemove",t.Bk,!1),t.addEventListener(e,"mousedown",t.Ak,!1),t.addEventListener(e,"mouseup",t.Dk,!1),t.addEventListener(e,"mouseout",t.Ck,!1)),t.addEventListener(e,"mouseenter",t.Jz,!1),t.addEventListener(e,"mouseleave",t.Kz,!1),t.addEventListener(e,"wheel",t.Ek,!1),t.addEventListener(e,"keydown",t.xA,!1),t.addEventListener(e,"keyup",t.yA,!1),t.addEventListener(e,"blur",t.vz,!1),t.addEventListener(e,"focus",t.wz,!1),t.addEventListener(e,"selectstart",function(t){return t.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(t){return t.preventDefault(),!1},!1),t.addEventListener(e,"gesturestart",function(e){t.toolManager.gestureBehavior!==Bn&&(t.toolManager.gestureBehavior===Rn?e.preventDefault():t.ne&&t.lastInput.handled||(e.preventDefault(),t.Nl=t.scale,t.currentTool.doCancel()))},!1),t.addEventListener(e,"gesturechange",function(e){if(t.toolManager.gestureBehavior!==Bn)if(t.toolManager.gestureBehavior===Rn)e.preventDefault();else if(!t.ne||!t.lastInput.handled){e.preventDefault();var n=e.scale;if(null!==t.Nl){var i=t.ta.getBoundingClientRect();if(e=new dt(e.pageX-d.scrollX-t.xa/i.width*i.left,e.pageY-d.scrollY-t.wa/i.height*i.top),i=t.commandHandler,(n*=t.Nl)!==t.scale&&i.canResetZoom(n)){var r=t.zoomPoint;t.zoomPoint=e,i.resetZoom(n),t.zoomPoint=r}}}},!1),t.addEventListener(d,"resize",t.Sw,!1))}(t)}}function Ss(t){this.l=void 0===t?new dt:t,this.v=new dt}Dr.className="Diagram",Dr.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=d.document.getElementById(t)),e instanceof HTMLDivElement&&e.B instanceof Dr?e.B:null},Dr.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Dr.None=ts,Dr.Uniform=es,Dr.UniformToFill=ns,Dr.CycleAll=is,Dr.CycleNotDirected=rs,Dr.CycleNotDirectedFast=os,Dr.CycleNotUndirected=ss,Dr.CycleDestinationTree=as,Dr.CycleSourceTree=ls,Dr.DocumentScroll=hs,Dr.InfiniteScroll=us,Dr.TreeParentCollapsed=cs,Dr.AllParentsCollapsed=fs,Dr.AnyParentsCollapsed=ds,ws.className="DiagramHelper",c.Object.defineProperties(Ss.prototype,{point:{get:function(){return this.l},set:function(t){this.l=t}},shifted:{get:function(){return this.v},set:function(t){this.v=t}}});var _s,Cs,Ms,Ps,Ts,Ns,As,Es,Ls,Os,Ds="DraggingInfo";function js(t,e,n){this.node=t,this.info=e,this.Vv=n}function Fs(){this.reset()}function Is(t){1<arguments.length&&v("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Dr.call(this,t),Rs(this)}function Rs(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=oe,t.layout=new Lf}function Bs(t){1<arguments.length&&v("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Dr.call(this,t);var e=this;this.animationManager.isEnabled=!1,this.Rb=!0,this.Ja=null,this.ol=this.nl=!1,this.v=this.I=!0,this.cb=0,this.T=!1,this.Wl=null,this.Qy("drawShadows",!1);var n=new ou,i=new ih;i.stroke="magenta",i.strokeWidth=2,i.fill="transparent",i.name="BOXSHAPE",n.selectable=!0,n.selectionAdorned=!1,n.selectionObjectName="BOXSHAPE",n.locationObjectName="BOXSHAPE",n.resizeObjectName="BOXSHAPE",n.cursor="move",n.add(i),this.l=n,this.allowDelete=this.allowCopy=!1,this.allowSelect=!0,this.autoScrollRegion=new Jt(0,0,0,0),this.la.h(0,0),this.toolManager.Xa("Dragging",new Us,this.toolManager.mouseMoveTools),this.click=function(){var t=e.observed;if(null!==t){var n=t.viewportBounds,i=e.lastInput.documentPoint;t.position=new dt(i.x-n.width/2,i.y-n.height/2)}},this.Vh=function(){e.Oa(),Vs(e)},this.Uh=function(){null!==e.observed&&(e.Oa(),e.M())},this.Qc=function(){1>e.updateDelay?e.M():e.T||(e.T=!0,setTimeout(function(){e.T=!1;var t=e.ta,n=e.Gb;if(null!==t&&null!==n){if(po(e),null===e.Wl){var i=new La(null);i.width=t.width,i.height=t.height,e.Wl=i}try{e.ta=e.Wl,e.Gb=e.ta.context,e.Gb.sc(!0),e.Gb.setTransform(1,0,0,1,0,0),e.Gb.clearRect(0,0,e.ta.width,e.ta.height),zs(e)}finally{e.ta=t,e.Gb=n}}e.M()},e.updateDelay))},this.Jd=function(){null!==e.observed&&Vs(e)},this.autoScale=es,this.Rb=!1}function zs(t){var e=t.observed;if(null!==e){var n=t.drawsTemporaryLayers,i=t.drawsGrid&&n,r=e.grid;i&&null!==r&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(Po(e,r=Rt.alloc().assign(t.viewportBounds).Pc(e.viewportBounds)),Rt.free(r),so(e));var o=t.pb;o.reset(),1!==t.scale&&o.scale(t.scale),0===t.position.x&&0===t.position.y||o.translate(-t.position.x,-t.position.y),(r=t.Gb).scale(t.Sb,t.Sb),r.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),o=(e=e.La.j).length;for(var s=0;s<o;s++){var a=e[s],l=t;if(a.visible&&0!==a.opacity){var h=a.diagram.grid.part;if(!n&&a.isTemporary)i&&h.layer===a&&(a=Lr(a,r),h.ac(r,l),r.globalAlpha=a);else{for(var u=Lr(a,r),c=l.scale,f=Rt.alloc(),d=a.Da.j,p=d.length,g=0;g<p;g++){var m=d[g];(i||m!==h)&&a.bj(r,m,l,null,c,f,!1)}Rt.free(f),r.globalAlpha=u}}}}}function Vs(t){var e=t.box;if(null!==e){var n=t.observed;if(null!==n){t.Cc=!0,n=n.viewportBounds;var i=e.selectionObject,r=Dt.alloc();r.h(n.width,n.height),i.desiredSize=r,Dt.free(r),t=2/t.scale,i instanceof ih&&(i.strokeWidth=t),e.location=new dt(n.x-t/2,n.y-t/2),e.isSelected=!0}}}function Us(){zn.call(this),this.l=null}function qs(){it(this),this.B=Xo,this.cb=this.I=this.v=!0,this.T=this.Ja=this.Qc=this.Ka=!1,this.Hi=this.l=null,this.Jd=1.05,this.Xu=NaN,this.vx=null,this.xv=NaN,this.wv=Wt,this.Ac=!0,this.rg=null,this.Rc=200}function Hs(t,e,n){if(e.isVisible())return n;if(e instanceof Pu)Hs(t,e.adornedPart,n);else if(e instanceof Qu){var i=e.fromNode;null!==i&&Hs(t,i,n),null!==(e=e.toNode)&&Hs(t,e,n)}else e instanceof Tu&&(null!==(i=e.labeledLink)&&Hs(t,i,n),null!==(i=e.Fg())&&(i.isTreeExpanded||i.wasTreeExpanded||n.push(i),Hs(t,i,n))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),Hs(t,e,n));return n}function Gs(t){var e=T();for(t=t.iterator;t.next();){var n=t.value;n instanceof Qu||e.push(n)}t=new nt,n=e.length;for(var i=0;i<n;i++){for(var r=e[i],o=!0,s=0;s<n;s++)if(r.Ed(e[s])){o=!1;break}o&&t.add(r)}return N(e),t}function Ys(){it(this),this.F=4225027,this.gb=1,this.og=null,this.Qa="",this.cc=this.lb=null,this.la=new dt(NaN,NaN).freeze(),this.Vc=Lt,this.fg=Mt,this.eg=Et,this.pb=new Ge,this.Xh=new Ge,this.cg=new Ge,this.ya=this.hl=1,this.Xb=0,this.ze=Ps,this.ih=ee,this.oc=new Rt(NaN,NaN,NaN,NaN).freeze(),this.xb=new Rt(NaN,NaN,NaN,NaN).freeze(),this.pc=new Rt(0,0,NaN,NaN).freeze(),this.O=this.op=this.pp=null,this.Rk=this.yb=Te,this.Bp=0,this.Cp=1,this.Rg=0,this.un=1,this.Vp=null,this.Ip=-1/0,this.Rl=0,this.Sl=xt,this.Tl=Cc,this.mi="",this.eb=this.N=null,this.Vk=-1,this.Vl=this.qd=this.li=this.Zl=null,this.Ns=Cs,this.Ep=this.Mg=this.Wj=null}function Xs(t){null===t.N&&(t.N=new ka)}function Ks(t,e,n){var i=t.gj();if(null!==i)for(var r=t.eb.iterator;r.next();){var o=r.value,s=null;if(null!==o.sourceName){if(null===(s=jd(o,i,t)))continue;o.hr(t,s,n,null)}else if(o.isToModel){var a=e.diagram;null===a||a.skipsModelSourceBindings||o.hr(t,a.model.modelData,n,i)}else{if(null===(a=i.data))continue;var l=e.diagram;null===l||l.skipsModelSourceBindings||o.hr(t,a,n,i)}s===t&&null!==(a=i.Dt(o.tj))&&o.Pw(a,s,n)}}function Ws(t,e,n,i,r){var o=t.oc,s=t.cg;s.reset(),ea(t,s,e,n,i,r),t.cg=s,o.h(e,n,i,r),s.Pt()||s.Lw(o)}function $s(t,e,n,i){return!1!==t.pickable&&(i.multiply(t.transform),n?t.Kc(e,i):t.Hh(e,i))}function Zs(t,e,n,i,r){if(t.xb.h(e,n,i,r),!t.desiredSize.u()){var o=t.oc,s=(n=t.ih).top+n.bottom;switch(n=o.width+(e=n.right+n.left),o=o.height+s,i+=e,r+=s,e=ia(t,!0),n===i&&o===r&&(e=Cs),e){case Cs:(n>i||o>r)&&(fa(t,!0),t.measure(n>i?i:n,o>r?r:o,0,0));break;case _s:fa(t,!0),t.measure(i,r,0,0);break;case Ts:fa(t,!0),t.measure(i,o,0,0);break;case Ns:fa(t,!0),t.measure(n,r,0,0)}}}function Js(t,e,n){var i=t.xb,r=t.pc;null!==t.cc&&(Qs(t,e,t.cc,!0,!0,r,i),t.cc instanceof Fa&&t.cc.type===Ja?(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.Zd(t.cc)):e.fillRect(i.x,i.y,i.width,i.height)),null!==t.lb&&(Qs(t,e,t.lb,!0,!1,r,i),t.lb instanceof Fa&&t.lb.type===Ja?(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.Zd(t.lb)):e.fillRect(i.x,i.y,i.width,i.height)),t.cj(e,n)}function Qs(t,e,n,i,r,o,s){if(null!==n){var a=1,l=1;if("string"==typeof n)i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===$a)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{var h=0;if(t instanceof ih&&(h=t.strokeWidth),a=o.width,l=o.height,r?(a=s.width,l=s.height):i||(a+=h,l+=h),(o=e instanceof Oa)&&n.ge&&(n.type===Qa||n.Yk===a&&n.vu===l))var u=n.ge;else{var c=0,f=0,d=0,p=0,g=0,y=0;if(y=g=0,r?(g=s.x,y=s.y):i||(g-=h/2,y-=h/2),c=n.start.x*a+n.start.offsetX,f=n.start.y*l+n.start.offsetY,d=n.end.x*a+n.end.offsetX,p=n.end.y*l+n.end.offsetY,c+=g,d+=g,f+=y,p+=y,n.type===Za)u=e.createLinearGradient(c,f,d,p);else if(n.type===Ja)y=isNaN(n.endRadius)?Math.max(a,l)/2:n.endRadius,isNaN(n.startRadius)?(g=0,y=Math.max(a,l)/2):g=n.startRadius,u=e.createRadialGradient(c,f,g,d,p,y);else if(n.type===Qa)try{u=e.createPattern(n.pattern,"repeat")}catch(b){u=null}if(n.type!==Qa&&null!==(r=n.colorStops))for(r=r.iterator;r.next();)u.addColorStop(r.key,r.value);if(o&&(n.ge=u,null!==u&&(n.Yk=a,n.vu=l),null===u&&n.type===Qa&&-1!==n.Yk)){n.Yk=-1;var v=t.diagram;null!==v&&-1===n.Yk&&m(function(){v.Je()},600)}}i?e.fillStyle=u:e.strokeStyle=u}}}function ta(t){if(0!=(2048&t.F)==1){var e=t.pb;if(e.reset(),!t.xb.u()||!t.oc.u())return void ha(t,!1);if(e.translate(t.xb.x-t.oc.x,t.xb.y-t.oc.y),1!==t.scale||0!==t.angle){var n=t.naturalBounds;ea(t,e,n.x,n.y,n.width,n.height)}ha(t,!1),ua(t,!0)}0!=(4096&t.F)==1&&(null===(e=t.panel)?(t.Xh.set(t.pb),t.hl=t.scale,ua(t,!1)):null!==e.Bd&&((n=t.Xh).reset(),e.de()?n.multiply(e.Xh):null!==e.panel&&n.multiply(e.panel.Xh),n.multiply(t.pb),t.hl=t.scale*e.hl,ua(t,!1)))}function ea(t,e,n,i,r,o){if(1!==t.scale&&e.scale(t.scale),0!==t.Xb){var s=le;t.Ef()&&t.locationSpot.jb()&&(s=t.locationSpot);var a=dt.alloc();if(t instanceof ou&&t.locationObject!==t)for(a.Jk((i=(n=t.locationObject).naturalBounds).x,i.y,i.width,i.height,s),n.cg.sa(a),a.offset(-n.measuredBounds.x,-n.measuredBounds.y),s=n.panel;null!==s&&s!==t;)s.cg.sa(a),a.offset(-s.measuredBounds.x,-s.measuredBounds.y),s=s.panel;else a.Jk(n,i,r,o,s);e.rotate(t.Xb,a.x,a.y),dt.free(a)}}function na(t){if(!1===da(t)){var e=t.panel;null!==e?e.o():t.Ef()&&null!==(e=t.diagram)&&(e.sd.add(t),t instanceof Tu&&t.od(),e.Db()),pa(t,!0)}}function ia(t,e){var n=t.stretch,i=t.panel;return null!==i&&i.type===Ml.Table?ra(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):null!==i&&i.type===Ml.Auto&&i.qb()===t?oa(t,_s,e):n===Ps?null!==i?i.type===Ml.Spot&&i.qb()===t?oa(t,_s,e):oa(t,(n=i.defaultStretch)===Ps?Cs:n,e):oa(t,Cs,e):oa(t,n,e)}function ra(t,e,n,i){var r=t.stretch;if(r!==Ps)return oa(t,r,i);var o=r=null;switch(e.stretch){case Ns:o=!0;break;case _s:o=!0}switch(n.stretch){case Ts:r=!0;break;case _s:r=!0}return e=t.panel.defaultStretch,null===r&&(r=e===Ts||e===_s),null===o&&(o=e===Ns||e===_s),oa(t,!0===r&&!0===o?_s:!0===r?Ts:!0===o?Ns:Cs,i)}function oa(t,e,n){if(n)return e;if(e===Cs)return Cs;if((n=t.desiredSize).u())return Cs;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===Ts)return Cs;if(e===_s)return Ns}else{if(e===Ns)return Cs;if(e===_s)return Ts}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===Ns)return Cs;if(e===_s)return Ts}else{if(e===Ts)return Cs;if(e===_s)return Ns}return e}function sa(t,e){t.F=e?512|t.F:-513&t.F}function aa(t){return 0!=(1024&t.F)}function la(t,e){t.F=e?1024|t.F:-1025&t.F}function ha(t,e){t.F=e?2048|t.F:-2049&t.F}function ua(t,e){t.F=e?4096|t.F:-4097&t.F}function ca(t){return 0!=(8192&t.F)}function fa(t,e){t.F=e?8192|t.F:-8193&t.F}function da(t){return 0!=(16384&t.F)}function pa(t,e){t.F=e?16384|t.F:-16385&t.F}function ga(t){var e=t.part;if(e instanceof Tu&&(null!==t.portId||t===e.port)){var n=e.diagram;null===n||n.undoManager.isUndoingRedoing||Eu(e,t)}}function ma(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof Ml?t instanceof Tu?t.od():t.Vm(t,function(t){ga(t)}):ga(t))}function ya(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i=null,r=null;if("function"==typeof t)r=t;else if("string"==typeof t){var o=xa.H(t);"function"==typeof o?S(i=o(n=C(arguments)))||v('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):r=d.go[t]}if(null===i&&(null!=r&&r.constructor||v("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new r),r=1,i instanceof Dr&&1<n.length){o=i;var s=n[1];("string"==typeof s||s instanceof HTMLDivElement)&&(ks(o,s),r++)}for(;r<n.length;r++)void 0===(o=n[r])?v("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+i):va(i,o);return i}function va(t,e){if("string"==typeof e)if(t instanceof dh)t.text=e;else if(t instanceof ih)t.figure=e;else if(t instanceof zh)t.source=e;else if(t instanceof Ml)null!==(e=Zl.H(e))&&(t.type=e);else if(t instanceof Fa){var n=G(Fa,e);null!==n?t.type=n:v("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof Ke?null!==(e=G(Ke,e))&&(t.type=e):t instanceof fn&&null!==(e=G(fn,e))&&(t.type=e);else if(e instanceof Ys)t instanceof Ml||v("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof Jl){var i;e.isRow&&"function"==typeof t.getRowDefinition?i=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(i=t.getColumnDefinition(e.index)),i instanceof Jl?i.zt(e):v("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof H)"function"==typeof t.ib&&t.ib(e);else if(e instanceof cl)t.type=e;else if(e instanceof Dd)t instanceof Ys||t instanceof Jl?t.bind(e):v("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Pr)t instanceof Ys?t.Mw(e):v("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof cn)t instanceof Ke?t.figures.add(e):v("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof fn)t instanceof cn?t.segments.add(e):v("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof uf)t instanceof Dr||t instanceof Xu?t.layout=e:v("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)va(t,e[n]);else if("object"==typeof e&&null!==e)if(t instanceof Fa){for(var r in n=new X,e)i=parseFloat(r),isNaN(i)?n[r]=e[r]:t.addColorStop(i,e[r]);uo(t,n)}else if(t instanceof Jl){for(n in void 0!==e.row?((null==(r=e.row)||1/0===r||isNaN(r)||0>r)&&v("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):void 0!==e.column&&((null==(r=e.column)||1/0===r||isNaN(r)||0>r)&&v("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new X,e)"row"!==n&&"column"!==n&&(r[n]=e[n]);uo(t,r)}else uo(t,e);else v('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function ba(t,e){xa.add(t,e)}function wa(t,e,n){void 0===n&&(n=null);var i=t[1];if("function"==typeof n?n(i):"string"==typeof i)return t.splice(1,1),i;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Ss.className="DraggingInfo",js.className="DraggingNodeInfoPair",Fs.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new Dt(NaN,NaN).freeze(),this.gridSnapCellSpot=re,this.gridSnapOrigin=new dt(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Fs.className="DraggingOptions",u(Is,Dr),Is.prototype.reset=function(){Dr.prototype.reset.call(this),Rs(this)},Is.className="Palette",u(Bs,Dr),Bs.prototype.computePixelRatio=function(){return 1},Bs.prototype.ac=function(){if(null===this.Ea&&v("No div specified"),null===this.ta&&v("No canvas specified"),!(this.ta instanceof Ca)&&(su(this.box),this.Cc)){var t=this.observed;if(null!==t&&!t.animationManager.isAnimating&&t.mj){po(this);var e=this.ta;(t=this.Gb).sc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?zs(this):null!==this.Wl&&(t.drawImage(this.Wl.Ga,0,0),(e=this.pb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.Sb,this.Sb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var n=(e=this.La.j).length,i=0;i<n;i++)e[i].ac(t,this);this.Cc=this.ui=!1}}},Bs.prototype.computeBounds=function(){var t=this.observed;if(null===t)return Wt;var e=t.documentBounds.copy();return e.Pc(t.viewportBounds),e},Bs.prototype.By=function(){!0!==this.Cc&&(this.Cc=!0,this.Db())},Bs.prototype.Rq=function(t,e,n,i){this.Rb||(fo(this),this.M(),co(this),this.Oa(),Vs(this),this.Wd.scale=n,this.Wd.position.x=t.x,this.Wd.position.y=t.y,this.Wd.bounds.assign(t),this.Wd.cw=i,this.R("ViewportBoundsChanged",this.Wd,t))},c.Object.defineProperties(Bs.prototype,{observed:{get:function(){return this.Ja},set:function(t){var e=this.Ja;if(t instanceof Bs&&v("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.Gm("ViewportBoundsChanged",this.Vh),e.Gm("DocumentBoundsChanged",this.Uh),e.Gm("InvalidateDraw",this.Qc),e.Gm("AnimationFinished",this.Jd)),this.Ja=t,null!==t&&(t.fk("ViewportBoundsChanged",this.Vh),t.fk("DocumentBoundsChanged",this.Uh),t.fk("InvalidateDraw",this.Qc),t.fk("AnimationFinished",this.Jd),this.add(this.box)),this.Oa(),null===t){this.Wl=null;var n=this.ta,i=this.Gb;n&&i&&(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height))}else this.Qc(null),Vs(this),this.M();this.g("observed",e,t)}}},box:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.remove(e),this.add(this.l),Vs(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,this.Je())}},drawsGrid:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,this.Je())}},updateDelay:{get:function(){return this.cb},set:function(t){0>t&&(t=0),this.cb!==t&&(this.cb=t)}}}),Bs.className="Overview",u(Us,zn),Us.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.l=new dt((n=e.viewportBounds).width/2,n.height/2),e.position=new dt((t=t.firstInput.documentPoint).x-this.l.x,t.y-this.l.y)),0))},Us.prototype.doActivate=function(){this.l=null,zn.prototype.doActivate.call(this)},Us.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},Us.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var n=t.box;if(null!==n){if(null===this.l){var i=t.firstInput.documentPoint;this.l=new dt(i.x-(n=n.location).x,i.y-n.y)}e.position=new dt((t=t.lastInput.documentPoint).x-this.l.x,t.y-this.l.y)}}},Us.className="OverviewDraggingTool",qs.prototype.toString=function(){return"CommandHandler"},qs.prototype.ae=function(t){this.B=t},qs.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=z?e.meta:e.control,i=e.shift,r=e.alt,o=e.key;!n||"C"!==o&&"Insert"!==o?n&&"X"===o||i&&"Del"===o?this.canCutSelection()&&this.cutSelection():n&&"V"===o||i&&"Insert"===o?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===o||r&&i&&"Backspace"===o?this.canRedo()&&this.redo():n&&"Z"===o||r&&"Backspace"===o?this.canUndo()&&this.undo():"Del"===o||"Backspace"===o?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===o?this.canSelectAll()&&this.selectAll():"Esc"===o?this.canStopCommand()&&this.stopCommand():"Up"===o?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","up"):"Down"===o?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","down"):"Left"===o?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","left"):"Right"===o?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","right"):"PageUp"===o?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===o?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===o?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===o?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===o?this.canScrollToPart()&&this.scrollToPart():"Subtract"===o?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===o?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===o?this.canResetZoom()&&this.resetZoom():i&&"Z"===o?this.canZoomToFit()&&this.zoomToFit():n&&!i&&"G"===o?this.canGroupSelection()&&this.groupSelection():n&&i&&"G"===o?this.canUngroupSelection()&&this.ungroupSelection():e.event&&113===e.event.which?this.canEditTextBlock()&&this.editTextBlock():e.event&&93===e.event.which?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},qs.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},qs.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Ln&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},qs.prototype.canStopCommand=function(){return!0},qs.prototype.selectAll=function(){var t=this.diagram;t.M();try{t.currentCursor="wait",t.R("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.R("ChangedSelection",t.selection),t.currentCursor=""}},qs.prototype.canSelectAll=function(){return this.diagram.allowSelect},qs.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.va("Delete"),t.R("SelectionDeleting",t.selection);for(var e=new nt,n=t.selection.iterator;n.next();)Cu(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(t){return t.canDelete()});t.cu(e,!0),t.R("SelectionDeleted",e)}finally{t.Wa("Delete"),t.R("ChangedSelection",t.selection),t.currentCursor=""}},qs.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},qs.prototype.copySelection=function(){var t=this.diagram,e=new nt;for(t=t.selection.iterator;t.next();)Cu(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(t){return t.canCopy()});this.copyToClipboard(e)},qs.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},qs.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},qs.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},qs.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)Jo=null,Qo="";else{n=e.model;var i=!1,r=!1,o=null;try{n.wm()&&(i=n.mk,n.mk=this.copiesParentKey),n.vk()&&(r=n.lk,n.lk=this.copiesGroupKey),o=e.nk(t,null,!0)}finally{n.wm()&&(n.mk=i),n.vk()&&(n.lk=r),(n=new tt).addAll(o),Jo=n,Qo=e.model.dataFormat}}e.R("ClipboardChanged",n)},qs.prototype.pasteFromClipboard=function(){var t=new nt,e=Jo;if(null===e)return t;var n=this.diagram;if(Qo!==n.model.dataFormat)return t;var i=n.model,r=!1,o=!1,s=null;try{i.wm()&&(r=i.mk,i.mk=this.copiesParentKey),i.vk()&&(o=i.lk,i.lk=this.copiesGroupKey),s=n.nk(e,n,!1)}finally{for(i.wm()&&(i.mk=r),i.vk()&&(i.lk=o),e=s.iterator;e.next();)i=e.key,(n=e.value).location.u()||(i.location.u()?n.location=i.location:!n.position.u()&&i.position.u()&&(n.position=i.position)),t.add(n)}return t},qs.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.va("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var i=n.iterator;i.next();)i.value.isSelected=!0;if(null!==t){var r=e.computePartsBounds(e.selection);r.u()&&bo(e,this.computeEffectiveCollection(e.selection,e.bl),new dt(t.x-r.centerX,t.y-r.centerY),e.bl,!1)}e.R("ClipboardPasted",n)}finally{e.Wa("Paste"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},qs.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===Jo||0===Jo.count||Qo!==t.model.dataFormat)},qs.prototype.undo=function(){this.diagram.undoManager.undo()},qs.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},qs.prototype.redo=function(){this.diagram.undoManager.redo()},qs.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},qs.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===ts&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},qs.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===ts&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},qs.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===ts&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},qs.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===ts&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},qs.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},qs.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},qs.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Oc(),t.Je();var n=t.position,i=t.scale;rr(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.xv&&!isNaN(this.Xu)&&t.documentBounds.w(this.wv)?(t.scale=this.Xu,t.position=this.vx,this.xv=NaN,this.wv=Wt):(this.Xu=i,this.vx=n.copy(),t.zoomToFit(),this.xv=t.scale,this.wv=t.documentBounds.copy()),sr(e)},qs.prototype.canZoomToFit=function(){return this.diagram.allowZoom},qs.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Ta(),null===t){try{null!==this.rg&&(this.rg.next()?t=this.rg.value:this.rg=null)}catch(l){this.rg=null}null===t&&(0<e.highlighteds.count?this.rg=e.highlighteds.iterator:0<e.selection.count&&(this.rg=e.selection.iterator),null!==this.rg&&this.rg.next()&&(t=this.rg.value))}if(null!==t){var n=e.animationManager;rr(n,"Scroll To Part");var i=this.scrollToPartPause;if(0<i){var r=Hs(this,t,[t]);if(1===r.length)e.va(),e.wt(t.actualBounds),e.Wa("Scroll To Part");else{var o=function(){e.va();for(var t=r.pop();0<r.length&&t instanceof Tu&&t.isTreeExpanded&&(!(t instanceof Xu)||t.isSubGraphExpanded);)t=r.pop();0<r.length?(t instanceof ou&&e.ww(t.actualBounds),t instanceof Tu&&!t.isTreeExpanded&&(t.isTreeExpanded=!0),t instanceof Xu&&!t.isSubGraphExpanded&&(t.isSubGraphExpanded=!0)):(t instanceof ou&&e.wt(t.actualBounds),e.Gm("LayoutCompleted",s)),e.Wa("Scroll To Part")},s=function(){m(o,(n.isEnabled?n.duration:0)+i)};e.fk("LayoutCompleted",s),o()}}else{var a=e.position.copy();e.wt(t.actualBounds),a.Na(e.position)&&n.Oc()}}},qs.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof ou)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},qs.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Collapse Tree"),rr(e.animationManager,"Collapse Tree");var n=new tt;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof Tu&&r.isTreeExpanded&&(r.collapseTree(),n.add(r))}e.R("TreeCollapsed",n)}finally{e.Wa("Collapse Tree")}},qs.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Tu&&t.isTreeExpanded))return!1;if(0<t.Bq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Tu&&e.isTreeExpanded&&0<e.Bq().count)return!0;return!1},qs.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Expand Tree"),rr(e.animationManager,"Expand Tree");var n=new tt;if(null===t||t.isTreeExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof Tu&&!r.isTreeExpanded&&(r.expandTree(),n.add(r))}}else t.expandTree(),n.add(t);e.R("TreeExpanded",n)}finally{e.Wa("Expand Tree")}},qs.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Tu)||t.isTreeExpanded)return!1;if(0<t.Bq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Tu&&!e.isTreeExpanded&&0<e.Bq().count)return!0;return!1},qs.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.wk()){var n=this.archetypeGroupData;if(null!==n){var i=null;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.va("Group");for(var r=new tt,o=t.selection.iterator;o.next();){var s=o.value;s.Lc()&&s.canGroup()&&r.add(s)}for(var a=new tt,l=r.iterator;l.next();){var h=l.value;o=!1;for(var u=r.iterator;u.next();)if(h.Ed(u.value)){o=!0;break}o||a.add(h)}if(0<a.count){var c=a.first().containingGroup;if(null!==c)for(;null!==c;){r=!1;for(var f=a.iterator;f.next();)if(!f.value.Ed(c)){r=!0;break}if(!r)break;c=c.containingGroup}if(n instanceof Xu)ql(n),null!==(i=n.copy())&&t.add(i);else if(e.aw(n)){var d=e.copyNodeData(n);S(d)&&(e.uf(d),i=t.ej(d))}if(null!==i){null!==c&&this.isValidMember(c,i)&&(i.containingGroup=c);for(var p=a.iterator;p.next();){var g=p.value;this.isValidMember(i,g)&&(g.containingGroup=i)}t.clearSelection(!0),i.isSelected=!0}}t.R("SelectionGrouped",i)}finally{t.Wa("Group"),t.R("ChangedSelection",t.selection),t.currentCursor=""}}}},qs.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.wk()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Lc()&&e.canGroup())return!0}return!1},qs.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof Qu)return!1;if(null!==t){if(t===e||t.Ed(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},qs.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.wk())try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.va("Ungroup");var i=new tt;if(null!==t)i.add(t);else for(var r=e.selection.iterator;r.next();){var o=r.value;o instanceof Xu&&o.canUngroup()&&i.add(o)}var s=new tt;if(0<i.count){e.clearSelection(!0);for(var a=i.iterator;a.next();){var l=a.value;l.expandSubGraph();var h=l.containingGroup,u=null!==h&&null!==h.data?n.ja(h.data):void 0;s.addAll(l.memberParts);for(var c=s.iterator;c.next();){var f=c.value;if(f.isSelected=!0,!(f instanceof Qu)){var d=f.data;null!==d?n.ar(d,u):f.containingGroup=h}}e.remove(l)}}e.R("SelectionUngrouped",i,s)}finally{e.Wa("Ungroup"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},qs.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.wk())return!1;if(null!==t){if(!(t instanceof Xu))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Xu&&e.canUngroup())return!0;return!1},qs.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=Gs(t).iterator;t.next();){var i=t.value;null!==i.containingGroup&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},qs.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Collapse SubGraph"),rr(e.animationManager,"Collapse SubGraph");var n=new tt;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof Xu&&r.isSubGraphExpanded&&(r.collapseSubGraph(),n.add(r))}e.R("SubGraphCollapsed",n)}finally{e.Wa("Collapse SubGraph")}},qs.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof Xu&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Xu&&e.isSubGraphExpanded)return!0;return!1},qs.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Expand SubGraph"),rr(e.animationManager,"Expand SubGraph");var n=new tt;if(null===t||t.isSubGraphExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof Xu&&!r.isSubGraphExpanded&&(r.expandSubGraph(),n.add(r))}}else t.expandSubGraph(),n.add(t);e.R("SubGraphExpanded",n)}finally{e.Wa("Expand SubGraph")}},qs.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof Xu&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Xu&&!e.isSubGraphExpanded)return!0;return!1},qs.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var i=e.selection.iterator;i.next();){var r=i.value;if(r.canEdit()){t=r;break}}if(null===t)return;t=t.om(function(t){return t instanceof dh&&t.editable})}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},qs.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof dh))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.om(function(t){return t instanceof dh&&t.editable})))return!0;return!1},qs.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=n.findObjectWithContextMenu(t)))){var i=e.lastInput,r=null;t instanceof Ys?r=t.ga(le):e.viewportBounds.aa(i.documentPoint)||(r=new dt((r=e.viewportBounds).x+r.width/2,r.y+r.height/2)),null!==r&&(i.viewPoint=e.er(r),i.documentPoint=r,i.left=!1,i.right=!0,i.up=!0),e.currentTool=n,Fi(n,!1,t)}},qs.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},qs.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),r=n.currentTool===i;if(void 0===e&&(e=r?i.dragOptions:n.bl),i=new ft,null===t)return i;for(var o=t.iterator;o.next();)vo(n,i,o.value,r,e);if(null!==n.draggedLink&&e.dragsLink)return i;for(o=t.iterator;o.next();)(t=o.value)instanceof Qu&&((null===(e=t.fromNode)||i.contains(e))&&(null===(e=t.toNode)||i.contains(e))||i.remove(t));return i},c.Object.defineProperties(qs.prototype,{diagram:{get:function(){return this.B}},copiesClipboardData:{get:function(){return this.v},set:function(t){this.v=t}},copiesConnectedLinks:{get:function(){return this.I},set:function(t){this.I=t}},deletesConnectedLinks:{get:function(){return this.cb},set:function(t){this.cb=t}},copiesTree:{get:function(){return this.Ka},set:function(t){this.Ka=t}},deletesTree:{get:function(){return this.Qc},set:function(t){this.Qc=t}},copiesParentKey:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiesGroupKey:{get:function(){return this.T},set:function(t){this.T=t}},archetypeGroupData:{get:function(){return this.l},set:function(t){this.l=t}},memberValidation:{get:function(){return this.Hi},set:function(t){this.Hi=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Jd},set:function(t){1<t||v("zoomFactor must be larger than 1.0, not: "+t),this.Jd=t}},isZoomToFitRestoreEnabled:{get:function(){return this.Ac},set:function(t){this.Ac=t}},scrollToPartPause:{get:function(){return this.Rc},set:function(t){this.Rc=t}}}),qs.className="CommandHandler",Fr=function(){return new qs},Ys.prototype.cloneProtected=function(t){t.F=6144|this.F,t.gb=this.gb,t.Qa=this.Qa,t.lb=this.lb,t.cc=this.cc,t.Mg=this.Mg,t.la.assign(this.la),t.Vc=this.Vc.G(),t.fg=this.fg.G(),t.eg=this.eg.G(),t.cg=this.cg.copy(),t.ya=this.ya,t.Xb=this.Xb,t.ze=this.ze,t.ih=this.ih.G(),t.oc.assign(this.oc),t.xb.assign(this.xb),t.pc.assign(this.pc),t.op=this.op,null!==this.O&&(t.O=this.O.copy()),t.yb=this.yb.G(),t.Rk=this.Rk.G(),t.Bp=this.Bp,t.Cp=this.Cp,t.Rg=this.Rg,t.un=this.un,t.Vp=this.Vp,t.Ip=this.Ip,t.Rl=this.Rl,t.Sl=this.Sl.G(),t.Tl=this.Tl,t.mi=this.mi,null!==this.N&&(t.N=this.N.copy()),t.eb=this.eb,t.Vk=this.Vk,null!==this.li&&(t.li=C(this.li)),null!==this.qd&&(t.qd=this.qd.copy()),t.Vl=this.Vl},Ys.prototype.Qx=function(t){var e=this.li;if(_(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.li=e=[];e.push(t)},Ys.prototype.yf=function(t){t.pp=null,t.Wj=null,t.o()},Ys.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.li)for(var e=0;e<this.li.length;e++){var n=this.li[e];t[n]=this[n]}return t},Ys.prototype.copy=function(){return this.clone()},(e=Ys.prototype).ib=function(t){t.classType===Qu?0===t.name.indexOf("Orient")?this.segmentOrientation=t:v("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===Ys&&(this.stretch=t)},e.toString=function(){return A(this.constructor)+"#"+ot(this)},e.Ic=function(){if(null===this.O){var t=new hf;t.ah=ie,t.Ah=ie,t.Zg=10,t.yh=10,t.$g=0,t.zh=0,this.O=t}},e.ab=function(t,e,n,i,r,o,s){var a=this.part;if(null!==a&&(a.Hk(t,e,n,i,r,o,s),n===this&&t===Cn&&aa(this)&&Ks(this,a,e),o=this.diagram,null===this.Mg||null===o||!o.mj||o.undoManager.isUndoingRedoing||o.currentTool!==o.toolManager||o.animationManager.on||null!==(t=this.Mg.get(e))&&o.animationManager.isEnabled&&!o.animationManager.isTicking&&(null===this.Ep&&(this.Ep=new ft),s=0===o.undoManager.transactionLevel,t.startCondition===Nr?s=!0:t.startCondition===Ar&&(s=!1),s?(function(t,e){null!==(t=t.Tk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,o=new vr),null!==(s=this.Ep.get(t))&&s.stop(),this.Ep.add(t,o),o.tv=this,o.Lx=t,o.add(this,e,i,r),o.start()):(or(o.animationManager,"Trigger"),o.animationManager.defaultAnimation.add(this,e,i,r))),this instanceof Ml&&n===a&&0!=(16777216&a.F)&&null!==a.data))for(i=(n=this.W.j).length,r=0;r<i;r++)(a=n[r])instanceof Ml&&Ll(a,function(t){null!==t.data&&0!=(16777216&t.F)&&t.Ca(e)})},e.Dt=function(t){return this.Vk===t?this:null},e.g=function(t,e,n){this.ab(Cn,t,this,e,n)},e.oy=function(t,e,n){if(!1===this.pickable)return!1;var i=this.naturalBounds;return e=t.Fe(e),n?vt(t.x,t.y,0,0,0,i.height)<=e||vt(t.x,t.y,0,i.height,i.width,i.height)<=e||vt(t.x,t.y,i.width,i.height,i.width,0)<=e||vt(t.x,t.y,i.width,0,0,0)<=e:t.md(0,0)<=e&&t.md(0,i.height)<=e&&t.md(i.width,0)<=e&&t.md(i.width,i.height)<=e},e.de=function(){return!0},e.aa=function(t){var e=dt.alloc();e.assign(t),this.transform.sa(e);var n=this.actualBounds;if(!n.u())return dt.free(e),!1;var i=this.diagram;if(null!==i&&i.ne){var r=i.tm("extraTouchThreshold"),o=i.tm("extraTouchArea"),s=o/2,a=this.naturalBounds,l=1/(i=this.Af()*i.scale);if(a.width*i<r&&a.height*i<r)return t=Xt(n.x-s*l,n.y-s*l,n.width+o*l,n.height+o*l,e.x,e.y),dt.free(e),t}return r=!1,(this instanceof Pu||this instanceof ih?Xt(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.aa(e))&&(r=!(this.qd&&!this.qd.aa(e))&&(!(null===this.cc||!n.aa(e))||!(null===this.lb||!this.pc.aa(t))||this.Ih(t))),dt.free(e),r},e.Ih=function(t){var e=this.naturalBounds;return Xt(0,0,e.width,e.height,t.x,t.y)},e.De=function(t){if(0===this.angle)return this.actualBounds.De(t);var e=this.naturalBounds;e=Rt.allocAt(0,0,e.width,e.height);var n=this.transform,i=!1,r=dt.allocAt(t.x,t.y);return e.aa(n.Dd(r))&&(r.h(t.x,t.bottom),e.aa(n.Dd(r))&&(r.h(t.right,t.bottom),e.aa(n.Dd(r))&&(r.h(t.right,t.y),e.aa(n.Dd(r))&&(i=!0)))),dt.free(r),Rt.free(e),i},e.Hh=function(t,e){if(void 0===e)return t.De(this.actualBounds);var n=this.naturalBounds,i=!1,r=dt.allocAt(0,0);return t.aa(e.sa(r))&&(r.h(0,n.height),t.aa(e.sa(r))&&(r.h(n.width,n.height),t.aa(e.sa(r))&&(r.h(n.width,0),t.aa(e.sa(r))&&(i=!0)))),dt.free(r),i},e.Kc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Kc(this.actualBounds);var n=this.naturalBounds,i=dt.allocAt(0,0),r=dt.allocAt(0,n.height),o=dt.allocAt(n.width,n.height),s=dt.allocAt(n.width,0),a=!1;if(t.aa(e.sa(i))||t.aa(e.sa(r))||t.aa(e.sa(o))||t.aa(e.sa(s)))a=!0;else{n=Rt.allocAt(0,0,n.width,n.height);var l=dt.allocAt(t.x,t.y);n.aa(e.Dd(l))?a=!0:(l.h(t.x,t.bottom),n.aa(e.Dd(l))?a=!0:(l.h(t.right,t.bottom),n.aa(e.Dd(l))?a=!0:(l.h(t.right,t.y),n.aa(e.Dd(l))&&(a=!0)))),dt.free(l),Rt.free(n),!a&&(Xe.Mt(t,i,r)||Xe.Mt(t,r,o)||Xe.Mt(t,o,s)||Xe.Mt(t,s,i))&&(a=!0)}return dt.free(i),dt.free(r),dt.free(o),dt.free(s),a},e.ga=function(t,e){if(void 0===e&&(e=new dt),t instanceof ze){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.Bd.sa(e),e},e.sm=function(t){void 0===t&&(t=new Rt);var e=this.naturalBounds,n=this.Bd,i=dt.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),Yt(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),Yt(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),Yt(t,i.x,i.y,0,0),dt.free(i),t},e.jj=function(){var t=this.Bd;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},e.Af=function(){if(0!=(4096&this.F)==0)return this.hl;var t=this.ya;return null!==this.panel?t*this.panel.Af():t},e.Jt=function(t,e){return void 0===e&&(e=new dt),e.assign(t),this.Bd.Dd(e),e},e.cd=function(t,e,n){return this.tk(t.x,t.y,e.x,e.y,n)},e.tk=function(t,e,n,i,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),a=o.m22*s,l=-o.m12*s,h=-o.m21*s,u=o.m11*s,c=s*(o.m21*o.dy-o.m22*o.dx),f=s*(o.m12*o.dx-o.m11*o.dy);return null!==this.areaBackground?Xe.cd((o=this.actualBounds).left,o.top,o.right,o.bottom,t,e,n,i,r):(s=t*a+e*h+c,t=t*l+e*u+f,e=n*a+i*h+c,n=n*l+i*u+f,r.h(0,0),n=Xe.cd(0,0,(i=this.naturalBounds).width,i.height,s,t,e,n,r),r.transform(o),n)},Ys.prototype.measure=function(t,e,n,i){if(!1!==ca(this)){var r=this.ih,o=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-o,0),e=Math.max(e-r,0),n=Math.max((n||0)-o,0),i=Math.max((i||0)-r,0),r=this.desiredSize;var s=0;this instanceof ih&&(s=this.strokeWidth),90===(o=this.angle)||270===o?(t=isFinite(r.height)?r.height+s:t,e=isFinite(r.width)?r.width+s:e):(t=isFinite(r.width)?r.width+s:t,e=isFinite(r.height)?r.height+s:e),r=n||0,s=i||0;var a=this instanceof Ml;switch(ia(this,!0)){case Cs:s=r=0,a&&(e=t=1/0);break;case _s:isFinite(t)&&t>n&&(r=t),isFinite(e)&&e>i&&(s=e);break;case Ts:isFinite(t)&&t>n&&(r=t),s=0,a&&(e=1/0);break;case Ns:isFinite(e)&&e>i&&(s=e),r=0,a&&(t=1/0)}var l=this.minSize;r>(a=this.maxSize).width&&l.width<a.width&&(r=a.width),s>a.height&&l.height<a.height&&(s=a.height),n=Math.max(r/this.scale,l.width),i=Math.max(s/this.scale,l.height),a.width<n&&(n=Math.min(l.width,n)),a.height<i&&(i=Math.min(l.height,i)),t=Math.min(a.width,t),e=Math.min(a.height,e),t=Math.max(n,t),e=Math.max(i,e),90!==o&&270!==o||(o=t,t=e,e=o,o=n,n=i,i=o),this.oc.da(),this.zm(t,e,n,i),this.oc.freeze(),this.oc.u()||v("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.oc.toString()),fa(this,!1)}},Ys.prototype.zm=function(){},Ys.prototype.Ef=function(){return!1},Ys.prototype.arrange=function(t,e,n,i,r){this.xl();var o=Rt.alloc();o.assign(this.xb),this.xb.da(),!1===da(this)?this.xb.h(t,e,n,i):this.Gh(t,e,n,i),this.xb.freeze(),this.qd=void 0===r?null:r,n=!1,void 0!==r?n=!0:(null===(r=this.panel)||r.type!==Ml.TableRow&&r.type!==Ml.TableColumn||(r=r.panel),null!==r&&(r=r.pc,i=this.measuredBounds,null!==this.areaBackground&&(i=this.xb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=r.width+.05&&0<=e+.05&&n<=r.height+.05),this instanceof dh&&(this.ss>(t=this.naturalBounds).height||this.tb>t.width))&&(n=!0)),this.F=n?256|this.F:-257&this.F,this.xb.u()||v("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.xb.toString()),this.Zt(o,this.xb),pa(this,!1),Rt.free(o)},(e=Ys.prototype).Gh=function(){},e.Zt=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||vu(n,!0),this.M(),Ut(t,e)||(n.Mh(),this.ep(n)))},e.ep=function(t){null!==this.portId&&(vu(t,!0),t instanceof Tu&&Eu(t,this))},e.ac=function(t,e){if(this.visible){var n=this instanceof Ml&&(this.type===Ml.TableRow||this.type===Ml.TableColumn),i=this.xb;if(n||0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)){var r=this.opacity;if(0!==r){var o=1;if(1!==r&&(t.globalAlpha=(o=t.globalAlpha)*r),!this.iy(t,e))if(n)Js(this,t,e);else{this instanceof Qu&&this.zk(!1),n=this.transform;var s=this.panel;0!=(4096&this.F)==1&&ta(this);var a=this.part,l=!1,h=0;if(a&&e.Ge("drawShadows")&&(l=a.isShadowed)){var u=a.shadowOffset;h=Math.max(u.y,u.x)*e.scale*e.Sb}if(!(u=e.vi||!this.Ef())){var c,f=this.naturalBounds,d=(u=this.Xh).m11,p=u.m21,g=u.dx,m=u.m12,y=u.m22,v=u.dy,b=c=0;u=c*d+b*p+g;var w=c*m+b*y+v,x=(c=f.width+h)*d+(b=0)*p+g;c=c*m+b*y+v,b=Math.min(u,x);var k=Math.min(w,c),S=Math.max(u+0,x)-b,_=Math.max(w+0,c)-k;u=b,w=k,x=(c=f.width+h)*d+(b=f.height+h)*p+g,c=c*m+b*y+v,b=Math.min(u,x),k=Math.min(w,c),S=Math.max(u+S,x)-b,_=Math.max(w+_,c)-k,u=b,w=k,x=(c=0)*d+(b=f.height+h)*p+g,c=c*m+b*y+v,b=Math.min(u,x),k=Math.min(w,c),S=Math.max(u+S,x)-b,_=Math.max(w+_,c)-k,w=k,d=(h=e.viewportBounds).y,u=!((u=b)>h.width+(f=h.x)||f>S+u||w>h.height+d||d>_+w)}if(u){if(u=0!=(256&this.F),t.clipInsteadOfFill&&(u=!1),this instanceof dh&&(t.font=this.font),u){if(w=s.de()?s.naturalBounds:s.actualBounds,null!==this.qd?(S=(f=this.qd).x,_=f.y,h=f.width,f=f.height):(S=Math.max(i.x,w.x),_=Math.max(i.y,w.y),h=Math.min(i.right,w.right)-S,f=Math.min(i.bottom,w.bottom)-_),S>i.width+i.x||i.x>w.width+w.x)return void(1!==r&&(t.globalAlpha=o));t.save(),t.beginPath(),t.rect(S,_,h,f),t.clip()}if(this.Ef()){if(!a.isVisible())return void(1!==r&&(t.globalAlpha=o));l&&(t.Ew((w=a.shadowOffset).x*e.scale*e.Sb,w.y*e.scale*e.Sb,a.shadowBlur),Ea(t),t.shadowColor=a.shadowColor)}l&&!0===this.shadowVisible?Ea(t):l&&!1===this.shadowVisible&&Aa(t),a=this.naturalBounds,null!==this.cc&&(Qs(this,t,this.cc,!0,!0,a,i),this.cc instanceof Fa&&this.cc.type===Ja?(t.beginPath(),t.rect(i.x,i.y,i.width,i.height),t.Zd(this.cc)):t.fillRect(i.x,i.y,i.width,i.height)),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),l&&(null!==s&&0!=(512&s.F)||null!==s&&(s.type===Ml.Auto||s.type===Ml.Spot)&&s.qb()!==this)&&null===this.shadowVisible&&Aa(t),null!==this.lb&&(S=w=0,_=(h=this.naturalBounds).width,h=h.height,f=0,this instanceof ih&&(w=(h=this.na.bounds).x,S=h.y,_=h.width,h=h.height,f=this.strokeWidth),Qs(this,t,this.lb,!0,!1,a,i),this.lb instanceof Fa&&this.lb.type===Ja?(t.beginPath(),t.rect(w-f/2,S-f/2,_+f,h+f),t.Zd(this.lb)):t.fillRect(w-f/2,S-f/2,_+f,h+f)),l&&(null!==this.lb||null!==this.cc||null!==s&&0!=(512&s.F)||null!==s&&(s.type===Ml.Auto||s.type===Ml.Spot)&&s.qb()!==this)?(sa(this,!0),null===this.shadowVisible&&Aa(t)):sa(this,!1),this.cj(t,e),l&&0!=(512&this.F)==1&&Ea(t),this.Ef()&&l&&Aa(t),u?(t.restore(),t.sc(this instanceof Ml)):n.Pt()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))}}1!==r&&(t.globalAlpha=o)}}}},e.iy=function(){return!1},e.cj=function(){},e.Gg=function(t){if(t instanceof Ml)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},e.Ff=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.Ff()},e.Hg=function(){for(var t=this instanceof Ml?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},e.o=function(t){if(void 0===t&&(t=!1),!0!==ca(this)){fa(this,!0),pa(this,!0);var e=this.panel;null===e||t||e.o()}},e.vm=function(){!0!==ca(this)&&(fa(this,!0),pa(this,!0))},e.xl=function(){0!=(2048&this.F)==0&&(ha(this,!0),ua(this,!0))},e.Zv=function(){ua(this,!0)},e.M=function(){var t=this.part;null!==t&&t.M()},e.pj=function(t){this.og=t},e.hu=function(){},e.Aw=function(t){return this.la.assign(t),na(this),!0},e.br=function(t,e){this.la.x===t&&this.la.y===e||(this.la.h(t,e),this.xl())},e.bind=function(t){t.ld=this;var e=this.gj();null!==e&&Ul(e)&&v("Cannot add a Binding to a template that has already been copied: "+t),null===this.eb&&(this.eb=new tt),this.eb.add(t)},e.gj=function(){for(var t=this instanceof Ml?this:this.panel;null!==t;){if(null!==t.ji)return t;t=t.panel}return null},e.Bw=function(t){uo(this,t)},e.Mw=function(t){t.ld=this,null===this.Mg&&(this.Mg=new ft),this.Mg.add(t.propertyName,t)},c.Object.defineProperties(Ys.prototype,{shadowVisible:{get:function(){return this.Vl},set:function(t){var e=this.Vl;e!==t&&(this.Vl=t,this.M(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.N?this.N.Rn:null},set:function(t){Xs(this);var e=this.N.Rn;e!==t&&(this.N.Rn=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Tl},set:function(t){var e=this.Tl;e!==t&&(this.Tl=t,this.o(),this.g("segmentOrientation",e,t),t===Cc&&(this.angle=0))}},segmentIndex:{get:function(){return this.Ip},set:function(t){t=Math.round(t);var e=this.Ip;e!==t&&(this.Ip=t,this.o(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Rl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.Rl;e!==t&&(this.Rl=t,this.o(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Sl},set:function(t){var e=this.Sl;e.w(t)||(this.Sl=t=t.G(),this.o(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,this.o(),this.g("stretch",e,t))}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,null!==this.part&&(this.part.Sj=null),this.g("name",e,t))}},opacity:{get:function(){return this.gb},set:function(t){var e=this.gb;e!==t&&((0>t||1<t)&&w(t,"0 <= value <= 1",Ys,"opacity"),this.gb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.M(hu(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.F)},set:function(t){var e=0!=(1&this.F);e!==t&&(this.F^=1,this.g("visible",e,t),null!==(e=this.panel)?e.o():this.Ef()&&this.Ob(t),this.M(),ma(this))}},pickable:{get:function(){return 0!=(2&this.F)},set:function(t){var e=0!=(2&this.F);e!==t&&(this.F^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.F)},set:function(t){var e=0!=(4&this.F);e!==t&&(this.F^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.F)},set:function(t){var e=0!=(8&this.F);e!==t&&(this.F^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.F)},set:function(t){var e=0!=(16&this.F);e!==t&&(this.F^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.F)},set:function(t){var e=0!=(32&this.F);e!==t&&(this.F^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.F)},set:function(t){var e=0!=(64&this.F);e!==t&&(this.F^=64,this.o(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.F)},set:function(t){var e=0!=(128&this.F);e!==t&&(this.F^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.cc},set:function(t){var e=this.cc;e!==t&&(null!==t&&Ka(t,"GraphObject.areaBackground"),t instanceof Fa&&t.freeze(),this.cc=t,this.M(),this.g("areaBackground",e,t))}},background:{get:function(){return this.lb},set:function(t){var e=this.lb;e!==t&&(null!==t&&Ka(t,"GraphObject.background"),t instanceof Fa&&t.freeze(),this.lb=t,this.M(),this.g("background",e,t))}},part:{get:function(){if(this.Ef())return this;if(null!==this.Wj)return this.Wj;var t;for(t=this.panel;t;){if(t instanceof ou)return this.Wj=t;t=t.panel}return null}},svg:{get:function(){return this.$p},set:function(t){this.$p=t}},panel:{get:function(){return this.og}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.la},set:function(t){var e=t.x,n=t.y,i=this.la,r=i.x,o=i.y;(r===e||isNaN(r)&&isNaN(e))&&(o===n||isNaN(o)&&isNaN(n))?this.hu():(t=t.copy(),this.Aw(t,i)&&this.g("position",i.copy(),t.copy()))}},actualBounds:{get:function(){return this.xb}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&(0>=t&&v("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.ya=t,this.o(),this.g("scale",e,t))}},angle:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.Xb=t,ma(this),this.o(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Vc},set:function(t){var e=t.width,n=t.height,i=this.Vc,r=i.width,o=i.height;(r===e||isNaN(r)&&isNaN(e))&&(o===n||isNaN(o)&&isNaN(n))||(this.Vc=t=t.G(),this.o(),this instanceof ih&&this.bc(),this.g("desiredSize",i,t),aa(this)&&null!==(t=this.part)&&(Ks(this,t,"width"),Ks(this,t,"height")))}},width:{get:function(){return this.Vc.width},set:function(t){var e=this.Vc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Vc,this.Vc=t=new Dt(t,this.Vc.height).freeze(),this.o(),this instanceof ih&&this.bc(),this.g("desiredSize",e,t),aa(this)&&null!==(t=this.part)&&Ks(this,t,"width"))}},height:{get:function(){return this.Vc.height},set:function(t){var e=this.Vc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Vc,this.Vc=t=new Dt(this.Vc.width,t).freeze(),this.o(),this instanceof ih&&this.bc(),this.g("desiredSize",e,t),aa(this)&&null!==(t=this.part)&&Ks(this,t,"height"))}},minSize:{get:function(){return this.fg},set:function(t){var e=this.fg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.fg=t,this.o(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.eg},set:function(t){var e=this.eg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.eg=t,this.o(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.oc}},naturalBounds:{get:function(){return this.pc}},margin:{get:function(){return this.ih},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.ih;e.w(t)||(this.ih=t=t.G(),this.o(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.F)==1&&ta(this),this.pb}},Bd:{get:function(){return 0!=(4096&this.F)==1&&ta(this),this.Xh}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.w(t)||(t.lc()&&!t.Mb()&&v("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.yb=t=t.G(),na(this),this.g("alignment",e,t))}},column:{get:function(){return this.Rg},set:function(t){t=Math.round(t);var e=this.Rg;e!==t&&(0>t&&w(t,">= 0",Ys,"column"),this.Rg=t,this.o(),this.g("column",e,t))}},columnSpan:{get:function(){return this.un},set:function(t){t=Math.round(t);var e=this.un;e!==t&&(1>t&&w(t,">= 1",Ys,"columnSpan"),this.un=t,this.o(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Bp},set:function(t){t=Math.round(t);var e=this.Bp;e!==t&&(0>t&&w(t,">= 0",Ys,"row"),this.Bp=t,this.o(),this.g("row",e,t))}},rowSpan:{get:function(){return this.Cp},set:function(t){t=Math.round(t);var e=this.Cp;e!==t&&(1>t&&w(t,">= 1",Ys,"rowSpan"),this.Cp=t,this.o(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.Vp},set:function(t){var e=this.Vp;e!==t&&(this.Vp=t,this.o(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.Rk},set:function(t){var e=this.Rk;e.w(t)||(this.Rk=t=t.G(),this.o(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.op},set:function(t){var e=this.op;if(e!==t){var n=this.part;null===n||n instanceof Tu||(v("Cannot set portID on a Link: "+t),n=null),null!==e&&null!==n&&Bu(n,this),this.op=t,null!==t&&null!==n&&(n.Lh=!0,Ru(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.O?this.O.Ah:ie},set:function(t){this.Ic();var e=this.O.Ah;e.w(t)||(t=t.G(),this.O.Ah=t,this.g("toSpot",e,t),ga(this))}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.yh:10},set:function(t){this.Ic();var e=this.O.yh;e!==t&&(0>t&&w(t,">= 0",Ys,"toEndSegmentLength"),this.O.yh=t,this.g("toEndSegmentLength",e,t),ga(this))}},toShortLength:{get:function(){return null!==this.O?this.O.zh:0},set:function(t){this.Ic();var e=this.O.zh;e!==t&&(this.O.zh=t,this.g("toShortLength",e,t),ga(this))}},toLinkable:{get:function(){return null!==this.O?this.O.eq:null},set:function(t){this.Ic();var e=this.O.eq;e!==t&&(this.O.eq=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.O?this.O.fq:1/0},set:function(t){this.Ic();var e=this.O.fq;e!==t&&(0>t&&w(t,">= 0",Ys,"toMaxLinks"),this.O.fq=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.ah:ie},set:function(t){this.Ic();var e=this.O.ah;e.w(t)||(t=t.G(),this.O.ah=t,this.g("fromSpot",e,t),ga(this))}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.Zg:10},set:function(t){this.Ic();var e=this.O.Zg;e!==t&&(0>t&&w(t,">= 0",Ys,"fromEndSegmentLength"),this.O.Zg=t,this.g("fromEndSegmentLength",e,t),ga(this))}},fromShortLength:{get:function(){return null!==this.O?this.O.$g:0},set:function(t){this.Ic();var e=this.O.$g;e!==t&&(this.O.$g=t,this.g("fromShortLength",e,t),ga(this))}},fromLinkable:{get:function(){return null!==this.O?this.O.Yn:null},set:function(t){this.Ic();var e=this.O.Yn;e!==t&&(this.O.Yn=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.O?this.O.Zn:1/0},set:function(t){this.Ic();var e=this.O.Zn;e!==t&&(0>t&&w(t,">= 0",Ys,"fromMaxLinks"),this.O.Zn=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.mi},set:function(t){var e=this.mi;e!==t&&(this.mi=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.N?this.N.Of:null},set:function(t){Xs(this);var e=this.N.Of;e!==t&&(this.N.Of=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.N?this.N.Tf:null},set:function(t){Xs(this);var e=this.N.Tf;e!==t&&(this.N.Tf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.N?this.N.Pf:null},set:function(t){Xs(this);var e=this.N.Pf;e!==t&&(this.N.Pf=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.N?this.N.hg:null},set:function(t){Xs(this);var e=this.N.hg;e!==t&&(this.N.hg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.N?this.N.kg:null},set:function(t){Xs(this);var e=this.N.kg;e!==t&&(this.N.kg=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.N?this.N.lg:null},set:function(t){Xs(this);var e=this.N.lg;e!==t&&(this.N.lg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.N?this.N.jg:null},set:function(t){Xs(this);var e=this.N.jg;e!==t&&(this.N.jg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.N?this.N.ig:null},set:function(t){Xs(this);var e=this.N.ig;e!==t&&(this.N.ig=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.N?this.N.So:null},set:function(t){Xs(this);var e=this.N.So;e!==t&&(this.N.So=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.N?this.N.To:null},set:function(t){Xs(this);var e=this.N.To;e!==t&&(this.N.To=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.N?this.N.gg:null},set:function(t){Xs(this);var e=this.N.gg;e!==t&&(this.N.gg=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.N?this.N.an:null},set:function(t){Xs(this);var e=this.N.an;e!==t&&(this.N.an=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.N?this.N.bn:null},set:function(t){Xs(this);var e=this.N.bn;e!==t&&(this.N.bn=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.N?this.N.cn:null},set:function(t){Xs(this);var e=this.N.cn;e!==t&&(this.N.cn=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.N?this.N.$m:null},set:function(t){Xs(this);var e=this.N.$m;e!==t&&(this.N.$m=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.N?this.N.wg:null},set:function(t){Xs(this);var e=this.N.wg;e!==t&&(this.N.wg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.N?this.N.Qf:null},set:function(t){Xs(this);var e=this.N.Qf;e!==t&&(this.N.Qf=t,this.g("contextMenu",e,t))}}}),Ys.prototype.trigger=Ys.prototype.Mw,Ys.prototype.setProperties=Ys.prototype.Bw,Ys.prototype.findTemplateBinder=Ys.prototype.gj,Ys.prototype.bind=Ys.prototype.bind,Ys.prototype.isEnabledObject=Ys.prototype.Hg,Ys.prototype.isVisibleObject=Ys.prototype.Ff,Ys.prototype.isContainedBy=Ys.prototype.Gg,Ys.prototype.getNearestIntersectionPoint=Ys.prototype.cd,Ys.prototype.getLocalPoint=Ys.prototype.Jt,Ys.prototype.getDocumentScale=Ys.prototype.Af,Ys.prototype.getDocumentAngle=Ys.prototype.jj,Ys.prototype.getDocumentBounds=Ys.prototype.sm,Ys.prototype.getDocumentPoint=Ys.prototype.ga,Ys.prototype.intersectsRect=Ys.prototype.Kc,Ys.prototype.containedInRect=Ys.prototype.Hh,Ys.prototype.containsRect=Ys.prototype.De,Ys.prototype.containsPoint=Ys.prototype.aa,Ys.prototype.raiseChanged=Ys.prototype.g,Ys.prototype.raiseChangedEvent=Ys.prototype.ab,Ys.prototype.addCopyProperty=Ys.prototype.Qx;var xa=null;function ka(){this.Rn=this.Qf=this.wg=this.$m=this.cn=this.bn=this.an=this.gg=this.To=this.So=this.ig=this.jg=this.lg=this.kg=this.hg=this.Pf=this.Tf=this.Of=null}function Sa(){this.Ma=[1,0,0,1,0,0]}function _a(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Zx=[],this.pattern=null}function Ca(t,e){this.ownerDocument=t=void 0===e?d.document:e,this.HA="http://www.w3.org/2000/svg",void 0!==t&&(this.Ga=this.wb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.xq=null,this.context=new Ma(this)}function Ma(t){this.Kk=t,this.svg=t.Ga,this.stack=[],this.yc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.jf=this.Rp=this.Qp=0,this.Kq=null,this.path=[],this.Qu=!1,this.th=null,this.uh=0,this.Yd=new Sa,Na(this,1,0,0,1,0,0);var e=st++,n=this.wb("clipPath",{id:"mainClip"+e});n.appendChild(this.wb("rect",{x:0,y:0,width:t.width,height:t.height})),this.Zu=n,this.Kk.Ga.appendChild(n),this.yc[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.JA={}}function Pa(t,e,n,i,r){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof _a?n.fill=Ta(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof _a?n.stroke=Ta(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),i="matrix("+(i=i.Ma)[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")",void 0!==r&&(i+=r),n.transform=i}function Ta(t,e){var n="GRAD"+st++;if("linear"===e.type)var i=t.wb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");i=t.wb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var r=e.Zx;e=r.length;for(var o=[],s=0;s<e;s++){var a=r[s],l=a.color;a={offset:a.offset,"stop-color":l},/^rgba\(/.test(l)&&(l=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(l),a["stop-color"]="rgb("+l[1]+","+l[2]+","+l[3]+")",a["stop-opacity"]=l[4]),o.push(a)}for(o.sort(function(t,e){return t.offset>e.offset?1:-1}),r=0;r<e;r++)i.appendChild(t.wb("stop",o[r]));return t.svg.appendChild(i),"url(#"+n+")"}function Na(t,e,n,i,r,o,s){var a=new Sa;a.Ma=[e,n,i,r,o,s],Pa(t,"g",e={},a),a=t.addElement("g",e),t.yc.push(a)}function Aa(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Ea(t){t.shadowOffsetX=t.Qp,t.shadowOffsetY=t.Rp,t.shadowBlur=t.jf}function La(t,e){this.ownerDocument=e=void 0===e?d.document:e,this.xq=null,(e=e.createElement("canvas")).tabIndex=0,this.Ga=e,this.Ga.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Oa(e),e.B=t}function Oa(t){t.getContext&&t.getContext("2d")||v("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.su=this.uu=this.tu="",this.tn=!1,this.jf=this.Rp=this.Qp=0}Ys.className="GraphObject",xa=new ft,ba("Button",function(){function t(t,e){return null!==t.diagram.Ub(t.documentPoint,function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t},function(t){return t===e})}var e=ya(Ml,Ml.Auto,{isActionable:!0,enabledChanged:function(t,e){if(t instanceof Ml){var n=t.$a("ButtonBorder");null!==n&&(n.fill=e?t._buttonFillNormal:t._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},ya(ih,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new ze(0,0,2.76142374915397,2.761423749153969),spot2:new ze(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(t,e){if(e.Hg()&&e instanceof Ml&&(t=e.$a("ButtonBorder"))instanceof ih){var n=e._buttonFillOver;e._buttonFillNormal=t.fill,t.fill=n,n=e._buttonStrokeOver,e._buttonStrokeNormal=t.stroke,t.stroke=n}},e.mouseLeave=function(t,e){e.Hg()&&e instanceof Ml&&(t=e.$a("ButtonBorder"))instanceof ih&&(t.fill=e._buttonFillNormal,t.stroke=e._buttonStrokeNormal)},e.actionDown=function(t,e){if(e.Hg()&&e instanceof Ml&&null!==e._buttonFillPressed&&0===t.button){var n=e.$a("ButtonBorder");if(n instanceof ih){var i=(t=t.diagram).skipsUndoManager;t.skipsUndoManager=!0;var r=e._buttonFillPressed;e._buttonFillOver=n.fill,n.fill=r,r=e._buttonStrokePressed,e._buttonStrokeOver=n.stroke,n.stroke=r,t.skipsUndoManager=i}}},e.actionUp=function(e,n){if(n.Hg()&&n instanceof Ml&&null!==n._buttonFillPressed&&0===e.button){var i=n.$a("ButtonBorder");if(i instanceof ih){var r=e.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,t(e,n)?(i.fill=n._buttonFillOver,i.stroke=n._buttonStrokeOver):(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionCancel=function(e,n){if(n.Hg()&&n instanceof Ml&&null!==n._buttonFillPressed){var i=n.$a("ButtonBorder");if(i instanceof ih){var r=e.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,t(e,n)?(i.fill=n._buttonFillOver,i.stroke=n._buttonStrokeOver):(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionMove=function(e,n){if(n.Hg()&&n instanceof Ml&&null!==n._buttonFillPressed){var i=e.diagram;if(0===i.firstInput.button&&(i.currentTool.standardMouseOver(),t(e,n)&&(e=n.$a("ButtonBorder"))instanceof ih)){var r=i.skipsUndoManager;i.skipsUndoManager=!0;var o=n._buttonFillPressed;e.fill!==o&&(e.fill=o),e.stroke!==(o=n._buttonStrokePressed)&&(e.stroke=o),i.skipsUndoManager=r}}},e}),ba("TreeExpanderButton",function(){var t=ya("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},ya(ih,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Nt},new Dd("figure","isTreeExpanded",function(t,e){return e=e.panel,t?e._treeExpandedFigure:e._treeCollapsedFigure}).Qq()),{visible:!1},new Dd("visible","isTreeLeaf",function(t){return!t}).Qq());return t.click=function(t,e){if((e=e.part)instanceof Pu&&(e=e.adornedPart),e instanceof Tu){var n=e.diagram;if(null!==n){if(n=n.commandHandler,e.isTreeExpanded){if(!n.canCollapseTree(e))return}else if(!n.canExpandTree(e))return;t.handled=!0,e.isTreeExpanded?n.collapseTree(e):n.expandTree(e)}}},t}),ba("SubGraphExpanderButton",function(){var t=ya("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},ya(ih,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Nt},new Dd("figure","isSubGraphExpanded",function(t,e){return e=e.panel,t?e._subGraphExpandedFigure:e._subGraphCollapsedFigure}).Qq()));return t.click=function(t,e){if((e=e.part)instanceof Pu&&(e=e.adornedPart),e instanceof Xu){var n=e.diagram;if(null!==n){if(n=n.commandHandler,e.isSubGraphExpanded){if(!n.canCollapseSubGraph(e))return}else if(!n.canExpandSubGraph(e))return;t.handled=!0,e.isSubGraphExpanded?n.collapseSubGraph(e):n.expandSubGraph(e)}}},t}),ba("ToolTip",function(){return ya(Pu,Ml.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new dt(0,3),shadowBlur:5},ya(ih,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new ze(0,0,4,6),spot2:new ze(1,1,-4,-4)}))}),ba("ContextMenu",function(){return ya(Pu,Ml.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new dt(0,3),shadowBlur:5},new Dd("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),ba("ContextMenuButton",function(){var t=ya("Button");t.stretch=Ts;var e=t.$a("ButtonBorder");return e instanceof ih&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new ze(0,0,2,3),e.spot2=new ze(1,1,-2,-2)),t}),ba("PanelExpanderButton",function(t){var e=wa(t,"COLLAPSIBLE"),n=ya("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},ya(ih,{name:"ButtonIcon",strokeWidth:2},new Dd("geometryString","visible",function(t){return t?n._buttonExpandedFigure:n._buttonCollapsedFigure}).Qq(e)));return(t=n.$a("ButtonBorder"))instanceof ih&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(t,n){var i=n.diagram;if(null!==i&&!i.isReadOnly){var r=n.gj();null===r&&(r=n.part),null!==r&&null!==(n=r.$a(e))&&(t.handled=!0,i.va("Collapse/Expand Panel"),n.visible=!n.visible,i.Wa("Collapse/Expand Panel"))}},n}),ba("CheckBoxButton",function(t){var e=wa(t);return(t=ya("Button",{desiredSize:new Dt(14,14)},ya(ih,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:_s,geometryStretch:Ms,visible:!1},""!==e?new Dd("visible",e).Fy():[]))).click=function(t,n){if(n instanceof Ml){var i=t.diagram;if(!(null===i||i.isReadOnly||""!==e&&i.model.isReadOnly)){t.handled=!0;var r=n.$a("ButtonIcon");i.va("checkbox"),r.visible=!r.visible,"function"==typeof n._doClick&&n._doClick(t,n),i.Wa("checkbox")}}},t}),ba("CheckBox",function(t){t=ya("CheckBoxButton",t=wa(t),{name:"Button",isActionable:!1,margin:new Jt(0,1,0,0)});var e=ya(Ml,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),Ys.None=Cs=new H(Ys,"None",0),Ys.Default=Ps=new H(Ys,"Default",0),Ys.Vertical=Ns=new H(Ys,"Vertical",4),Ys.Horizontal=Ts=new H(Ys,"Horizontal",5),Ys.Fill=_s=new H(Ys,"Fill",3),Ys.Uniform=Ms=new H(Ys,"Uniform",1),Ys.UniformToFill=As=new H(Ys,"UniformToFill",2),Ys.FlipVertical=Es=new H(Ys,"FlipVertical",1),Ys.FlipHorizontal=Ls=new H(Ys,"FlipHorizontal",2),Ys.FlipBoth=Os=new H(Ys,"FlipBoth",3),Ys.make=ya,Ys.getBuilders=function(){var t,e=new ft;for(t in xa)if(t!==t.toLowerCase()){var n=xa.H(t);"function"==typeof n&&e.add(t,n)}return e.freeze(),e},Ys.defineBuilder=ba,Ys.takeBuilderArgument=wa,ka.prototype.copy=function(){var t=new ka;return t.Of=this.Of,t.Tf=this.Tf,t.Pf=this.Pf,t.hg=this.hg,t.kg=this.kg,t.lg=this.lg,t.jg=this.jg,t.ig=this.ig,t.So=this.So,t.To=this.To,t.gg=this.gg,t.an=this.an,t.bn=this.bn,t.cn=this.cn,t.$m=this.$m,t.wg=this.wg,t.Qf=this.Qf,t.Rn=this.Rn,t},ka.className="GraphObjectEventHandlers",Sa.prototype.copy=function(){var t=new Sa;return t.Ma[0]=this.Ma[0],t.Ma[1]=this.Ma[1],t.Ma[2]=this.Ma[2],t.Ma[3]=this.Ma[3],t.Ma[4]=this.Ma[4],t.Ma[5]=this.Ma[5],t},Sa.prototype.translate=function(t,e){this.Ma[4]+=this.Ma[0]*t+this.Ma[2]*e,this.Ma[5]+=this.Ma[1]*t+this.Ma[3]*e},Sa.prototype.scale=function(t,e){this.Ma[0]*=t,this.Ma[1]*=t,this.Ma[2]*=e,this.Ma[3]*=e},Sa.className="STransform",_a.prototype.addColorStop=function(t,e){this.Zx.push({offset:t,color:e})},_a.className="SGradient",Ca.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=i+"px",this.Ga.setAttributeNS(null,"width",n+"px"),this.Ga.setAttributeNS(null,"height",i+"px"),this.Ga.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.Zu.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.Zu.firstElementChild.setAttributeNS(null,"height",i+"px"),!0)},Ca.prototype.wb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.HA,t),S(e))for(var i in e)t.setAttributeNS("href"===i?"http://www.w3.org/1999/xlink":"",i,e[i]);return void 0!==n&&(t.textContent=n),t},Ca.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},Ca.prototype.focus=function(){this.Ga.focus()},Ca.prototype.hy=function(){this.ownerDocument=null},c.Object.defineProperties(Ca.prototype,{width:{get:function(){return this.Ga.width.baseVal.value},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height.baseVal.value},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),Ca.className="SVGSurface",(e=Ma.prototype).reset=function(){this.stack=[],this.yc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.jf=this.Rp=this.Qp=0,this.Kq=null,this.path=[],this.Yd=new Sa,Na(this,1,0,0,1,0,0);var t=st++,e=this.wb("clipPath",{id:"mainClip"+t});e.appendChild(this.wb("rect",{x:0,y:0,width:this.Kk.width,height:this.Kk.height})),this.Zu=e,this.Kk.Ga.appendChild(e),this.yc[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")},e.arc=function(t,e,n,i,r,o,s,a){var l=2*Math.PI,h=l-1e-6,u=n*Math.cos(i),c=n*Math.sin(i),f=t+u,d=e+c,p=o?0:1;i=o?i-r:r-i,(1e-6<Math.abs(s-f)||1e-6<Math.abs(a-d))&&this.path.push(["L",f,+d]),0>i&&(i=i%l+l),i>h?(this.path.push(["A",n,n,0,1,p,t-u,e-c]),this.path.push(["A",n,n,0,1,p,f,d])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),p,t+n*Math.cos(r),e+n*Math.sin(r)])},e.beginPath=function(){this.path=[]},e.bezierCurveTo=function(t,e,n,i,r,o){this.path.push(["C",t,e,n,i,r,o])},e.clearRect=function(){},e.clip=function(){this.addPath("clipPath",this.path,this.Yd),this.addPath("clipPath",this.path,new Sa)},e.closePath=function(){this.path.push(["z"])},e.createLinearGradient=function(t,e,n,i){var r=new _a("linear");return r.x1=t,r.y1=e,r.x2=n,r.y2=i,r},e.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.JA;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+st++,r={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.wb("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"})).appendChild(this.wb(ms,r)),this.svg.appendChild(t),n[e]=i,"url(#"+i+")"},e.createRadialGradient=function(t,e,n,i,r,o){var s=new _a("radial");return s.x1=t,s.y1=e,s.r1=n,s.x2=i,s.y2=r,s.r2=o,s},e.drawImage=function(t,e,n,i,r,o,s,a,l){var h="";t instanceof HTMLCanvasElement&&(h=t.toDataURL()),t instanceof HTMLImageElement&&(h=t.getAttribute("src"));var u=t instanceof HTMLImageElement?t.naturalWidth:t.width,c=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===i&&(o=e,s=n,a=i=u,l=r=c),i=i||0,r=r||0,o=o||0,s=s||0,l=l||0,t={x:0,y:0,width:u||i,height:c||r,href:h},Xe.$(i,a=a||0)&&Xe.$(r,l)?-1===h.toLowerCase().indexOf(".svg")&&-1===h.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",h="",l/=r,0===o&&0===s||(h+=" translate("+o+", "+s+")"),1==(a/=i)&&1===l||(h+=" scale("+a+", "+l+")"),0===e&&0===n||(h+=" translate("+-e+", "+-n+")"),0===e&&0===n&&i===u&&r===c||(o="CLIP"+st++,(s=this.wb("clipPath",{id:o})).appendChild(this.wb("rect",{x:e,y:n,width:i,height:r})),this.svg.appendChild(s),t["clip-path"]="url(#"+o+")"),Pa(this,ms,t,this.Yd,h),this.addElement(ms,t)},e.fill=function(){this.addPath("fill",this.path,this.Yd)},e.Zd=function(){this.clipInsteadOfFill?this.clip():this.fill()},e.fillRect=function(t,e,n,i){Pa(this,"fill",t={x:(t=[t,e,n,i])[0],y:t[1],width:t[2],height:t[3]},this.Yd),this.addElement("rect",t)},e.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),Pa(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.Yd),this.addElement("text",e,t[0])},e.lineTo=function(t,e){this.path.push(["L",t,e])},e.moveTo=function(t,e){this.path.push(["M",t,e])},e.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},e.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},e.restore=function(){this.Yd=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},e.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Yd.copy())},e.setTransform=function(t,e,n,i,r,o){1===t&&0===e&&0===n&&1===i&&0===r&&0===o||Na(this,t,e,n,i,r,o)},e.scale=function(t,e){this.Yd.scale(t,e)},e.translate=function(t,e){this.Yd.translate(t,e)},e.transform=function(){},e.stroke=function(){this.addPath("stroke",this.path,this.Yd)},e.sj=function(){this.clipInsteadOfFill||this.stroke()},e.wb=function(t,e,n){return this.Kk.wb(t,e,n)},e.addElement=function(t,e,n){return t=this.wb(t,e,n),0<this.yc.length?this.yc[this.yc.length-1].appendChild(t):this.svg.appendChild(t),this.Kq=t},e.addPath=function(t,e,n){for(var i=[],r=0;r<e.length;r++){var o=C(e[r]),s=[o.shift()];if("A"===s[0])s.push(o.shift()+","+o.shift(),o.shift(),o.shift()+","+o.shift(),o.shift()+","+o.shift());else for(;o.length;)s.push(o.shift()+","+o.shift());i.push(s.join(" "))}e={d:i.join(" ")},"stroke"===t&&this.Qu&&(e["stroke-dasharray"]=this.th.toString(),e["stroke-dashoffset"]=this.uh),Pa(this,t,e,n),"clipPath"===t?(t="CLIP"+st++,(n=this.wb("clipPath",{id:t})).appendChild(this.wb("path",e)),this.svg.appendChild(n),0<this.yc.length&&this.yc[this.yc.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},e.cr=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t="SHADOW"+st++,e=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),n=this.wb("feGaussianBlur",{in:"SourceAlpha",result:"blur",uB:this.shadowBlur/2}),i=this.wb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),r=this.wb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),o=this.wb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),s=this.wb("feMerge",{});s.appendChild(this.wb("feMergeNode",{in:"offsetBlur"})),s.appendChild(this.wb("feMergeNode",{in:"SourceGraphic"})),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(o),e.appendChild(s),0<this.yc.length&&this.yc[this.yc.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},e.Ew=function(t,e,n){this.Qp=t,this.Rp=e,this.jf=n},e.Ct=function(t,e){this.Qu=!0,this.th=t,this.uh=e},e.At=function(){this.Qu=!1},e.sc=function(){},e.Py=function(){},Ma.prototype.rotate=function(){},Ma.prototype.getImageData=function(){return null},Ma.prototype.measureText=function(){return null},Ma.className="SVGContext",Dr.prototype.makeSvg=Dr.prototype.Vt=function(t){var e=new Ca(this,d.document);void 0===t&&(t=new X);var n=this;return Go(this,function(t,i){return t=null!==(t=Yo(n,t,"SVG",e))?t.svg:null,"function"==typeof i?(i(t),null):t},t)},Dr.prototype.makeSVG=Dr.prototype.dw=function(t){return this.Vt(t)},Ys.prototype.iy=function(t,e){if(!(t instanceof Ma))return!1;if(!this.visible)return!0;var n=null,i=t.Kq;if(this instanceof Ml&&(this.type===Ml.TableRow||this.type===Ml.TableColumn))return Js(this,t,e),!0;var r=this.xb;if(0===r.width||0===r.height||isNaN(r.x)||isNaN(r.y))return!0;var o=this.transform,s=this.panel;0!=(4096&this.F)==1&&ta(this);var a=0!=(256&this.F),l=!1;if(this instanceof dh&&(t.font=this.font),a){if(l=s.de()?s.naturalBounds:s.actualBounds,null!==this.qd){var h=this.qd,u=h.x,c=h.y,f=h.width;h=h.height}else u=Math.max(r.x,l.x),c=Math.max(r.y,l.y),f=Math.min(r.right,l.right)-u,h=Math.min(r.bottom,l.bottom)-c;if(u>r.width+r.x||r.x>l.width+l.x||c>r.height+r.y||r.y>l.height+l.y)return!0;l=!0,Na(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(u,c,f,h),t.clip()}if(this.Ef()&&!this.isVisible())return!0;if(t.Yd.Ma=[1,0,0,1,0,0],(this instanceof dh&&1<this.lineCount||this instanceof ih&&1<this.geometry.figures.length)&&Na(t,1,0,0,1,0,0),u=!1,this.Ef()&&this.isShadowed&&e.Ge("drawShadows")&&(t.Ew((c=this.shadowOffset).x*e.scale*e.Sb,c.y*e.scale*e.Sb,this.shadowBlur),Ea(t),t.shadowColor=this.shadowColor),c=!1,this.part&&e.Ge("drawShadows")&&(c=this.part.isShadowed),!0===this.shadowVisible?(Ea(t),!1===u&&c&&(Na(t,1,0,0,1,0,0),t.cr(),u=!0)):!1===this.shadowVisible&&Aa(t),f=this.naturalBounds,null!==this.areaBackground&&(Qs(this,t,this.areaBackground,!0,!0,f,r),!1===u&&c&&(Na(t,1,0,0,1,0,0),t.cr(),u=!0),this.areaBackground instanceof Fa&&this.areaBackground.type===Ja?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.Zd(this.areaBackground)):t.fillRect(r.x,r.y,r.width,r.height)),this instanceof Ml?Na(t,o.m11,o.m12,o.m21,o.m22,o.dx,o.dy):t.Yd.Ma=[o.m11,o.m12,o.m21,o.m22,o.dx,o.dy],null!==this.background){!1===u&&c&&(Na(t,1,0,0,1,0,0),t.cr(),u=!0);var d=this.naturalBounds;h=o=0;var p=d.width;d=d.height;var g=0;this instanceof ih&&(o=(d=this.geometry.bounds).x,h=d.y,p=d.width,d=d.height,g=this.strokeWidth),Qs(this,t,this.background,!0,!1,f,r),this.background instanceof Fa&&this.background.type===Ja?(t.beginPath(),t.rect(o-g/2,h-g/2,p+g,d+g),t.Zd(this.background)):t.fillRect(o-g/2,h-g/2,p+g,d+g)}return c&&(null!==this.background||null!==this.areaBackground||null!==s&&0!=(512&s.F)||null!==s&&(s.type===Ml.Auto||s.type===Ml.Spot)&&s.qb()!==this)?(sa(this,!0),null===this.shadowVisible&&Aa(t)):sa(this,!1),this.cj(t,e),c&&0!=(512&this.F)==1&&Ea(t),this.Ef()&&c&&Aa(t),a&&(t.restore(),l&&t.yc.pop()),this instanceof Ml&&(n=t.yc.pop()),!0===u&&t.yc.pop(),(this instanceof dh&&1<this.lineCount||this instanceof ih&&1<this.geometry.figures.length)&&(n=t.yc.pop()),null!==t.Kk.xq&&(null===n&&(i===t.Kq?(Na(t,1,0,0,1,0,0),n=t.yc.pop()):n=t.Kq),t.Kk.xq(this,n)),this.svg=n,!0},La.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0)},La.prototype.toDataURL=function(t,e){return this.Ga.toDataURL(t,e)},La.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},La.prototype.focus=function(){this.Ga.focus()},La.prototype.hy=function(){this.ownerDocument=this.Ga.B=null},c.Object.defineProperties(La.prototype,{width:{get:function(){return this.Ga.width},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),La.className="CanvasSurface",(e=Oa.prototype).Py=function(t){this.Y.imageSmoothingEnabled=t},e.arc=function(t,e,n,i,r,o){this.Y.arc(t,e,n,i,r,o)},e.beginPath=function(){this.Y.beginPath()},e.bezierCurveTo=function(t,e,n,i,r,o){this.Y.bezierCurveTo(t,e,n,i,r,o)},e.clearRect=function(t,e,n,i){this.Y.clearRect(t,e,n,i)},e.clip=function(){this.Y.clip()},e.closePath=function(){this.Y.closePath()},e.createLinearGradient=function(t,e,n,i){return this.Y.createLinearGradient(t,e,n,i)},e.createPattern=function(t,e){return this.Y.createPattern(t,e)},e.createRadialGradient=function(t,e,n,i,r,o){return this.Y.createRadialGradient(t,e,n,i,r,o)},e.drawImage=function(t,e,n,i,r,o,s,a,l){void 0===i?this.Y.drawImage(t,e,n):this.Y.drawImage(t,e,n,i,r,o,s,a,l)},e.fill=function(){this.Y.fill()},e.fillRect=function(t,e,n,i){this.Y.fillRect(t,e,n,i)},e.fillText=function(t,e,n){this.Y.fillText(t,e,n)},e.getImageData=function(t,e,n,i){return this.Y.getImageData(t,e,n,i)},e.lineTo=function(t,e){this.Y.lineTo(t,e)},e.measureText=function(t){return this.Y.measureText(t)},e.moveTo=function(t,e){this.Y.moveTo(t,e)},e.quadraticCurveTo=function(t,e,n,i){this.Y.quadraticCurveTo(t,e,n,i)},e.rect=function(t,e,n,i){this.Y.rect(t,e,n,i)},e.restore=function(){this.Y.restore()},Oa.prototype.rotate=function(t){this.Y.rotate(t)},(e=Oa.prototype).save=function(){this.Y.save()},e.setTransform=function(t,e,n,i,r,o){this.Y.setTransform(t,e,n,i,r,o)},e.scale=function(t,e){this.Y.scale(t,e)},e.stroke=function(){this.Y.stroke()},e.transform=function(t,e,n,i,r,o){1===t&&0===e&&0===n&&1===i&&0===r&&0===o||this.Y.transform(t,e,n,i,r,o)},e.translate=function(t,e){this.Y.translate(t,e)},e.Zd=function(t){if(t instanceof Fa&&t.type===Ja){var e=t.Yk;(t=t.vu)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.tn?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.tn?this.clip():this.fill()},e.sj=function(){this.tn||this.stroke()},e.Ew=function(t,e,n){this.Qp=t,this.Rp=e,this.jf=n},e.Ct=function(t,e){var n=this.Y;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},e.At=function(){var t=this.Y;void 0!==t.setLineDash&&(t.setLineDash(Da),t.lineDashOffset=0)},e.sc=function(t){t&&(this.tu=""),this.su=this.uu=""},c.Object.defineProperties(Oa.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.su!==t&&(this.su=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.tu!==t&&(this.tu=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.uu!==t&&(this.uu=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.tn},set:function(t){this.tn=t}}});var Da=Object.freeze([]);function ja(){this.T=this.v=this.I=this.l=0}function Fa(t){ul||(Wa(),ul=!0),it(this),this.s=!1,void 0===t?(this.pa=$a,this.Xk="black"):"string"==typeof t?(this.pa=$a,this.Xk=t):(this.pa=t,this.Xk="black"),(t=this.pa)===Za?(this.zd=oe,this.jl=ce):this.jl=this.zd=t===Ja?le:ie,this.ft=0,this.Tr=NaN,this.ge=this.Is=this.fe=null,this.vu=this.Yk=0}function Ia(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?tl:n,Ua(t),Va(e,n)}function Ra(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?tl:n,Ua(t),Va(-e,n)}function Ba(t,e,n){Ua(t),t=sl.l;var i=sl.I,r=sl.v,o=sl.T;return Ua(e),void 0===n&&(n=.5),"rgba("+Math.round((sl.l-t)*n+t)+", "+Math.round((sl.I-i)*n+i)+", "+Math.round((sl.v-r)*n+r)+", "+Math.round((sl.T-o)*n+o)+")"}function za(t){return!!t&&(t instanceof Fa?t.Cy():(Ua(t),128>(299*sl.l+587*sl.I+114*sl.v)/1e3))}function Va(t,e){switch(e){case tl:e=100*Ha(sl.l);var n=100*Ha(sl.I),i=100*Ha(sl.v);return ll.l=.4124564*e+.3575761*n+.1804375*i,ll.I=.2126729*e+.7151522*n+.072175*i,ll.v=.0193339*e+.119192*n+.9503041*i,ll.T=sl.T,e=Ya(ll.l/rl[0]),n=Ya(ll.I/rl[1]),i=Ya(ll.v/rl[2]),hl.l=116*n-16,hl.I=500*(e-n),hl.v=200*(n-i),hl.T=ll.T,hl.l=Math.min(100,Math.max(0,hl.l+100*t)),e=(t=(hl.l+16)/116)-hl.v/200,ll.l=rl[0]*Xa(hl.I/500+t),ll.I=rl[1]*(hl.l>il*nl?Math.pow(t,3):hl.l/il),ll.v=rl[2]*Xa(e),ll.T=hl.T,t=-.969266*ll.l+1.8760108*ll.I+.041556*ll.v,e=.0556434*ll.l+-.2040259*ll.I+1.0572252*ll.v,sl.l=255*Ga((3.2404542*ll.l+-1.5371385*ll.I+-.4985314*ll.v)/100),sl.I=255*Ga(t/100),sl.v=255*Ga(e/100),sl.T=ll.T,sl.l=Math.round(sl.l),255<sl.l?sl.l=255:0>sl.l&&(sl.l=0),sl.I=Math.round(sl.I),255<sl.I?sl.I=255:0>sl.I&&(sl.I=0),sl.v=Math.round(sl.v),255<sl.v?sl.v=255:0>sl.v&&(sl.v=0),"rgba("+sl.l+", "+sl.I+", "+sl.v+", "+sl.T+")";case el:return qa(),al.v=Math.min(100,Math.max(0,al.v+100*t)),"hsla("+al.l+", "+al.I+"%, "+al.v+"%, "+al.T+")";default:return v("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function Ua(t){ul||(Wa(),ul=!0);var e=ol;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,sl.l=t[0],sl.I=t[1],sl.v=t[2],sl.T=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,sl.l=0,sl.I=0,sl.v=0,sl.T=1)}}function qa(){var t=sl.l/255,e=sl.I/255,n=sl.v/255,i=Math.max(t,e,n),r=Math.min(t,e,n),o=i-r;if(r=(i+r)/2,0===o)var s=t=0;else{switch(i){case t:s=(e-n)/o%6;break;case e:s=(n-t)/o+2;break;case n:s=(t-e)/o+4}0>(s*=60)&&(s+=360),t=o/(1-Math.abs(2*r-1))}al.l=Math.round(s),al.I=Math.round(100*t),al.v=Math.round(100*r),al.T=sl.T}function Ha(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ga(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Ya(t){return t>nl?Math.pow(t,1/3):(il*t+16)/116}function Xa(t){var e=t*t*t;return e>nl?e:(116*t-16)/il}function Ka(t,e){"string"!=typeof t&&(t instanceof Fa||v("Value for "+e+" must be a color string or a Brush, not "+t))}function Wa(){ol=Zo?new La(null).context:null}Oa.className="CanvasSurfaceContext",ja.className="ColorNumbers",Fa.prototype.copy=function(){var t=new Fa;return t.pa=this.pa,t.Xk=this.Xk,t.zd=this.zd.G(),t.jl=this.jl.G(),t.ft=this.ft,t.Tr=this.Tr,null!==this.fe&&(t.fe=this.fe.copy()),t.Is=this.Is,t},(e=Fa.prototype).freeze=function(){return this.s=!0,null!==this.fe&&this.fe.freeze(),this},e.da=function(){return Object.isFrozen(this)&&v("cannot thaw constant: "+this),this.s=!1,null!==this.fe&&this.fe.da(),this},e.ib=function(t){t.classType===Fa&&(this.type=t)},e.toString=function(){var t="Brush(";if(this.type===$a)t+=this.color;else if(t=this.type===Za?t+"Linear ":this.type===Ja?t+"Radial ":this.type===Qa?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},e.addColorStop=function(t,e){return this.s&&b(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&w(t,"0 <= loc <= 1",Fa,"addColorStop:loc"),null===this.fe&&(this.fe=new ft),this.fe.add(t,e),this.pa===$a&&(this.type=Za),this.ge=null,this},e.BA=function(t,e){if(this.s&&b(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?tl:e,this.type===$a)Ua(this.color),this.color=Va(t,e);else if((this.type===Za||this.type===Ja)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)Ua(n.value),this.addColorStop(n.key,Va(t,e));return this},e.Dz=function(t,e){if(this.s&&b(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?tl:e,this.type===$a)Ua(this.color),this.color=Va(-t,e);else if((this.type===Za||this.type===Ja)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)Ua(n.value),this.addColorStop(n.key,Va(-t,e));return this},e.Cy=function(){if(this.type===$a)return za(this.color);if((this.type===Za||this.type===Ja)&&null!==this.colorStops){var t=this.colorStops;if(this.type===Ja)return za(t.first().value);if(null!==t.get(.5))return za(t.get(.5));if(2===t.count)return za(Ba((t=t.ma())[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,r=1,o=1;e.next();){var s=e.key,a=Math.abs(.5-e.key);r>o&&a<r?(n=s,r=a):o>=r&&a<o&&(i=s,o=a)}return n>i&&(o=n,n=i,i=o,o=r),r=i-n,za(Ba(t.get(n),t.get(i),1-o/r))}return!1},c.Object.defineProperties(Fa.prototype,{type:{get:function(){return this.pa},set:function(t){this.s&&b(this,t),this.pa=t,this.start.lc()&&(t===Za?this.start=oe:t===Ja&&(this.start=le)),this.end.lc()&&(t===Za?this.end=ce:t===Ja&&(this.end=le)),this.ge=null}},color:{get:function(){return this.Xk},set:function(t){this.s&&b(this,t),this.Xk=t,this.ge=null}},start:{get:function(){return this.zd},set:function(t){this.s&&b(this,t),this.zd=t.G(),this.ge=null}},end:{get:function(){return this.jl},set:function(t){this.s&&b(this,t),this.jl=t.G(),this.ge=null}},startRadius:{get:function(){return this.ft},set:function(t){this.s&&b(this,t),0>t&&w(t,">= zero",Fa,"startRadius"),this.ft=t,this.ge=null}},endRadius:{get:function(){return this.Tr},set:function(t){this.s&&b(this,t),0>t&&w(t,">= zero",Fa,"endRadius"),this.Tr=t,this.ge=null}},colorStops:{get:function(){return this.fe},set:function(t){this.s&&b(this,t),this.fe=t,this.ge=null}},pattern:{get:function(){return this.Is},set:function(t){this.s&&b(this,t),this.Is=t,this.ge=null}}}),Fa.prototype.isDark=Fa.prototype.Cy,Fa.prototype.darkenBy=Fa.prototype.Dz,Fa.prototype.lightenBy=Fa.prototype.BA,Fa.prototype.addColorStop=Fa.prototype.addColorStop;var $a,Za,Ja,Qa,tl,el,nl=216/24389,il=24389/27,rl=[95.047,100,108.883],ol=null,sl=new ja,al=new ja,ll=new ja,hl=new ja,ul=!1;function cl(){this.name="Base"}function fl(){this.name="Base"}function dl(){this.name="Base"}function pl(){this.name="Base"}function gl(){this.name="Base"}function ml(){this.name="Base"}function yl(){this.name="Base",this.name="Table"}function vl(){this.name="Base"}function bl(){this.name="Base"}function wl(){this.name="Base"}function xl(){this.name="Base"}function kl(t,e,n){if(0>e)return 0==t%e;if(0!=t%e)return!1;e=n.length;for(var i=0;i<e;i++)if(0==t%n[i])return!1;return!0}function Sl(){this.name="Base"}function _l(t,e,n,i){if(!1!==ca(i)){var r=i.strokeWidth;0===r&&t instanceof Pu&&t.type===Ml.Link&&t.adornedObject instanceof ih&&(r=t.adornedObject.strokeWidth),r*=i.ya,t instanceof Qu&&null!==t.na?Ws(i,(t=t.na.bounds).x-r/2,t.y-r/2,t.width+r,t.height+r):t instanceof Pu&&null!==t.adornedPart.na?Ws(i,(t=t.adornedPart.na.bounds).x-r/2,t.y-r/2,t.width+r,t.height+r):Ws(i,-r/2,-r/2,e+r,n+r),fa(i,!1)}}function Cl(){this.name="Base"}function Ml(t){Ys.call(this),this.pa=void 0===t?Ml.Position:t,null===this.pa&&v("Panel type not specified or PanelLayout not loaded: "+t),this.W=new tt,this.hb=ee,this.pa===Ml.Grid&&(this.isAtomic=!0),this.Hn=Te,this.Rf=Ps,this.pa===Ml.Table&&Pl(this),this.jq=Ms,this.ho=At,this.io=xt,this.co=0,this.bo=100,this.fo=10,this.eo=0,this.ji=this.mb=this.dh=this.bh=this.Hj=null,this.vo=NaN,this.pe=this.zi=null,this.Bl="category",this.Td=null,this.xg=new Rt(NaN,NaN,NaN,NaN),this.xh=this.Dp=this.Si=null,this.Lg=""}function Pl(t){t.Aj=ee,t.Ug=1,t.pi=null,t.oi=null,t.Tg=1,t.Sg=null,t.ni=null,t.ub=[],t.rb=[],t.Zj=nh,t.xj=nh,t.Vi=0,t.Di=0}function Tl(t,e,n,i){for(var r=i.length,o=t.actualBounds,s=t.naturalBounds,a=!0,l=0;l<r;l++){var h=i[l];if(void 0!==h)if(a)a=!1;else if(0!==h.actual){if(n){if(h.position>o.height)continue}else if(h.position>o.width)continue;var u=h.separatorStrokeWidth;isNaN(u)&&(u=n?t.Ug:t.Tg);var c=h.separatorStroke;if(null===c&&(c=n?t.pi:t.Sg),0!==u&&null!==c){Qs(t,e,c,!1,!1,s,o),c=!1;var f=h.separatorDashArray;null===f&&(f=n?t.oi:t.ni),null!==f&&(c=!0,e.Ct(f,0)),e.beginPath(),f=h.position+u,n?f>o.height&&(u-=f-o.height):f>o.width&&(u-=f-o.width),h=h.position+u/2,e.lineWidth=u,u=t.hb,n?(f=o.width-u.right,e.moveTo(u.left,h+=u.top),e.lineTo(f,h)):(f=o.height-u.bottom,e.moveTo(h+=u.left,u.top),e.lineTo(h,f)),e.stroke(),c&&e.At()}}}}function Nl(t,e,n,i,r){for(var o=i.length,s=t.actualBounds,a=t.naturalBounds,l=0;l<o;l++){var h=i[l];if(void 0!==h&&null!==h.background&&h.coversSeparators!==r&&0!==h.actual){var u=n?s.height:s.width;if(!(h.position>u)){var c=h.uc(),f=h.separatorStrokeWidth;isNaN(f)&&(f=n?t.Ug:t.Tg);var d=h.separatorStroke;null===d&&(d=n?t.pi:t.Sg),null===d&&(f=0),c-=f,(f=h.position+f)+(c+=h.actual)>u&&(c=u-f),0>=c||(u=t.hb,Qs(t,e,h.background,!0,!1,a,s),n?e.fillRect(u.left,f+u.top,s.width-(u.left+u.right),c):e.fillRect(f+u.left,u.top,c,s.height-(u.top+u.bottom)))}}}}function Al(t){return"LineV"===t||"BarV"===t}function El(t){return null!==t.part?t.part.locationObject:null}function Ll(t,e){Ol(t,t,e)}function Ol(t,e,n){n(e);for(var i=(e=e.W.j).length,r=0;r<i;r++){var o=e[r];o instanceof Ml&&Ol(t,o,n)}}function Dl(t,e){jl(t,t,e)}function jl(t,e,n){if(n(e),e instanceof Ml)for(var i=(e=e.W.j).length,r=0;r<i;r++)jl(t,e[r],n)}function Fl(t,e,n){if(n(e))return e;if(e instanceof Ml)for(var i=(e=e.W.j).length,r=0;r<i;r++){var o=Fl(t,e[r],n);if(null!==o)return o}return null}function Il(t){for(var e=(t=t.W.j).length,n=0,i=0;i<e;i++){var r=t[i];r instanceof Ml?n=Math.max(n,Il(r)):r instanceof ih&&(n=Math.max(n,r.vh/2*r.bk*r.Af()))}return n}function Rl(t,e,n,i){for(var r=t.W.j,o=r.length;o--;){var s=r[o];if(s.visible){var a=s.actualBounds,l=t.naturalBounds;a.x>l.width||a.y>l.height||0>a.x+a.width||0>a.y+a.height||(s instanceof Ml&&Rl(s,e,n,i),null!==e&&(s=e(s)),null===s||null!==n&&!n(s)||i.add(s))}}}function Bl(t){var e=null;return t instanceof ih&&((e=t.spot1)===Te&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=re),e}function zl(t){var e=null;return t instanceof ih&&((e=t.spot2)===Te&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=fe),e}function Vl(t,e){t.F=e?16777216|t.F:-16777217&t.F}function Ul(t){return null!==(t=t.ji)&&t.s}function ql(t){var e=t.ji;if(null===e)null!==t.data&&v("Template cannot have .data be non-null: "+t),t.ji=e=new tt;else if(e.s)return;var n=new tt;Vl(t,!1),t.Vm(t,function(t,i){var r=i.eb;if(null!==r)for(la(i,!1),r=r.iterator;r.next();){var o=r.value;o.mode===Rd&&la(i,!0);var s=o.sourceName;null!==s&&("/"===s&&Vl(t,!0),null!==(s=jd(o,t,i))&&(n.add(s),null===s.Zl&&(s.Zl=new tt),s.Zl.add(o))),e.add(o)}if(i instanceof Ml&&i.type===Ml.Table){if(0<i.ub.length)for(r=(t=i.ub).length,o=0;o<r;o++)if(void 0!==(s=t[o])&&null!==s.eb)for(var a=s.eb.iterator;a.next();){var l=a.value;l.ld=s,l.aq=2,l.em=s.index,e.add(l)}if(0<i.rb.length)for(t=(i=i.rb).length,r=0;r<t;r++)if(void 0!==(o=i[r])&&null!==o.eb)for(s=o.eb.iterator;s.next();)(a=s.value).ld=o,a.aq=1,a.em=o.index,e.add(a)}});for(var i=n.iterator;i.next();){var r=i.value;if(null!==r.Zl){la(r,!0);for(var o=r.Zl.iterator;o.next();){var s=o.value;null===r.eb&&(r.eb=new tt),r.eb.add(s)}}r.Zl=null}for(i=e.iterator;i.next();)if(null!==(o=(r=i.value).ld)){r.ld=null;var a=r.targetProperty,l=a.indexOf(".");0<l&&o instanceof Ml&&(s=a.substring(0,l),a=a.substr(l+1),null!==(l=o.$a(s))?(o=l,r.targetProperty=a):x('Warning: unable to find GraphObject named "'+s+'" for Binding: '+r.toString())),o instanceof Jl?(s=ot(o.panel),r.tj=void 0===s?-1:s,o.panel.Vk=r.tj):o instanceof Ys?(s=ot(o),r.tj=void 0===s?-1:s,o.Vk=r.tj):v("Unknown type of binding target: "+o)}e.freeze(),t instanceof ou&&t.Lc()&&t.Ta()}function Hl(t){if(t.type===Ml.Spot||t.type===Ml.Auto)return Math.min(t.W.length,1);if(t.type===Ml.Link){for(var e=(t=t.W).length,n=0;n<e;n++){var i=t.J(n);if(!(i instanceof ih&&i.isPanelMain))break}return n}return t.type===Ml.Table&&0<t.W.length&&(t=t.W.J(0)).isPanelMain&&t instanceof Ml&&(t.type===Ml.TableRow||t.type===Ml.TableColumn)?1:0}function Gl(t,e,n){if(!(null==e||0>n)){var i=function(t,e){if(null===e)return"";if("function"==typeof(t=t.Bl))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=Ad(e,t)}return void 0===t?"":"string"==typeof t?t:(v("Panel.getCategoryForItemData found a non-string category for "+e+": "+t),"")}(t,e),r=t.itemTemplateMap,o=null;null!==r&&(o=r.H(i)),null===o&&(Wl||(Wl=!0,x('No item template Panel found for category "'+i+'" on '+t),x("  Using default item template."),i=new Ml,(r=new dh).bind(new Dd("text","",E)),i.add(r),$l=i),o=$l),null!==(i=o)&&(ql(i),0!=(16777216&(i=i.copy()).F)&&null!==(r=t.gj())&&Vl(r,!0),"object"==typeof e&&(null===t.Td&&(t.Td=new ft),t.Td.add(e,i)),r=n+Hl(t),t.vb(r,i),i.mb=e,Yl(t,r,n),i.mb=null,i.data=e)}}function Yl(t,e,n){for(t=t.W;e<t.length;){var i=t.J(e);if(i instanceof Ml){var r=e,o=n;i.type===Ml.TableRow?i.row=r:i.type===Ml.TableColumn&&(i.column=r),i.itemIndex=o}e++,n++}}function Xl(t,e,n){var i=e.enabledChanged;if(null!==i&&i(e,n),e instanceof Ml){i=(e=e.W.j).length;for(var r=0;r<i;r++){var o=e[r];n&&o instanceof Ml&&!o.isEnabled||Xl(t,o,n)}}}function Kl(t,e){e.name=t,Zl.add(t,e)}Fa.className="Brush",Fa.Solid=$a=new H(Fa,"Solid",0),Fa.Linear=Za=new H(Fa,"Linear",1),Fa.Radial=Ja=new H(Fa,"Radial",2),Fa.Pattern=Qa=new H(Fa,"Pattern",4),Fa.Lab=tl=new H(Fa,"Lab",5),Fa.HSL=el=new H(Fa,"HSL",6),Fa.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>i.length&&(i="0"+i),2>t.length&&(t="0"+t),"#"+e+i+t},Fa.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;ul||(Wa(),ul=!0);var e=ol;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},Fa.lighten=function(t){return Ia(t)},Fa.lightenBy=Ia,Fa.darken=function(t){return Ra(t)},Fa.darkenBy=Ra,Fa.mix=Ba,Fa.isDark=za,cl.prototype.measure=function(){},cl.prototype.EA=function(t,e,n,i,r){t.measure(e,n,i,r)},cl.prototype.arrange=function(){},cl.prototype.qz=function(t,e,n,i,r,o){t.arrange(e,n,i,r,o)},cl.prototype.ac=function(){},c.Object.defineProperties(cl.prototype,{classType:{get:function(){return Ml}}}),cl.prototype.arrangeElement=cl.prototype.qz,cl.prototype.measureElement=cl.prototype.EA,cl.className="PanelLayout",u(fl,cl),fl.prototype.measure=function(t,e,n,i,r,o,s){var a=i.length;t=El(t);for(var l=0;l<a;l++){var h=i[l];if(h.visible||h===t){var u=h.margin,c=u.right+u.left;u=u.top+u.bottom,h.measure(e,n,o,s);var f=h.measuredBounds;c=Math.max(f.width+c,0),u=Math.max(f.height+u,0),f=h.position.x;var d=h.position.y;isFinite(f)||(f=0),isFinite(d)||(d=0),h instanceof ih&&h.isGeometryPositioned&&(f-=h=h.strokeWidth/2,d-=h),Yt(r,f,d,c,u)}}},fl.prototype.arrange=function(t,e,n){var i=e.length,r=t.padding;for(t=n.x-r.left,n=n.y-r.top,r=0;r<i;r++){var o=e[r],s=o.measuredBounds,a=o.margin,l=o.position.x,h=o.position.y;if(l=isNaN(l)?-t:l-t,h=isNaN(h)?-n:h-n,o instanceof ih&&o.isGeometryPositioned){var u=o.strokeWidth/2;l-=u,h-=u}o.visible&&o.arrange(l+a.left,h+a.top,s.width,s.height)}},u(dl,cl),dl.prototype.measure=function(t,e,n,i,r,o,s){var a=i.length;e=T(),o=El(t);for(var l=0;l<a;l++){var h=i[l];if(h.visible||h===o){var u=ia(h,!1);if(u!==Cs&&u!==Ts)e.push(h);else{h.measure(1/0,n,0,s),u=h.margin,h=h.measuredBounds;var c=Math.max(h.height+u.top+u.bottom,0);r.width+=Math.max(h.width+u.right+u.left,0),r.height=Math.max(r.height,c)}}}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==r.height&&(n=Math.min(r.height,t.maxSize.height)),t=0;t<i;t++)((l=e[t]).visible||l===o)&&(a=(u=l.margin).right+u.left,u=u.top+u.bottom,l.measure(1/0,n,0,s),l=l.measuredBounds,u=Math.max(l.height+u,0),r.width+=Math.max(l.width+a,0),r.height=Math.max(r.height,u));N(e)},dl.prototype.arrange=function(t,e,n){for(var i=e.length,r=t.padding,o=r.top,s=t.isOpposite,a=s?n.width:r.left,l=0;l<i;l++){var h=o,u=e[l];if(u.visible){var c=u.measuredBounds,f=u.margin,d=f.top+f.bottom,p=o+r.bottom,g=c.height,m=ia(u,!1);(isNaN(u.desiredSize.height)&&m===_s||m===Ns)&&(g=Math.max(n.height-d-p,0)),d=g+d+p,(p=u.alignment).Mb()&&(p=t.defaultAlignment),p.jb()||(p=le),s&&(a-=c.width+f.left+f.right),u.arrange(a+p.offsetX+f.left,h+p.offsetY+f.top+(n.height*p.y-d*p.y),c.width,g),s||(a+=c.width+f.left+f.right)}}},u(pl,cl),pl.prototype.measure=function(t,e,n,i,r,o){var s=i.length;n=T();for(var a=El(t),l=0;l<s;l++){var h=i[l];if(h.visible||h===a){var u=ia(h,!1);if(u!==Cs&&u!==Ns)n.push(h);else{var c=h.margin;u=c.right+c.left,c=c.top+c.bottom,h.measure(e,1/0,o,0),h=h.measuredBounds,Bt(r,Math.max(r.width,Math.max(h.width+u,0)),r.height+Math.max(h.height+c,0))}}}if(0!==(i=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==r.width&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<i;t++)((l=n[t]).visible||l===a)&&(s=(h=l.margin).right+h.left,h=h.top+h.bottom,l.measure(e,1/0,o,0),l=l.measuredBounds,h=Math.max(l.height+h,0),r.width=Math.max(r.width,Math.max(l.width+s,0)),r.height+=h);N(n)}},pl.prototype.arrange=function(t,e,n){for(var i=e.length,r=t.padding,o=r.left,s=t.isOpposite,a=s?n.height:r.top,l=0;l<i;l++){var h=o,u=e[l];if(u.visible){var c=u.measuredBounds,f=u.margin,d=f.left+f.right,p=o+r.right,g=c.width,m=ia(u,!1);(isNaN(u.desiredSize.width)&&m===_s||m===Ts)&&(g=Math.max(n.width-d-p,0)),d=g+d+p,(p=u.alignment).Mb()&&(p=t.defaultAlignment),p.jb()||(p=le),s&&(a-=c.height+f.bottom+f.top),u.arrange(h+p.offsetX+f.left+(n.width*p.x-d*p.x),a+p.offsetY+f.top,g,c.height),s||(a+=c.height+f.bottom+f.top)}}},u(gl,cl),gl.prototype.measure=function(t,e,n,i,r,o,s){var a=i.length,l=t.qb(),h=l.margin,u=h.right+h.left,c=h.top+h.bottom;l.measure(e,n,o,s);var f=l.measuredBounds;o=f.width,s=f.height;for(var d=Math.max(o+u,0),p=Math.max(s+c,0),g=t.isClipping,m=Rt.allocAt(-h.left,-h.top,d,p),y=!0,v=El(t),b=0;b<a;b++){var w=i[b];if(w!==l&&(w.visible||w===v)){switch(d=(h=w.margin).right+h.left,p=h.top+h.bottom,f=ia(w,!1)){case _s:e=o,n=s;break;case Ts:e=o;break;case Ns:n=s}w.measure(e,n,0,0),f=w.measuredBounds,d=Math.max(f.width+d,0),p=Math.max(f.height+p,0);var x=w.alignment;x.Mb()&&(x=t.defaultAlignment),x.jb()||(x=le);var k=w.alignmentFocus;k.Mb()&&(k=le);var S=null;if(w instanceof Ml&&""!==w.Lg&&(w.arrange(0,0,f.width,f.height),(S=w.$a(w.Lg))===w&&(S=null)),null!==S){for(h=dt.allocAt(k.x*(h=S.naturalBounds).width-k.offsetX-(f=S.margin).left,k.y*h.height-k.offsetY-f.top);S!==w;)S.transform.sa(h),S=S.panel;w=x.x*o+x.offsetX-h.x,f=x.y*s+x.offsetY-h.y,dt.free(h)}else w=x.x*o+x.offsetX-(k.x*f.width+k.offsetX)-h.left,f=x.y*s+x.offsetY-(k.y*f.height+k.offsetY)-h.top;y?(y=!1,r.h(w,f,d,p)):Yt(r,w,f,d,p)}}switch(y?r.assign(m):g?r.Xv(m.x,m.y,m.width,m.height):Yt(r,m.x,m.y,m.width,m.height),Rt.free(m),(f=l.stretch)===Ps&&(f=ia(l,!1)),f){case Cs:return;case _s:if(!isFinite(e)&&!isFinite(n))return;break;case Ts:if(!isFinite(e))return;break;case Ns:if(!isFinite(n))return}for(o=(f=l.measuredBounds).width,s=f.height,d=Math.max(o+u,0),p=Math.max(s+c,0),m=Rt.allocAt(-(h=l.margin).left,-h.top,d,p),e=0;e<a;e++)(n=i[e])===l||!n.visible&&n!==v||(d=(h=n.margin).right+h.left,p=h.top+h.bottom,f=n.measuredBounds,d=Math.max(f.width+d,0),p=Math.max(f.height+p,0),(u=n.alignment).Mb()&&(u=t.defaultAlignment),u.jb()||(u=le),(n=n.alignmentFocus).Mb()&&(n=le),y?(y=!1,r.h(u.x*o+u.offsetX-(n.x*f.width+n.offsetX)-h.left,u.y*s+u.offsetY-(n.y*f.height+n.offsetY)-h.top,d,p)):Yt(r,u.x*o+u.offsetX-(n.x*f.width+n.offsetX)-h.left,u.y*s+u.offsetY-(n.y*f.height+n.offsetY)-h.top,d,p));y?r.assign(m):g?r.Xv(m.x,m.y,m.width,m.height):Yt(r,m.x,m.y,m.width,m.height),Rt.free(m)},gl.prototype.arrange=function(t,e,n){var i=e.length,r=t.qb(),o=r.measuredBounds,s=o.width,a=t.padding,l=a.left,h=l-n.x,u=(a=a.top)-n.y;r.arrange(h,u,s,o=o.height);for(var c=0;c<i;c++){var f=e[c];if(f!==r){var d=f.measuredBounds,p=d.width;d=d.height,(u=f.alignment).Mb()&&(u=t.defaultAlignment),u.jb()||(u=le);var g=f.alignmentFocus;if(g.Mb()&&(g=le),h=null,f instanceof Ml&&""!==f.Lg&&(h=f.$a(f.Lg))===f&&(h=null),null!==h){var m=h.naturalBounds;for(g=dt.allocAt(g.x*m.width-g.offsetX,g.y*m.height-g.offsetY);h!==f;)h.transform.sa(g),h=h.panel;h=u.x*s+u.offsetX-g.x,u=u.y*o+u.offsetY-g.y,dt.free(g)}else h=u.x*s+u.offsetX-(g.x*p+g.offsetX),u=u.y*o+u.offsetY-(g.y*d+g.offsetY);h-=n.x,u-=n.y,f.visible&&f.arrange(l+h,a+u,p,d)}}},u(ml,cl),ml.prototype.measure=function(t,e,n,i,r,o,s){var a=i.length,l=t.qb(),h=l.margin,u=e,c=n,f=h.right+h.left,d=h.top+h.bottom;l.measure(e,n,o,s),h=l.measuredBounds;var p=0,g=null;l instanceof ih&&(p=(g=l).strokeWidth*g.scale);var m=Math.max(h.width+f,0);h=Math.max(h.height+d,0);var y=Bl(l),v=y.x*m+y.offsetX;y=y.y*h+y.offsetY;var b=zl(l),w=b.x*m+b.offsetX;for(b=b.y*h+b.offsetY,isFinite(e)&&(u=Math.max(Math.abs(v-w)-p,0)),isFinite(n)&&(c=Math.max(Math.abs(y-b)-p,0)),(p=Dt.alloc()).h(0,0),t=El(t),b=0;b<a;b++)(y=i[b])===l||!y.visible&&y!==t||(m=(h=y.margin).right+h.left,v=h.top+h.bottom,y.measure(u,c,0,0),h=y.measuredBounds,m=Math.max(h.width+m,0),h=Math.max(h.height+v,0),p.h(Math.max(m,p.width),Math.max(h,p.height)));if(1===a)r.width=m,r.height=h,Dt.free(p);else{switch(y=Bl(l),a=i=0,(b=zl(l)).x!==y.x&&b.y!==y.y&&(i=p.width/Math.abs(b.x-y.x),a=p.height/Math.abs(b.y-y.y)),Dt.free(p),p=0,null!==g&&(p=g.strokeWidth*g.scale,oh(g)===Ms&&(i=a=Math.max(i,a))),i+=Math.abs(y.offsetX)+Math.abs(b.offsetX)+p,a+=Math.abs(y.offsetY)+Math.abs(b.offsetY)+p,(g=l.stretch)===Ps&&(g=ia(l,!1)),g){case Cs:s=o=0;break;case _s:isFinite(e)&&(i=e),isFinite(n)&&(a=n);break;case Ts:isFinite(e)&&(i=e),s=0;break;case Ns:o=0,isFinite(n)&&(a=n)}l.vm(),l.measure(i,a,o,s),r.width=l.measuredBounds.width+f,r.height=l.measuredBounds.height+d}},ml.prototype.arrange=function(t,e){var n=e.length,i=t.qb(),r=i.measuredBounds,o=Rt.alloc();o.h(0,0,1,1);var s=i.margin,a=s.left,l=t.padding,h=l.left;i.arrange(h+a,(l=l.top)+(s=s.top),r.width,r.height);var u=Bl(i),c=zl(i),f=u.y*r.height+u.offsetY,d=c.x*r.width+c.offsetX;for(c=c.y*r.height+c.offsetY,o.x=u.x*r.width+u.offsetX,o.y=f,Yt(o,d,c,0,0),o.x+=a+h,o.y+=s+l,r=0;r<n;r++)(a=e[r])!==i&&(h=a.measuredBounds,s=a.margin,l=Math.max(h.width+s.right+s.left,0),u=Math.max(h.height+s.top+s.bottom,0),(f=a.alignment).Mb()&&(f=t.defaultAlignment),f.jb()||(f=le),l=o.width*f.x+f.offsetX-l*f.x+s.left+o.x,s=o.height*f.y+f.offsetY-u*f.y+s.top+o.y,a.visible&&(Xt(o.x,o.y,o.width,o.height,l,s,h.width,h.height)?a.arrange(l,s,h.width,h.height):a.arrange(l,s,h.width,h.height,new Rt(o.x,o.y,o.width,o.height))));Rt.free(o)},u(yl,cl),yl.prototype.measure=function(t,e,n,i,r,o,s){for(var a=i.length,l=T(),h=T(),u=0;u<a;u++){var c=i[u],f=c instanceof Ml?c:null;if(null===f||f.type!==Ml.TableRow&&f.type!==Ml.TableColumn||!c.visible)l.push(c);else{h.push(f);for(var d=f.W.j,p=d.length,g=0;g<p;g++){var m=d[g];f.type===Ml.TableRow?m.row=c.row:f.type===Ml.TableColumn&&(m.column=c.column),l.push(m)}}}0===(a=l.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var y=[],v=0;v<a;v++){var b=l[v];fa(b,!0),pa(b,!0),y[b.row]||(y[b.row]=[]),y[b.row][b.column]||(y[b.row][b.column]=[]),y[b.row][b.column].push(b)}N(l);var w=T(),x=T(),k=T(),S={count:0},_={count:0},C=e,M=n,P=t.ub;a=P.length;for(var A=0;A<a;A++){var E=P[A];void 0!==E&&(E.actual=0)}a=(P=t.rb).length;for(var L=0;L<a;L++)void 0!==(E=P[L])&&(E.actual=0);for(var O=y.length,D=0,j=0;j<O;j++)y[j]&&(D=Math.max(D,y[j].length));var F=Math.min(t.topIndex,O-1),I=Math.min(t.leftIndex,D-1),R=0;O=y.length;for(var B=El(t),z=0;z<O;z++)if(y[z]){D=y[z].length;for(var V=t.getRowDefinition(z),U=V.actual=0;U<D;U++)if(y[z][U]){var q=t.getColumnDefinition(U);void 0===w[U]&&(q.actual=0,w[U]=!0);for(var H=y[z][U],G=H.length,Y=0;Y<G;Y++){var X=H[Y];if(X.visible||X===B){var K=1<X.rowSpan||1<X.columnSpan;K&&(z<F||U<I||x.push(X));var W=X.margin,$=W.right+W.left,Z=W.top+W.bottom,J=ra(X,V,q,!1),Q=X.desiredSize,tt=!isNaN(Q.height),et=!isNaN(Q.width)&&tt;if(K||J===Cs||et||z<F||U<I||(void 0!==S[U]||J!==_s&&J!==Ts||(S[U]=-1,S.count++),void 0!==_[z]||J!==_s&&J!==Ns||(_[z]=-1,_.count++),k.push(X)),X.measure(1/0,1/0,0,0),!(z<F||U<I)){var nt=X.measuredBounds,it=Math.max(nt.width+$,0),rt=Math.max(nt.height+Z,0);if(1===X.rowSpan&&(J===Cs||J===Ts)){var ot=(E=t.getRowDefinition(z)).uc();(R=Math.max(rt-E.actual,0))+ot>M&&(R=Math.max(M-ot,0));var st=0===E.actual;E.actual=E.actual+R,M=Math.max(M-(R+(st?ot:0)),0)}if(1===X.columnSpan&&(J===Cs||J===Ns)){var at=(E=t.getColumnDefinition(U)).uc();(R=Math.max(it-E.actual,0))+at>C&&(R=Math.max(C-at,0));var lt=0===E.actual;E.actual=E.actual+R,C=Math.max(C-(R+(lt?at:0)),0)}K&&X.vm()}}}}}N(w);var ht=0,ut=0;a=t.columnCount;for(var ct=0;ct<a;ct++){var ft=t.rb[ct];void 0!==ft&&(ht+=ft.ha,0!==ft.ha&&(ht+=ft.uc()))}a=t.rowCount;for(var dt=0;dt<a;dt++){var pt=t.ub[dt];void 0!==pt&&(ut+=pt.ha,0!==pt.ha&&(ut+=pt.uc()))}C=Math.max(e-ht,0);var gt=M=Math.max(n-ut,0),mt=C;a=k.length;for(var yt=0;yt<a;yt++){var vt=k[yt],bt=t.getRowDefinition(vt.row),wt=t.getColumnDefinition(vt.column),xt=vt.measuredBounds,kt=vt.margin,St=kt.top+kt.bottom;S[vt.column]=0===wt.actual&&void 0!==S[vt.column]?Math.max(xt.width+(kt.right+kt.left),S[vt.column]):null,_[vt.row]=0===bt.actual&&void 0!==_[vt.row]?Math.max(xt.height+St,_[vt.row]):null}var _t,Ct=0,Mt=0;for(_t in _)"count"!==_t&&(Ct+=_[_t]);for(_t in S)"count"!==_t&&(Mt+=S[_t]);for(var Pt=Dt.alloc(),Tt=0;Tt<a;Tt++){var Nt=k[Tt];if(Nt.visible||Nt===B){var At=t.getRowDefinition(Nt.row),Et=t.getColumnDefinition(Nt.column),Lt=0;isFinite(Et.width)?Lt=Et.width:(Lt=isFinite(C)&&null!==S[Nt.column]?0===Mt?Et.actual+C:S[Nt.column]/Mt*mt:null!==S[Nt.column]?C:Et.actual||C,Lt=Math.max(0,Lt-Et.uc()));var Ot=0;switch(isFinite(At.height)?Ot=At.height:(Ot=isFinite(M)&&null!==_[Nt.row]?0===Ct?At.actual+M:_[Nt.row]/Ct*gt:null!==_[Nt.row]?M:At.actual||M,Ot=Math.max(0,Ot-At.uc())),Pt.h(Math.max(Et.minimum,Math.min(Lt,Et.maximum)),Math.max(At.minimum,Math.min(Ot,At.maximum))),J=ra(Nt,At,Et,!1)){case Ts:Pt.height=Math.max(Pt.height,At.actual+M);break;case Ns:Pt.width=Math.max(Pt.width,Et.actual+C)}var jt=Nt.margin,Ft=jt.right+jt.left,It=jt.top+jt.bottom;Nt.vm(),Nt.measure(Pt.width,Pt.height,Et.minimum,At.minimum);var Rt=Nt.measuredBounds,Bt=Math.max(Rt.width+Ft,0),zt=Math.max(Rt.height+It,0);isFinite(C)&&(Bt=Math.min(Bt,Pt.width)),isFinite(M)&&(zt=Math.min(zt,Pt.height));var Vt=0;Vt=At.actual,At.actual=Math.max(At.actual,zt),R=At.actual-Vt,M=Math.max(M-R,0),Vt=Et.actual,Et.actual=Math.max(Et.actual,Bt),R=Et.actual-Vt,C=Math.max(C-R,0)}}N(k);var Ut=Dt.alloc(),qt=T(),Ht=T();if(0!==(a=x.length))for(var Gt=0;Gt<O;Gt++)if(y[Gt]){D=y[Gt].length;var Yt=t.getRowDefinition(Gt);qt[Gt]=Yt.actual;for(var Xt=0;Xt<D;Xt++)if(y[Gt][Xt]){var Kt=t.getColumnDefinition(Xt);Ht[Xt]=Kt.actual}}for(var Wt=0;Wt<a;Wt++){var $t=x[Wt];if($t.visible||$t===B){var Zt=t.getRowDefinition($t.row),Jt=t.getColumnDefinition($t.column);switch(Pt.h(Math.max(Jt.minimum,Math.min(e,Jt.maximum)),Math.max(Zt.minimum,Math.min(n,Zt.maximum))),J=ra($t,Zt,Jt,!1)){case _s:0!==Ht[Jt.index]&&(Pt.width=Math.min(Pt.width,Ht[Jt.index])),0!==qt[Zt.index]&&(Pt.height=Math.min(Pt.height,qt[Zt.index]));break;case Ts:0!==Ht[Jt.index]&&(Pt.width=Math.min(Pt.width,Ht[Jt.index]));break;case Ns:0!==qt[Zt.index]&&(Pt.height=Math.min(Pt.height,qt[Zt.index]))}isFinite(Jt.width)&&(Pt.width=Jt.width),isFinite(Zt.height)&&(Pt.height=Zt.height),Ut.h(0,0);for(var Qt=1;Qt<$t.rowSpan&&!($t.row+Qt>=t.rowCount);Qt++)E=t.getRowDefinition($t.row+Qt),R=0,R=J===_s||J===Ns?Math.max(E.minimum,0===qt[$t.row+Qt]?E.maximum:Math.min(qt[$t.row+Qt],E.maximum)):Math.max(E.minimum,isNaN(E.Yc)?E.maximum:Math.min(E.Yc,E.maximum)),Ut.height+=R;for(var te=1;te<$t.columnSpan&&!($t.column+te>=t.columnCount);te++)E=t.getColumnDefinition($t.column+te),R=0,R=J===_s||J===Ts?Math.max(E.minimum,0===Ht[$t.column+te]?E.maximum:Math.min(Ht[$t.column+te],E.maximum)):Math.max(E.minimum,isNaN(E.Yc)?E.maximum:Math.min(E.Yc,E.maximum)),Ut.width+=R;Pt.width+=Ut.width,Pt.height+=Ut.height;var ee=$t.margin,ne=ee.right+ee.left,ie=ee.top+ee.bottom;$t.measure(Pt.width,Pt.height,o,s);for(var re=$t.measuredBounds,oe=Math.max(re.width+ne,0),se=Math.max(re.height+ie,0),ae=0,le=0;le<$t.rowSpan&&!($t.row+le>=t.rowCount);le++)ae+=(E=t.getRowDefinition($t.row+le)).total||0;if(ae<se){var he=se-ae,ue=se-ae;if(null!==$t.spanAllocation)for(var ce=$t.spanAllocation,fe=0;fe<$t.rowSpan&&!(0>=he)&&!($t.row+fe>=t.rowCount);fe++){var de=(E=t.getRowDefinition($t.row+fe)).ha||0,pe=ce($t,E,ue);E.actual=Math.min(E.maximum,de+pe),E.ha!==de&&(he-=E.ha-de)}for(;0<he;){var ge=E.ha||0;if(isNaN(E.height)&&E.maximum>ge&&(E.actual=Math.min(E.maximum,ge+he),E.ha!==ge&&(he-=E.ha-ge)),0===E.index)break;E=t.getRowDefinition(E.index-1)}}for(var me=0,ye=0;ye<$t.columnSpan&&!($t.column+ye>=t.columnCount);ye++)me+=(E=t.getColumnDefinition($t.column+ye)).total||0;if(me<oe){var ve=oe-me,be=oe-me;if(null!==$t.spanAllocation)for(var we=$t.spanAllocation,xe=0;xe<$t.columnSpan&&!(0>=ve)&&!($t.column+xe>=t.columnCount);xe++){var ke=(E=t.getColumnDefinition($t.column+xe)).ha||0,Se=we($t,E,be);E.actual=Math.min(E.maximum,ke+Se),E.ha!==ke&&(ve-=E.ha-ke)}for(;0<ve;){var _e=E.ha||0;if(isNaN(E.width)&&E.maximum>_e&&(E.actual=Math.min(E.maximum,_e+ve),E.ha!==_e&&(ve-=E.ha-_e)),0===E.index)break;E=t.getColumnDefinition(E.index-1)}}}}N(x),Dt.free(Ut),Dt.free(Pt),void 0!==qt&&N(qt),void 0!==Ht&&N(Ht);var Ce=0,Me=0,Pe=t.desiredSize,Te=t.maxSize;J=ia(t,!0);var Ne=ut=ht=0,Ae=0;a=t.columnCount;for(var Ee=0;Ee<a;Ee++)void 0!==t.rb[Ee]&&(E=t.getColumnDefinition(Ee),isFinite(E.width)?(Ne+=E.width,Ne+=E.uc()):Ql(E)===eh?(Ne+=E.ha,Ne+=E.uc()):0!==E.ha&&(ht+=E.ha,ht+=E.uc()));Ce=isFinite(Pe.width)?Math.min(Pe.width,Te.width):J!==Cs&&isFinite(e)?e:ht,Ce=Math.max(Ce,t.minSize.width),Ce=Math.max(Ce-Ne,0);for(var Le=0===ht?1:Math.max(Ce/ht,1),Oe=0;Oe<a;Oe++)void 0!==t.rb[Oe]&&(E=t.getColumnDefinition(Oe),isFinite(E.width)||Ql(E)===eh||(E.actual=E.ha*Le),E.position=r.width,0!==E.ha&&(r.width+=E.ha,r.width+=E.uc()));a=t.rowCount;for(var De=0;De<a;De++)void 0!==t.ub[De]&&(E=t.getRowDefinition(De),isFinite(E.height)?(Ae+=E.height,Ae+=E.uc()):Ql(E)===eh?(Ae+=E.ha,Ae+=E.uc()):0!==E.ha&&(ut+=E.ha,0!==E.ha&&(ut+=E.uc())));Me=isFinite(Pe.height)?Math.min(Pe.height,Te.height):J!==Cs&&isFinite(n)?n:ut,Me=Math.max(Me,t.minSize.height),Me=Math.max(Me-Ae,0);for(var je=0===ut?1:Math.max(Me/ut,1),Fe=0;Fe<a;Fe++)void 0!==t.ub[Fe]&&(E=t.getRowDefinition(Fe),isFinite(E.height)||Ql(E)===eh||(E.actual=E.ha*je),E.position=r.height,0!==E.ha&&(r.height+=E.ha,0!==E.ha&&(r.height+=E.uc())));a=h.length;for(var Ie=0;Ie<a;Ie++){var Re=h[Ie],Be=0,ze=0;Re.type===Ml.TableRow?(Be=r.width,ze=(E=t.getRowDefinition(Re.row)).actual):(Be=(E=t.getColumnDefinition(Re.column)).actual,ze=r.height),Re.measuredBounds.h(0,0,Be,ze),fa(Re,!1),y[Re.row]||(y[Re.row]=[]),y[Re.row][Re.column]||(y[Re.row][Re.column]=[]),y[Re.row][Re.column].push(Re)}N(h),t.Dp=y},yl.prototype.arrange=function(t,e,n){var i=e.length,r=t.padding,o=r.left;r=r.top;for(var s,a,l=t.Dp,h=l.length,u=0,c=0;c<h;c++)l[c]&&(u=Math.max(u,l[c].length));for(c=Math.min(t.topIndex,h-1);c!==h&&(void 0===t.ub[c]||0===t.ub[c].ha);)c++;for(c=Math.min(c,h-1),c=-t.ub[c].position,s=Math.min(t.leftIndex,u-1);s!==u&&(void 0===t.rb[s]||0===t.rb[s].ha);)s++;s=Math.min(s,u-1);for(var f=-t.rb[s].position,d=Dt.alloc(),p=0;p<h;p++)if(l[p]){u=l[p].length;var g=t.getRowDefinition(p);a=g.position+c+r,0!==g.ha&&(a+=g.Ev());for(var m=0;m<u;m++)if(l[p][m]){var y=t.getColumnDefinition(m);s=y.position+f+o,0!==y.ha&&(s+=y.Ev());for(var v=l[p][m],b=v.length,w=0;w<b;w++){var x=v[w],k=x.measuredBounds,S=x instanceof Ml?x:null;if(null===S||S.type!==Ml.TableRow&&S.type!==Ml.TableColumn){d.h(0,0);for(var _=1;_<x.rowSpan&&!(p+_>=t.rowCount);_++)S=t.getRowDefinition(p+_),d.height+=S.total;for(_=1;_<x.columnSpan&&!(m+_>=t.columnCount);_++)S=t.getColumnDefinition(m+_),d.width+=S.total;var C=y.ha+d.width,M=g.ha+d.height;_=s,S=a;var P=C,T=M,N=s,A=a,E=C,L=M;s+C>n.width&&(E=Math.max(n.width-s,0)),a+M>n.height&&(L=Math.max(n.height-a,0));var O=x.alignment;if(O.Mb()){(O=t.defaultAlignment).jb()||(O=le);var D=O.x,j=O.y,F=O.offsetX;O=O.offsetY;var I=y.alignment,R=g.alignment;I.jb()&&(D=I.x,F=I.offsetX),R.jb()&&(j=R.y,O=R.offsetY)}else D=O.x,j=O.y,F=O.offsetX,O=O.offsetY;(isNaN(D)||isNaN(j))&&(j=D=.5,O=F=0),I=k.width,R=k.height;var B=x.margin,z=B.left+B.right,V=B.top+B.bottom,U=ra(x,g,y,!1);!isNaN(x.desiredSize.width)||U!==_s&&U!==Ts||(I=Math.max(C-z,0)),!isNaN(x.desiredSize.height)||U!==_s&&U!==Ns||(R=Math.max(M-V,0)),C=x.maxSize,M=x.minSize,I=Math.min(C.width,I),R=Math.min(C.height,R),I=Math.max(M.width,I),R=Math.max(M.height,R),_+=P*D-(I+z)*D+F+B.left,S+=T*j-(C=R+V)*j+O+B.top,x.visible&&(Xt(N,A,E,L,_,S,k.width,k.height)?x.arrange(_,S,I,R):x.arrange(_,S,I,R,new Rt(N,A,E,L)))}else x.xl(),x.actualBounds.da(),_=Rt.allocAt((P=x.actualBounds).x,P.y,P.width,P.height),P.x=S.type===Ml.TableRow?o:s,P.y=S.type===Ml.TableColumn?r:a,P.width=k.width,P.height=k.height,x.actualBounds.freeze(),pa(x,!1),Ut(_,P)||null!==(k=x.part)&&(k.Mh(),x.ep(k)),Rt.free(_)}}}for(Dt.free(d),t=0;t<i;t++)null===(o=(n=e[t])instanceof Ml?n:null)||o.type!==Ml.TableRow&&o.type!==Ml.TableColumn||(o=n.actualBounds,n.naturalBounds.da(),n.naturalBounds.h(0,0,o.width,o.height),n.naturalBounds.freeze())},u(vl,cl),vl.prototype.measure=function(){},vl.prototype.arrange=function(){},u(bl,cl),bl.prototype.measure=function(){},bl.prototype.arrange=function(){},u(wl,cl),wl.prototype.measure=function(t,e,n,i,r,o,s){1<i.length&&v("Viewbox Panel cannot contain more than one GraphObject."),(i=i[0]).ya=1,i.vm(),i.measure(1/0,1/0,o,s);var a=i.measuredBounds,l=i.margin,h=l.right+l.left;if(l=l.top+l.bottom,isFinite(e)||isFinite(n)){var u=i.scale,c=a.width;a=a.height;var f=Math.max(e-h,0),d=Math.max(n-l,0),p=1;t.viewboxStretch===Ms?0!==c&&0!==a&&(p=Math.min(f/c,d/a)):0!==c&&0!==a&&(p=Math.max(f/c,d/a)),0===p&&(p=1e-4),i.ya*=p,u!==i.scale&&(fa(i,!0),i.measure(1/0,1/0,o,s))}a=i.measuredBounds,r.width=isFinite(e)?e:Math.max(a.width+h,0),r.height=isFinite(n)?n:Math.max(a.height+l,0)},wl.prototype.arrange=function(t,e,n){var i=(e=e[0]).measuredBounds,r=e.margin,o=Math.max(i.width+(r.right+r.left),0);r=Math.max(i.height+(r.top+r.bottom),0);var s=e.alignment;s.Mb()&&(s=t.defaultAlignment),s.jb()||(s=le),e.arrange(n.width*s.x-o*s.x+s.offsetX,n.height*s.y-r*s.y+s.offsetY,i.width,i.height)},u(xl,cl),xl.prototype.measure=function(){},xl.prototype.arrange=function(){},xl.prototype.ac=function(t,e,n){0>=(n=t.Af()*n.scale)&&(n=1);var i=t.gridCellSize,r=i.width;i=i.height;var o=t.naturalBounds,s=t.actualBounds,a=o.width,l=o.height,h=Math.ceil(a/r),u=Math.ceil(l/i),c=t.gridOrigin;e.save(),e.beginPath(),e.rect(0,0,a,l),e.clip();for(var f=[],d=t.W.j,p=d.length,g=0;g<p;g++){var m=d[g],y=[];if(f.push(y),m.visible){var v=m.interval;if(!(0>v)){m=Al(m.figure);for(var b=0;b<p;b++)if(b!==g){var w=d[b];w.visible&&Al(w.figure)===m&&(w=w.interval)>v&&y.push(w)}}}}for(p=(d=t.W.j).length,g=0;g<p;g++){var x=d[g];if(x.visible&&(y=x.interval,!(2>r*Math.abs(y)*n))){if(m=1,1!==(v=x.opacity)){if(0===v)continue;e.globalAlpha=(m=e.globalAlpha)*v}b=f[g],w=!1;var k=x.strokeDashArray;if(null!==k&&(w=!0,e.Ct(k,x.strokeDashOffset)),"LineV"===x.figure&&null!==x.stroke&&0<x.strokeWidth){for(e.lineWidth=x.strokeWidth,Qs(t,e,x.stroke,!1,!1,o,s),e.beginPath(),k=x=Math.floor(-c.x/r);k<=x+h;k++){var S=k*r+c.x;0<=S&&S<=a&&kl(k,y,b)&&(e.moveTo(S,0),e.lineTo(S,l))}e.stroke()}else if("LineH"===x.figure&&null!==x.stroke&&0<x.strokeWidth){for(e.lineWidth=x.strokeWidth,Qs(t,e,x.stroke,!1,!1,o,s),e.beginPath(),k=x=Math.floor(-c.y/i);k<=x+u;k++)0<=(S=k*i+c.y)&&S<=l&&kl(k,y,b)&&(e.moveTo(0,S),e.lineTo(a,S));e.stroke()}else if("BarV"===x.figure&&null!==x.fill)for(Qs(t,e,x.fill,!0,!1,o,s),x=x.width,isNaN(x)&&(x=r),S=k=Math.floor(-c.x/r);S<=k+h;S++){var _=S*r+c.x;0<=_&&_<=a&&kl(S,y,b)&&e.fillRect(_,0,x,l)}else if("BarH"===x.figure&&null!==x.fill)for(Qs(t,e,x.fill,!0,!1,o,s),x=x.height,isNaN(x)&&(x=i),S=k=Math.floor(-c.y/i);S<=k+u;S++)0<=(_=S*i+c.y)&&_<=l&&kl(S,y,b)&&e.fillRect(0,_,a,x);w&&e.At(),1!==v&&(e.globalAlpha=m)}}e.restore(),e.sc(!1)},u(Sl,cl),Sl.prototype.measure=function(t,e,n,i,r){if(n=i.length,t instanceof Pu||t instanceof Qu){var o=null,s=null,a=null;if(t instanceof Qu&&(s=o=t),t instanceof Pu&&(o=(a=t).adornedPart),o instanceof Qu){var l=o;if(0===n)Bt(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var h=t instanceof Pu?null:o.path,u=o.routeBounds;(e=t.xg).h(0,0,u.width,u.height);var c=l.points;o=o.pointsCount,null!==a?a.zk(!1):null!==s&&s.zk(!1);var f=u.width,d=u.height;t.location.h(u.x,u.y),t.l.length=0,null!==h&&(_l(t,f,d,h),e.Pc(a=h.measuredBounds),t.l.push(a)),a=Ge.alloc();for(var p=dt.alloc(),g=dt.alloc(),m=0;m<n;m++){var y=i[m];if(y!==h)if(y.isPanelMain&&y instanceof ih){_l(t,f,d,y);var v=y.measuredBounds;e.Pc(v),t.l.push(v)}else if(2>o)y.measure(1/0,1/0,0,0),e.Pc(v=y.measuredBounds),t.l.push(v);else{var b=y.segmentIndex,w=y.segmentFraction,x=y.alignmentFocus;x.lc()&&(x=le);var k=y.segmentOrientation,S=y.segmentOffset;if(isNaN(b)){var _=l.na;v=T(),_.Tv(w,v);var C=dt.allocAt(v[0],v[1]);if(C.add(l.i(0)),_.type===sn||(_=_.figures.first()),C.offset(-_.startX,-_.startY),_=v[2],k!==Cc){var M=l.computeAngle(y,k,_);y.Xb=M}M=C.x-u.x;var P=C.y-u.y;dt.free(C),N(v)}else if(b<-o||b>=o)P=l.midPoint,_=l.midAngle,k!==Cc&&(M=l.computeAngle(y,k,_),y.Xb=M),M=P.x-u.x,P=P.y-u.y;else{if(M=0,0<=b?(P=c.J(b),v=b<o-1?c.J(b+1):P):(P=c.J(M=o+b),v=0<M?c.J(M-1):P),P.Na(v)){0<=b?(_=0<b?c.J(b-1):P,M=b<o-2?c.J(b+2):v):(_=M<o-1?c.J(M+1):P,M=1<M?c.J(M-2):v),C=_.Fe(P);var A=v.Fe(M);_=C>A+10?0<=b?_.Sa(P):P.Sa(_):A>C+10?0<=b?v.Sa(M):M.Sa(v):0<=b?_.Sa(M):M.Sa(_)}else _=0<=b?P.Sa(v):v.Sa(P);k!==Cc&&(M=l.computeAngle(y,k,_),y.Xb=M),M=P.x+(v.x-P.x)*w-u.x,P=P.y+(v.y-P.y)*w-u.y}y.measure(1/0,1/0,0,0),v=y.measuredBounds;var E=0;y instanceof ih&&(E=y.strokeWidth),A=(C=y.naturalBounds).width+E;var L=C.height+E;a.reset(),a.translate(-v.x,-v.y),a.scale(y.scale,y.scale),a.rotate(k===Cc?y.angle:_,A/2,L/2),k!==Oc&&k!==Ic||a.rotate(90,A/2,L/2),k!==Dc&&k!==Rc||a.rotate(-90,A/2,L/2),k===Bc&&(45<_&&135>_||225<_&&315>_)&&a.rotate(-_,A/2,L/2),C=new Rt(0,0,A,L),p.qj(C,x),a.sa(p),x=E/2*y.scale-p.x,y=E/2*y.scale-p.y,g.assign(S),E=isNaN(S.x);var O=isNaN(S.y);if(E||O){A=A/2+3,L=L/2+3;var D=45<=_&&135>=_,j=225<=_&&315>=_;k===Cc&&(D||j)?(g.x=O?A:S.y,g.y=E?L:S.x,D?0<=b||isNaN(b)&&.5>w||!E||(g.y=-L):j&&((0<=b||isNaN(b)&&.5>w)&&E&&(g.y=-L),O&&(g.x=-A))):(E&&(g.x=0<=b||isNaN(b)&&.5>w?A:-A),O&&(g.y=-L),g.rotate(_))}else g.rotate(_);M+=g.x,P+=g.y,C.set(v),C.h(M+x,P+y,v.width,v.height),t.l.push(C),e.Pc(C)}}if(null!==s)for(i=s.labelNodes;i.next();)i.value.measure(1/0,1/0);t.xg=e,(t=t.location).h(t.x+e.x,t.y+e.y),Bt(r,e.width||0,e.height||0),Ge.free(a),dt.free(p),dt.free(g)}}}},Sl.prototype.arrange=function(t,e){var n=e.length;if(t instanceof Pu||t instanceof Qu){var i=null,r=null,o=null;t instanceof Qu&&(r=i=t),t instanceof Pu&&(i=(o=t).adornedPart);var s=t instanceof Pu?null:i.path;if(0!==t.l.length){var a=t.l,l=0;if(null!==s&&l<t.l.length){var h=a[l];l++,s.arrange(h.x-t.xg.x,h.y-t.xg.y,h.width,h.height)}for(h=0;h<n;h++){var u=e[h];if(u!==s&&l<t.l.length){var c=a[l];l++,u.arrange(c.x-t.xg.x,c.y-t.xg.y,c.width,c.height)}}}if(2<=(n=(e=i.points).count)&&t instanceof Qu)for(i=t.labelNodes;i.next();){var f=t;a=(s=i.value).segmentIndex,l=s.segmentFraction;var d=s.alignmentFocus;if(h=s.segmentOrientation,u=s.segmentOffset,isNaN(a)){c=f.na;var p=T();c.Tv(l,p);var g=dt.allocAt(p[0],p[1]);g.add(f.i(0)),c.type===sn||(c=c.figures.first()),g.offset(-c.startX,-c.startY),c=p[2],h!==Cc&&(f=f.computeAngle(s,h,c),s.angle=f),f=g.x;var m=g.y;dt.free(g),N(p)}else if(a<-n||a>=n)m=f.midPoint,c=f.midAngle,h!==Cc&&(f=f.computeAngle(s,h,c),s.angle=f),f=m.x,m=m.y;else{if(g=0,0<=a?(p=e.j[a],m=a<n-1?e.j[a+1]:p):(p=e.j[g=n+a],m=0<g?e.j[g-1]:p),p.Na(m)){0<=a?(c=0<a?e.j[a-1]:p,g=a<n-2?e.j[a+2]:m):(c=g<n-1?e.j[g+1]:p,g=1<g?e.j[g-2]:m);var y=c.Fe(p),v=m.Fe(g);c=y>v+10?0<=a?c.Sa(p):p.Sa(c):v>y+10?0<=a?m.Sa(g):g.Sa(m):0<=a?c.Sa(g):g.Sa(c)}else c=0<=a?p.Sa(m):m.Sa(p);h!==Cc&&(f=f.computeAngle(s,h,c),s.angle=f),f=p.x+(m.x-p.x)*l,m=p.y+(m.y-p.y)*l}if(d.Rt())s.location=new dt(f,m);else{d.lc()&&(d=le),(p=Ge.alloc()).reset(),p.scale(s.scale,s.scale),p.rotate(s.angle,0,0);var b=s.naturalBounds;g=Rt.allocAt(0,0,b.width,b.height),(y=dt.alloc()).qj(g,d),p.sa(y),d=-y.x,v=-y.y;var w=b.width,x=b.height;(b=dt.alloc()).assign(u);var k=isNaN(u.x),S=isNaN(u.y);if(k||S){w=w/2+3,x=x/2+3;var _=45<=c&&135>=c,C=225<=c&&315>=c;h===Cc&&(_||C)?(b.x=S?w:u.y,b.y=k?x:u.x,_?0<=a||isNaN(a)&&.5>l||!k||(b.y=-x):C&&((0<=a||isNaN(a)&&.5>l)&&k&&(b.y=-x),S&&(b.x=-w))):(k&&(b.x=0<=a||isNaN(a)&&.5>l?w:-w),S&&(b.y=-x),b.rotate(c))}else b.rotate(c);f+=b.x,m+=b.y,p.Lw(g),a=dt.allocAt(f+(d+=g.x),m+(v+=g.y)),s.move(a),dt.free(a),dt.free(b),dt.free(y),Rt.free(g),Ge.free(p)}}null!==o?o.zk(!1):null!==r&&r.zk(!1)}},u(Cl,cl),Cl.prototype.measure=function(t,e,n,i,r,o,s){var a=t.qb();t.bh=[];var l=a.margin,h=l.right+l.left,u=l.top+l.bottom;a.measure(e,n,o,s);var c=a.measuredBounds,f=new Rt(-l.left,-l.top,Math.max(c.width+h,0),Math.max(c.height+u,0));t.bh.push(f),r.assign(f);for(var d=a.geometry,p=a.strokeWidth,g=d.flattenedSegments,m=d.flattenedLengths,y=d.flattenedTotalLength,v=g.length,b=0,w=0,x=T(),k=0;k<v;k++){var S=g[k],_=[];w=b=0;for(var C=S.length,M=0;M<C;M+=2){var P=S[M],A=S[M+1];if(0!==M){var E=180*Math.atan2(A-w,P-b)/Math.PI;0>E&&(E+=360),_.push(E)}b=P,w=A}x.push(_)}if(null===t.dh){for(var L=[],O=t.W.j,D=O.length,j=0;j<D;j++){var F=O[j],I=[];if(L.push(I),F.visible){var R=F.interval;if(!(0>R))for(var B=0;B<D;B++)if(B!==j){var z=O[B];if(z.visible&&F.constructor===z.constructor){var V=z.interval;V>R&&I.push(V)}}}}t.dh=L}var U=t.dh,q=t.W.j,H=q.length,G=0,Y=0,X=y;t.Hj=[];for(var K,W=0;W<H;W++){var $=q[W];if(K=[],$.visible&&$!==a){var Z=Math.abs($.interval),J=t.graduatedTickUnit;if(!(2>J*Z*y/t.graduatedRange)){var Q=m[0][0],tt=0,et=0;Y=y*$.graduatedStart-1e-4,X=y*$.graduatedEnd+1e-4;var nt=J*Z,it=t.graduatedTickBase;if(it<t.graduatedMin){var rt=(t.graduatedMin-it)/nt;it+=(rt=0==rt%1?rt:Math.floor(rt+1))*nt}else it>t.graduatedMin+nt&&(it-=Math.floor((it-t.graduatedMin)/nt)*nt);for(var ot=U[W];it<=t.graduatedMax;){t:{for(var st=ot.length,at=0;at<st;at++)if(Xe.$((it-t.graduatedTickBase)%(ot[at]*t.graduatedTickUnit),0)){var lt=!1;break t}lt=!0}if(lt&&(null===$.graduatedSkip||!$.graduatedSkip(it))&&((G=(it-t.graduatedMin)*y/t.graduatedRange)>y&&(G=y),Y<=G&&G<=X)){for(var ht=x[tt][et],ut=m[tt][et];tt<m.length;){for(;G>Q&&et<m[tt].length-1;)et++,ht=x[tt][et],Q+=ut=m[tt][et];if(G<=Q)break;ht=x[++tt][et=0],Q+=ut=m[tt][et]}var ct=g[tt],ft=ct[2*et],pt=ct[2*et+1],gt=(G-(Q-ut))/ut,mt=new dt(ft+(ct[2*et+2]-ft)*gt+p/2-d.bounds.x,pt+(ct[2*et+3]-pt)*gt+p/2-d.bounds.y);mt.scale(a.scale,a.scale);var yt=ht,vt=x[tt];if(1e-4>gt?0<et?yt=vt[et-1]:Xe.$(ct[0],ct[ct.length-2])&&Xe.$(ct[1],ct[ct.length-1])&&(yt=vt[vt.length-1]):.9999<gt&&(et+1<vt.length?yt=vt[et+1]:Xe.$(ct[0],ct[ct.length-2])&&Xe.$(ct[1],ct[ct.length-1])&&(yt=vt[0])),ht!==yt&&(180<Math.abs(ht-yt)&&(ht<yt?ht+=360:yt+=360),ht=(ht+yt)/2%360),$ instanceof dh){var bt="";""!==(bt=null!==$.graduatedFunction?null!=(bt=$.graduatedFunction(it))?bt.toString():"":(+it.toFixed(2)).toString())&&K.push({Fm:mt,angle:ht,text:bt})}else K.push({Fm:mt,angle:ht})}it+=nt}}}t.Hj.push(K)}N(x);var wt=t.Hj;if(null!==wt)for(var xt=i.length,kt=0;kt<xt;kt++){var St=i[kt],_t=wt[kt];if(St.visible&&St!==a&&0!==_t.length){if(St instanceof ih){var Ct=t,Mt=r,Pt=St.alignmentFocus;Pt.lc()&&(Pt=oe);var Tt=St.angle;St.Xb=0,St.measure(1/0,1/0,0,0),St.Xb=Tt;var Nt=St.measuredBounds,At=Nt.width,Et=Nt.height,Lt=Rt.allocAt(0,0,At,Et),Ot=dt.alloc();Ot.qj(Lt,Pt),Rt.free(Lt);for(var Dt=-Ot.x,jt=-Ot.y,Ft=new Rt,It=_t.length,Bt=0;Bt<It;Bt++)for(var zt=_t[Bt],Vt=zt.Fm.x,Ut=zt.Fm.y,qt=zt.angle,Ht=0;4>Ht;Ht++){switch(Ht){case 0:Ot.h(Dt,jt);break;case 1:Ot.h(Dt+At,jt);break;case 2:Ot.h(Dt,jt+Et);break;case 3:Ot.h(Dt+At,jt+Et)}Ot.rotate(qt+St.angle),Ot.offset(Vt,Ut),0===Bt&&0===Ht?Ft.h(Ot.x,Ot.y,0,0):Ft.Me(Ot),Ot.offset(-Vt,-Ut),Ot.rotate(-qt-St.angle)}dt.free(Ot),null!==Ct.bh&&Ct.bh.push(Ft),Yt(Mt,Ft.x,Ft.y,Ft.width,Ft.height)}else if(St instanceof dh){var Gt=t,Xt=r;null===Gt.xh&&(Gt.xh=new dh);var Kt=Gt.xh;ph(Kt,St);var Wt=St.alignmentFocus;Wt.lc()&&(Wt=oe);for(var $t=St.segmentOrientation,Zt=St.segmentOffset,Jt=new Rt,Qt=0,te=0,ee=0,ne=0,ie=0,re=_t.length,se=0;se<re;se++){var ae=_t[se];Qt=ae.Fm.x,te=ae.Fm.y,ee=ae.angle,ie=ne=St.angle,$t!==Cc&&(ne=Qu.computeAngle($t,ie=$t===Lc||$t===Fc?ee+St.angle:ee)),Kt.Xb=ne,Kt.text=ae.text||"",Kt.measure(1/0,1/0,0,0);var le=Kt.measuredBounds,he=Kt.naturalBounds,ue=he.width,ce=he.height,fe=Ge.alloc();fe.reset(),fe.translate(-le.x,-le.y),fe.scale(Kt.scale,Kt.scale),fe.rotate(ie,ue/2,ce/2),$t!==Oc&&$t!==Ic||fe.rotate(90,ue/2,ce/2),$t!==Dc&&$t!==Rc||fe.rotate(-90,ue/2,ce/2),$t===Bc&&(45<ee&&135>ee||225<ee&&315>ee)&&fe.rotate(-ee,ue/2,ce/2);var de=Rt.allocAt(0,0,ue,ce),pe=dt.alloc();pe.qj(de,Wt),fe.sa(pe);var ge=-pe.x,me=-pe.y,ye=dt.alloc();ye.assign(Zt),isNaN(ye.x)&&(ye.x=ue/2+3),isNaN(ye.y)&&(ye.y=-(ce/2+3)),ye.rotate(ee);var ve=new Rt(Qt+=ye.x+ge,te+=ye.y+me,le.width,le.height),be=new Rt(le.x,le.y,le.width,le.height),we=new Rt(he.x,he.y,he.width,he.height);ae.zA=ne,ae.lineCount=Kt.lineCount,ae.lines=[Kt.tb,Kt.Bi,Kt.ke,Kt.xe,Kt.Pb,Kt.kb,Kt.ie],ae.actualBounds=ve,ae.measuredBounds=be,ae.naturalBounds=we,0===se?Jt.assign(ve):Jt.Pc(ve),dt.free(ye),dt.free(pe),Rt.free(de),Ge.free(fe)}null!==Gt.bh&&Gt.bh.push(Jt),Yt(Xt,Jt.x,Jt.y,Jt.width,Jt.height)}fa(St,!1)}}},Cl.prototype.arrange=function(t,e,n){if(null!==t.bh){var i=t.qb(),r=t.Hj;if(null!==r){var o=t.bh,s=0,a=o[s];s++,null!==i&&i.arrange(a.x-n.x,a.y-n.y,a.width,a.height);for(var l=e.length,h=0;h<l;h++){var u=e[h];a=r[h],u.visible&&u!==i&&0!==a.length&&(a=o[s],s++,u.arrange(a.x-n.x,a.y-n.y,a.width,a.height))}t.bh=null}}},Cl.prototype.ac=function(t,e,n){var i=n.vi;n.vi=!0;var r=t.naturalBounds,o=r.width;r=r.height,e.save(),e.beginPath(),e.rect(-1,-1,o+1,r+1),e.clip(),(o=t.qb()).ac(e,n),0>=(r=t.Af()*n.scale)&&(r=1);for(var s=o.actualBounds,a=t.W.j,l=t.Hj,h=a.length,u=0;u<h;u++){var c=a[u],f=l[u],d=f.length;if(c.visible&&c!==o&&0!==f.length)if(c instanceof ih){if(!(2>t.graduatedTickUnit*c.interval*o.geometry.flattenedTotalLength/t.graduatedRange*r)){var p=c.measuredBounds,g=c.strokeWidth*c.scale,m=c.alignmentFocus;m.lc()&&(m=oe);for(var y=0;y<d;y++){var v=f[y].Fm,b=f[y].angle,w=m,x=c.pb;x.reset(),x.translate(v.x+s.x,v.y+s.y),x.rotate(b+c.angle,0,0),x.translate(-p.width*w.x+w.offsetX+g/2,-p.height*w.y+w.offsetY+g/2),x.scale(c.scale,c.scale),ha(c,!1),c.Xh.set(c.pb),c.hl=c.scale,ua(c,!1),c.ac(e,n),c.pb.reset()}}}else if(c instanceof dh)for(null===t.xh&&(t.xh=new dh),ph(p=t.xh,c),c=0;c<d;c++)(g=f[c]).actualBounds&&g.measuredBounds&&g.naturalBounds&&(p.Tb=g.text||"",p.Xb=g.zA||0,p.Wc=g.lineCount||0,void 0!==(m=g.lines)&&(p.tb=m[0],p.Bi=m[1],p.ke=m[2],p.xe=m[3],p.Pb=m[4],p.kb=m[5],p.ie=m[6]),g.naturalBounds&&(p.pc=g.naturalBounds),g.actualBounds&&p.arrange((m=g.actualBounds).x,m.y,m.width,m.height),p.arrange((m=g.actualBounds).x,m.y,m.width,m.height),y=g.measuredBounds,g=g.naturalBounds,(v=p.pb).reset(),v.translate(m.x+s.x,m.y+s.y),v.translate(-y.x,-y.y),ea(p,v,g.x,g.y,g.width,g.height),ha(p,!1),p.Xh.set(p.pb),p.hl=p.scale,ua(p,!1),p.ac(e,n))}n.vi=i,e.restore(),e.sc(!0)},u(Ml,Ys),Ml.prototype.cloneProtected=function(t){if(Ys.prototype.cloneProtected.call(this,t),t.pa=this.pa,t.hb=this.hb.G(),t.Hn=this.Hn.G(),t.Rf=this.Rf,t.pa===Ml.Table){t.Aj=this.Aj.G(),t.Ug=this.Ug,t.pi=this.pi,t.oi=this.oi,t.Tg=this.Tg,t.Sg=this.Sg,t.ni=this.ni;var e=[];if(0<this.ub.length)for(var n=this.ub,i=n.length,r=0;r<i;r++)if(void 0!==n[r]){var o=n[r].copy();o.pj(t),e[r]=o}if(t.ub=e,e=[],0<this.rb.length)for(i=(n=this.rb).length,r=0;r<i;r++)void 0!==n[r]&&((o=n[r].copy()).pj(t),e[r]=o);t.rb=e,t.Zj=this.Zj,t.xj=this.xj,t.Vi=this.Vi,t.Di=this.Di}t.jq=this.jq,t.ho=this.ho.G(),t.io=this.io.G(),t.co=this.co,t.bo=this.bo,t.fo=this.fo,t.eo=this.eo,t.Hj=this.Hj,t.dh=this.dh,t.mb=this.mb,t.ji=this.ji,t.vo=this.vo,t.zi=this.zi,t.pe=this.pe,t.Bl=this.Bl,t.xg.assign(this.xg),t.Lg=this.Lg,null!==this.Dp&&(t.Dp=this.Dp)},Ml.prototype.yf=function(t){Ys.prototype.yf.call(this,t),t.W=this.W;for(var e=t.W.j,n=e.length,i=0;i<n;i++)e[i].og=t;t.Si=null},Ml.prototype.copy=function(){var t=Ys.prototype.copy.call(this);if(null!==t){for(var e=this.W.j,n=e.length,i=0;i<n;i++){var r=e[i].copy();r.pj(t),r.Wj=null;var o=t.W,s=o.count;if(o.vb(s,r),null!==(o=t.part)){o.Sj=null,null!==r.portId&&o instanceof Tu&&(o.Lh=!0);var a=t.diagram;null!==a&&a.undoManager.isUndoingRedoing||o.ab(Mn,"elements",t,null,r,null,s)}}return t}return null},(e=Ml.prototype).toString=function(){return"Panel("+this.type+")#"+ot(this)},e.ep=function(t){Ys.prototype.ep.call(this,t);for(var e=this.W.j,n=e.length,i=0;i<n;i++)e[i].ep(t)},e.cj=function(t,e){if(this.pa===Ml.Grid)this.pa.ac(this,t,e);else if(this.pa===Ml.Graduated)this.pa.ac(this,t,e);else{this.pa===Ml.Table&&(t.lineCap="butt",Nl(this,t,!0,this.ub,!0),Nl(this,t,!1,this.rb,!0),Tl(this,t,!0,this.ub),Tl(this,t,!1,this.rb),Nl(this,t,!0,this.ub,!1),Nl(this,t,!1,this.rb,!1));var n=this.isClipping&&this.pa===Ml.Spot;n&&t.save();for(var i=this.qb(),r=this.W.j,o=r.length,s=0;s<o;s++){var a=r[s];n&&a===i&&(t.clipInsteadOfFill=!0),a.ac(t,e),n&&a===i&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.sc(!0))}},e.tk=function(t,e,n,i,r){var o=this.de(),s=this.transform,a=1/(s.m11*s.m22-s.m12*s.m21),l=s.m22*a,h=-s.m12*a,u=-s.m21*a,c=s.m11*a,f=a*(s.m21*s.dy-s.m22*s.dx),d=a*(s.m12*s.dx-s.m11*s.dy);if(null!==this.areaBackground)return Xe.cd((s=this.actualBounds).left,s.top,s.right,s.bottom,t,e,n,i,r);if(null!==this.background)return o=t*l+e*u+f,a=t*h+e*c+d,t=n*l+i*u+f,l=n*h+i*c+d,r.h(0,0),o=Xe.cd(0,0,(n=this.naturalBounds).width,n.height,o,a,t,l,r),r.transform(s),o;o||(l=1,u=h=0,c=1,d=f=0),a=t*l+e*u+f,t=t*h+e*c+d,r.h(l=n*l+i*u+f,n=n*h+i*c+d),i=(l-a)*(l-a)+(n-t)*(n-t),h=!1,d=(c=this.W.j).length,u=dt.alloc(),f=null,e=1/0;var p=null,g=this.isClipping&&this.pa===Ml.Spot;g&&(p=dt.alloc(),(h=(f=this.qb()).tk(a,t,l,n,p))&&(e=(a-p.x)*(a-p.x)+(t-p.y)*(t-p.y)));for(var m=0;m<d;m++){var y=c[m];y.visible&&y!==f&&y.tk(a,t,l,n,u)&&(h=!0,(y=(a-u.x)*(a-u.x)+(t-u.y)*(t-u.y))<i&&(i=y,r.set(u)))}return g&&(e>i&&r.set(p),dt.free(p)),dt.free(u),o&&r.transform(s),h},e.o=function(t){if(!0!==ca(this)){Ys.prototype.o.call(this,t),t=null,this.pa!==Ml.Auto&&this.pa!==Ml.Link||(t=this.qb());for(var e=this.W.j,n=e.length,i=0;i<n;i++){var r=e[i];if((r===t||r.isPanelMain)&&r.o(!0),!r.desiredSize.u()){var o=ia(r,!1);(r instanceof Ju||r instanceof Ml||r instanceof dh||o!==Cs)&&r.o(!0)}}}},e.vm=function(){if(!1===ca(this)){fa(this,!0),pa(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].vm()}},e.xl=function(){if(0!=(2048&this.F)==0){ha(this,!0),ua(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].Zv()}},e.Zv=function(){ua(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].Zv()},e.zm=function(t,e,n,i){var r=this.xg;r.h(0,0,0,0);var o=this.desiredSize,s=this.minSize;void 0===n&&(n=s.width,i=s.height),n=Math.max(n,s.width),i=Math.max(i,s.height);var a=this.maxSize;isNaN(o.width)||(t=Math.min(o.width,a.width)),isNaN(o.height)||(e=Math.min(o.height,a.height)),t=Math.max(n,t),e=Math.max(i,e);var l=this.hb;t=Math.max(t-l.left-l.right,0),e=Math.max(e-l.top-l.bottom,0);var h=this.W.j;0!==h.length&&this.pa.measure(this,t,e,h,r,n,i),t=r.width+l.left+l.right,l=r.height+l.top+l.bottom,isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(l=o.height),t=Math.min(a.width,t),l=Math.min(a.height,l),t=Math.max(s.width,t),l=Math.max(s.height,l),Bt(r,t=Math.max(n,t),l=Math.max(i,l)),Bt(this.naturalBounds,t,l),Ws(this,0,0,t,l)},e.qb=function(){if(null===this.Si){var t=this.W.j,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var i=t[n];if(!0===i.isPanelMain)return this.Si=i}this.Si=t[0]}return this.Si},e.Gh=function(t,e,n,i){var r=this.W.j;if(this.actualBounds.h(t,e,n,i),0!==r.length){if(!this.desiredSize.u()){t=ia(this,!0);var o=this.measuredBounds;e=o.width,o=o.height;var s=this.ih,a=s.left+s.right;switch(s=s.top+s.bottom,e===n&&o===i&&(t=Cs),t){case Cs:(e>n||o>i)&&(this.o(),this.measure(e>n?n:e,o>i?i:o,0,0));break;case _s:this.o(!0),this.measure(n+a,i+s,0,0);break;case Ts:this.o(!0),this.measure(n+a,o+s,0,0);break;case Ns:this.o(!0),this.measure(e+a,i+s,0,0)}}this.pa.arrange(this,r,this.xg)}},e.Ih=function(t){var e=this.naturalBounds,n=El(this);if(Xt(0,0,e.width,e.height,t.x,t.y)){for(var i=(e=this.W.j).length,r=dt.allocAt(0,0);i--;){var o=e[i];if((o.visible||o===n)&&(yt(r.set(t),o.transform),o.aa(r)))return dt.free(r),!0}return dt.free(r),null!==this.lb||null!==this.cc}return!1},e.Dt=function(t){if(this.Vk===t)return this;for(var e=this.W.j,n=e.length,i=0;i<n;i++){var r=e[i].Dt(t);if(null!==r)return r}return null},e.Vm=function(t,e){if(e(this,t),t instanceof Ml)for(var n=(t=t.W.j).length,i=0;i<n;i++)this.Vm(t[i],e)},e.om=function(t){return Fl(this,this,t)},e.$a=function(t){if(this.name===t)return this;var e=this.W.j,n=e.length;null===this.zi&&null===this.pe||(n=Hl(this));for(var i=0;i<n;i++){var r=e[i];if(r instanceof Ml){var o=r.$a(t);if(null!==o)return o}if(r.name===t)return r}return null},e.de=function(){return!(this.type===Ml.TableRow||this.type===Ml.TableColumn)},e.Ub=function(t,e,n){if(!1===this.pickable)return null;if(void 0===e&&(e=null),void 0===n&&(n=null),da(this))return null;var i=this.naturalBounds,r=1/this.Af(),o=this.de(),s=o?t:yt(dt.allocAt(t.x,t.y),this.transform),a=this.diagram,l=10,h=5;if(null!==a&&(h=(l=a.tm("extraTouchArea"))/2),Xt(-h*r,-h*r,i.width+l*r,i.height+l*r,s.x,s.y)){if(!this.isAtomic){var u=(r=this.W.j).length;if(a=dt.alloc(),h=(l=this.isClipping&&this.pa===Ml.Spot)?this.qb():null,l&&(h.de()?yt(a.set(t),h.transform):a.set(t),!h.aa(a)))return dt.free(a),o||dt.free(s),null;for(var c=El(this);u--;){var f=r[u];if((f.visible||f===c)&&(f.de()?yt(a.set(t),f.transform):a.set(t),!l||f!==h)){var d=null;if(f instanceof Ml?d=f.Ub(a,e,n):!0===f.pickable&&f.aa(a)&&(d=f),null!==d&&(null!==e&&(d=e(d)),null!==d&&(null===n||n(d))))return dt.free(a),o||dt.free(s),d}}dt.free(a)}return null===this.background&&null===this.areaBackground?(o||dt.free(s),null):(t=Xt(0,0,i.width,i.height,s.x,s.y)?this:null,o||dt.free(s),t)}return o||dt.free(s),null},e.fj=function(t,e,n,i){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var r=this.naturalBounds,o=this.de(),s=o?t:yt(dt.allocAt(t.x,t.y),this.transform);if(r=Xt(0,0,r.width,r.height,s.x,s.y),this.type===Ml.TableRow||this.type===Ml.TableColumn||r){if(!this.isAtomic){for(var a=this.W.j,l=a.length,h=dt.alloc(),u=El(this);l--;){var c=a[l];if(c.visible||c===u){c.de()?yt(h.set(t),c.transform):h.set(t);var f=c;(null!==(c=c instanceof Ml?c:null)?c.fj(h,e,n,i):f.aa(h))&&!1!==f.pickable&&(null!==e&&(f=e(f)),null===f||null!==n&&!n(f)||i.add(f))}}dt.free(h)}return o||dt.free(s),r&&(null!==this.background||null!==this.areaBackground)}return o||dt.free(s),!1},e.zf=function(t,e,n,i,r,o){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var s=o;if(void 0===o&&(s=Ge.alloc()).reset(),s.multiply(this.transform),this.Hh(t,s))return Rl(this,e,n,r),void 0===o&&Ge.free(s),!0;if(this.Kc(t,s)){if(!this.isAtomic)for(var a=El(this),l=this.W.j,h=l.length;h--;){var u=l[h];if(u.visible||u===a){var c=u.actualBounds,f=this.naturalBounds;c.x>f.width||c.y>f.height||0>c.x+c.width||0>c.y+c.height||(c=u,u=u instanceof Ml?u:null,(f=Ge.alloc()).set(s),(null!==u?u.zf(t,e,n,i,r,f):$s(c,t,i,f))&&(null!==e&&(c=e(c)),null===c||null!==n&&!n(c)||r.add(c)),Ge.free(f))}}return void 0===o&&Ge.free(s),i}return void 0===o&&Ge.free(s),!1},e.Eg=function(t,e,n,i,r,o){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===i&&(i=null);var s=this.naturalBounds,a=this.de(),l=a?t:yt(dt.allocAt(t.x,t.y),this.transform),h=a?e:yt(dt.allocAt(e.x,e.y),this.transform),u=l.Fe(h),c=0<l.x&&l.x<s.width&&0<l.y&&l.y<s.height||vt(l.x,l.y,0,0,0,s.height)<=u||vt(l.x,l.y,0,s.height,s.width,s.height)<=u||vt(l.x,l.y,s.width,s.height,s.width,0)<=u||vt(l.x,l.y,s.width,0,0,0)<=u;if(s=l.md(0,0)<=u&&l.md(0,s.height)<=u&&l.md(s.width,0)<=u&&l.md(s.width,s.height)<=u,a||(dt.free(l),dt.free(h)),c){if(!this.isAtomic){l=dt.alloc(),h=dt.alloc(),u=El(this);for(var f=this.W.j,d=f.length;d--;){var p=f[d];if(p.visible||p===u){var g=p.actualBounds,m=this.naturalBounds;a&&(g.x>m.width||g.y>m.height||0>g.x+g.width||0>g.y+g.height)||(p.de()?(g=p.transform,yt(l.set(t),g),yt(h.set(e),g)):(l.set(t),h.set(e)),g=p,(null!==(p=p instanceof Ml?p:null)?p.Eg(l,h,n,i,r,o):g.oy(l,h,r))&&(null!==n&&(g=n(g)),null===g||null!==i&&!i(g)||o.add(g)))}}dt.free(l),dt.free(h)}return r?c:s}return!1},e.add=function(t){this.vb(this.W.count,t)},e.J=function(t){return this.W.J(t)},e.vb=function(t,e){e instanceof ou&&v("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.Gg(e))&&(this===e&&v("Cannot make a Panel contain itself: "+this.toString()),v("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(null!==n&&n!==this&&v("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.pa!==Ml.Grid||e instanceof ih||v("Can only add Shapes to a Grid Panel, not: "+e),this.pa!==Ml.Graduated||e instanceof ih||e instanceof dh||v("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.pj(this),e.Wj=null,null!==this.itemArray){var i=e.data;null!==i&&"object"==typeof i&&(null===this.Td&&(this.Td=new ft),this.Td.add(i,e))}var r=this.W;if(i=-1,n===this){for(var o=-1,s=this.W.j,a=s.length,l=0;l<a;l++)if(s[l]===e){o=l;break}if(-1!==o){if(o===t||o+1>=r.count&&t>=r.count)return;r.bb(o),i=o}else v("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.vb(t,e),(0===t||e.isPanelMain)&&(this.Si=null),ca(this)||this.o(),e.o(!1),(null!==e.portId||e instanceof Ml&&!0===e.Lh)&&(this.Lh=!0),this.dh=null,null!==(n=this.part)&&(n.Sj=null,n.jh=NaN,this.Lh&&n instanceof Tu&&(n.Lh=!0),n.Lh&&n instanceof Tu&&(n.rc=null),null!==(r=this.diagram)&&r.undoManager.isUndoingRedoing||(-1!==i&&n.ab(Pn,"elements",this,e,null,i,null),n.ab(Mn,"elements",this,null,e,null,t),this.Hg()||Xl(this,e,!1)))},e.remove=function(t){for(var e=this.W.j,n=e.length,i=-1,r=0;r<n;r++)if(e[r]===t){i=r;break}-1!==i&&this.Jc(i,!0)},e.bb=function(t){0<=t&&this.Jc(t,!0)},e.Jc=function(t,e){var n=this.W,i=n.J(t);if(i.Wj=null,i.pj(null),null!==this.Td){var r=i.data;"object"==typeof r&&this.Td.remove(r)}n.bb(t),fa(this,!1),this.o(),this.Si===i&&(this.Si=null),this.dh=null;var o=this.part;null!==o&&(o.Sj=null,o.jh=NaN,o.Lb(),o instanceof Tu&&(i instanceof Ml?i.Vm(i,function(t,n){Bu(o,n,e)}):Bu(o,i,e)),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||o.ab(Pn,"elements",this,i,null,t,null))},Ml.prototype.getRowDefinition=function(t){0>t&&w(t,">= 0",Ml,"getRowDefinition:idx"),t=Math.round(t);var e=this.ub;if(void 0===e)return null;if(void 0===e[t]){var n=new Jl;n.pj(this),n.isRow=!0,n.index=t,e[t]=n}return e[t]},Ml.prototype.qw=function(t){0>t&&w(t,">= 0",Ml,"removeRowDefinition:idx"),t=Math.round(t);var e=this.ub;void 0!==e&&(this.ab(Pn,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},Ml.prototype.getColumnDefinition=function(t){0>t&&w(t,">= 0",Ml,"getColumnDefinition:idx"),t=Math.round(t);var e=this.rb;if(void 0===e)return null;if(void 0===e[t]){var n=new Jl;n.pj(this),n.isRow=!1,n.index=t,e[t]=n}return e[t]},(e=Ml.prototype).ow=function(t){0>t&&w(t,">= 0",Ml,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.rb;void 0!==e&&(this.ab(Pn,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},e.Wz=function(t){if(0>t||this.type!==Ml.Table)return-1;for(var e=0,n=this.ub,i=n.length,r=this.Vi;r<i;r++){var o=n[r];if(void 0!==o&&t<(e+=o.total))break}return r},e.Oz=function(t){if(0>t||this.type!==Ml.Table)return-1;for(var e=0,n=this.rb,i=n.length,r=this.Di;r<i;r++){var o=n[r];if(void 0!==o&&t<(e+=o.total))break}return r},e.lA=function(t,e){if(void 0===e&&(e=new dt(NaN,NaN)),this.type!==Ml.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.qb();return n.geometry.Sv((t-this.graduatedMin)/this.graduatedRange,e),n.transform.sa(e)},e.mA=function(t){if(this.type!==Ml.Graduated)return NaN;var e=this.qb();return e.transform.Dd(t),e.geometry.ty(t)*this.graduatedRange+this.graduatedMin},e.Bz=function(t){void 0===t&&(t=!1);var e=this.copy();return Dl(e,function(t){t instanceof Ml&&(t.ji=null,t.mb=null);var e=t.eb;null!==e&&(t.eb=null,e.each(function(e){t.bind(e.copy())})),null!==(e=t.Mg)&&(t.Mg=null,e.each(function(e){t.Mw(e.value.copy())}))}),t&&ql(e),e},e.Ca=function(t){var e=this.ji;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((""===t||""===i||i===t)&&(i=n.targetProperty,null!==n.converter||""!==i)){i=this.data;var r=n.sourceName;if(null!==r)i=""===r||"/"===r||"."===r||".."===r?this:this.$a(r);else{var o=this.diagram;null!==o&&n.isToModel&&(i=o.model.modelData)}if(null!==i){o=this;var s=n.tj;if(-1!==s){if(null===(o=this.Dt(s)))continue}else null!==n.ld&&(o=n.ld);if("/"===r?i=o.part:"."===r?i=o:".."===r&&(i=o.panel),0!==(r=n.aq)){if(!(o instanceof Ml))continue;1===r?o=o.getColumnDefinition(n.em):2===r&&(o=o.getRowDefinition(n.em))}void 0!==o&&n.Pw(o,i)}}}},e.au=function(){for(var t=Hl(this);this.W.length>t;)this.Jc(this.W.length-1,!1);if(null!==(t=this.itemArray))for(var e=t.length,n=0;n<e;n++)Gl(this,t[n],n)},e.ny=function(t){return null==t||null===this.Td?null:this.Td.H(t)},c.Object.defineProperties(Ml.prototype,{type:{get:function(){return this.pa},set:function(t){var e=this.pa;e!==t&&(this.pa=t,this.pa===Ml.Grid?this.isAtomic=!0:this.pa===Ml.Table&&Pl(this),this.o(),this.g("type",e,t))}},elements:{get:function(){return this.W.iterator}},naturalBounds:{get:function(){return this.pc}},padding:{get:function(){return this.hb},set:function(t){"number"==typeof t?(0>t&&w(t,">= 0",Ml,"padding"),t=new Jt(t)):(0>t.left&&w(t.left,">= 0",Ml,"padding:value.left"),0>t.right&&w(t.right,">= 0",Ml,"padding:value.right"),0>t.top&&w(t.top,">= 0",Ml,"padding:value.top"),0>t.bottom&&w(t.bottom,">= 0",Ml,"padding:value.bottom"));var e=this.hb;e.w(t)||(this.hb=t=t.G(),this.o(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e.w(t)||(this.Hn=t=t.G(),this.o(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Rf},set:function(t){var e=this.Rf;e!==t&&(this.Rf=t,this.o(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.Aj?ee:this.Aj},set:function(t){if(void 0!==this.Aj){"number"==typeof t&&(t=new Jt(t));var e=this.Aj;e.w(t)||(this.Aj=t=t.G(),this.o(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return void 0===this.pi?null:this.pi},set:function(t){var e=this.pi;e!==t&&(null===t||"string"==typeof t||t instanceof Fa)&&(t instanceof Fa&&t.freeze(),this.pi=t,this.M(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Ug?1:this.Ug},set:function(t){if(void 0!==this.Ug){var e=this.Ug;e!==t&&isFinite(t)&&0<=t&&(this.Ug=t,this.o(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.oi?null:this.oi},set:function(t){if(void 0!==this.oi){var e=this.oi;if(e!==t){if(null!==t){for(var n=t.length,i=0,r=0;r<n;r++){var o=t[r];"number"==typeof o&&0<=o&&isFinite(o)||v("defaultRowSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),i+=o}if(0===i){if(null===e)return;t=null}}this.oi=t,this.M(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.Sg?null:this.Sg},set:function(t){if(void 0!==this.Sg){var e=this.Sg;e!==t&&(null===t||"string"==typeof t||t instanceof Fa)&&(t instanceof Fa&&t.freeze(),this.Sg=t,this.M(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Tg?1:this.Tg},set:function(t){if(void 0!==this.Tg){var e=this.Tg;e!==t&&isFinite(t)&&0<=t&&(this.Tg=t,this.o(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.ni?null:this.ni},set:function(t){if(void 0!==this.ni){var e=this.ni;if(e!==t){if(null!==t){for(var n=t.length,i=0,r=0;r<n;r++){var o=t[r];"number"==typeof o&&0<=o&&isFinite(o)||v("defaultColumnSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),i+=o}if(0===i){if(null===e)return;t=null}}this.ni=t,this.M(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.jq},set:function(t){var e=this.jq;e!==t&&(this.jq=t,this.o(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.ho},set:function(t){var e=this.ho;if(!e.w(t)){t.u()&&0!==t.width&&0!==t.height||v("Invalid Panel.gridCellSize: "+t),this.ho=t.G();var n=this.diagram;null!==n&&this===n.grid&&Po(n),this.M(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.io},set:function(t){var e=this.io;if(!e.w(t)){t.u()||v("Invalid Panel.gridOrigin: "+t),this.io=t.G();var n=this.diagram;null!==n&&this===n.grid&&Po(n),this.M(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.co},set:function(t){var e=this.co;e!==t&&(this.co=t,this.o(),this.g("graduatedMin",e,t),aa(this)&&null!==(t=this.part)&&Ks(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return this.bo},set:function(t){var e=this.bo;e!==t&&(this.bo=t,this.o(),this.g("graduatedMax",e,t),aa(this)&&null!==(t=this.part)&&Ks(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.fo},set:function(t){var e=this.fo;e!==t&&0<t&&(this.fo=t,this.o(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.o(),this.g("graduatedTickBase",e,t))}},Lh:{get:function(){return 0!=(8388608&this.F)},set:function(t){0!=(8388608&this.F)!==t&&(this.F^=8388608)}},rowCount:{get:function(){return void 0===this.ub?0:this.ub.length}},columnCount:{get:function(){return void 0===this.rb?0:this.rb.length}},rowSizing:{get:function(){return void 0===this.Zj?nh:this.Zj},set:function(t){if(void 0!==this.Zj){var e=this.Zj;e!==t&&(this.Zj=t,this.o(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return void 0===this.xj?nh:this.xj},set:function(t){if(void 0!==this.xj){var e=this.xj;e!==t&&(this.xj=t,this.o(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return void 0===this.Vi?0:this.Vi},set:function(t){if(void 0!==this.Vi){var e=this.Vi;e!==t&&((!isFinite(t)||0>t)&&v("Panel.topIndex must be greater than zero and a real number, not: "+t),this.Vi=t,this.o(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return void 0===this.Di?0:this.Di},set:function(t){if(void 0!==this.Di){var e=this.Di;e!==t&&((!isFinite(t)||0>t)&&v("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Di=t,this.o(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.mb},set:function(t){var e=this.mb;if(e!==t){var n=this instanceof ou&&!(this instanceof Pu);ql(this),this.mb=t;var i=this.diagram;null!==i&&(n?(n=i.partManager,this instanceof Qu?(null!==e&&n.Se.remove(e),null!==t&&n.Se.add(t,this)):this instanceof ou&&(null!==e&&n.Te.remove(e),null!==t&&n.Te.add(t,this))):null!==(n=this.panel)&&null!==n.Td&&(null!==e&&n.Td.remove(e),null!==t&&n.Td.add(t,this))),this.g("data",e,t),null!==i&&i.undoManager.isUndoingRedoing||null!==t&&this.Ca()}}},itemIndex:{get:function(){return this.vo},set:function(t){var e=this.vo;e!==t&&(this.vo=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.zi},set:function(t){var e=this.zi;if(e!==t||null!==t&&function(t,e){for(var n=(t=t.W.j).length,i=e.length,r=0,o=null;r<n&&!((o=t[r])instanceof Ml&&null!==o.data);)o=t[++r];if(n-r!==i)return!0;if(null===o)return 0<i;for(var s=0;r<n&&s<i;){if(!((o=t[r])instanceof Ml)||o.data!==e[s])return!0;r++,s++}return!1}(this,t)){var n=this.diagram;e!==t&&(null!==n&&null!==e&&Kf(n.partManager,this,n),this.zi=t,null!==n&&null!==t&&Xf(n.partManager,this)),this.g("itemArray",e,t),null!==n&&n.undoManager.isUndoingRedoing||this.au()}}},itemTemplate:{get:function(){return null===this.pe?null:this.pe.H("")},set:function(t){if(null===this.pe){if(null===t)return;this.pe=new ft}var e=this.pe.H("");e!==t&&((t instanceof ou||t.isPanelMain)&&v("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.pe.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.au())}},itemTemplateMap:{get:function(){return this.pe},set:function(t){var e=this.pe;if(e!==t){for(var n=t.iterator;n.next(););this.pe=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.au()}}},itemCategoryProperty:{get:function(){return this.Bl},set:function(t){var e=this.Bl;e!==t&&(this.Bl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.F)},set:function(t){var e=0!=(1048576&this.F);e!==t&&(this.F^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.F)},set:function(t){var e=0!=(2097152&this.F);e!==t&&(t&&this.type!==Ml.Spot&&x("Warning: Panel.isClipping set on non-Spot Panel: "+this.toString()),this.F^=2097152,this.o(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.F)},set:function(t){var e=0!=(33554432&this.F);e!==t&&(this.F^=33554432,this.o(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.F)},set:function(t){var e=0!=(4194304&this.F);if(e!==t){var n=null===this.panel||this.panel.Hg();this.F^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||n&&Xl(this,this,t)}}},alignmentFocusName:{get:function(){return this.Lg},set:function(t){var e=this.Lg;e!==t&&(this.Lg=t,this.o(),this.g("alignmentFocusName",e,t))}}}),c.Object.defineProperties(Ml,{Position:{get:function(){return Zl.H("Position")}},Horizontal:{get:function(){return Zl.H("Horizontal")}},Vertical:{get:function(){return Zl.H("Vertical")}},Spot:{get:function(){return Zl.H("Spot")}},Auto:{get:function(){return Zl.H("Auto")}},Table:{get:function(){return Zl.H("Table")}},Viewbox:{get:function(){return Zl.H("Viewbox")}},TableRow:{get:function(){return Zl.H("TableRow")}},TableColumn:{get:function(){return Zl.H("TableColumn")}},Link:{get:function(){return Zl.H("Link")}},Grid:{get:function(){return Zl.H("Grid")}},Graduated:{get:function(){return Zl.H("Graduated")}}}),Ml.prototype.findItemPanelForData=Ml.prototype.ny,Ml.prototype.rebuildItemElements=Ml.prototype.au,Ml.prototype.updateTargetBindings=Ml.prototype.Ca,Ml.prototype.copyTemplate=Ml.prototype.Bz,Ml.prototype.graduatedValueForPoint=Ml.prototype.mA,Ml.prototype.graduatedPointForValue=Ml.prototype.lA,Ml.prototype.findColumnForLocalX=Ml.prototype.Oz,Ml.prototype.findRowForLocalY=Ml.prototype.Wz,Ml.prototype.removeColumnDefinition=Ml.prototype.ow,Ml.prototype.removeRowDefinition=Ml.prototype.qw,Ml.prototype.removeAt=Ml.prototype.bb,Ml.prototype.remove=Ml.prototype.remove,Ml.prototype.insertAt=Ml.prototype.vb,Ml.prototype.elt=Ml.prototype.J,Ml.prototype.add=Ml.prototype.add,Ml.prototype.findObject=Ml.prototype.$a,Ml.prototype.findInVisualTree=Ml.prototype.om,Ml.prototype.walkVisualTreeFrom=Ml.prototype.Vm,Ml.prototype.findMainElement=Ml.prototype.qb;var Wl=!1,$l=null,Zl=new ft;function Jl(){it(this),this.og=null,this.ls=!0,this.Pa=0,this.Yc=NaN,this.mh=0,this.kh=1/0,this.yb=Te,this.la=this.ha=0,this.eb=null,this.Sp=th,this.ze=Ps,this.Mp=this.sg=null,this.Np=NaN,this.lb=this.ak=null,this.Dn=!1}function Ql(t){if(t.sizing===th){var e=t.og;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}Ml.className="Panel",Ml.definePanelLayout=Kl,Kl("Position",new fl),Kl("Vertical",new pl),Kl("Auto",new ml),Kl("Link",new Sl),Jl.prototype.copy=function(){var t=new Jl;return t.ls=this.ls,t.Pa=this.Pa,t.Yc=this.Yc,t.mh=this.mh,t.kh=this.kh,t.yb=this.yb,t.ha=this.ha,t.la=this.la,t.ze=this.ze,t.Sp=this.Sp,t.sg=null===this.sg?null:this.sg.G(),t.Mp=this.Mp,t.Np=this.Np,t.ak=null,null!==this.ak&&(t.separatorDashArray=C(this.separatorDashArray)),t.lb=this.lb,t.Dn=this.Dn,t.eb=this.eb,t},(e=Jl.prototype).zt=function(t){t.isRow?this.height=t.height:this.width=t.width,this.minimum=t.minimum,this.maximum=t.maximum,this.alignment=t.alignment,this.stretch=t.stretch,this.sizing=t.sizing,this.sg=null===t.separatorPadding?null:t.separatorPadding.G(),this.separatorStroke=t.separatorStroke,this.separatorStrokeWidth=t.separatorStrokeWidth,this.ak=null,t.separatorDashArray&&(this.ak=C(t.separatorDashArray)),this.background=t.background,this.coversSeparators=t.coversSeparators,this.eb=t.eb},e.ib=function(t){t.classType===Jl&&(this.sizing=t)},e.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+ot(this)},e.pj=function(t){this.og=t},e.Ev=function(){var t=0,e=0,n=this.og,i=this.isRow;if(null!==n&&n.type===Ml.Table)for(var r=i?n.ub.length:n.rb.length,o=0;o<r;o++){var s=i?n.ub[o]:n.rb[o];if(void 0!==s){e=s.index;break}}if(this.index!==e&&(null===(e=this.separatorStroke)&&null!==n&&(e=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==e&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(e=this.sg)){if(null===n)return t;e=n.defaultSeparatorPadding}return t+(this.isRow?e.top:e.left)},e.uc=function(){var t=0,e=this.og,n=0,i=this.isRow;if(null!==e&&e.type===Ml.Table)for(var r=i?e.ub.length:e.rb.length,o=0;o<r;o++){var s=i?e.ub[o]:e.rb[o];if(void 0!==s){n=s.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(i=this.sg)){if(null===e)return t;i=e.defaultSeparatorPadding}return t+(this.isRow?i.top+i.bottom:i.left+i.right)},e.Bb=function(t,e,n){var i=this.og;if(null!==i&&(i.ab(Cn,t,this,e,n,void 0,void 0),null!==this.eb&&null!==(e=i.diagram)&&!e.skipsModelSourceBindings&&null!==(i=i.gj())&&null!==(e=i.data)))for(n=this.eb.iterator;n.next();)n.value.hr(this,e,t,i)},e.bind=function(t){t.ld=this;var e=this.panel;if(null!==e){var n=e.gj();null!==n&&Ul(n)&&v("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e)}null===this.eb&&(this.eb=new tt),this.eb.add(t)},c.Object.defineProperties(Jl.prototype,{panel:{get:function(){return this.og}},isRow:{get:function(){return this.ls},set:function(t){this.ls=t}},index:{get:function(){return this.Pa},set:function(t){this.Pa=t}},height:{get:function(){return this.Yc},set:function(t){var e=this.Yc;e!==t&&(0>t&&w(t,">= 0",Jl,"height"),this.Yc=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("height",e,t))}},width:{get:function(){return this.Yc},set:function(t){var e=this.Yc;e!==t&&(0>t&&w(t,">= 0",Jl,"width"),this.Yc=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("width",e,t))}},minimum:{get:function(){return this.mh},set:function(t){var e=this.mh;e!==t&&((0>t||!isFinite(t))&&w(t,">= 0",Jl,"minimum"),this.mh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("minimum",e,t))}},maximum:{get:function(){return this.kh},set:function(t){var e=this.kh;e!==t&&(0>t&&w(t,">= 0",Jl,"maximum"),this.kh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("maximum",e,t))}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.w(t)||(this.yb=t.G(),null!==this.panel&&this.panel.o(),this.Bb("alignment",e,t))}},stretch:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,null!==this.panel&&this.panel.o(),this.Bb("stretch",e,t))}},separatorPadding:{get:function(){return this.sg},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.sg;null!==t&&null!==e&&e.w(t)||(null!==t&&(t=t.G()),this.sg=t,null!==this.panel&&this.panel.o(),this.Bb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.Mp},set:function(t){var e=this.Mp;e!==t&&(null!==t&&Ka(t,"RowColumnDefinition.separatorStroke"),t instanceof Fa&&t.freeze(),this.Mp=t,null!==this.panel&&this.panel.o(),this.Bb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Np},set:function(t){var e=this.Np;e!==t&&(this.Np=t,null!==this.panel&&this.panel.o(),this.Bb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.ak},set:function(t){var e=this.ak;if(e!==t){if(null!==t){for(var n=t.length,i=0,r=0;r<n;r++){var o=t[r];"number"==typeof o&&0<=o&&isFinite(o)||v("separatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),i+=o}if(0===i){if(null===e)return;t=null}}this.ak=t,null!==this.panel&&this.panel.M(),this.Bb("separatorDashArray",e,t)}}},background:{get:function(){return this.lb},set:function(t){var e=this.lb;e!==t&&(null!==t&&Ka(t,"RowColumnDefinition.background"),t instanceof Fa&&t.freeze(),this.lb=t,null!==this.panel&&this.panel.M(),this.Bb("background",e,t))}},coversSeparators:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,null!==this.panel&&this.panel.M(),this.Bb("coversSeparators",e,t))}},sizing:{get:function(){return this.Sp},set:function(t){var e=this.Sp;e!==t&&(this.Sp=t,null!==this.panel&&this.panel.o(),this.Bb("sizing",e,t))}},actual:{get:function(){return this.ha},set:function(t){this.ha=isNaN(this.Yc)?Math.max(Math.min(this.kh,t),this.mh):Math.max(Math.min(this.kh,this.Yc),this.mh)}},total:{get:function(){return this.ha+this.uc()},set:function(t){this.ha=isNaN(this.Yc)?Math.max(Math.min(this.kh,t),this.mh):Math.max(Math.min(this.kh,this.Yc),this.mh),this.ha=Math.max(0,this.ha-this.uc())}},position:{get:function(){return this.la},set:function(t){this.la=t}}}),Jl.prototype.bind=Jl.prototype.bind,Jl.prototype.computeEffectiveSpacing=Jl.prototype.uc,Jl.prototype.computeEffectiveSpacingTop=Jl.prototype.Ev;var th=new H(Jl,"Default",0),eh=new H(Jl,"None",1),nh=new H(Jl,"ProportionalExtra",2);function ih(){Ys.call(this),this.Ad=this.na=null,this.Tn="None",this.ao=Ps,this.Gc=this.kl="black",this.vh=1,this.am="butt",this.bm="miter",this.bk=10,this.th=null,this.uh=0,this.pf=this.nf=Te,this.lp=this.kp=NaN,this.no=!1,this.np=null,this.ll=this.hm="None",this.Sd=1,this.Qd=0,this.Od=1,this.Pd=null}function rh(t,e,n,i){var r=n.length;if(!(4>r)){var o=i.measuredBounds,s=Math.max(1,o.width);o=o.height;for(var a,l,h,u,c,f,d=n[0],p=n[1],g=0,m=T(),y=2;y<r;y+=2)0==(h=(a=n[y])-d)&&(h=.001),u=(d=(l=n[y+1])-p)/h,c=Math.atan2(d,h),f=Math.sqrt(h*h+d*d),m.push([h,c,u,f]),g+=f,d=a,p=l;d=n[0],p=n[1],h=i.measuredBounds.width,i instanceof ih&&(h-=i.strokeWidth),1>h&&(h=1),r=n=h,l=0!=(a=s/2),h=(f=m[y=0])[0],c=f[1],u=f[2],f=f[3];for(var v=0;.1<=g;){if(0===v&&(l?(r=n,r-=a,g-=a,l=!1):r=n,0===r&&(r=1)),r>g)return void N(m);r>f?(v=r-f,r=f):v=0;var b=Math.sqrt(r*r/(1+u*u));if(0>h&&(b=-b),t.translate(d+=b,p+=u*b),t.rotate(c),t.translate(-s/2,-o/2),0===v&&i.cj(t,e),t.translate(s/2,o/2),t.rotate(-c),t.translate(-d,-p),g-=r,f-=r,0!==v){if(++y===m.length)return void N(m);h=(f=m[y])[0],c=f[1],u=f[2],f=f[3],r=v}}N(m)}}function oh(t){var e=t.geometryStretch;return null!==t.Ad?e===Ps?_s:e:e===Ps?fh[t.figure].defaultStretch:e}function sh(t,e,n,i,r){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<i?(r.x=n.x,r.y=n.y,e):i}function ah(t,e,n,i,r,o,s,a,l){var h=!1,u=(r-s)*(e-i)-(o-a)*(t-n);return 0!==u&&(l.x=((r*a-o*s)*(t-n)-(r-s)*(t*i-e*n))/u,l.y=((r*a-o*s)*(e-i)-(o-a)*(t*i-e*n))/u,(t>n?t-n:n-t)<(e>i?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(l.y>t||Xe.$(l.y,t))&&(l.y<e||Xe.$(l.y,e))&&(h=!0)):(e=t<n?t:n,t=t<n?n:t,(l.x>e||Xe.$(l.x,e))&&(l.x<t||Xe.$(l.x,t))&&(h=!0)),h)}function lh(t,e,n,i){if(!t.cd(e,n,i))return!1;t=e.x,e=e.y;var r=n.x,o=n.y;return n=i.x,i=i.y,t===r?(e<o?(t=e,e=o):t=o,i>=t&&i<=e):(t<r?(i=t,t=r):i=r,n>=i&&n<=t)}function hh(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Lc,"None"!==t.hm?(t.segmentIndex=-1,t.alignmentFocus=je):"None"!==t.ll&&(t.segmentIndex=0,t.alignmentFocus=new ze(1-je.x,je.y)))}function uh(t){var e=ch[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=ch[n])){var i,r=null;for(i in Xe.Ym)if(i.toLowerCase()===n){r=i;break}if(null!==r)return t=Ze(Xe.Ym[r],!1),ch[r]=t,n!==r&&(ch[n]=r),r}}return"string"==typeof e?e:e instanceof Ke?t:null}Jl.className="RowColumnDefinition",Jl.Default=th,Jl.None=eh,Jl.ProportionalExtra=nh,u(ih,Ys),ih.prototype.cloneProtected=function(t){Ys.prototype.cloneProtected.call(this,t),t.na=this.na,t.Tn=this.Tn,t.ao=this.ao,t.Ad=this.Ad,t.kl=this.kl,t.Gc=this.Gc,t.vh=this.vh,t.am=this.am,t.bm=this.bm,t.bk=this.bk,null!==this.th&&(t.th=C(this.th)),t.uh=this.uh,t.nf=this.nf.G(),t.pf=this.pf.G(),t.kp=this.kp,t.lp=this.lp,t.no=this.no,t.np=this.np,t.hm=this.hm,t.ll=this.ll,t.Sd=this.Sd,t.Qd=this.Qd,t.Od=this.Od,t.Pd=this.Pd},(e=ih.prototype).ib=function(t){t===Cs||t===Ms||t===As||t===Ps?this.geometryStretch=t:Ys.prototype.ib.call(this,t)},e.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+ot(this)},e.cj=function(t,e){var n=this.Gc,i=this.kl;if(null!==n||null!==i){var r=this.actualBounds,o=this.naturalBounds;null!==i&&Qs(this,t,i,!0,!1,o,r);var s=this.part,a=this.vh;null===n||0!==a||null===s||!this.isPanelMain&&s.qb()!==this||(a=s.type===Ml.Link&&s instanceof Pu&&"Selection"===s.category&&s.adornedObject instanceof ih&&s.adornedPart.qb()===s.adornedObject?s.adornedObject.strokeWidth:0),null!==n&&0!==a&&(Qs(this,t,n,!1,!1,o,r),t.lineWidth=a,t.lineJoin=this.bm,t.lineCap=this.am,t.miterLimit=this.bk),r=!1,s&&e.Ge("drawShadows")&&(r=s.isShadowed),s=!0,null===n||null!==i&&"transparent"!==i||(s=!1),o=!1;var l=this.strokeDashArray;null!==l&&(o=!0,t.Ct(l,this.uh));var h=this.na;if(null!==h){if(h.type===sn)t.beginPath(),t.moveTo(h.startX,h.startY),t.lineTo(h.endX,h.endY),null!==i&&t.Zd(i),0!==a&&null!==n&&t.sj();else if(h.type===an){var u=h.startX;l=h.startY;var c=h.endX,f=h.endY;h=Math.min(u,c);var d=Math.min(l,f);u=Math.abs(c-u),l=Math.abs(f-l),t.beginPath(),t.rect(h,d,u,l),null!==i&&t.Zd(i),null!==n&&(s&&r&&Aa(t),0!==a&&(0!==u&&0!==l||(t.beginPath(),t.rect(h,d,Math.max(u,.1),Math.max(l,.1))),t.sj()),s&&r&&Ea(t))}else if(h.type===ln)u=h.startX,l=h.startY,c=h.endX,f=h.endY,h=Math.abs(c-u)/2,d=Math.abs(f-l)/2,u=Math.min(u,c)+h,l=Math.min(l,f)+d,t.beginPath(),t.moveTo(u,l-d),t.bezierCurveTo(u+Xe.Kg*h,l-d,u+h,l-Xe.Kg*d,u+h,l),t.bezierCurveTo(u+h,l+Xe.Kg*d,u+Xe.Kg*h,l+d,u,l+d),t.bezierCurveTo(u-Xe.Kg*h,l+d,u-h,l+Xe.Kg*d,u-h,l),t.bezierCurveTo(u-h,l-Xe.Kg*d,u-Xe.Kg*h,l-d,u,l-d),t.closePath(),null!==i&&t.Zd(i),0!==a&&null!==n&&(s&&r?(Aa(t),t.sj(),Ea(t)):t.sj());else if(h.type===hn)for(h=(l=h.figures).length,d=0;d<h;d++){u=l.j[d],t.beginPath(),t.moveTo(u.startX,u.startY),f=(c=u.segments.j).length;for(var p=null,g=0;g<f;g++){var m=c[g];switch(m.type){case gn:t.moveTo(m.endX,m.endY);break;case mn:t.lineTo(m.endX,m.endY);break;case yn:t.bezierCurveTo(m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY);break;case vn:t.quadraticCurveTo(m.point1X,m.point1Y,m.endX,m.endY);break;case bn:if(m.radiusX===m.radiusY){var y=Math.PI/180;t.arc(m.point1X,m.point1Y,m.radiusX,m.startAngle*y,(m.startAngle+m.sweepAngle)*y,0>m.sweepAngle,null!==p?p.endX:u.startX,null!==p?p.endY:u.startY)}else if(0===(y=(p=dn(m,u)).length))t.lineTo(m.centerX,m.centerY);else for(var b=0;b<y;b++){var w=p[b];0===b&&t.lineTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7])}break;case wn:if(b=y=0,null!==p&&p.type===bn){if(0===(w=(p=dn(p,u)).length)){t.lineTo(m.centerX,m.centerY);break}null!==(p=p[w-1]||null)&&(y=p[6],b=p[7])}else y=null!==p?p.endX:u.startX,b=null!==p?p.endY:u.startY;if(0===(y=(p=pn(m,u,y,b)).length)){t.lineTo(m.centerX,m.centerY);break}for(b=0;b<y;b++)t.bezierCurveTo((w=p[b])[2],w[3],w[4],w[5],w[6],w[7]);break;default:v("Segment not of valid type: "+m.type)}m.isClosed&&t.closePath(),p=m}r?u.isShadowed?(!0===u.isFilled&&"transparent"!==i&&null!==i&&t.Zd(i),0!==a&&null!==n&&(s&&Aa(t),t.sj(),s&&Ea(t))):(s&&Aa(t),!0===u.isFilled&&"transparent"!==i&&null!==i&&t.Zd(i),0!==a&&null!==n&&t.sj(),s&&Ea(t)):(!0===u.isFilled&&null!==i&&t.Zd(i),0!==a&&null!==n&&t.sj())}if(o&&t.At(),null!==this.pathPattern){if((n=this.pathPattern).measure(1/0,1/0),n.arrange(0,0,(i=n.measuredBounds).width,i.height),a=this.geometry,t.save(),t.beginPath(),i=T(),a.type===sn)i.push(a.startX),i.push(a.startY),i.push(a.endX),i.push(a.endY),rh(t,e,i,n);else if(a.type===hn)for(a=a.figures.iterator;a.next();){for(r=a.value,i.length=0,i.push(r.startX),i.push(r.startY),l=s=r.startX,h=o=r.startY,u=(d=r.segments.j).length,c=0;c<u;c++){switch((f=d[c]).type){case gn:rh(t,e,i,n),i.length=0,i.push(f.endX),i.push(f.endY),l=s=f.endX,h=o=f.endY;break;case mn:i.push(f.endX),i.push(f.endY),s=f.endX,o=f.endY;break;case yn:Xe.Ce(s,o,f.point1X,f.point1Y,f.point2X,f.point2Y,f.endX,f.endY,.5,i),s=f.endX,o=f.endY;break;case vn:Xe.Sq(s,o,f.point1X,f.point1Y,f.endX,f.endY,.5,i),s=f.endX,o=f.endY;break;case bn:if(0===(m=(g=dn(f,r)).length)){i.push(f.centerX),i.push(f.centerY),s=f.centerX,o=f.centerY;break}for(p=0;p<m;p++)Xe.Ce(s,o,(y=g[p])[2],y[3],y[4],y[5],y[6],y[7],.5,i),s=y[6],o=y[7];break;case wn:if(0===(m=(g=pn(f,r,s,o)).length)){i.push(f.centerX),i.push(f.centerY),s=f.centerX,o=f.centerY;break}for(p=0;p<m;p++)Xe.Ce(s,o,(y=g[p])[2],y[3],y[4],y[5],y[6],y[7],.5,i),s=y[6],o=y[7];break;default:v("Segment not of valid type: "+f.type)}f.isClosed&&(i.push(l),i.push(h),rh(t,e,i,n))}rh(t,e,i,n)}else if(a.type===an)i.push(a.startX),i.push(a.startY),i.push(a.endX),i.push(a.startY),i.push(a.endX),i.push(a.endY),i.push(a.startX),i.push(a.endY),i.push(a.startX),i.push(a.startY),rh(t,e,i,n);else if(a.type===ln){if((o=new cn).startX=a.endX,o.startY=(a.startY+a.endY)/2,(s=new fn(bn)).startAngle=0,s.sweepAngle=360,s.centerX=(a.startX+a.endX)/2,s.centerY=(a.startY+a.endY)/2,s.radiusX=Math.abs(a.startX-a.endX)/2,s.radiusY=Math.abs(a.startY-a.endY)/2,o.add(s),0===(r=(a=dn(s,o)).length))i.push(s.centerX),i.push(s.centerY);else for(s=o.startX,o=o.startY,l=0;l<r;l++)Xe.Ce(s,o,(h=a[l])[2],h[3],h[4],h[5],h[6],h[7],.5,i),s=h[6],o=h[7];rh(t,e,i,n)}N(i),t.restore(),t.sc(!1)}}}},e.ga=function(t,e){if(void 0===e&&(e=new dt),t instanceof ze){t.lc()&&v("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,i=this.strokeWidth;e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)}else e.set(t);return this.Bd.sa(e),e},e.sm=function(t){void 0===t&&(t=new Rt);var e=this.naturalBounds,n=this.Bd;e=Rt.allocAt(e.x,e.y,e.width,e.height);var i=this.strokeWidth;return e.Hc(i/2,i/2),i=dt.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),Yt(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),Yt(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),Yt(t,i.x,i.y,0,0),Rt.free(e),dt.free(i),t},e.Ih=function(t,e){var n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;var i=n.bounds,r=this.strokeWidth/2;n.type!==sn||e||(r+=2);var o=Rt.alloc();if(o.assign(i),o.Hc(r+2,r+2),!o.aa(t))return Rt.free(o),!1;if(i=r+1e-4,n.type===sn)return null!==this.stroke&&(i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),!(0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>i)&&(Rt.free(o),Xe.Nb(n.startX,n.startY,n.endX,n.endY,r,t.x,t.y)));if(n.type===an){e=n.startX;var s=n.startY,a=n.endX;if(n=n.endY,o.x=Math.min(e,a),o.y=Math.min(s,n),o.width=Math.abs(a-e),o.height=Math.abs(n-s),null===this.fill){if(o.Hc(-i,-i),o.aa(t))return Rt.free(o),!1;o.Hc(i,i)}return null!==this.stroke&&o.Hc(r,r),t=o.aa(t),Rt.free(o),t}if(n.type===ln){s=n.startX,r=n.startY,a=n.endX;var l=n.endY;if(n=Math.min(s,a),e=Math.min(r,l),s=Math.abs(a-s)/2,r=Math.abs(l-r)/2,n=t.x-(n+s),e=t.y-(e+r),null===this.fill){if(r-=i,0>=(s-=i)||0>=r||1>=n*n/(s*s)+e*e/(r*r))return Rt.free(o),!1;s+=i,r+=i}return null!==this.stroke&&(s+=i,r+=i),Rt.free(o),!(0>=s||0>=r)&&1>=n*n/(s*s)+e*e/(r*r)}return n.type===hn?(Rt.free(o),null===this.fill?nn(n,t.x,t.y,r):tn(n,t,r,1<this.strokeWidth,e)):(v("Unknown Geometry type: "+n.type),!1)},e.zm=function(t,e,n,i){var r=this.desiredSize,o=this.vh;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Ad)var s=this.geometry.bounds;else{var a=this.figure,l=fh[a];if(void 0===l){var h=Xe.Oe[a];"string"==typeof h&&(h=Xe.Oe[h]),"function"==typeof h?(l=h(null,100,100),fh[a]=l):v("Unsupported Figure: "+a)}s=l.bounds}a=s.width,l=s.height,h=s.width;var u=s.height;switch(ia(this,!0)){case Cs:i=n=0;break;case _s:h=Math.max(t-o,0),u=Math.max(e-o,0);break;case Ts:h=Math.max(t-o,0),i=0;break;case Ns:n=0,u=Math.max(e-o,0)}switch(isFinite(r.width)&&(h=r.width),isFinite(r.height)&&(u=r.height),r=this.maxSize,s=this.minSize,n=Math.max(n-o,s.width),i=Math.max(i-o,s.height),h=Math.min(r.width,h),u=Math.min(r.height,u),h=isFinite(h)?Math.max(n,h):Math.max(a,n),u=isFinite(u)?Math.max(i,u):Math.max(l,i),n=oh(this)){case Cs:break;case _s:a=h,l=u;break;case Ms:n=Math.min(h/a,u/l),isFinite(n)||(n=1),a*=n,l*=n;break;default:v(n+" is not a valid geometryStretch.")}null!==this.Ad?(a=Math.max(a,.01),l=Math.max(l,.01),i=a/(r=(n=null!==this.Ad?this.Ad:this.na).bounds).width,r=l/r.height,isFinite(i)||(i=1),isFinite(r)||(r=1),this.na=1===i&&1===r?n:n.copy().scale(i,r)):null!==this.na&&Xe.$(this.na.vl,t-o)&&Xe.$(this.na.ul,e-o)||(this.na=ih.makeGeometry(this,a,l)),s=this.na.bounds,1/0===t||1/0===e?Ws(this,s.x-o/2,s.y-o/2,0===t&&0===a?0:s.width+o,0===e&&0===l?0:s.height+o):Ws(this,-o/2,-o/2,h+o,u+o)},e.Gh=function(t,e,n,i){Zs(this,t,e,n,i)},e.cd=function(t,e,n){return this.tk(t.x,t.y,e.x,e.y,n)},e.tk=function(t,e,n,i,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),a=o.m22*s,l=-o.m12*s,h=-o.m21*s,u=o.m11*s,c=s*(o.m21*o.dy-o.m22*o.dx),f=s*(o.m12*o.dx-o.m11*o.dy);if(o=t*a+e*h+c,s=t*l+e*u+f,a=n*a+i*h+c,l=n*l+i*u+f,c=this.vh/2,null===(h=this.na)&&(this.measure(1/0,1/0),h=this.na),f=h.bounds,u=!1,h.type===sn)if(1.5>=this.strokeWidth)u=Xe.Ie(h.startX,h.startY,h.endX,h.endY,o,s,a,l,r);else{if(h.startX===h.endX?(i=c,u=0):(e=(h.endY-h.startY)/(h.endX-h.startX),i=(u=c/Math.sqrt(1+e*e))*e),e=T(),t=new dt,Xe.Ie(h.startX+i,h.startY+u,h.endX+i,h.endY+u,o,s,a,l,t)&&e.push(t),t=new dt,Xe.Ie(h.startX-i,h.startY-u,h.endX-i,h.endY-u,o,s,a,l,t)&&e.push(t),t=new dt,Xe.Ie(h.startX+i,h.startY+u,h.startX-i,h.startY-u,o,s,a,l,t)&&e.push(t),t=new dt,Xe.Ie(h.endX+i,h.endY+u,h.endX-i,h.endY-u,o,s,a,l,t)&&e.push(t),0===(a=e.length))return N(e),!1;for(u=!0,l=1/0,i=0;i<a;i++)(n=((t=e[i]).x-o)*(t.x-o)+(t.y-s)*(t.y-s))<l&&(l=n,r.x=t.x,r.y=t.y);N(e)}else if(h.type===an)u=Xe.cd(f.x-c,f.y-c,f.x+f.width+c,f.y+f.height+c,o,s,a,l,r);else if(h.type===ln){t:if(0===(e=Rt.allocAt(f.x,f.y,f.width,f.height).Hc(c,c)).width)u=Xe.Ie(e.x,e.y,e.x,e.y+e.height,o,s,a,l,r);else if(0===e.height)u=Xe.Ie(e.x,e.y,e.x+e.width,e.y,o,s,a,l,r);else{if(i=e.x+(t=e.width/2),u=e.y+(h=e.height/2),n=9999,o!==a&&(n=(s-l)/(o-a)),9999>Math.abs(n)){if(0>t*t*n*n+h*h-(l=s-u-n*(o-i))*l){r.x=NaN,r.y=NaN,u=!1;break t}a=(-t*t*n*l+t*h*(c=Math.sqrt(t*t*n*n+h*h-l*l)))/(h*h+t*t*n*n)+i,t=(-t*t*n*l-t*h*c)/(h*h+t*t*n*n)+i,h=n*(a-i)+l+u,l=n*(t-i)+l+u,Math.abs((o-a)*(o-a))+Math.abs((s-h)*(s-h))<Math.abs((o-t)*(o-t))+Math.abs((s-l)*(s-l))?(r.x=a,r.y=h):(r.x=t,r.y=l)}else{if(a=h*h,0>(a-=a/(t*t)*(l=o-i)*l)){r.x=NaN,r.y=NaN,u=!1;break t}a=u+(l=Math.sqrt(a)),l=u-l,Math.abs(a-s)<Math.abs(l-s)?(r.x=o,r.y=a):(r.x=o,r.y=l)}u=!0}Rt.free(e)}else if(h.type===hn){f=dt.alloc();var d=a-o,p=l-s,g=d*d+p*p;r.x=a,r.y=l;for(var m=0;m<h.figures.count;m++)for(var y=h.figures.j[m],b=y.segments,w=d=y.startX,x=p=y.startY,k=0;k<b.count;k++){var S=b.j[k],_=S.type,C=S.endX,M=S.endY,P=!1;switch(_){case gn:w=C,x=M;break;case mn:P=ah(d,p,C,M,o,s,a,l,f);break;case yn:P=Xe.qq(d,p,S.point1X,S.point1Y,S.point2X,S.point2Y,C,M,o,s,a,l,.6,f);break;case vn:P=Xe.qq(d,p,d+2/3*(S.point1X-d),p+2/3*(S.point1Y-p),C+2/3*(S.point1X-C),M+2/3*(S.point1Y-M),C,M,o,s,a,l,.6,f);break;case bn:case wn:var A=(_=S.type===bn?dn(S,y):pn(S,y,d,p)).length;if(0===A){P=ah(d,p,S.centerX,S.centerY,o,s,a,l,f);break}for(M=null,C=0;C<A;C++){if(M=_[C],0===C&&ah(d,p,M[0],M[1],o,s,a,l,f)){var E=sh(o,s,f,g,r);E<g&&(g=E,u=!0)}Xe.qq(M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],o,s,a,l,.6,f)&&(E=sh(o,s,f,g,r))<g&&(g=E,u=!0)}C=M[6],M=M[7];break;default:v("Unknown Segment type: "+_)}d=C,p=M,P&&(P=sh(o,s,f,g,r))<g&&(g=P,u=!0),S.isClosed&&ah(d,p,C=w,M=x,o,s,a,l,f)&&(S=sh(o,s,f,g,r))<g&&(g=S,u=!0)}o=n-t,s=i-e,0!==(a=Math.sqrt(o*o+s*s))&&(o/=a,s/=a),r.x-=o*c,r.y-=s*c,dt.free(f)}else v("Unknown Geometry type: "+h.type);return!!u&&(this.transform.sa(r),!0)},e.Hh=function(t,e){if(void 0===e)return t.De(this.actualBounds);var n=this.na;null===n&&(this.measure(1/0,1/0),n=this.na),n=n.bounds;var i=this.strokeWidth/2,r=!1,o=dt.alloc();return o.h(n.x-i,n.y-i),t.aa(e.sa(o))&&(o.h(n.x-i,n.bottom+i),t.aa(e.sa(o))&&(o.h(n.right+i,n.bottom+i),t.aa(e.sa(o))&&(o.h(n.right+i,n.y-i),t.aa(e.sa(o))&&(r=!0)))),dt.free(o),r},e.Kc=function(t,e){if(this.Hh(t,e)||void 0===e&&(e=this.transform,t.De(this.actualBounds)))return!0;var n=Ge.alloc();n.set(e),n.Ot();var i=t.left,r=t.right,o=t.top;t=t.bottom;var s=dt.alloc();if(s.h(i,o),n.sa(s),this.Ih(s,!0))return dt.free(s),!0;if(s.h(r,o),n.sa(s),this.Ih(s,!0))return dt.free(s),!0;if(s.h(i,t),n.sa(s),this.Ih(s,!0))return dt.free(s),!0;if(s.h(r,t),n.sa(s),this.Ih(s,!0))return dt.free(s),!0;var a=dt.alloc(),l=dt.alloc();return n.set(e),n.ew(this.transform),n.Ot(),a.x=r,a.y=o,a.transform(n),s.x=i,s.y=o,s.transform(n),e=!1,lh(this,s,a,l)?e=!0:(s.x=r,s.y=t,s.transform(n),lh(this,s,a,l)?e=!0:(a.x=i,a.y=t,a.transform(n),lh(this,s,a,l)?e=!0:(s.x=i,s.y=o,s.transform(n),lh(this,s,a,l)&&(e=!0)))),dt.free(s),Ge.free(n),dt.free(a),dt.free(l),e},e.oy=function(t,e,n){function i(t,e){for(var n=t.length,i=0;i<n;i+=2)if(e.md(t[i],t[i+1])>r)return!0;return!1}if(n&&null!==this.fill&&this.Ih(t,!0))return!0;var r=t.Fe(e),o=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),null===(e=this.na)&&(this.measure(1/0,1/0),null===(e=this.na)))return!1;if(!n){var s=e.bounds,a=s.x,l=s.y,h=s.x+s.width;if(s=s.y+s.height,bt(t.x,t.y,a,l)<=r&&bt(t.x,t.y,h,l)<=r&&bt(t.x,t.y,a,s)<=r&&bt(t.x,t.y,h,s)<=r)return!0}if(a=e.startX,l=e.startY,h=e.endX,s=e.endY,e.type===sn){if(n=(a-h)*(t.x-h)+(l-s)*(t.y-s),vt(t.x,t.y,a,l,h,s)<=(0<=(h-a)*(t.x-a)+(s-l)*(t.y-l)&&0<=n?r:o))return!0}else{if(e.type===an)return e=!1,n&&(e=vt(t.x,t.y,a,l,a,s)<=r||vt(t.x,t.y,a,l,h,l)<=r||vt(t.x,t.y,h,l,h,s)<=r||vt(t.x,t.y,a,s,h,s)<=r),e;if(e.type===ln){e=t.x-(a+h)/2,o=t.y-(l+s)/2;var u=Math.abs(h-a)/2,c=Math.abs(s-l)/2;if(0===u||0===c)return vt(t.x,t.y,a,l,h,s)<=r;if(!n)return!(bt(e,o,-u,0)>=r||bt(e,o,0,-c)>=r||bt(e,o,0,c)>=r||bt(e,o,u,0)>=r);if((t=Xe.Hz(u,c,e,o))*t<=r)return!0}else if(e.type===hn){if(o=(h=e.bounds).x,a=h.y,l=h.x+h.width,h=h.y+h.height,t.x>l&&t.x<o&&t.y>h&&t.y<a&&vt(t.x,t.y,o,a,o,h)>r&&vt(t.x,t.y,o,a,l,a)>r&&vt(t.x,t.y,l,h,o,h)>r&&vt(t.x,t.y,l,h,l,a)>r)return!1;if(o=Math.sqrt(r),!n){for(n=e.figures,e=0;e<n.count;e++){if(t.md(s=(o=n.j[e]).startX,u=o.startY)>r)return!1;for(l=(a=o.segments.j).length,h=0;h<l;h++)switch(c=a[h],c.type){case gn:case mn:if(t.md(s=c.endX,u=c.endY)>r)return!1;break;case yn:var f=T();if(Xe.Ce(s,u,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.8,f),s=i(f,t),N(f),s)return!1;if(t.md(s=c.endX,u=c.endY)>r)return!1;break;case vn:if(f=T(),Xe.Sq(s,u,c.point1X,c.point1Y,c.endX,c.endY,.8,f),s=i(f,t),N(f),s)return!1;if(t.md(s=c.endX,u=c.endY)>r)return!1;break;case bn:case wn:var d=(f=c.type===bn?dn(c,o):pn(c,o,s,u)).length;if(0===d){if(t.md(s=c.centerX,u=c.centerY)>r)return!1;break}c=null;for(var p=T(),g=0;g<d;g++)if(c=f[g],p.length=0,Xe.Ce(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.8,p),i(p,t))return N(p),!1;N(p),null!==c&&(s=c[6],u=c[7]);break;default:v("Unknown Segment type: "+c.type)}}return!0}if(null===this.fill?nn(e,t.x,t.y,o):tn(e,t,o,!0,!1))return!0}}return!1},e.bc=function(){this.na=null},ih.makeGeometry=function(t,e,n){if("None"!==t.toArrow)var i=ch[t.toArrow];else"None"!==t.fromArrow?i=ch[t.fromArrow]:("string"==typeof(i=Xe.Oe[t.figure])&&(i=Xe.Oe[i]),void 0===i&&v("Unknown Shape.figure: "+t.figure),(i=i(t,e,n)).vl=e,i.ul=n);if(null===i){var r=Xe.Oe.Rectangle;"function"==typeof r&&(i=r(t,e,n))}return i},c.Object.defineProperties(ih.prototype,{geometry:{get:function(){return null!==this.na?this.na:this.Ad},set:function(t){var e=this.na,n=this.Ad;if(e!==t){this.Ad=this.na=null!==t?t.freeze():null;var i=this.part;null!==i&&(i.jh=NaN),this.o(),this.g("geometry",e||n,t),aa(this)&&null!==(t=this.part)&&Ks(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=Ze(t)).normalize();this.geometry=t,this.position=t=dt.allocAt(-e.x,-e.y),dt.free(t)}},isGeometryPositioned:{get:function(){return this.no},set:function(t){var e=this.no;e!==t&&(this.no=t,this.o(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.kl},set:function(t){var e=this.kl;e!==t&&(null!==t&&Ka(t,"Shape.fill"),t instanceof Fa&&t.freeze(),this.kl=t,this.M(),this.g("fill",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&Ka(t,"Shape.stroke"),t instanceof Fa&&t.freeze(),this.Gc=t,this.M(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.vh},set:function(t){var e=this.vh;if(e!==t)if(0<=t){this.vh=t,this.o();var n=this.part;null!==n&&(n.jh=NaN),this.g("strokeWidth",e,t)}else w(t,"value >= 0",ih,"strokeWidth:value")}},strokeCap:{get:function(){return this.am},set:function(t){var e=this.am;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?w(t,'"butt", "round", or "square"',ih,"strokeCap"):(this.am=t,this.M(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.bm},set:function(t){var e=this.bm;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?w(t,'"miter", "bevel", or "round"',ih,"strokeJoin"):(this.bm=t,this.M(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.bk},set:function(t){var e=this.bk;if(e!==t&&1<=t){this.bk=t,this.M();var n=this.part;null!==n&&(n.jh=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.th},set:function(t){var e=this.th;if(e!==t){if(null!==t){for(var n=t.length,i=0,r=0;r<n;r++){var o=t[r];0<=o&&isFinite(o)||v("strokeDashArray:value "+o+" at index "+r+" must be a positive number or zero."),i+=o}if(0===i){if(null===e)return;t=null}}this.th=t,this.M(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&0<=t&&(this.uh=t,this.M(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Tn},set:function(t){var e=this.Tn;if(e!==t){var n=Xe.Oe[t];"function"==typeof n?n=t:(n=Xe.Oe[t.toLowerCase()])||v("Unknown Shape.figure: "+t),e!==n&&(null!==(t=this.part)&&(t.jh=NaN),this.Tn=n,this.Ad=null,this.bc(),this.o(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.hm},set:function(t){var e=this.hm;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=uh(t);null===n?v("Unknown Shape.toArrow: "+t):e!==n&&(this.hm=n,this.Ad=null,this.bc(),this.o(),hh(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.ll},set:function(t){var e=this.ll;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=uh(t);null===n?v("Unknown Shape.fromArrow: "+t):e!==n&&(this.ll=n,this.Ad=null,this.bc(),this.o(),hh(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.nf},set:function(t){var e=this.nf;e.w(t)||(this.nf=t=t.G(),this.o(),this.g("spot1",e,t))}},spot2:{get:function(){return this.pf},set:function(t){var e=this.pf;e.w(t)||(this.pf=t=t.G(),this.o(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.kp},set:function(t){var e=this.kp;e!==t&&(this.kp=t,this.bc(),this.o(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.lp},set:function(t){var e=this.lp;e!==t&&(this.lp=t,this.bc(),this.o(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){if(null!==this.na)return this.pc.assign(this.na.bounds),this.pc;var t=this.desiredSize;return new Rt(0,0,t.width,t.height)}},pathPattern:{get:function(){return this.np},set:function(t){var e=this.np;e!==t&&(this.np=t,this.M(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.ao},set:function(t){var e=this.ao;e!==t&&(this.ao=t,this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Sd},set:function(t){var e=this.Sd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Sd=t;var n=this.diagram;null!==n&&this.panel===n.grid&&Po(n),this.o(),null!==(n=this.panel)&&(n.dh=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Qd},set:function(t){var e=this.Qd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Qd=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(0>t?t=0:1<t&&(t=1),this.Od=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Pd},set:function(t){var e=this.Pd;e!==t&&(this.Pd=t,this.o(),this.g("graduatedSkip",e,t))}}}),ih.prototype.intersectsRect=ih.prototype.Kc,ih.prototype.containedInRect=ih.prototype.Hh,ih.prototype.getNearestIntersectionPoint=ih.prototype.cd,ih.prototype.getDocumentBounds=ih.prototype.sm,ih.prototype.getDocumentPoint=ih.prototype.ga;var ch=new X,fh=new X;function dh(){Ys.call(this),Rh||(Ih=Zo?new La(null).context:null,Rh=!0),this.Gx=this.Tb="",this.Gc="black",this.je="13px sans-serif",this.Ti="start",this.Nd=Cs,this.Zi=Ee,this.Kj=!0,this.xi=this.yi=!1,this.mg=Th,this.zg=Mh,this.ss=this.tb=this.Wc=0,this.$u=this.av=null,this.Qn=!1,this.Bc=this.sn=this.bq=this.Ui=this.cq=null,this.mf=this.lf=0,this.re=1/0,this.Bi=0,this.ke=null,this.xe=0,this.ie=this.kb=this.Pb=null,this.Sd=1,this.Qd=0,this.Od=1,this.Pd=this.Gj=null}function ph(t,e){t.F=6144|e.F,t.gb=e.opacity,t.lb=e.background,t.cc=e.areaBackground,t.Vc=e.desiredSize.G(),t.fg=e.minSize.G(),t.eg=e.maxSize.G(),t.cg=e.cg.copy(),t.ya=e.scale,t.Xb=e.angle,t.ze=e.stretch,t.ih=e.margin.G(),t.yb=e.alignment.G(),t.Rk=e.alignmentFocus.G(),t.Rl=e.segmentFraction,t.Sl=e.segmentOffset.G(),t.Tl=e.segmentOrientation,null!==e.qd&&(t.qd=e.qd.copy()),t.Vl=e.shadowVisible,e instanceof dh&&(t.Tb=e.Tb,t.Gc=e.Gc,t.je=e.je,t.Ti=e.Ti,t.Nd=e.Nd,t.Zi=e.Zi,t.Kj=e.Kj,t.yi=e.yi,t.xi=e.xi,t.mg=e.mg,t.zg=e.zg,t.ke=null,t.lf=e.lf,t.mf=e.mf,t.re=e.re,t.Bi=e.Bi,t.Sd=e.Sd,t.Qd=e.Qd,t.Od=e.Od,t.Gj=e.Gj,t.Pd=e.Pd)}function gh(t,e,n){null===t.ie?(t.ie=e,t.tb=n):(null!==t.kb&&null!==t.Pb||(t.kb=[],t.Pb=[],t.kb.push(t.ie),t.Pb.push(t.tb)),t.kb.push(e),t.Pb.push(n))}function mh(t,e,n,i){e=e.trim();var r=0,o=t.je,s=t.lf+t.mf;s=Math.max(0,bh(t)+s);var a=t.mg===Nh?wh(o):0;if(t.Wc>=t.re)null!==i&&i.h(0,s);else{var l=e;if(t.zg===_h)if(t.xe=1,o=vh(e),0===a||o<=n)t.tb=Math.max(t.tb,o),gh(t,e,t.tb),null!==i&&i.h(o,s);else{for(o=vh((r=yh(t,l))+(e=yh(t,l=l.substr(r.length))));0<e.length&&o<=n;)o=vh(((r+=e)+(e=yh(t,l=l.substr(e.length)))).trim());for(r+=e.trim(),n=Math.max(1,n-a);vh(r)>n&&1<r.length;)r=r.substr(0,r.length-1);e=vh(r+=jh),t.tb=e,gh(t,r,e),null!==i&&i.h(e,s)}else{for(a=0,0===l.length&&(a=1,gh(t,l,0));0<l.length;){var h=yh(t,l);for(l=l.substr(h.length);vh(h)>n;){var u=1;for(o=vh(h.substr(0,u)),e=0;o<=n;)u++,e=o,o=vh(h.substr(0,u));if(1===u){var c=o;r=Math.max(r,o)}else c=e,r=Math.max(r,e);if(1>--u&&(u=1),gh(t,h.substr(0,u),c),a++,h=h.substr(u),t.Wc+a>t.re)break}for(o=vh(h+(e=yh(t,l)));0<e.length&&o<=n;)o=vh(((h+=e)+(e=yh(t,l=l.substr(e.length)))).trim());if(""!==(h=h.trim())&&("\xad"===h[h.length-1]&&(h=h.substring(0,h.length-1)+"\u2010"),0===e.length?(u=o,r=Math.max(r,o)):(u=e=vh(h),r=Math.max(r,e)),gh(t,h,u),a++,t.Wc+a>t.re))break}t.xe=Math.min(t.re,a),t.tb=Math.max(t.tb,r),null!==i&&i.h(t.tb,s*t.xe)}}}function yh(t,e){if(t.zg===Ph)return e.substr(0,1);t=e.length;for(var n=0,i=Ah;n<t&&!i.test(e.charAt(n));)n++;for(;n<t&&i.test(e.charAt(n));)n++;return n>=t?e:e.substr(0,n)}function vh(t){return null===Ih?8*t.length:Ih.measureText(t).width}function bh(t){if(null!==t.ke)return t.ke;var e=t.je;if(null===Ih){var n=16;return t.ke=n}return void 0!==Eh[e]&&5e3>Lh?n=Eh[e]:(n=1.3*Ih.measureText("M").width,Eh[e]=n,Lh++),t.ke=n}function wh(t){if(null===Ih)return 6;if(void 0!==Oh[t]&&5e3>Dh)var e=Oh[t];else e=Ih.measureText(jh).width,Oh[t]=e,Dh++;return e}function xh(t,e){var n=t.Tb.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),i=t.lf+t.mf;if(i=Math.max(0,bh(t)+i),0===n.length)return t.tb=0,t.Wc=1,i;if(!t.isMultiline){var r=n.indexOf("\n",0);0<=r&&(n=n.substr(0,r))}r=0;for(var o,s=t.Wc=0,a=!1;!a;){if(-1===(o=n.indexOf("\n",s))&&(o=n.length,a=!0),s<=o){if(s=n.substr(s,o-s),t.zg!==_h){t.xe=0;var l=Dt.alloc();mh(t,s,e,l),r+=l.height,Dt.free(l),t.Wc+=t.xe}else mh(t,s,e,null),r+=i,t.Wc++;t.Wc===t.re&&(a=!0)}s=o+1}return t.ss=r}ih.className="Shape",ih.getFigureGenerators=function(){var t,e=new ft;for(t in Xe.Oe)t!==t.toLowerCase()&&e.add(t,Xe.Oe[t]);return e.freeze(),e},ih.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=Xe.Oe;i[t]=e,i[n]=t},ih.getArrowheadGeometries=function(){var t=new ft;for(i in Xe.Ym)if(void 0===ch[i]){var e=Ze(Xe.Ym[i],!1);ch[i]=e,(e=i.toLowerCase())!==i&&(ch[e]=i)}for(var n in ch)if(n!==n.toLowerCase()){var i=ch[n];i instanceof Ke&&t.add(n,i)}return t.freeze(),t},ih.defineArrowheadGeometry=function(t,e){var n;n="string"==typeof e?Ze(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||v("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=ch;i[t]=n,i[e]=t},u(dh,Ys),dh.prototype.cloneProtected=function(t){Ys.prototype.cloneProtected.call(this,t),t.Tb=this.Tb,t.Gx=this.Gx,t.Gc=this.Gc,t.je=this.je,t.Ti=this.Ti,t.Nd=this.Nd,t.Zi=this.Zi,t.Kj=this.Kj,t.yi=this.yi,t.xi=this.xi,t.mg=this.mg,t.zg=this.zg,t.Wc=this.Wc,t.ss=this.ss,t.tb=this.tb,t.av=this.av,t.$u=this.$u,t.Qn=this.Qn,t.cq=this.cq,t.Ui=this.Ui,t.bq=this.bq,t.sn=this.sn,t.Bc=this.Bc,t.lf=this.lf,t.mf=this.mf,t.re=this.re,t.ke=this.ke,t.xe=this.xe,t.Pb=this.Pb,t.kb=this.kb,t.ie=this.ie,t.Bi=this.Bi,t.Sd=this.Sd,t.Qd=this.Qd,t.Od=this.Od,t.Gj=this.Gj,t.Pd=this.Pd},(e=dh.prototype).ib=function(t){t.classType===dh?this.wrap=t:Ys.prototype.ib.call(this,t)},e.toString=function(){return 22<this.Tb.length?'TextBlock("'+this.Tb.substring(0,20)+'"...)':'TextBlock("'+this.Tb+'")'},e.o=function(){Ys.prototype.o.call(this),this.$u=this.av=null},e.cj=function(t,e){if(null!==this.Gc&&0!==this.Tb.length&&null!==this.je){var n=this.naturalBounds,i=this.actualBounds,r=n.width,o=n.height,s=bh(this),a=t.textAlign=this.Ti,l=e.yl;"start"===a?a=l?"right":"left":"end"===a&&(a=l?"left":"right"),l=this.yi;var h=this.xi;Qs(this,t,this.Gc,!0,!1,n,i),(l||h)&&Qs(this,t,this.Gc,!1,!1,n,i),i=0,n=!1;var u=dt.allocAt(0,0);this.Bd.sa(u);var c=dt.allocAt(0,s);this.Bd.sa(c);var f=u.Fe(c);switch(dt.free(u),dt.free(c),8>f*(u=e.scale)*u&&(n=!0),e.Gb!==t&&(n=!1),!1===e.Ge("textGreeking")&&(n=!1),e=this.lf,f=this.mf,this.flip){case Ls:t.translate(r,0),t.scale(-1,1);break;case Es:t.translate(0,o),t.scale(1,-1);break;case Os:t.translate(r,o),t.scale(-1,-1)}if(o>(c=(e+s+f)*(u=this.Wc))&&(i=(i=this.Zi).y*o-i.y*c+i.offsetY),1===u&&null!==this.ie)(f=this.tb)>r&&(f=r),this.bj(this.ie,t,0,i+e,r,s,f,n,a,l,h);else if(null!==this.Pb&&null!==this.kb)for(c=0;c<u;c++){var d=this.Pb[c];d>r&&(d=r),this.bj(this.kb[c],t,0,i+=e,r,s,d,n,a,l,h),i+=s+f}switch(this.flip){case Ls:t.scale(-1,1),t.translate(-r,0);break;case Es:t.scale(1,-1),t.translate(0,-o);break;case Os:t.scale(-1,-1),t.translate(-r,-o)}}},e.bj=function(t,e,n,i,r,o,s,a,l,h,u){var c=0;a?("left"===l?c=0:"right"===l?c=r-s:"center"===l&&(c=(r-s)/2),e.fillRect(n+c,i+.25*o,s,1)):("left"===l?c=0:"right"===l?c=r:"center"===l&&(c=r/2),r=null!==kh?kh(this,o):.75*o,e.fillText(t,n+c,i+r),0==(t=o/20|0)&&(t=1),"right"===l?c-=s:"center"===l&&(c-=s/2),h&&(l=null!==Sh?Sh(this,o):.8*o,e.beginPath(),e.lineWidth=t,e.moveTo(n+c,i+l),e.lineTo(n+c+s,i+l),e.stroke()),u&&(e.beginPath(),e.lineWidth=t,i=i+o-o/2.2|0,0!=t%2&&(i+=.5),e.moveTo(n+c,i),e.lineTo(n+c+s,i),e.stroke()))},e.zm=function(t,e,n,i){this.Bi=t;var r,o=this.je;if(null!==Ih&&Fh!==o&&(Fh=Ih.font=o),this.tb=this.xe=0,this.ie=this.kb=this.Pb=this.ke=null,isNaN(this.desiredSize.width)){if(0===(o=this.Tb.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)o=0;else if(this.isMultiline){for(var s=r=0,a=!1;!a;){var l=o.indexOf("\n",s);-1===l&&(l=o.length,a=!0),r=Math.max(r,vh(o.substr(s,l-s).trim())),s=l+1}o=r}else 0<=(r=o.indexOf("\n",0))&&(o=o.substr(0,r)),o=vh(o);o=Math.min(o,t/this.scale),o=Math.max(8,o)}else o=this.desiredSize.width;if(null!==this.panel&&(o=Math.min(o,this.panel.maxSize.width)),r=xh(this,o),s=r=isNaN(this.desiredSize.height)?Math.min(r,e/this.scale):this.desiredSize.height,0!==this.tb&&null!==this.Pb&&null!==this.kb&&this.mg===Nh&&(e=this.je,e=this.mg===Nh?wh(e):0,a=this.lf+this.mf,a=Math.max(0,bh(this)+a),!((s=Math.min(this.maxLines-1,Math.max(Math.floor(s/a+.01)-1,0)))+1>=this.kb.length))){for(a=this.kb[s],e=Math.max(1,t-e);vh(a)>e&&1<a.length;)a=a.substr(0,a.length-1);e=vh(a+=jh),this.kb[s]=a,this.kb=this.kb.slice(0,s+1),this.Pb[s]=e,this.Pb=this.Pb.slice(0,s+1),this.xe=this.kb.length,this.tb=Math.max(this.tb,e),this.Wc=this.xe,1===this.Wc&&(this.ie=this.kb[0])}(this.wrap===Ch||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.tb:Math.min(t,this.tb),isNaN(this.desiredSize.width)&&(o=Math.max(8,o))),o=Math.max(n,o),r=Math.max(i,r),Bt(this.pc,o,r),Ws(this,0,0,o,r)},e.Gh=function(t,e,n,i){Zs(this,t,e,n,i)},c.Object.defineProperties(dh.prototype,{font:{get:function(){return this.je},set:function(t){var e=this.je;e!==t&&(this.je=t,this.ke=null,this.o(),this.g("font",e,t))}},text:{get:function(){return this.Tb},set:function(t){var e=this.Tb;e!==(t=null!=t?t.toString():"")&&(this.Tb=t,this.o(),this.g("text",e,t))}},textAlign:{get:function(){return this.Ti},set:function(t){var e=this.Ti;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(this.Ti=t,this.M(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.M(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.Zi},set:function(t){var e=this.Zi;e.w(t)||(this.Zi=t=t.G(),na(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.pc.u()){var t=Dt.alloc();mh(this,this.Tb,999999,t);var e=t.width;Dt.free(t),t=xh(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),Bt(this.pc,e,t)}return this.pc}},isMultiline:{get:function(){return this.Kj},set:function(t){var e=this.Kj;e!==t&&(this.Kj=t,this.o(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.yi},set:function(t){var e=this.yi;e!==t&&(this.yi=t,this.M(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.xi},set:function(t){var e=this.xi;e!==t&&(this.xi=t,this.M(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.zg},set:function(t){var e=this.zg;e!==t&&(this.zg=t,this.o(),this.g("wrap",e,t))}},overflow:{get:function(){return this.mg},set:function(t){var e=this.mg;e!==t&&(this.mg=t,this.o(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&Ka(t,"TextBlock.stroke"),t instanceof Fa&&t.freeze(),this.Gc=t,this.M(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Wc}},editable:{get:function(){return this.Qn},set:function(t){var e=this.Qn;e!==t&&(this.Qn=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.cq},set:function(t){var e=this.cq;e!==t&&(this.cq=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.Bc},set:function(t){var e=this.Bc;e!==t&&(this.Bc=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Sd},set:function(t){var e=this.Sd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Sd=t,this.o();var n=this.panel;null!==n&&(n.dh=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Qd},set:function(t){var e=this.Qd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Qd=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(0>t?t=0:1<t&&(t=1),this.Od=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.Gj},set:function(t){var e=this.Gj;e!==t&&(this.Gj=t,this.o(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Pd},set:function(t){var e=this.Pd;e!==t&&(this.Pd=t,this.o(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.Ui},set:function(t){var e=this.Ui;e!==t&&(this.Ui=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.bq},set:function(t){var e=this.bq;e!==t&&(this.bq=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.mf},set:function(t){var e=this.mf;e!==t&&(this.mf=t,this.g("spacingBelow",e,t))}},maxLines:{get:function(){return this.re},set:function(t){var e=this.re;e!==t&&(0>=(t=Math.floor(t))&&w(t,"> 0",dh,"maxLines"),this.re=t,this.g("maxLines",e,t),this.o())}},metrics:{get:function(){return{arrSize:null!==this.Pb?this.Pb:[this.tb],arrText:null!==this.kb?this.kb:[this.ie],maxLineWidth:this.tb,fontHeight:this.ke}}},choices:{get:function(){return this.sn},set:function(t){var e=this.sn;e!==t&&(this.sn=t,this.g("choices",e,t))}}});var kh=null,Sh=null,_h=new H(dh,"None",0),Ch=new H(dh,"WrapFit",1),Mh=new H(dh,"WrapDesiredSize",2),Ph=new H(dh,"WrapBreakAll",3),Th=new H(dh,"OverflowClip",0),Nh=new H(dh,"OverflowEllipsis",1),Ah=/[ \u200b\u00ad]/,Eh=new X,Lh=0,Oh=new X,Dh=0,jh="...",Fh="",Ih=null,Rh=!1;function Bh(){this.Pb=[],this.kb=[]}function zh(){Ys.call(this),this.Yg=null,this.Up="",this.sh=$t,this.ql=_s,this.qf=this.Bc=null,this.pl=le,this.Nd=Cs,this.dm=null,this.Ou=!1,this.Wr=!0,this.Gl=!1,this.Xl=null}function Vh(t){void 0===t&&(t=""),""!==t?Hh[t]&&(delete Hh[t],Gh--):(Hh=new X,Gh=0)}function Uh(t,e){t.js=!0,t.ml=!1;for(var n,i=D(),r=i.length,o=0;o<r;o++){var s=i[o];n=t.getAttribute("src");var a=s.Ni.H(n);if(null!==a)for(var l=a.length,h=0;h<l;h++)s.Js.add(n=a[h]),s.Db(),void 0===t.kv&&(t.kv=e,null!==n.qf&&n.qf(n,e))}}function qh(t,e){t.ml=e;for(var n,i=D(),r=i.length,o=0;o<r;o++){var s=i[o],a=t.getAttribute("src");if(null!==(n=s.Ni.H(a))){s=n.length,a=T();for(var l=0;l<s;l++)a.push(n[l]);for(l=0;l<s;l++)null!==(n=a[l]).Bc&&n.Bc(n,e);N(a)}}}dh.className="TextBlock",dh.getEllipsis=function(){return jh},dh.setEllipsis=function(t){jh=t,Oh=new X,Dh=0},dh.getBaseline=function(){return kh},dh.setBaseline=function(t){kh=t;for(var e=(t=D()).length,n=0;n<e;n++)t[n].Je()},dh.getUnderline=function(){return Sh},dh.setUnderline=function(t){Sh=t;for(var e=(t=D()).length,n=0;n<e;n++)t[n].Je()},dh.isValidFont=function(t){if(Rh||(Ih=Zo?new La(null).context:null,Rh=!0),null===Ih)return!0;var e=Ih.font;if(t===e||"10px sans-serif"===t)return!0;Ih.font="10px sans-serif",Ih.font=t;var n=Ih.font;if("10px sans-serif"!==n)return Ih.font=e,!0;Ih.font="19px serif";var i=Ih.font;return Ih.font=t,n=Ih.font,Ih.font=e,n!==i},dh.None=_h,dh.WrapFit=Ch,dh.WrapDesiredSize=Mh,dh.WrapBreakAll=Ph,dh.OverflowClip=Th,dh.OverflowEllipsis=Nh,Bh.prototype.reset=function(){this.Pb=[],this.kb=[]},Bh.prototype.zt=function(t){this.Pb=C(t.Pb),this.kb=C(t.kb)},Bh.className="TextBlockMetrics",u(zh,Ys),zh.prototype.cloneProtected=function(t){Ys.prototype.cloneProtected.call(this,t),t.element=this.Yg,t.Up=this.Up,t.sh=this.sh.G(),t.ql=this.ql,t.Nd=this.Nd,t.Bc=this.Bc,t.qf=this.qf,t.pl=this.pl.G(),t.Wr=this.Wr,t.Xl=this.Xl},(e=zh.prototype).ib=function(t){t===Cs||t===Ms||t===As?this.imageStretch=t:Ys.prototype.ib.call(this,t)},e.toString=function(){return"Picture("+this.source+")#"+ot(this)},e.MA=function(){if(""!==this.source){Vh(this.source);var t=this.source;this.source="",this.source=t}},e.Je=function(){this.M()},e.cj=function(t,e){var n=this.Yg;if(null!==n){var i=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(null===i||""===i)||n.ml instanceof Event&&t instanceof Oa)){i=this.naturalBounds;var r=0,o=0,s=this.Ou,a=s?+n.width:n.naturalWidth;if(void 0===a&&n.videoWidth&&(a=n.videoWidth),void 0===(s=s?+n.height:n.naturalHeight)&&n.videoHeight&&(s=n.videoHeight),s=s||i.height,0!==(a=a||i.width)&&0!==s){var l=a,h=s;this.sourceRect.u()&&(r=this.sh.x,o=this.sh.y,a=this.sh.width,s=this.sh.height);var u=a,c=s,f=this.ql,d=this.pl;switch(f){case Cs:if(this.sourceRect.u())break;u>=i.width&&(r=r+d.offsetX+(u*d.x-i.width*d.x)),c>=i.height&&(o=o+d.offsetY+(c*d.y-i.height*d.y)),a=Math.min(i.width,u),s=Math.min(i.height,c);break;case _s:u=i.width,c=i.height;break;case Ms:case As:f===Ms?(u*=f=Math.min(i.height/c,i.width/u),c*=f):f===As&&((u*=f=Math.max(i.height/c,i.width/u))>=i.width&&(r=(r+d.offsetX+(u*d.x-i.width*d.x)/u)*a),(c*=f)>=i.height&&(o=(o+d.offsetY+(c*d.y-i.height*d.y)/c)*s),a*=1/(u/i.width),s*=1/(c/i.height),u=i.width,c=i.height)}var p=u*(f=this.Af()*e.scale)*c*f,g=a*s/p,m=n.__goCache;if(f=null,n.js&&void 0!==m&&4<p&&g>Yh*Yh)for(null===m.aj&&(Kh(m,4,l,h,n),Kh(m,16,l,h,n)),h=(l=m.aj).length,p=0;p<h&&l[p].ratio*l[p].ratio<g;p++)f=l[p];if(!e.il){if(null===this.dm)if(null===this.Yg)this.dm=!1;else{(l=new La(null).context).drawImage(this.Yg,0,0);try{l.getImageData(0,0,1,1).data[3]&&(this.dm=!1),this.dm=!1}catch(y){this.dm=!0}}if(this.dm)return}switch(l=0,u<i.width&&(l=d.offsetX+(i.width*d.x-u*d.x)),h=0,c<i.height&&(h=d.offsetY+(i.height*d.y-c*d.y)),this.flip){case Ls:t.translate(Math.min(i.width,u),0),t.scale(-1,1);break;case Es:t.translate(0,Math.min(i.height,c)),t.scale(1,-1);break;case Os:t.translate(Math.min(i.width,u),Math.min(i.height,c)),t.scale(-1,-1)}if(e.Ge("pictureRatioOptimization")&&!e.vi&&void 0!==m&&null!==f&&1!==f.ratio){t.save(),e=f.ratio;try{t.drawImage(f.source,r/e,o/e,Math.min(f.source.width,a/e),Math.min(f.source.height,s/e),l,h,Math.min(i.width,u),Math.min(i.height,c))}catch(y){this.Wr=!1}t.restore()}else try{t.drawImage(n,r,o,a,s,l,h,Math.min(i.width,u),Math.min(i.height,c))}catch(y){this.Wr=!1}switch(this.flip){case Ls:t.scale(-1,1),t.translate(-Math.min(i.width,u),0);break;case Es:t.scale(1,-1),t.translate(0,-Math.min(i.height,c));break;case Os:t.scale(-1,-1),t.translate(-Math.min(i.width,u),-Math.min(i.height,c))}}}}},e.zm=function(t,e,n,i){var r=this.desiredSize,o=ia(this,!0),s=this.Yg,a=this.Ou;(a||!this.Gl&&s&&s.complete)&&(this.Gl=!0),null===s&&(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)),isFinite(r.width)||o===_s||o===Ts?(isFinite(t)||(t=this.sourceRect.u()?this.sourceRect.width:a?+s.width:s.naturalWidth),n=0):null!==s&&!1!==this.Gl&&(t=this.sourceRect.u()?this.sourceRect.width:a?+s.width:s.naturalWidth),isFinite(r.height)||o===_s||o===Ns?(isFinite(e)||(e=this.sourceRect.u()?this.sourceRect.height:a?+s.height:s.naturalHeight),i=0):null!==s&&!1!==this.Gl&&(e=this.sourceRect.u()?this.sourceRect.height:a?+s.height:s.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,o=this.minSize,n=Math.max(n,o.width),i=Math.max(i,o.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(n,t),e=Math.max(i,e),null===s||s.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),Bt(this.pc,t,e),Ws(this,0,0,t,e)},e.Gh=function(t,e,n,i){Zs(this,t,e,n,i)},c.Object.defineProperties(zh.prototype,{element:{get:function(){return this.Yg},set:function(t){var e=this.Yg;if(e!==t){if(null===t||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||v("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.Ou=t instanceof HTMLCanvasElement,this.Yg=t,null!==t)if(t instanceof HTMLCanvasElement||!0===t.complete)t.ml instanceof Event&&null!==this.Bc&&this.Bc(this,t.ml),!0===t.js&&null!==this.qf&&this.qf(this,t.kv),t.js=!0,this.desiredSize.u()||(fa(this,!1),this.o());else{var n=this;t.ux||(t.addEventListener("load",function(e){Uh(t,e),n.desiredSize.u()||(fa(n,!1),n.o())}),t.addEventListener("error",function(e){qh(t,e)}),t.ux=!0)}this.g("element",e,t),this.M()}}},source:{get:function(){return this.Up},set:function(t){var e=this.Up;if(e!==t){this.Up=t;var n=Hh,i=this.diagram;if(Zo){var r=null;if(void 0!==n[t])r=n[t];else if(""!==t){30<Gh&&(Vh(),n=Hh),r=y("img");var o=this;r.addEventListener("load",function(t){Uh(r,t),o.desiredSize.u()||(fa(o,!1),o.o())}),r.addEventListener("error",function(t){qh(r,t)}),r.ux=!0;var s=this.Xl;null!==s&&(r.crossOrigin=s(this)),r.src=t,n[t]=r,Gh++}null!==i&&Eo(i,this),this.element=r,null!==i&&null!==r&&Ao(i,this),null!==r&&void 0===r.__goCache&&(r.__goCache=new Xh),this.o(),this.M()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.Xl},set:function(t){if(this.Xl!==t&&(this.Xl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.sh},set:function(t){var e=this.sh;e.w(t)||(this.sh=t=t.G(),this.M(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.ql},set:function(t){var e=this.ql;e!==t&&(this.ql=t,this.M(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.M(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.pl},set:function(t){var e=this.pl;e.w(t)||(this.pl=t=t.G(),this.o(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Bc},set:function(t){var e=this.Bc;e!==t&&(this.Bc=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.qf},set:function(t){var e=this.qf;e!==t&&(this.qf=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.pc}}}),zh.prototype.redraw=zh.prototype.Je,zh.prototype.reloadSource=zh.prototype.MA;var Hh=null,Gh=0,Yh=4;function Xh(){this.aj=null}function Kh(t,e,n,i,r){null===t.aj&&(t.aj=[]);var o=new La(null),s=o.context,a=1/e;o.width=n/e,o.height=i/e,0!==o.width&&0!==o.height&&(e=new Wh(o.Ga,e),n=1,0<t.aj.length&&(r=(n=t.aj[t.aj.length-1]).source,n=n.ratio),s.setTransform(a*n,0,0,a*n,0,0),s.drawImage(r,0,0),t.aj.push(e))}function Wh(t,e){this.source=t,this.ratio=e}function $h(){this.Ht=new Ke,this.gc=null}function Zh(t,e,n,i,r){t.gc=new cn,t.gc.startX=e,t.gc.startY=n,t.gc.isFilled=i,t.Ht.figures.add(t.gc),void 0!==r&&(t.gc.isShadowed=r)}function Jh(t){var e=t.gc.segments.length;0<e&&t.gc.segments.J(e-1).close()}function Qh(t,e,n,i,r,o,s){var a;void 0===a&&(a=!1);var l=new fn(yn);l.point1X=e,l.point1Y=n,l.point2X=i,l.point2Y=r,l.endX=o,l.endY=s,a&&l.close(),t.gc.segments.add(l)}function tu(t,e,n,i,r){var o;void 0===o&&(o=!1);var s=new fn(vn);s.point1X=e,s.point1Y=n,s.endX=i,s.endY=r,o&&s.close(),t.gc.segments.add(s)}function eu(t,e,n,i,r,o,s,a){var l;void 0===l&&(l=!1),e=new fn(wn,s,a,e,n,i,r,o),l&&e.close(),t.gc.segments.add(e)}function nu(t){var e=iu;return null!==e?(iu=null,e.reset(t),e):((e=new $h).reset(t),e)}zh.className="Picture",Hh=new X,zh.clearCache=Vh,Xh.className="PictureCacheArray",Wh.className="PictureCacheInstance",(e=$h.prototype).reset=function(t){null!==t?(t.da(),this.Ht=t,t.figures.clear()):this.Ht=new Ke,this.gc=null},e.cr=function(t){this.gc.isShadowed=t},e.moveTo=function(t,e,n){void 0===n&&(n=!1);var i=new fn(gn);i.endX=t,i.endY=e,n&&i.close(),this.gc.segments.add(i)},e.lineTo=function(t,e,n){void 0===n&&(n=!1);var i=new fn(mn);i.endX=t,i.endY=e,n&&i.close(),this.gc.segments.add(i)},e.arcTo=function(t,e,n,i,r,o,s){void 0===o&&(o=0),void 0===s&&(s=!1);var a=new fn(bn);a.startAngle=t,a.sweepAngle=e,a.centerX=n,a.centerY=i,a.radiusX=r,a.radiusY=0!==o?o:r,s&&a.close(),this.gc.segments.add(a)};var iu=null;function ru(t,e){var n=t.toLowerCase(),i=Xe.Oe;i[t]=e,i[n]=t}function ou(t){Ml.call(this,t),this.D=2408959,this.hh=this.Mf="",this.yp=this.tp=this.Jp=this.zo=null,this.Lp="",this.Kf=this.lo=this.Kp=this.rh=null,this.wp="",this.vp=Lt,this.Tb=this.zp="",this.Ci=this.vn=this.ki=null,this.dg=new dt(NaN,NaN).freeze(),this.Go="",this.bf=null,this.Ho=re,this.Ap=Te,this.Qo=kt,this.Io=St,this.Nn=null,this.Ao=127,this.Pp=_t,this.Op="gray",this.jf=4,this.wx=-1,this.nq=NaN,this.bz=new Rt,this.Sj=null,this.jh=NaN}function su(t){0!=(16384&t.D)!=0&&(t.updateAdornments(),t.D&=-16385)}function au(t){if(!1===mu(t)){yu(t,!0),t.xl();var e=t.diagram;null!==e&&(e.sd.add(t),e.Db())}}function lu(t){if(t.D|=2097152,!1!==mu(t)){var e=t.position,n=t.location;n.u()&&e.u()||cu(t,e,n),n=t.xb;var i=Rt.alloc().assign(n);n.da(),n.x=e.x,n.y=e.y,n.freeze(),t.Zt(i,n),Rt.free(i),yu(t,!1)}}function hu(t,e){var n=t.bz;isNaN(t.jh)&&(t.jh=Il(t));var i=t.jh,r=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+r,e.height+2+r),n;i=e.x,r=e.y;var o=e.width;e=e.height;var s=t.shadowBlur;return o+=s,e+=s,i-=s/2,r-=s/2,0<(t=t.shadowOffset).x?o+=t.x:(i+=t.x,o-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),n.h(i-1,r-1,o+2,e+2),n}function uu(t,e,n,i){null===e||t instanceof Pu||(e=e.animationManager).df&&ar(e,t,i.copy(),n.copy())}function cu(t,e,n){var i=dt.alloc(),r=t.locationSpot,o=t.locationObject;r.lc()&&v("determineOffset: Part's locationSpot must be real: "+r.toString());var s=o.naturalBounds,a=o instanceof ih?o.strokeWidth:0;if(i.Jk(0,0,s.width+a,s.height+a,r),o!==t)for(i.offset(-a/2,-a/2),o.transform.sa(i),r=o.panel;null!==r&&r!==t;)r.transform.sa(i),r=r.panel;t.cg.sa(i),i.offset(-t.oc.x,-t.oc.y),r=t.diagram,o=n.u(),s=e.u(),o&&s?0!=(2097152&t.D)?fu(t,e,n,r,i):du(t,e,n,r,i):o?fu(t,e,n,r,i):s&&du(t,e,n,r,i),t.D|=2097152,dt.free(i),t.xl()}function fu(t,e,n,i,r){var o=e.x,s=e.y;e.h(n.x-r.x,n.y-r.y),null!==i&&((i=(n=i.animationManager).isAnimating)||!n.df||t instanceof Pu||ar(n,t,new dt(o,s),e),i||e.x===o&&e.y===s||t.g("position",new dt(o,s),e.copy()))}function du(t,e,n,i,r){var o=n.copy();n.h(e.x+r.x,e.y+r.y),n.w(o)||null===i||t.g("location",o,n.copy())}function pu(t,e,n){vu(t,!1),t instanceof Tu&&qo(n,t),t.layer.isTemporary||e||n.Oa(),e=t.xb;var i=n.viewportBounds;i.u()?bu(t)?(Gt(e,i)||t.Hd(!1),t.updateAdornments()):e.Kc(i)?(t.Hd(!0),t.updateAdornments()):t.Lb():n.ui=!0}function gu(t,e,n,i){e.constructor===t.constructor||Mu||(Mu=!0,x('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),x("  Old class: "+A(t.constructor)+", new class: "+A(e.constructor)+", part: "+t.toString())),t.ik();var r=t.data;n=t.layerName;var o=t.isSelected,s=t.isHighlighted,a=!0,l=!0,h=!1;t instanceof Tu&&(a=t.isTreeLeaf,l=t.isTreeExpanded,h=t.wasTreeExpanded),e.yf(t),e.cloneProtected(t),t.Mf=i,t.o(),t.M(),i=!0,null!==(e=t.diagram)&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.mb=r,t.D=o?4096|t.D:-4097&t.D,t.D=s?524288|t.D:-524289&t.D,t instanceof Tu&&(t.P=a?4|t.P:-5&t.P,t.P=l?1|t.P:-2&t.P,t.P=h?2|t.P:-3&t.P),null!==r&&t.Ca(),(r=t.layerName)!==n&&(t.hh=n,t.layerName=r),null!==e&&(e.skipsUndoManager=i),t.Lc()&&t.C(64)}function mu(t){return 0!=(32768&t.D)}function yu(t,e){t.D=e?32768|t.D:-32769&t.D}function vu(t,e){t.D=e?65536|t.D:-65537&t.D}function bu(t){return 0!=(131072&t.D)}function wu(t,e){t.D=e?1048576|t.D:-1048577&t.D}function xu(t,e){var n=e.containingGroup;return null!==n?1+xu(t,n):e instanceof Tu&&null!==(e=e.labeledLink)?xu(t,e):0}function ku(t,e){var n=e.containingGroup;return null!==n||e instanceof Tu&&null!==(n=e.labeledLink)?ku(t,n):e}function Su(t,e,n){if(e===n||null===n)return!1;var i=e.containingGroup;return!(null===i||i!==n&&!Su(t,i,n))||e instanceof Tu&&null!==(e=e.labeledLink)&&Su(t,e,n)}function _u(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function Cu(t,e,n,i,r,o){if(void 0===o&&(o=null),!(t.contains(e)||null!==o&&!o(e)||e instanceof Pu))if(t.add(e),e instanceof Tu){if(n&&e instanceof Xu)for(var s=e.memberParts;s.next();)Cu(t,s.value,n,i,r,o);if(!1!==r)for(s=e.linksConnected;s.next();){var a=s.value;if(!t.contains(a)){var l=a.fromNode,h=a.toNode;l=null===l||t.contains(l),h=null===h||t.contains(h),(r?l&&h:l||h)&&Cu(t,a,n,i,r,o)}}if(1<i)for(e=e.Rv();e.next();)Cu(t,e.value,n,i-1,r,o)}else if(e instanceof Qu)for(e=e.labelNodes;e.next();)Cu(t,e.value,n,i,r,o)}$h.className="StreamGeometryContext",ru("Rectangle",function(t,e,n){var i=Xe.Sh[t="r"+e+","+n];return void 0!==i||((i=new Ke(an)).endX=e,i.endY=n,50>Xe.Th&&(Xe.Sh[t]=i,Xe.Th++)),i}),ru("Square",function(t,e,n){var i=Xe.Sh[t="s"+e+","+n];return void 0!==i||((i=new Ke(an)).endX=e,i.endY=n,i.defaultStretch=Ms,50>Xe.Th&&(Xe.Sh[t]=i,Xe.Th++)),i}),ru("RoundedRectangle",function(t,e,n){var i=t?t.parameter1:NaN;return(isNaN(i)||0>i)&&(i=5),i=Math.min(i,e/3),t=(i=Math.min(i,n/3))*Xe.Kg,e=(new Ke).add(new cn(i,0,!0).add(new fn(mn,e-i,0)).add(new fn(yn,e,i,e-t,0,e,t)).add(new fn(mn,e,n-i)).add(new fn(yn,e-i,n,e,n-t,e-t,n)).add(new fn(mn,i,n)).add(new fn(yn,0,n-i,t,n,0,n-t)).add(new fn(mn,0,i)).add(new fn(yn,i,0,0,t,t,0).close())),1<t&&(e.spot1=new ze(0,0,t,t),e.spot2=new ze(1,1,-t,-t)),e}),ru("Border","RoundedRectangle"),ru("Ellipse",function(t,e,n){var i=Xe.Sh[t="e"+e+","+n];return void 0!==i||((i=new Ke(ln)).endX=e,i.endY=n,i.spot1=Ie,i.spot2=Re,50>Xe.Th&&(Xe.Sh[t]=i,Xe.Th++)),i}),ru("Circle",function(t,e,n){var i=Xe.Sh[t="c"+e+","+n];return void 0!==i||((i=new Ke(ln)).endX=e,i.endY=n,i.spot1=Ie,i.spot2=Re,i.defaultStretch=Ms,50>Xe.Th&&(Xe.Sh[t]=i,Xe.Th++)),i}),ru("TriangleRight",function(t,e,n){return(new Ke).add(new cn(0,0).add(new fn(mn,e,.5*n)).add(new fn(mn,0,n).close())).Tm(0,.25,.5,.75)}),ru("TriangleDown",function(t,e,n){return(new Ke).add(new cn(0,0).add(new fn(mn,e,0)).add(new fn(mn,.5*e,n).close())).Tm(.25,0,.75,.5)}),ru("TriangleLeft",function(t,e,n){return(new Ke).add(new cn(e,n).add(new fn(mn,0,.5*n)).add(new fn(mn,e,0).close())).Tm(.5,.25,1,.75)}),ru("TriangleUp",function(t,e,n){return(new Ke).add(new cn(e,n).add(new fn(mn,0,n)).add(new fn(mn,.5*e,0).close())).Tm(.25,.5,.75,1)}),ru("Triangle","TriangleUp"),ru("Diamond",function(t,e,n){return(new Ke).add(new cn(.5*e,0).add(new fn(mn,0,.5*n)).add(new fn(mn,.5*e,n)).add(new fn(mn,e,.5*n).close())).Tm(.25,.25,.75,.75)}),ru("LineH",function(t,e,n){return(t=new Ke(sn)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),ru("LineV",function(t,e,n){return(t=new Ke(sn)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),ru("None","Rectangle"),ru("BarH","Rectangle"),ru("BarV","Rectangle"),ru("MinusLine","LineH"),ru("PlusLine",function(t,e,n){return(new Ke).add(new cn(0,n/2,!1).add(new fn(mn,e,n/2)).add(new fn(gn,e/2,0)).add(new fn(mn,e/2,n)))}),ru("XLine",function(t,e,n){return(new Ke).add(new cn(0,n,!1).add(new fn(mn,e,0)).add(new fn(gn,0,0)).add(new fn(mn,e,n)))}),Xe.Ym={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},u(ou,Ml),ou.prototype.cloneProtected=function(t){Ml.prototype.cloneProtected.call(this,t),t.D=-4097&this.D|49152,t.Mf=this.Mf,t.hh=this.hh,t.zo=this.zo,t.Jp=this.Jp,t.tp=this.tp,t.yp=this.yp,t.Lp=this.Lp,t.Kp=this.Kp,t.lo=this.lo,t.Kf=null,t.wp=this.wp,t.vp=this.vp.G(),t.zp=this.zp,t.Ap=this.Ap.G(),t.Tb=this.Tb,t.vn=this.vn,t.dg.assign(this.dg),t.Go=this.Go,t.Ho=this.Ho.G(),t.Qo=this.Qo.G(),t.Io=this.Io.G(),t.Nn=this.Nn,t.Ao=this.Ao,t.Pp=this.Pp.G(),t.Op=this.Op,t.jf=this.jf,t.nq=this.nq},ou.prototype.yf=function(t){Ml.prototype.yf.call(this,t),t.Mh(),t.rh=null,t.bf=null,t.Sj=null},ou.prototype.toString=function(){var t=A(this.constructor)+"#"+ot(this);return null!==this.data&&(t+="("+E(this.data)+")"),t},ou.prototype.Hk=function(t,e,n,i,r,o,s){var a=this.diagram;null!==a&&(t===Mn&&"elements"===e?r instanceof Ml?Ll(r,function(t){Xf(a.partManager,t),No(a,t)}):Ao(a,r):t===Pn&&"elements"===e&&(r instanceof Ml?Ll(r,function(t){Kf(a.partManager,t,a)}):Eo(a,r)),a.ab(t,e,n,i,r,o,s))},ou.prototype.Ca=function(t){if(Ml.prototype.Ca.call(this,t),null!==this.data){for(var e=this.W.j,n=e.length,i=0;i<n;i++){var r=e[i];r instanceof Ml&&Ll(r,function(t){null!==t.data&&t.Ca()})}for(e=this.adornments;e.next();)e.value.Ca(t)}},ou.prototype.updateRelationshipsFromData=function(){null!==this.data&&this.diagram.partManager.updateRelationshipsFromData(this)},ou.prototype.rk=function(t){var e=this.Kf;return null===e?null:e.H(t)},ou.prototype.Eh=function(t,e){if(null!==e){var n=null,i=this.Kf;if(null!==i&&(n=i.H(t)),n!==e){if(null!==n){var r=n.diagram;null!==r&&r.remove(n)}null===i&&(this.Kf=i=new ft),e.Mf!==t&&(e.category=t),i.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.gj())&&(e.data=t.data))}}},ou.prototype.Gf=function(t){var e=this.Kf;if(null!==e){var n=e.H(t);if(null!==n){var i=n.diagram;null!==i&&i.remove(n)}e.remove(t),0===e.count&&(this.Kf=null)}},ou.prototype.ik=function(){var t=this.Kf;if(null!==t){var e=T();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.Gf(e[n]);N(e)}},ou.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var n=e.value;n.o(),n.placeholder&&n.placeholder.o()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.u()&&this.isVisible()&&e.Ff()&&e.actualBounds.u()){if(null===(n=this.rk("Selection"))){if(null===(n=this.selectionAdornmentTemplate)&&(n=this.Nh()?t.linkSelectionAdornmentTemplate:this instanceof Xu?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof Pu))break t;ql(n),null!==(n=n.copy())&&(this.Nh()&&this.selectionObject===this.path&&(n.type=Ml.Link),n.adornedObject=e)}if(null!==n){n.type===Ml.Link&&n.o(),this.Eh("Selection",n);break t}}this.Gf("Selection")}for(function(t,e){e.toolManager.mouseDownTools.each(function(e){e.isEnabled&&e.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Ca()}},ou.prototype.Lb=function(){var t=this.diagram;null!==t&&(fo(t),0!=(16384&this.D)!=1&&(this.D|=16384,t.Db()))},ou.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},ou.prototype.moveTo=function(t,e,n){t=dt.allocAt(t,e),this.move(t,n),dt.free(t)},ou.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.Yt(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},(e=ou.prototype).Ob=function(t){var e=this.diagram;t?(this.C(4),this.Lb(),null!==e&&e.sd.add(this)):(this.C(8),this.ik()),this.Mh(),null!==e&&(e.Oa(),e.M())},e.$a=function(t){if(this.name===t)return this;var e=this.Sj;if(null===e&&(this.Sj=e=new ft),null!==e.H(t))return e.H(t);var n=Ml.prototype.$a.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},e.Cf=function(t,e,n){void 0===n&&(n=new dt),e=e.lc()?le:e;var i=t.naturalBounds;if(n.h(i.width*e.x+e.offsetX,i.height*e.y+e.offsetY),null===t||t===this)return n;for(t.transform.sa(n),t=t.panel;null!==t&&t!==this;)t.transform.sa(n),t=t.panel;return this.cg.sa(n),n.offset(-this.oc.x,-this.oc.y),n},e.sm=function(t){return void 0===t&&(t=new Rt),t.assign(this.actualBounds)},e.Ta=function(){!0===ca(this)&&this.measure(1/0,1/0),this.arrange()},ou.prototype.arrange=function(){if(!1===da(this))lu(this);else{pa(this,!1);var t=this.xb,e=Rt.alloc();e.assign(t),t.da();var n=bu(this);this.Gh(0,0,this.oc.width,this.oc.height);var i=this.position;cu(this,i,this.location),t.x=i.x,t.y=i.y,t.freeze(),this.Zt(e,t),e.w(t)?this.Hd(n):!this.Lc()||Xe.A(e.width,t.width)&&Xe.A(e.height,t.height)||0<=this.wx&&this.C(16),Rt.free(e),yu(this,!1)}},(e=ou.prototype).Zt=function(t,e){var n=this.diagram;if(null!==n){var i=!1;if(!1===n.si&&t.u()){var r=Rt.alloc();r.assign(n.documentBounds),r.Fw(n.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(i=!0),Rt.free(r)}0!=(65536&this.D)!=1&&t.w(e)||pu(this,i,n),n.M(),Ut(t,e)||(this instanceof Tu&&!n.undoManager.isUndoingRedoing&&this.od(),this.Mh())}},e.Aw=function(t,e){if(this.Nh()||!t.u())return!1;var n=this.diagram;null!==n&&uu(this,n,t,e),this.la=t,this.D&=-2097153;var i=this.dg;return!i.u()||null!==n&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=i.copy(),i.h(i.x+(t.x-e.x),i.y+(t.y-e.y)),this.g("location",n,i.copy())),!1===mu(this)&&!1===da(this)&&(au(this),lu(this)),!0},e.br=function(t,e,n){var i=this.dg,r=this.la;if(n){if(i.x===t&&i.y===e)return;mu(this)||da(this)?r.h(NaN,NaN):r.h(r.x+t-i.x,r.y+e-i.y),i.h(t,e)}else{if(r.x===t&&r.y===e)return;mu(this)||da(this)?this.hu():i.h(i.x+t-r.x,i.y+e-r.y),r.h(t,e)}au(this)},e.hu=function(){this.D&=-2097153,au(this)},e.oj=function(){return!0},e.Lc=function(){return!0},e.Nh=function(){return!1},e.Ef=function(){return!0},ou.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},ou.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},ou.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},ou.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},ou.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},ou.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},ou.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},ou.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},ou.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(e=ou.prototype).Hd=function(t){this.D=t?131072|this.D:-131073&this.D},e.Mh=function(){var t=this.containingGroup;null!==t&&(t.o(),null!==t.placeholder&&t.placeholder.o(),t.od())},e.M=function(){var t=this.diagram;null!==t&&!da(this)&&!mu(this)&&this.isVisible()&&this.xb.u()&&t.M(hu(this,this.xb))},e.o=function(){Ml.prototype.o.call(this);var t=this.diagram;null!==t&&(t.sd.add(this),this instanceof Tu&&null!==this.labeledLink&&na(this.labeledLink),t.Db(!0))},e.Gq=function(t){t||null!==(t=this.ki)&&Ku(t,this)},e.Hq=function(t){t||null!==(t=this.ki)&&Wu(t,this)},e.pk=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.Im(t)}},e.Xz=function(){return xu(this,this)},e.$z=function(){return ku(this,this)},e.Ed=function(t){return t instanceof Xu&&Su(this,this,t)},e.ly=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof Xu&&wu(e,!0),e instanceof Tu){var n=e.labeledLink;null!==n&&(e=n)}e=e.containingGroup}for(n=null,e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e instanceof Tu&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof Xu&&wu(e,!1),e instanceof Tu&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return n},ou.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof Tu&&this.isLinkLabel)},ou.prototype.C=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof Tu&&this.isLinkLabel||null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.ki)){var n=e.layout;null!==n?n.C():e.C(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.C()},c.Object.defineProperties(ou.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.ja(this.data)}},adornments:{get:function(){return null===this.Kf?K:this.Kf.iteratorValues}},layer:{get:function(){return this.Ci}},diagram:{get:function(){var t=this.Ci;return null!==t?t.diagram:null}},layerName:{get:function(){return this.hh},set:function(t){var e=this.hh;if(e!==t){var n=this.diagram;if((null===n||null!==n.pm(t)&&!n.partManager.addsToTemporaryLayer)&&(this.hh=t,null!==n&&n.Oa(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(n=e.diagram)&&null!==(t=n.pm(t))&&t!==e)){var i=e.Jc(-1,this,!0);if(0<=i&&n.ab(Pn,"parts",e,this,null,i,!0),i=t.lj(99999999,this,!0),e.visible!==t.visible&&this.Ob(t.visible),0<=i&&n.ab(Mn,"parts",t,null,this,!0,i),null!==(i=this.layerChanged)){var r=n.Z;n.Z=!0,i(this,e,t),n.Z=r}}}}},layerChanged:{get:function(){return this.zo},set:function(t){var e=this.zo;e!==t&&(this.zo=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.nq},set:function(t){var e=this.nq;if(e!==t){this.nq=t;var n=this.layer;null!==n&&Or(n,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.M()}}},locationObject:{get:function(){if(null===this.bf){var t=this.locationObjectName;""!==t?(t=this.$a(t),this.bf=null!==t?t:this):this.bf=this instanceof Pu&&this.type!==Ml.Link&&null!==this.placeholder?this.placeholder:this}return this.bf.visible?this.bf:this}},minLocation:{get:function(){return this.Qo},set:function(t){var e=this.Qo;e.w(t)||(this.Qo=t=t.G(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.Io},set:function(t){var e=this.Io;e.w(t)||(this.Io=t=t.G(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.Go},set:function(t){var e=this.Go;e!==t&&(this.Go=t,this.bf=null,this.o(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.Ho},set:function(t){var e=this.Ho;e.w(t)||(this.Ho=t=t.G(),this.o(),this.g("locationSpot",e,t))}},location:{get:function(){return this.dg},set:function(t){var e=t.x,n=t.y,i=this.dg,r=i.x,o=i.y;(r===e||isNaN(r)&&isNaN(e))&&(o===n||isNaN(o)&&isNaN(n))||(e=t=t.copy(),this.Nh()?e=!1:(this.dg=e,this.D|=2097152,!1===da(this)&&(au(this),(n=this.la).u()&&(null===(r=this.diagram)||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing))&&(o=n.copy(),n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),uu(this,r,n,o),this.g("position",o,n.copy())),e=!0),e&&this.g("location",i.copy(),t.copy()))}},category:{get:function(){return this.Mf},set:function(t){var e=this.Mf;if(e!==t){var n=this.diagram,i=this.data,r=null;if(null!==n&&null!==i&&!(this instanceof Pu)){var o=n.model.undoManager;o.isEnabled&&!o.isUndoingRedoing&&(r=this.clone()).W.addAll(this.W)}this.Mf=t,this.g("category",e,t),null===n||null===i||this instanceof Pu?this instanceof Pu&&null!==(r=this.adornedPart)&&(null!==(t=r.Kf)&&t.remove(e),r.Eh(this.category,this)):(o=n.model).undoManager.isUndoingRedoing||(this.Nh()?(n.partManager.setLinkCategoryForData(i,t),null!==(n=n.partManager.findLinkTemplateForCategory(t))&&(ql(n),null!==(n=n.copy())&&gu(this,n,e,t))):(null!==o&&o.Pm(i,t),null!==(n=Hf(n.partManager,i,t))&&(ql(n),null===(n=n.copy())||n instanceof Qu||(i=this.location.copy(),gu(this,n,e,t),this.location.u()||(this.location=i)))),null!==r&&((e=this.clone()).W.addAll(this.W),this.g("self",r,e)))}}},self:{get:function(){return this},set:function(t){gu(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.D)},set:function(t){var e=0!=(1&this.D);e!==t&&(this.D^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.D)},set:function(t){var e=0!=(2&this.D);e!==t&&(this.D^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.D)},set:function(t){var e=0!=(4&this.D);e!==t&&(this.D^=4,this.g("textEditable",e,t),this.Lb())}},groupable:{get:function(){return 0!=(8&this.D)},set:function(t){var e=0!=(8&this.D);e!==t&&(this.D^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.D)},set:function(t){var e=0!=(16&this.D);e!==t&&(this.D^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.D)},set:function(t){var e=0!=(32&this.D);e!==t&&(this.D^=32,this.g("selectionAdorned",e,t),this.Lb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.D)},set:function(t){var e=0!=(64&this.D);if(e!==t){this.D^=64;var n=this.diagram;null!==n&&n.Oa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.D)},set:function(t){var e=0!=(128&this.D);e!==t&&(this.D^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return 0!=(256&this.D)},set:function(t){var e=0!=(256&this.D);e!==t&&(this.D^=256,this.g("selectable",e,t),this.Lb())}},reshapable:{get:function(){return 0!=(512&this.D)},set:function(t){var e=0!=(512&this.D);e!==t&&(this.D^=512,this.g("reshapable",e,t),this.Lb())}},resizable:{get:function(){return 0!=(1024&this.D)},set:function(t){var e=0!=(1024&this.D);e!==t&&(this.D^=1024,this.g("resizable",e,t),this.Lb())}},rotatable:{get:function(){return 0!=(2048&this.D)},set:function(t){var e=0!=(2048&this.D);e!==t&&(this.D^=2048,this.g("rotatable",e,t),this.Lb())}},isSelected:{get:function(){return 0!=(4096&this.D)},set:function(t){var e=0!=(4096&this.D);if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.maxSelectionCount)){this.D^=4096;var i=!1;if(null!==n){i=n.skipsUndoManager,n.skipsUndoManager=!0;var r=n.selection;r.da(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Lb(),null!==(t=this.selectionChanged)&&t(this),null!==n&&(n.Db(),n.skipsUndoManager=i)}}}},isHighlighted:{get:function(){return 0!=(524288&this.D)},set:function(t){var e=0!=(524288&this.D);if(e!==t){this.D^=524288;var n=this.diagram;null!==n&&((n=n.highlighteds).da(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.M(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.D)},set:function(t){var e=0!=(8192&this.D);e!==t&&(this.D^=8192,this.g("isShadowed",e,t),this.M())}},isAnimated:{get:function(){return 0!=(262144&this.D)},set:function(t){var e=0!=(262144&this.D);e!==t&&(this.D^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(this.lo=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.Lp},set:function(t){var e=this.Lp;e!==t&&(this.Lp=t,this.rh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.Jp},set:function(t){var e=this.Jp;e!==t&&(this.Jp=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.rh){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.$a(t),this.rh=null!==t?t:this):this.rh=this instanceof Qu&&null!==(t=this.path)?t:this}return this.rh}},selectionChanged:{get:function(){return this.Kp},set:function(t){var e=this.Kp;e!==t&&(this.Kp=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.tp},set:function(t){var e=this.tp;e!==t&&(this.tp=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.wp},set:function(t){var e=this.wp;e!==t&&(this.wp=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.$a(t))?t:this}},resizeCellSize:{get:function(){return this.vp},set:function(t){var e=this.vp;e.w(t)||(this.vp=t=t.G(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.yp},set:function(t){var e=this.yp;e!==t&&(this.yp=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.zp},set:function(t){var e=this.zp;e!==t&&(this.zp=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.$a(t))?t:this}},rotationSpot:{get:function(){return this.Ap},set:function(t){var e=this.Ap;e.w(t)||(this.Ap=t=t.G(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Tb},set:function(t){var e=this.Tb;e!==t&&(this.Tb=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.ki},set:function(t){if(this.Lc()){var e=this.ki;if(e!==t){null===t||this!==t&&!t.Ed(this)||(this===t&&v("Cannot make a Group a member of itself: "+this.toString()),v("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var n=this.diagram;if(null!==e?Wu(e,this):this instanceof Xu&&null!==n&&n.Bh.remove(this),this.ki=t,null!==t?Ku(t,this):this instanceof Xu&&null!==n&&n.Bh.add(this),this.C(1),null!==n&&n.Z){var i=this.data,r=n.model;if(null!==i&&r.wk()){var o=r.ja(null!==t?t.data:null);r.ar(i,o)}}if(null!==(i=this.containingGroupChanged)&&(r=!0,null!==n&&(r=n.Z,n.Z=!0),i(this,e,t),null!==n&&(n.Z=r)),this instanceof Xu)for(Cu(n=new nt,this,!0,0,!0),n=n.iterator;n.next();)if((i=n.value)instanceof Tu)for(i=i.linksConnected;i.next();)tc(i.value);if(this instanceof Tu){for(n=this.linksConnected;n.next();)tc(n.value);null!==(n=this.labeledLink)&&tc(n)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&Or(e,-1,t)}}else v("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.vn},set:function(t){var e=this.vn;e!==t&&(this.vn=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof Tu&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.Ao},set:function(t){var e=this.Ao;e!==t&&(this.Ao=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.Nn},set:function(t){var e=this.Nn;e!==t&&(this.Nn=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.Pp},set:function(t){var e=this.Pp;e.w(t)||(this.Pp=t=t.G(),this.M(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.Op},set:function(t){var e=this.Op;e!==t&&(this.Op=t,this.M(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.jf},set:function(t){var e=this.jf;e!==t&&(this.jf=t,this.M(),this.g("shadowBlur",e,t))}}}),ou.prototype.invalidateLayout=ou.prototype.C,ou.prototype.findCommonContainingGroup=ou.prototype.ly,ou.prototype.isMemberOf=ou.prototype.Ed,ou.prototype.findTopLevelPart=ou.prototype.$z,ou.prototype.findSubGraphLevel=ou.prototype.Xz,ou.prototype.ensureBounds=ou.prototype.Ta,ou.prototype.getDocumentBounds=ou.prototype.sm,ou.prototype.getRelativePoint=ou.prototype.Cf,ou.prototype.findObject=ou.prototype.$a,ou.prototype.moveTo=ou.prototype.moveTo,ou.prototype.invalidateAdornments=ou.prototype.Lb,ou.prototype.clearAdornments=ou.prototype.ik,ou.prototype.removeAdornment=ou.prototype.Gf,ou.prototype.addAdornment=ou.prototype.Eh,ou.prototype.findAdornment=ou.prototype.rk,ou.prototype.updateTargetBindings=ou.prototype.Ca;var Mu=!1;function Pu(t){ou.call(this,t),this.D&=-257,this.hh="Adornment",this.ee=null,this.Ax=0,this.Px=!1,this.l=[],this.Ra=null}function Tu(t){ou.call(this,t),this.P=13,this.Ya=new tt,this.hq=this.Cl=this.Fi=this.Co=this.Bo=null,this.Uk=ne,this.rc=this.Re=null,this.qp=Gu,this.Ch=!1}function Nu(t,e){null!==e&&(null===t.Re&&(t.Re=new nt),t.Re.add(e))}function Au(t,e,n,i){if(null===e||null===t.Re)return null;for(var r=t.Re.iterator;r.next();){var o=r.value;if(o.Wt===t&&o.fw===e&&o.Jy===n&&o.Ky===i||o.Wt===e&&o.fw===t&&o.Jy===i&&o.Ky===n)return o}return null}function Eu(t,e){for(var n=t.linksConnected;n.next();){var i=n.value;i.fromPort!==e&&i.toPort!==e||(Lu(t,i.fromPort),Lu(t,i.toPort),i.Ua())}}function Lu(t,e){null!==e&&(null!==(e=e.pp)&&e.um(),null===(e=t.containingGroup)||t.isVisible()||Lu(e,e.port))}function Ou(t,e,n,i){if(null!==e&&!n.has(e)){n.add(e);var r=!0,o=t.diagram;null!==o&&(r=o.isTreePathToChildren),e.linksConnected.each(function(o){o.isTreeLink?(r?o.fromNode===e:o.toNode===e)&&Ou(t,r?o.toNode:o.fromNode,n,i):i.add(o)})}}function Du(t,e,n){Lu(t,n);var i=t.Ya.contains(e);if(i||t.Ya.add(e),!i||e.fromNode===e.toNode){var r=t.linkConnected;if(null!==r){var o=!0,s=t.diagram;null!==s&&(o=s.Z,s.Z=!0),r(t,e,n),null!==s&&(s.Z=o)}}!i&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(i=!0,null!==(t=t.diagram)&&(i=t.isTreePathToChildren),o=i?n:e,(r=i?e:n).Ch||(r.Ch=o),!o.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(i?n===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function ju(t,e,n){Lu(t,n);var i=t.Ya.remove(e),r=null;if(i||e.toNode===e.fromNode){var o=t.linkDisconnected;if(r=t.diagram,null!==o){var s=!0;null!==r&&(s=r.Z,r.Z=!0),o(t,e,n),null!==r&&(r.Z=s)}}i&&e.isTreeLink&&(n=!0,null!==r&&(n=r.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.Ch=!1),null===e||e.isTreeLeaf||(0===e.Ya.count?(e.Ch=null,null!==r&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Fu(e)))}function Fu(t){if(t.Ch=!1,0!==t.Ya.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.Ya.iterator;n.next();){var i=n.value;if(i.isTreeLink)if(e){if(i.fromNode===t)return void(t.isTreeLeaf=!1)}else if(i.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function Iu(t){null===t.rc?t.rc=new ft:t.rc.clear(),t.Vm(t,function(t,e){Ru(t,e)}),0===t.rc.count&&t.rc.add("",t)}function Ru(t,e){var n=e.portId;null!==n&&null!==t.rc&&t.rc.add(n,e)}function Bu(t,e,n){var i=e.portId;if(null!==i&&(null!==t.rc&&t.rc.remove(i),null!==(e=t.diagram)&&n)){for(n=null,t=t.findLinksConnected(i);t.next();)i=t.value,null===n&&(n=T()),n.push(i);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);N(n)}}}function zu(t,e){return null===(e=e.Fg())?0:1+zu(t,e)}function Vu(t,e,n,i,r,o,s){if(1<i)for(var a=n?t.zq():t.Cd();a.next();){var l=a.value;l.isTreeLink&&(null===(l=l.Eq(t))||l===t||e.contains(l)||(e.add(l),Vu(l,e,n,i-1,r,o,s)))}else Uu(t,e,n,r,o,s)}function Uu(t,e,n,i,r,o){for(var s=r===t||t.isTreeExpanded,a=n?t.zq():t.Cd();a.next();){var l=a.value;if(l.isTreeLink&&null!==(l=l.Eq(t))&&l!==t){var h=e.contains(l);h||e.add(l),s&&(o&&i.ek(l,r),l.Mh(),l.Ob(!1)),l.isTreeExpanded&&(l.wasTreeExpanded=l.isTreeExpanded,h||Uu(l,e,n,i,r,o))}}t.isTreeExpanded=!1}function qu(t,e,n,i,r,o,s){for(var a=o!==t&&t.isTreeExpanded,l=n?t.zq():t.Cd();l.next();){var h=l.value;h.isTreeLink&&(a||h.ed||h.Ua(),null!==(h=h.Eq(t))&&h!==t&&!e.contains(h)&&(e.add(h),a||(h.Ob(!0),h.Mh(),s&&r.gk(h,o)),2<i||h.wasTreeExpanded))&&(h.wasTreeExpanded=!1,qu(h,e,n,i-1,r,o,s))}t.isTreeExpanded=!0}ou.className="Part",ou.LayoutNone=0,ou.LayoutAdded=1,ou.LayoutRemoved=2,ou.LayoutShown=4,ou.LayoutHidden=8,ou.LayoutNodeSized=16,ou.LayoutGroupLayout=32,ou.LayoutNodeReplaced=64,ou.LayoutStandard=127,ou.LayoutAll=16777215,u(Pu,ou),Pu.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},Pu.prototype.updateRelationshipsFromData=function(){},Pu.prototype.zk=function(t){var e=this.adornedObject.part;if(e instanceof Qu&&this.adornedObject instanceof ih){var n=e.path;e.zk(t),t=n.geometry,n=(e=this.W.j).length;for(var i=0;i<n;i++){var r=e[i];r.isPanelMain&&r instanceof ih&&(r.na=t)}}},Pu.prototype.oj=function(){var t=this.ee;return null===t||null===(t=t.part)||!da(t)},Pu.prototype.Lc=function(){return!1},Pu.prototype.Hk=function(t,e,n,i,r,o,s){if(t===Mn&&"elements"===e){if(r instanceof Ju)null===this.Ra&&(this.Ra=r);else if(r instanceof Ml){var a=r.om(function(t){return t instanceof Ju});a instanceof Ju&&null===this.Ra&&(this.Ra=a)}}else t===Pn&&"elements"===e&&null!==this.Ra&&(i===this.Ra||i instanceof Ml&&this.Ra.Gg(i))&&(this.Ra=null);ou.prototype.Hk.call(this,t,e,n,i,r,o,s)},Pu.prototype.updateAdornments=function(){},Pu.prototype.pk=function(){},c.Object.defineProperties(Pu.prototype,{placeholder:{get:function(){return this.Ra}},adornedObject:{get:function(){return this.ee},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.Gf(this.category),this.ee=t,null!==n&&n.Eh(this.category,this)}},adornedPart:{get:function(){var t=this.ee;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),Pu.className="Adornment",u(Tu,ou),Tu.prototype.cloneProtected=function(t){ou.prototype.cloneProtected.call(this,t),t.P=this.P,t.P=-17&this.P,t.Bo=this.Bo,t.Co=this.Co,t.Fi=this.Fi,t.hq=this.hq,t.Uk=this.Uk.G(),t.qp=this.qp},(e=Tu.prototype).yf=function(t){ou.prototype.yf.call(this,t),t.od(),t.Re=this.Re,t.rc=null},e.tA=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=Au(this,t,e,n))&&t.um()},e.Hk=function(t,e,n,i,r,o,s){(t===Mn&&"elements"===e||t===Pn&&"elements"===e)&&(this.rc=null),ou.prototype.Hk.call(this,t,e,n,i,r,o,s)},e.od=function(t){void 0===t&&(t=null);for(var e=this.linksConnected;e.next();){var n=e.value;null!==t&&t.contains(n)||(Lu(this,n.fromPort),Lu(this,n.toPort),n.Ua())}},e.oj=function(){return!0},Tu.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.oq(this.Uk),t},Tu.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},Tu.prototype.isVisible=function(){if(!ou.prototype.isVisible.call(this))return!1;var t=!0,e=cs,n=this.diagram;if(null!==n){if(n.animationManager.Yt(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===cs){if(null!==(t=this.Fg())&&!t.isTreeExpanded)return!1}else if(e===fs){if(0<(t=t?this.Ov():this.Pv()).count&&t.all(function(t){return!t.isTreeExpanded}))return!1}else if(e===ds&&0<(t=t?this.Ov():this.Pv()).count&&t.any(function(t){return!t.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},Tu.prototype.Ob=function(t){ou.prototype.Ob.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&null!==this.containingGroup){var i=n.Eq(this);null===i||i.Ed(this.containingGroup)||n.Ua()}n.Ob(t)}},Tu.prototype.my=function(){var t=new nt,e=new nt;return Ou(this,this,t,e),e.iterator},Tu.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.Ya.iterator;var e=new J(this.Ya),n=this;return e.predicate=function(e){return e.fromNode===n&&e.fromPortId===t||e.toNode===n&&e.toPortId===t},e},(e=Tu.prototype).zq=function(t){void 0===t&&(t=null);var e=new J(this.Ya),n=this;return e.predicate=function(e){return e.fromNode===n&&(null===t||e.fromPortId===t)},e},e.Cd=function(t){void 0===t&&(t=null);var e=new J(this.Ya),n=this;return e.predicate=function(e){return e.toNode===n&&(null===t||e.toPortId===t)},e},e.Nv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var r=i.value;r.fromNode===this?null!==t&&r.fromPortId!==t||(r=r.toNode,null!==e?e.add(r):null!==n&&n!==r?((e=new nt).add(n),e.add(r)):n=r):r.toNode!==this||null!==t&&r.toPortId!==t||(r=r.fromNode,null!==e?e.add(r):null!==n&&n!==r?((e=new nt).add(n),e.add(r)):n=r)}return null!==e?e.iterator:null!==n?new Z(n):K},e.Pv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var r=i.value;r.fromNode!==this||null!==t&&r.fromPortId!==t||(r=r.toNode,null!==e?e.add(r):null!==n&&n!==r?((e=new nt).add(n),e.add(r)):n=r)}return null!==e?e.iterator:null!==n?new Z(n):K},e.Ov=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var r=i.value;r.toNode!==this||null!==t&&r.toPortId!==t||(r=r.fromNode,null!==e?e.add(r):null!==n&&n!==r?((e=new nt).add(n),e.add(r)):n=r)}return null!==e?e.iterator:null!==n?new Z(n):K},e.Sz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new J(this.Ya),r=this;return i.predicate=function(i){return!(i.fromNode!==r||i.toNode!==t||null!==e&&i.fromPortId!==e||null!==n&&i.toPortId!==n)||!(i.fromNode!==t||i.toNode!==r||null!==n&&i.fromPortId!==n||null!==e&&i.toPortId!==e)},i},e.Tz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new J(this.Ya),r=this;return i.predicate=function(i){return!(i.fromNode!==r||i.toNode!==t||null!==e&&i.fromPortId!==e||null!==n&&i.toPortId!==n)},i},Tu.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(e=Tu.prototype).Gq=function(t){ou.prototype.Gq.call(this,t),t||(Fu(this),null!==(t=this.Cl)&&ec(t,this))},e.Hq=function(t){ou.prototype.Hq.call(this,t),t||null!==(t=this.Cl)&&null!==t.jd&&(t.jd.remove(this),t.o())},e.pk=function(){if(0<this.Ya.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.Ya.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,ou.prototype.pk.call(this)},e.Gt=function(t){if(null===this.rc){if(""===t&&!1===this.Lh)return this;Iu(this)}var e=this.rc.H(t);return null!==e||""!==t&&null!==(e=this.rc.H(""))?e:this},e.vA=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.Ya.iterator;i.next();){var r=i.value;if(r.isTreeLink&&(e=r.fromNode)!==n&&e!==this)break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.Ya.iterator;i.next()&&(!(r=i.value).isTreeLink||(e=r.toNode)===n||e===this););if(e===this||null===e||e===n)return!1;n=e}return!0},e.dA=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.Ya.iterator;n.next();){var i=n.value;if(i.isTreeLink&&(t=i.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.Ya.iterator;n.next()&&(!(i=n.value).isTreeLink||(t=i.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},e.Pz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)wu(e,!0),e=e.Fg();var n=null;for(e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e=e.Fg()}for(e=this;null!==e;)wu(e,!1),e=e.Fg();return n},e.hj=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.Ya.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},e.Fg=function(){var t=this.Ch;if(null===t)return null;if(t instanceof Tu)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.Ya.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.Ch=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.Ch=e;return this.Ch=null},e.bA=function(){var t=new nt;return function t(e,n){if(null!==e){n.add(e);var i=e.hj();null!==i&&(n.add(i),t(e.Fg(),n))}}(this,t),t},e.aA=function(){return zu(this,this)},e.Bq=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new J(this.Ya);var n=this;return e.predicate=t?function(t){return!(!t.isTreeLink||t.fromNode!==n)}:function(t){return!(!t.isTreeLink||t.toNode!==n)},e},e.Rv=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,i=this.Ya.iterator;if(t)for(;i.next();)(t=i.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new tt).add(n),e.add(t)):n=t);else for(;i.next();)(t=i.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new tt).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new Z(n):K},e.cA=function(t){void 0===t&&(t=1/0);var e=new nt;return Cu(e,this,!1,t,!0),e},Tu.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.He){e.He=!0;var n=new nt;n.add(this),Vu(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===cs),e.He=!1}},Tu.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.He){e.He=!0;var n=new nt;n.add(this),qu(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===cs),e.He=!1}},c.Object.defineProperties(Tu.prototype,{portSpreading:{get:function(){return this.qp},set:function(t){var e=this.qp;e!==t&&(this.qp=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.od())}},avoidable:{get:function(){return 0!=(8&this.P)},set:function(t){var e=0!=(8&this.P);if(e!==t){this.P^=8;var n=this.diagram;null!==n&&qo(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Uk},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.Uk;if(!e.w(t)){this.Uk=t=t.G();var n=this.diagram;null!==n&&qo(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.Ya.iterator}},linkConnected:{get:function(){return this.Bo},set:function(t){var e=this.Bo;e!==t&&(this.Bo=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.Co},set:function(t){var e=this.Co;e!==t&&(this.Co=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.Cl}},labeledLink:{get:function(){return this.Cl},set:function(t){var e=this.Cl;if(e!==t){var n=this.diagram,i=this.data;if(null!==e){if(null!==e.jd&&(e.jd.remove(this),e.o()),null!==n&&null!==i&&!n.undoManager.isUndoingRedoing){var r=e.data,o=n.model;if(null!==r&&o.nj()){var s=o.ja(i);void 0!==s&&o.Ly(r,s)}}this.containingGroup=null}this.Cl=t,null!==t&&(ec(t,this),null===n||null===i||n.undoManager.isUndoingRedoing||(n=n.model,null!==(r=t.data)&&n.nj()&&void 0!==(i=n.ja(i))&&n.zv(r,i)),this.containingGroup=t.containingGroup),na(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Gt("")}},ports:{get:function(){return null===this.rc&&Iu(this),this.rc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.P)},set:function(t){var e=0!=(1&this.P);if(e!==t){this.P^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var i=!0;null!==n&&(i=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=i)}null!==n&&n.undoManager.isUndoingRedoing?this.Ob(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.P)},set:function(t){var e=0!=(2&this.P);e!==t&&(this.P^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.hq},set:function(t){var e=this.hq;e!==t&&(this.hq=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.P)},set:function(t){var e=0!=(4&this.P);e!==t&&(this.P^=4,this.g("isTreeLeaf",e,t))}}}),Tu.prototype.expandTree=Tu.prototype.expandTree,Tu.prototype.collapseTree=Tu.prototype.collapseTree,Tu.prototype.findTreeParts=Tu.prototype.cA,Tu.prototype.findTreeChildrenNodes=Tu.prototype.Rv,Tu.prototype.findTreeChildrenLinks=Tu.prototype.Bq,Tu.prototype.findTreeLevel=Tu.prototype.aA,Tu.prototype.findTreeParentChain=Tu.prototype.bA,Tu.prototype.findTreeParentNode=Tu.prototype.Fg,Tu.prototype.findTreeParentLink=Tu.prototype.hj,Tu.prototype.findCommonTreeParent=Tu.prototype.Pz,Tu.prototype.findTreeRoot=Tu.prototype.dA,Tu.prototype.isInTreeOf=Tu.prototype.vA,Tu.prototype.findPort=Tu.prototype.Gt,Tu.prototype.findLinksTo=Tu.prototype.Tz,Tu.prototype.findLinksBetween=Tu.prototype.Sz,Tu.prototype.findNodesInto=Tu.prototype.Ov,Tu.prototype.findNodesOutOf=Tu.prototype.Pv,Tu.prototype.findNodesConnected=Tu.prototype.Nv,Tu.prototype.findLinksInto=Tu.prototype.Cd,Tu.prototype.findLinksOutOf=Tu.prototype.zq,Tu.prototype.findExternalTreeLinksConnected=Tu.prototype.my,Tu.prototype.invalidateConnectedLinks=Tu.prototype.od,Tu.prototype.invalidateLinkBundle=Tu.prototype.tA;var Hu=new H(Tu,"SpreadingNone",10),Gu=new H(Tu,"SpreadingEvenly",11),Yu=new H(Tu,"SpreadingPacked",12);function Xu(t){Tu.call(this,t),this.P|=4608,this.No=new nt,this.Kl=new nt,this.Ra=this.Yp=this.Hi=this.Oo=this.Mo=null,this.jc=new uf,this.jc.group=this}function Ku(t,e){if(t.No.add(e)){e instanceof Xu&&t.Kl.add(e);var n=t.memberAdded;if(null!==n){var i=!0,r=t.diagram;null!==r&&(i=r.Z,r.Z=!0),n(t,e),null!==r&&(r.Z=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!1)}e instanceof Qu&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function Wu(t,e){if(t.No.remove(e)){e instanceof Xu&&t.Kl.remove(e);var n=t.memberRemoved;if(null!==n){var i=!0,r=t.diagram;null!==r&&(i=r.Z,r.Z=!0),n(t,e),null!==r&&(r.Z=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!0)}e instanceof Qu&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function $u(t,e,n,i){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Ob(!1),o instanceof Xu&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,$u(o,e,n,i)),o instanceof Tu)o.od(e),n.ek(o,i);else if(o instanceof Qu)for(o=o.labelNodes;o.next();)o.value.od(e)}t.isSubGraphExpanded=!1}function Zu(t,e,n,i){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Ob(!0),o instanceof Xu&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,Zu(o,e,n,i)),o instanceof Tu)o.od(e),n.gk(o,i);else if(o instanceof Qu)for(o=o.labelNodes;o.next();)o.value.od(e)}t.isSubGraphExpanded=!0}function Ju(){Ys.call(this),this.hb=ee,this.Fp=new Rt(NaN,NaN,NaN,NaN)}function Qu(){ou.call(this,Ml.Link),this.Fa=8,this.Ve=null,this.We="",this.rf=this.$n=null,this.sf="",this.gq=null,this.Pk=Cc,this.Cn=0,this.En=Cc,this.Fn=NaN,this.Yj=xc,this.Tp=.5,this.jd=null,this.Ab=(new tt).freeze(),this.qg=this.oh=null,this.Pl=new Rt,this.na=new Ke,this.I=this.v=this.Lf=this.Uf=null,this.l=[],this.rv=new dt,this.Yr=this.Kx=this.Jx=null,this.Lu=NaN,this.O=null}function tc(t){var e,n=t.fromNode,i=t.toNode;if(e=null!==n?null!==i?n.ly(i):n.containingGroup:null!==i?i.containingGroup:null,(i=t.ki)!==(n=e)){null!==i&&Wu(i,t),t.ki=n,null!==n&&Ku(n,t);var r=t.containingGroupChanged;if(null!==r){var o=!0,s=t.diagram;null!==s&&(o=s.Z,s.Z=!0),r(t,i,n),null!==s&&(s.Z=o)}!t.ed||t.Jx!==i&&t.Kx!==i||t.Ua()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=e}function ec(t,e){null===t.jd&&(t.jd=new nt),t.jd.add(e),t.o()}function nc(t,e,n){if(0!==e||0!==n){for(var i=t.ed,r=new tt,o=t.Ab.iterator;o.next();){var s=o.value;r.add(new dt(s.x+e,s.y+n).freeze())}r.freeze(),o=t.Ab,t.Ab=r,s=t.diagram,isNaN(e)||isNaN(n)||null!==s&&s.animationManager.qc?t.o():(t.dg.h(t.dg.x+e,t.dg.y+n),t.la.h(t.la.x+e,t.la.y+n),na(t)),i?ic(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==s&&s.animationManager.qc&&(t.qg=r),t.g("points",o,r)}}function ic(t){0===t.Ab.count?t.ed=!1:(t.ed=!0,t.Yr=null,t.Lu=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),gc(t,!1))}function rc(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function oc(t,e){var n=e.pp;return null===n&&((n=new of).port=e,n.node=e.part,e.pp=n),af(n,t)}function sc(t){return t===ie||.5===t.x&&.5===t.y}function ac(t){if(null===t.diagram||!t.isAvoiding||!zo(t.diagram))return!1;var e=t.points.j,n=e.length;if(4>n)return!1;t=Vo(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var r=e[i],o=e[i+1];if(!t.xk(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function lc(t,e,n,i,r,o){var s=e.tq,a=e.sq,l=Yc(e,n,i),h=n,u=i;for(0===r?h+=s:90===r?u+=a:180===r?h-=s:u-=a;l>tf&&Yc(e,h,u)===l-1;)n=h,i=u,0===r?h+=s:90===r?u+=a:180===r?h-=s:u-=a,--l;o?l>tf&&(180===r||0===r?n=Math.floor(n/s)*s+s/2:90!==r&&270!==r||(i=Math.floor(i/a)*a+a/2)):(n=Math.floor(n/s)*s+s/2,i=Math.floor(i/a)*a+a/2),l>tf&&(o=r,h=n,u=i,0===r?(o=90,u+=a):90===r?(o=180,h-=s):180===r?(o=270,u-=a):270===r&&(o=0,h+=s),Yc(e,h,u)===l-1?lc(t,e,h,u,o,!1):(h=n,u=i,0===r?(o=270,u-=a):90===r?(o=0,h+=s):180===r?(o=90,u+=a):270===r&&(o=180,h-=s),Yc(e,h,u)===l-1&&lc(t,e,h,u,o,!1))),t.vf(n,i)}function hc(t,e,n,i){return t=n-t,isNaN(t)||1/0===t||-1/0===t?NaN:(0>t&&(t=-t),e=i-e,isNaN(e)||1/0===e||-1/0===e?NaN:(0>e&&(e=-e),Xe.$(t,0)?e:Xe.$(e,0)?t:Math.sqrt(t*t+e*e)))}function uc(t,e,n,i){var r=t.pointsCount;if(2>r)return e;if(n){var o=t.i(1);if(0===(i=hc(e.x,e.y,n=o.x-i.x,o=o.y-i.y)))return e;r=2===r?.5*i:i,(t=t.computeShortLength(!0))>r&&(t=r),r=t*(o-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=r}else{if(o=t.i(r-2),0===(i=hc(e.x,e.y,n=o.x-i.x,o=o.y-i.y)))return e;r=2===r?.5*i:i,(t=t.computeShortLength(!1))>r&&(t=r),r=t*(e.y-o)/i,e.x-=t*(e.x-n)/i,e.y-=r}return e}function cc(t,e,n,i){for(var r=t.pointsCount,o=e;Xe.$(e.x,o.x)&&Xe.$(e.y,o.y);){if(n>=r)return r-1;o=t.i(n++)}if(!Xe.$(e.x,o.x)&&!Xe.$(e.y,o.y))return n-1;for(var s=o;Xe.$(e.x,o.x)&&Xe.$(o.x,s.x)&&(!i||(e.y>=o.y?o.y>=s.y:o.y<=s.y))||Xe.$(e.y,o.y)&&Xe.$(o.y,s.y)&&(!i||(e.x>=o.x?o.x>=s.x:o.x<=s.x));){if(n>=r)return r-1;s=t.i(n++)}return n-2}function fc(t,e,n,i,r,o,s){if(!s&&pc(t)){s=[];var a=0;if(t.isVisible()&&(a=function(t,e,n,i){var r=t.diagram;if(null===r||e.w(n))return 0;for(r=r.layers;r.next();){var o=r.value;if(null!==o&&o.visible)for(var s=(o=o.Da.j).length,a=0;a<s;a++){var l=o[a];if(l instanceof Qu){if(l===t)return 0<i.length&&i.sort(function(t,e){return t-e}),i.length;if(l.isVisible()&&pc(l)){var h=l.routeBounds;h.u()&&t.routeBounds.Kc(h)&&!t.usesSamePort(l)&&null!==(h=l.path)&&h.Ff()&&dc(e,n,i,l)}}}}return 0<i.length&&i.sort(function(t,e){return t-e}),i.length}(t,r,o,s)),0<a)if(Xe.A(r.y,o.y))if(r.x<o.x)for(var l=0;l<a;){var h=Math.max(r.x,Math.min(s[l++]-5,o.x-10));e.lineTo(h+n,o.y+i);for(var u=h+n,c=Math.min(h+10,o.x);l<a&&(h=s[l])<c+10;)l++,c=Math.min(h+5,o.x);h=o.y-10+i,c+=n;var f=o.y+i;t.curve===Pc?Zh(e,c,f,!1):Qh(e,u,h,c,h,c,f)}else for(--a;0<=a;){for(l=Math.min(r.x,Math.max(s[a--]+5,o.x+10)),e.lineTo(l+n,o.y+i),u=l+n,h=Math.max(l-10,o.x);0<=a&&(l=s[a])>h-10;)a--,h=Math.max(l-5,o.x);l=o.y-10+i,h+=n,c=o.y+i,t.curve===Pc?Zh(e,h,c,!1):Qh(e,u,l,h,l,h,c)}else if(Xe.A(r.x,o.x))if(r.y<o.y)for(l=0;l<a;){for(h=Math.max(r.y,Math.min(s[l++]-5,o.y-10)),e.lineTo(o.x+n,h+i),u=h+i,h=Math.min(h+10,o.y);l<a&&(c=s[l])<h+10;)l++,h=Math.min(c+5,o.y);c=o.x-10+n,f=o.x+n,h+=i,t.curve===Pc?Zh(e,f,h,!1):Qh(e,c,u,c,h,f,h)}else for(--a;0<=a;){for(l=Math.min(r.y,Math.max(s[a--]+5,o.y+10)),e.lineTo(o.x+n,l+i),u=l+i,l=Math.max(l-10,o.y);0<=a&&(h=s[a])>l-10;)a--,l=Math.max(h-5,o.y);h=o.x-10+n,c=o.x+n,l+=i,t.curve===Pc?Zh(e,c,l,!1):Qh(e,h,u,h,l,c,l)}}e.lineTo(o.x+n,o.y+i)}function dc(t,e,n,i){for(var r=Xe.A(t.y,e.y),o=i.pointsCount,s=i.i(0),a=dt.alloc(),l=1;l<o;l++){var h=i.i(l);if(l<o-1){var u=i.i(l+1);if(s.y===h.y&&h.y===u.y){if(h.x>s.x&&u.x>=h.x||h.x<s.x&&u.x<=h.x)continue}else if(s.x===h.x&&h.x===u.x&&(h.y>s.y&&u.y>=h.y||h.y<s.y&&u.y<=h.y))continue}t:{var c=t.y,f=e.x,d=e.y,p=s.x;s=s.y;var g=h.x,m=h.y;if(Xe.A(u=t.x,f)){if(!Xe.A(c,d)&&Xe.A(s,m)&&Math.min(c,d)<s&&Math.max(c,d)>s&&Math.min(p,g)<u&&Math.max(p,g)>u&&!Xe.A(p,g)){a.x=u,a.y=s,u=!0;break t}}else if(Xe.A(c,d)&&Xe.A(p,g)&&Math.min(u,f)<p&&Math.max(u,f)>p&&Math.min(s,m)<c&&Math.max(s,m)>c&&!Xe.A(s,m)){a.x=p,a.y=c,u=!0;break t}a.x=0,a.y=0,u=!1}u&&n.push(r?a.x:a.y),s=h}dt.free(a)}function pc(t){return(t=t.curve)===Tc||t===Pc}function gc(t,e){(e||pc(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Vg.contains(t)||0===t.Pl.width&&0===t.Pl.height||e.Vg.add(t,t.Pl.copy()))}function mc(t,e,n){if(null!==e&&e.Um&&e.ed&&pc(e)){var i=e.routeBounds;i.u()&&(t.routeBounds.Kc(i)||n.Kc(i))&&(t.usesSamePort(e)||e.bc())}}function yc(t){var e=t.Ve;if(null!==e){var n=t.rf;if(null!==n){for(var i=t.We,r=t.sf,o=t=null,s=e.Ya.j,a=s.length,l=0;l<a;l++){var h=s[l];(h.Ve===e&&h.We===i&&h.rf===n&&h.sf===r||h.Ve===n&&h.We===r&&h.rf===e&&h.sf===i)&&(null===o?o=h:(null===t&&(t=[]).push(o),t.push(h)))}if(null!==t){for(null===(o=Au(e,n,i,r))&&(Nu(e,o=new qc(e,i,n,r)),Nu(n,o)),o.links=t,e=0;e<t.length;e++)t[e].Lf=o;o.um()}}}}function vc(t){var e=t.Lf;null!==e&&(t.Lf=null,0<=(t=e.links.indexOf(t))&&(P(e.links,t),e.um()))}Tu.className="Node",Tu.SpreadingNone=Hu,Tu.SpreadingEvenly=Gu,Tu.SpreadingPacked=Yu,u(Xu,Tu),Xu.prototype.cloneProtected=function(t){Tu.prototype.cloneProtected.call(this,t),this.P=-32769&this.P,t.Mo=this.Mo,t.Oo=this.Oo,t.Hi=this.Hi,t.Yp=this.Yp;var e=t.om(function(t){return t instanceof Ju});t.Ra=e instanceof Ju?e:null,null!==this.jc?(t.jc=this.jc.copy(),t.jc.group=t):(null!==t.jc&&(t.jc.group=null),t.jc=null)},(e=Xu.prototype).yf=function(t){Tu.prototype.yf.call(this,t);var e=t.sk();for(t=t.memberParts;t.next();){var n=t.value;if(n.o(),n.C(8),n.ik(),n instanceof Tu)n.od(e);else if(n instanceof Qu)for(n=n.labelNodes;n.next();)n.value.od(e)}},e.Hk=function(t,e,n,i,r,o,s){if(t===Mn&&"elements"===e){if(r instanceof Ju)null===this.Ra?this.Ra=r:this.Ra!==r&&v("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof Ml){var a=r.om(function(t){return t instanceof Ju});a instanceof Ju&&(null===this.Ra?this.Ra=a:this.Ra!==a&&v("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Pn&&"elements"===e&&null!==this.Ra&&(i===this.Ra||i instanceof Ml&&this.Ra.Gg(i))&&(this.Ra=null);Tu.prototype.Hk.call(this,t,e,n,i,r,o,s)},e.Gh=function(t,e,n,i){this.bf=this.Ra,Tu.prototype.Gh.call(this,t,e,n,i)},e.Ta=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof Qu||e.Ta()}),Tu.prototype.Ta.call(this)},e.oj=function(){if(!Tu.prototype.oj.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof Tu){if(e.isVisible()&&da(e))return!1}else if(e instanceof Qu&&e.isVisible()&&da(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},e.pk=function(){if(0<this.No.count){var t=this.diagram;if(null!==t)for(var e=this.No.copy().iterator;e.next();)t.remove(e.value)}Tu.prototype.pk.call(this)},Xu.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Gs(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},Xu.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var i=!0;for(t=Gs(t).iterator;t.next();){var r=t.value;!e||n.isValidMember(this,r)?r.containingGroup=this:i=!1}return i},Xu.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null!==t&&!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(e=Xu.prototype).od=function(t){void 0===t&&(t=null);var e=0!=(65536&this.P);if(Tu.prototype.od.call(this,t),!e)for(0!=(65536&this.P)!=1&&(this.P=65536^this.P),e=this.Mv();e.next();){var n=e.value;if(null===t||!t.contains(n)){var i=n.fromNode;(null!==i&&i!==this&&i.Ed(this)&&!i.isVisible()||null!==(i=n.toNode)&&i!==this&&i.Ed(this)&&!i.isVisible())&&(Lu(i,n.fromPort),Lu(i,n.toPort),n.Ua())}}},e.Mv=function(){var t=this.sk();t.add(this);for(var e=new nt,n=t.iterator;n.next();){var i=n.value;if(i instanceof Tu)for(i=i.linksConnected;i.next();){var r=i.value;t.contains(r)||e.add(r)}}return e.iterator},e.Rz=function(){var t=this.sk();t.add(this);for(var e=new nt,n=t.iterator;n.next();){var i=n.value;if(i instanceof Tu)for(i=i.linksConnected;i.next();){var r=i.value,o=r.fromNode;null===o||t.contains(o)&&o!==this||e.add(o),null===(r=r.toNode)||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},e.Qz=function(){var t=new nt;return function t(e,n){null!==e&&(n.add(e),t(e.containingGroup,n))}(this,t),t},e.sk=function(){var t=new nt;return Cu(t,this,!0,0,!0),t.remove(this),t},e.Ob=function(t){Tu.prototype.Ob.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ob(t)},Xu.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.He||(t.He=!0,$u(this,this.sk(),t,this),t.He=!1)},Xu.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.He||(t.He=!0,Zu(this,this.sk(),t,this),t.He=!1)},Xu.prototype.move=function(t,e){void 0===e&&(e=!1);var n=e?this.location:this.position,i=n.x;n=n.y;var r=t.x,o=t.y;if(!(i===r||isNaN(i)&&isNaN(r))||!(n===o||isNaN(n)&&isNaN(o))){for(i=r-(isNaN(i)?0:i),n=o-(isNaN(n)?0:n),o=dt.alloc(),Tu.prototype.move.call(this,t,e),t=new nt,e=this.sk().iterator;e.next();)(r=e.value)instanceof Qu&&(r.suspendsRouting&&t.add(r),r.ed||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(!((r=e.value).Nh()||r instanceof Tu&&r.isLinkLabel)){var s=r.position,a=r.location;s.u()?(o.x=s.x+i,o.y=s.y+n,r.position=o):a.u()&&(o.x=a.x+i,o.y=a.y+n,r.location=o)}for(e.reset();e.next();)(r=e.value)instanceof Qu&&(r.suspendsRouting=t.contains(r),r.ed||r.fromNode!==this&&r.toNode!==this)&&(o.x=(s=r.position).x+i,o.y=s.y+n,o.u()?r.move(o):r.Ua(),ac(r)&&r.Ua());dt.free(o)}},c.Object.defineProperties(Xu.prototype,{placeholder:{get:function(){return this.Ra}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.P)},set:function(t){var e=0!=(2048&this.P);e!==t&&(this.P^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.P)},set:function(t){var e=0!=(4096&this.P);e!==t&&(this.P^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.P)},set:function(t){var e=0!=(8192&this.P);e!==t&&(this.P^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.P)},set:function(t){var e=0!=(16384&this.P);e!==t&&(this.P^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.No.iterator}},layout:{get:function(){return this.jc},set:function(t){var e=this.jc;if(e!==t){null!==e&&(e.diagram=null,e.group=null),this.jc=t;var n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.Ng=!0),this.g("layout",e,t),null!==n&&n.Db()}}},memberAdded:{get:function(){return this.Mo},set:function(t){var e=this.Mo;e!==t&&(this.Mo=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.Oo},set:function(t){var e=this.Oo;e!==t&&(this.Oo=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.P)},set:function(t){var e=0!=(256&this.P);e!==t&&(this.P^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.P)},set:function(t){var e=0!=(512&this.P);if(e!==t){this.P^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var i=!0;null!==n&&(i=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=i)}null!==n&&n.undoManager.isUndoingRedoing?(null!==this.Ra&&this.Ra.o(),this.memberParts.each(function(t){t.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.P)},set:function(t){var e=0!=(1024&this.P);e!==t&&(this.P^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.Yp},set:function(t){var e=this.Yp;e!==t&&(this.Yp=t,this.g("subGraphExpandedChanged",e,t))}},Ph:{get:function(){return 0!=(32768&this.P)},set:function(t){0!=(32768&this.P)!==t&&(this.P^=32768)}}}),Xu.prototype.expandSubGraph=Xu.prototype.expandSubGraph,Xu.prototype.collapseSubGraph=Xu.prototype.collapseSubGraph,Xu.prototype.findSubGraphParts=Xu.prototype.sk,Xu.prototype.findContainingGroupChain=Xu.prototype.Qz,Xu.prototype.findExternalNodesConnected=Xu.prototype.Rz,Xu.prototype.findExternalLinksConnected=Xu.prototype.Mv,Xu.prototype.ensureBounds=Xu.prototype.Ta,Xu.className="Group",u(Ju,Ys),Ju.prototype.cloneProtected=function(t){Ys.prototype.cloneProtected.call(this,t),t.hb=this.hb.G(),t.Fp=this.Fp.copy()},Ju.prototype.Ih=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return Xt(0,0,e.width,e.height,t.x,t.y)},Ju.prototype.zm=function(){var t=this.part;if(null!==t&&(t instanceof Xu||t instanceof Pu)||v("Placeholder is not inside a Group or Adornment."),t instanceof Xu){var e=this.computeBorder(this.Fp),n=this.minSize,i=this.pc;for(Bt(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),Ws(this,0,0,i.width,i.height),i=t.memberParts,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.diagram,!n||null===i||i.animationManager.$v(t)||isNaN(e.x)||isNaN(e.y)||((n=dt.alloc()).qj(e,t.locationSpot),n.w(t.location)||(t.location=new dt(n.x,n.y)),dt.free(n))}else{e=this.pc,i=(n=this.hb).left+n.right;var r=n.top+n.bottom,o=t.adornedObject;t.angle=o.jj();var s=0;o instanceof ih&&(s=o.strokeWidth);var a=o.Af(),l=o.naturalBounds,h=(l.width+s)*a;s=(l.height+s)*a,t.type!==Ml.Link&&(o=o.ga("Selection"===t.category?re:t.locationSpot,dt.alloc()),t.location=o,dt.free(o)),isNaN(h)||isNaN(s)?(h=(t=t.adornedObject).ga(re,dt.alloc()),(o=Rt.allocAt(h.x,h.y,0,0)).Me(t.ga(fe,h)),o.Me(t.ga(se,h)),o.Me(t.ga(ue,h)),Bt(e,o.width+i||0,o.height+r||0),Ws(this,-n.left,-n.top,e.width,e.height),dt.free(h),Rt.free(o)):(Bt(e,h+i||0,s+r||0),Ws(this,-n.left,-n.top,e.width,e.height))}},Ju.prototype.Gh=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},Ju.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof Xu&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Fp.u()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&null!==(n=i.computeBorder(e,this.Fp,t)))return n}n=Rt.alloc(),i=this.computeMemberBounds(n);var r=this.hb;return e instanceof Xu&&!e.isSubGraphExpanded?t.h(i.x-r.left,i.y-r.top,0,0):t.h(i.x-r.left,i.y-r.top,Math.max(i.width+r.left+r.right,0),Math.max(i.height+r.top+r.bottom,0)),Rt.free(n),e instanceof Xu&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Me(e.location),t},Ju.prototype.computeMemberBounds=function(t){if(!(this.part instanceof Xu))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,r=-1/0,o=-1/0,s=e.memberParts;s.next();){var a=s.value;if(a.isVisible()){if(a instanceof Qu){if(!e.computesBoundsIncludingLinks)continue;if(ca(a))continue;if(a.fromNode===e||a.toNode===e)continue}(a=a.actualBounds).left<n&&(n=a.left),a.top<i&&(i=a.top),a.right>r&&(r=a.right),a.bottom>o&&(o=a.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,r-n,o-i):t.h((e=e.location).x,e.y,0,0),t},c.Object.defineProperties(Ju.prototype,{padding:{get:function(){return this.hb},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.hb;e.w(t)||(this.hb=t=t.G(),this.g("padding",e,t),this.o())}}}),Ju.className="Placeholder",u(Qu,ou),Qu.prototype.cloneProtected=function(t){ou.prototype.cloneProtected.call(this,t),t.Fa=-113&this.Fa,t.We=this.We,t.$n=this.$n,t.sf=this.sf,t.gq=this.gq,t.Pk=this.Pk,t.Cn=this.Cn,t.En=this.En,t.Fn=this.Fn,t.Yj=this.Yj,t.Tp=this.Tp,null!==this.O&&(t.O=this.O.copy())},(e=Qu.prototype).yf=function(t){ou.prototype.yf.call(this,t),this.We=t.We,this.sf=t.sf,t.oh=null,t.Ua(),t.Lf=this.Lf;var e=t.fromPort;null!==e&&Lu(t.fromNode,e),null!==(e=t.toPort)&&Lu(t.toNode,e)},e.ib=function(t){t.classType===Qu?2==(2&t.value)?this.routing=t:t===Mc||t===Pc||t===Tc?this.curve=t:t===Nc||t===Ac||t===Ec?this.adjusting=t:t!==xc&&t!==Cc&&v("Unknown Link enum value for a Link property: "+t):ou.prototype.ib.call(this,t)},e.Ic=function(){null===this.O&&(this.O=new hf)},e.oj=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),da(t)||mu(t))return!1}return null===(t=this.toNode)||(null!==(e=t.findVisibleNode())&&(t=e),!da(t)&&!mu(t))},e.Aw=function(){return!1},e.hu=function(){},e.Lc=function(){return!1},Qu.prototype.computeAngle=function(t,e,n){return Qu.computeAngle(e,n)},Qu.computeAngle=function(t,e){switch(t){default:case Cc:t=0;break;case Lc:t=e;break;case Oc:t=e+90;break;case Dc:t=e-90;break;case jc:t=e+180;break;case Fc:90<(t=Xe.Pq(e))&&270>t&&(t-=180);break;case Ic:90<(t=Xe.Pq(e+90))&&270>t&&(t-=180);break;case Rc:90<(t=Xe.Pq(e-90))&&270>t&&(t-=180);break;case Bc:if(45<(t=Xe.Pq(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return Xe.Pq(t)},(e=Qu.prototype).Mh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&ou.prototype.Mh.call(this)},e.Eq=function(t){var e=this.fromNode;return t===e?this.toNode:e},e.iA=function(t){var e=this.fromPort;return t===e?this.toPort:e},e.Gq=function(t){if(ou.prototype.Gq.call(this,t),pc(this)&&this.Jq(this.actualBounds),!t){var e=null;null!==(t=this.Ve)&&Du(t,this,e=this.fromPort);var n=this.rf;if(null!==n){var i=this.toPort;n===t&&i===e||Du(n,this,i)}yc(this)}},e.Hq=function(t){if(ou.prototype.Hq.call(this,t),pc(this)&&this.Jq(this.actualBounds),!t){var e=null;null!==(t=this.Ve)&&ju(t,this,e=this.fromPort);var n=this.rf;if(null!==n){var i=this.toPort;n===t&&i===e||ju(n,this,i)}vc(this)}},e.pk=function(){if(this.ed=!0,null!==this.jd){var t=this.diagram;if(null!==t)for(var e=this.jd.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},Qu.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},Qu.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var r=n.y;for(isNaN(r)&&(r=0),i=t.x-i,r=t.y-r,!0===e?ou.prototype.move.call(this,t,!1):(t=dt.allocAt(n.x+i,n.y+r),ou.prototype.move.call(this,t,!1),dt.free(t)),nc(this,i,r),t=this.labelNodes;t.next();)(e=t.value).moveTo((n=e.position).x+i,n.y+r)},Qu.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},Qu.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},Qu.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(Ct),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var n=this.i(0),i=this.i(1);return t.h((n.x+i.x)/2,(n.y+i.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Mc))return this.na.Sv(.5,t),t.add(this.i(0)),n=this.na.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===Mc){if(3===e)return this.i(1);if(n=3*((i=(e-1)/3|0)/2|0),1==i%2){i=this.i(n);var r=this.i(n+1),o=this.i(n+2);n=this.i(n+3),Xe.sz(i.x,i.y,r.x,r.y,o.x,o.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var s=this.flattenedLengths;for(n=this.flattenedTotalLength,r=o=i=0;i<n/2&&o<e&&!(i+(r=s[o])>n/2);)i+=r,o++;return e=this.i(o),o=this.i(o+1),1>Math.abs(e.x-o.x)?t.h(e.x,e.y>o.y?e.y-(n/2-i):e.y+(n/2-i)):1>Math.abs(e.y-o.y)?t.h(e.x>o.x?e.x-(n/2-i):e.x+(n/2-i),e.y):t.h(e.x+(n=(n/2-i)/r)*(o.x-e.x),e.y+n*(o.y-e.y)),t},Qu.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Sa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Mc))return this.na.sy(.5);if(this.computeCurve()===Mc&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(1==e%2){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var i=this.i(n+2);return n=this.i(n+3),Xe.rz(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Sa(this.i(n+1))}e=this.flattenedLengths,i=this.flattenedTotalLength;var r,o=0;for(n=0;o<i/2&&n<t&&!(o+(r=e[n])>i/2);)o+=r,n++;if(e=this.i(n),i=this.i(n+1),1>Math.abs(e.x-i.x)&&1>Math.abs(e.y-i.y)){if(0<n&&n+2<t)return this.i(n-1).Sa(this.i(n+2))}else{if(1>Math.abs(e.x-i.x))return e.y>i.y?270:90;if(1>Math.abs(e.y-i.y))return e.x>i.x?180:0}return e.Sa(i)},(e=Qu.prototype).i=function(t){return this.Ab.j[t]},e.pd=function(t,e){this.Ab.Nc(t,e)},e.L=function(t,e,n){this.Ab.Nc(t,new dt(e,n))},e.rA=function(t,e){this.Ab.vb(t,e)},e.m=function(t,e,n){this.Ab.vb(t,new dt(e,n))},e.Be=function(t){this.Ab.add(t)},e.vf=function(t,e){this.Ab.add(new dt(t,e))},e.pw=function(t){this.Ab.bb(t)},e.jk=function(){this.Ab.clear()},e.Rh=function(){null===this.oh&&(this.oh=this.Ab,this.Ab=this.Ab.copy())},e.xf=function(){if(null!==this.oh){for(var t=this.oh,e=this.Ab,n=1/0,i=1/0,r=t.j,o=r.length,s=0;s<o;s++){var a=r[s];n=Math.min(a.x,n),i=Math.min(a.y,i)}a=s=1/0;for(var l=e.j,h=l.length,u=0;u<h;u++){var c=l[u];s=Math.min(c.x,s),a=Math.min(c.y,a),c.freeze()}if(e.freeze(),h===o){for(o=0;o<h;o++)if((u=r[o]).x-n!=(c=l[o]).x-s||u.y-i!=c.y-a){this.bc();break}}else this.bc();this.oh=null,null!==(n=this.diagram)&&n.animationManager.qc&&(this.qg=e),ic(this),this.g("points",t,e)}},e.uw=function(){null!==this.oh&&(this.Ab=this.oh,this.oh=null)},e.Ua=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Tt.contains(this)||t.undoManager.isUndoingRedoing)return;if((t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.qg&&!t.isTicking&&t.isAnimating&&(this.qg=null)}null!==(t=this.path)&&(this.ed=!1,this.o(),t.o())}},e.uj=function(){if(!this.ed&&!this.yt){var t=!0;try{this.yt=!0,this.Rh(),t=this.computePoints()}catch(e){this.yt=!1,this.uw()}finally{this.yt=!1,t?this.xf():this.uw()}}},Qu.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(bc||((bc=new Tu).desiredSize=Mt,bc.Ta()),this.defaultFromPoint&&(bc.location=this.defaultFromPoint,bc.Ta(),e=t=bc)):e=this.fromPort,null!==e&&!t.isVisible()){var n=t.findVisibleNode();null!==n&&n!==t?(t=n,e=n.port):t=n}if(this.Jx=t,null===t||!t.location.u())return!1;for(;!(null===e||e.actualBounds.u()&&e.Ff());)e=e.panel;if(null===e)return!1;var i=this.toNode,r=null;if(null===i?(wc||((wc=new Tu).desiredSize=Mt,wc.Ta()),this.defaultToPoint&&(wc.location=this.defaultToPoint,wc.Ta(),r=i=wc)):r=this.toPort,null===r||i.isVisible()||(null!==(n=i.findVisibleNode())&&n!==i?(i=n,r=n.port):i=n),this.Kx=i,null===i||!i.location.u())return!1;for(;!(null===r||r.actualBounds.u()&&r.Ff());)r=r.panel;if(null===r)return!1;var o=this.pointsCount,s=this.computeSpot(!0,e);n=this.computeSpot(!1,r);var a=sc(s),l=sc(n),h=e===r&&null!==e,u=this.isOrthogonal,c=this.curve===Mc;this.Uf=!(!h||u)&&(c=!0);var f=this.computeAdjusting()===Cc||h;if(!u&&!h&&a&&l){if(a=!1,!f&&3<=o&&(f=this.getLinkPoint(t,e,s,!0,!1,i,r),l=this.getLinkPoint(i,r,n,!1,!1,t,e),a=this.adjustPoints(0,f,o-1,l))&&(f=this.getLinkPoint(t,e,s,!0,!1,i,r),l=this.getLinkPoint(i,r,n,!1,!1,t,e),this.adjustPoints(0,f,o-1,l)),!a)if(this.jk(),c){o=this.getLinkPoint(t,e,s,!0,!1,i,r),a=(f=this.getLinkPoint(i,r,n,!1,!1,t,e)).x-o.x,l=f.y-o.y,h=this.computeCurviness(),c=u=0;var d=o.x+a/3,p=o.y+l/3,g=d,m=p;Xe.A(l,0)?m=0<a?m-h:m+h:(u=-a/l,c=Math.sqrt(h*h/(u*u+1)),0>h&&(c=-c),m=u*((g=(0>l?-1:1)*c+d)-d)+p);var y=d=o.x+2*a/3,v=p=o.y+2*l/3;v=Xe.A(l,0)?0<a?v-h:v+h:u*((y=(0>l?-1:1)*c+d)-d)+p,this.jk(),this.Be(o),this.vf(g,m),this.vf(y,v),this.Be(f),this.pd(0,this.getLinkPoint(t,e,s,!0,!1,i,r)),this.pd(3,this.getLinkPoint(i,r,n,!1,!1,t,e))}else s=this.getLinkPoint(t,e,s,!0,!1,i,r),n=this.getLinkPoint(i,r,n,!1,!1,t,e),this.hasCurviness()?(f=n.x-s.x,i=n.y-s.y,r=this.computeCurviness(),o=t=s.x+f/2,a=e=s.y+i/2,Xe.A(i,0)?a=0<f?a-r:a+r:(f=-f/i,o=Math.sqrt(r*r/(f*f+1)),0>r&&(o=-o),a=f*((o=(0>i?-1:1)*o+t)-t)+e),this.Be(s),this.vf(o,a)):this.Be(s),this.Be(n)}else{c=this.isAvoiding,f&&(u&&c||h)&&this.jk();var b=h?this.computeCurviness():0;c=this.getLinkPoint(t,e,s,!0,u,i,r),d=g=p=0,(u||!a||h)&&(m=this.computeEndSegmentLength(t,e,s,!0),d=this.getLinkDirection(t,e,c,s,!0,u,i,r),h&&(a||s.w(n)||!u&&1===s.x+n.x&&1===s.y+n.y)&&(d-=u?90:30,0>b&&(d-=180)),0>d?d+=360:360<=d&&(d-=360),h&&(m+=Math.abs(b)*(u?1:2)),0===d?p=m:90===d?g=m:180===d?p=-m:270===d?g=-m:(p=m*Math.cos(d*Math.PI/180),g=m*Math.sin(d*Math.PI/180)),s.lc()&&h&&(m=e.ga(le,dt.alloc()),y=dt.allocAt(m.x+1e3*p,m.y+1e3*g),this.getLinkPointFromPoint(t,e,m,y,!0,c),dt.free(m),dt.free(y))),m=this.getLinkPoint(i,r,n,!1,u,t,e);var w=v=y=0;if(u||!l||h){var x=this.computeEndSegmentLength(i,r,n,!1);w=this.getLinkDirection(i,r,m,n,!1,u,t,e),h&&(l||s.w(n)||!u&&1===s.x+n.x&&1===s.y+n.y)&&(w+=u?0:30,0>b&&(w+=180)),0>w?w+=360:360<=w&&(w-=360),h&&(x+=Math.abs(b)*(u?1:2)),0===w?y=x:90===w?v=x:180===w?y=-x:270===w?v=-x:(y=x*Math.cos(w*Math.PI/180),v=x*Math.sin(w*Math.PI/180)),n.lc()&&h&&(n=r.ga(le,dt.alloc()),s=dt.allocAt(n.x+1e3*y,n.y+1e3*v),this.getLinkPointFromPoint(i,r,n,s,!1,m),dt.free(n),dt.free(s))}n=c,(u||!a||h)&&(n=new dt(c.x+p,c.y+g)),s=m,(u||!l||h)&&(s=new dt(m.x+y,m.y+v)),!f&&!u&&a&&3<o&&this.adjustPoints(0,c,o-2,s)?this.pd(o-1,m):!f&&!u&&l&&3<o&&this.adjustPoints(1,n,o-1,m)?this.pd(0,c):!f&&(u?6<=o:4<o)&&this.adjustPoints(1,n,o-2,s)?(this.pd(0,c),this.pd(o-1,m)):(this.jk(),this.Be(c),(u||!a||h)&&this.Be(n),u&&this.addOrthoPoints(n,d,s,w,t,i),(u||!l||h)&&this.Be(s),this.Be(m))}return!0},Qu.prototype.getLinkPointFromPoint=function(t,e,n,i,r,o){if(void 0===o&&(o=new dt),null===t||null===e)return o.assign(n),o;if(t.isVisible()||null!==(r=t.findVisibleNode())&&r!==t&&(e=r.port),t=null,null===(r=e.panel)||r.de()||(r=r.panel),null===r){r=i.x,i=i.y;var s=n.x;n=n.y}else{var a=-(t=r.Bd).m12*(r=1/(t.m11*t.m22-t.m12*t.m21)),l=-t.m21*r,h=t.m11*r,u=r*(t.m21*t.dy-t.m22*t.dx),c=r*(t.m12*t.dx-t.m11*t.dy);r=i.x*(s=t.m22*r)+i.y*l+u,i=i.x*a+i.y*h+c,s=n.x*s+n.y*l+u,n=n.x*a+n.y*h+c}return e.tk(r,i,s,n,o),null!==t&&o.transform(t),o},Qu.prototype.getLinkPoint=function(t,e,n,i,r,o,s,a){if(void 0===a&&(a=new dt),n.jb()&&!sc(n))return e.ga(n,a),a;if(n.Mc()){var l=oc(this,e);if(null!==l){if(a.assign(l.Mq),r&&this.routing===_c){var h=oc(this,s);if(null!==h&&l.mm<h.mm){l=dt.alloc(),h=dt.alloc();var u=new Rt(e.ga(re,l),e.ga(fe,h)),c=this.computeSpot(!i,s);t=this.getLinkPoint(o,s,c,!i,r,t,e,h),(n.Df(pe)||n.Df(ge))&&t.y>=u.y&&t.y<=u.y+u.height?a.y=t.y:(n.Df(de)||n.Df(me))&&t.x>=u.x&&t.x<=u.x+u.width&&(a.x=t.x),dt.free(l),dt.free(h)}}return a}}return n=e.ga(.5===n.x&&.5===n.y?n:le,dt.alloc()),this.pointsCount>(r?6:2)?(s=this.i(i?1:this.pointsCount-2),r&&(s=rc(n,s.copy()))):(l=this.computeSpot(!i,s),o=dt.alloc(),s=s.ga(.5===l.x&&.5===l.y?l:le,o),r&&(s=rc(n,s)),dt.free(o)),this.getLinkPointFromPoint(t,e,n,s,i,a),dt.free(n),a},Qu.prototype.getLinkDirection=function(t,e,n,i,r,o,s,a){t:if(i.jb())var l=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:.5>i.x?225:.5<i.x?45:0;else{if(i.Mc()&&null!==(l=oc(this,e)))switch(l.zc){case 1:l=270;break t;case 2:l=180;break t;default:case 4:l=0;break t;case 8:l=90;break t}l=e.ga(le,dt.alloc()),this.pointsCount>(o?6:2)?(a=this.i(r?1:this.pointsCount-2),a=o?rc(l,a.copy()):n):(n=dt.alloc(),a=a.ga(le,n),dt.free(n)),n=Math.abs(a.x-l.x)>Math.abs(a.y-l.y)?a.x>=l.x?0:180:a.y>=l.y?90:270,dt.free(l),l=n}return i.lc()&&s.Ed(t)&&360<=(l+=180)&&(l-=360),sc(i)||0===(t=e.jj())||(45<=t&&135>t?l+=90:135<=t&&225>t?l+=180:225<=t&&315>t&&(l+=270),360<=l&&(l-=360)),l},Qu.prototype.computeEndSegmentLength=function(t,e,n,i){return null!==e&&n.Mc()&&null!==(t=oc(this,e))?t.Kv:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},Qu.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=le:((e=this.fromSpot).Mb()&&(e=t.fromSpot),t=e===Te?ie:e):null===(t=e||this.toPort)?t=le:((e=this.toSpot).Mb()&&(e=t.toSpot),t=e===Te?ie:e),t},Qu.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Cc&&4<this.pointsCount?this.computeMidPoint(new dt):(t=e.ga(le),null!==(e=null!==(e=e.pp)?af(e,this):null)&&(t=e.Mq),t)},Qu.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},Qu.prototype.zf=function(t,e,n,i,r,o){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var s=o;if(void 0===o&&(s=Ge.alloc()).reset(),s.multiply(this.transform),this.Hh(t,s))return Rl(this,e,n,r),void 0===o&&Ge.free(s),!0;if(this.Kc(t,s)){var a=!1;if(!this.isAtomic)for(var l=this.W.j,h=l.length;h--;){var u=l[h];if(u.visible||u===this.locationObject){var c=u.actualBounds,f=this.naturalBounds;if(!(c.x>f.width||c.y>f.height||0>c.x+c.width||0>c.y+c.height)){if((c=Ge.alloc()).set(s),u instanceof Ml)a=u.zf(t,e,n,i,r,c);else if(this.path===u){if(u instanceof ih)if(a=t,f=i,!1===u.pickable)a=!1;else if(c.multiply(u.transform),f)t:{var d=a,p=c;if(u.Hh(d,p))a=!0;else{if(void 0===p&&(p=u.transform,d.De(u.actualBounds))){a=!0;break t}a=d.left,f=d.right;var g=d.top;d=d.bottom;var m=dt.alloc(),y=dt.alloc(),v=dt.alloc(),b=Ge.alloc();b.set(p),b.ew(u.transform),b.Ot(),y.x=f,y.y=g,y.transform(b),m.x=a,m.y=g,m.transform(b),p=!1,lh(u,m,y,v)?p=!0:(m.x=f,m.y=d,m.transform(b),lh(u,m,y,v)?p=!0:(y.x=a,y.y=d,y.transform(b),lh(u,m,y,v)?p=!0:(m.x=a,m.y=g,m.transform(b),lh(u,m,y,v)&&(p=!0)))),Ge.free(b),dt.free(m),dt.free(y),dt.free(v),a=p}}else a=u.Hh(a,c)}else a=$s(u,t,i,c);a&&(f=u,null!==e&&(f=e(u)),f&&(null===n||n(f))&&r.add(f)),Ge.free(c)}}}return void 0===o&&Ge.free(s),a||null!==this.background||null!==this.areaBackground}return void 0===o&&Ge.free(s),!1},Qu.prototype.computeCurve=function(){if(null===this.Uf){var t=this.fromPort;this.Uf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Uf?Mc:this.curve},Qu.prototype.computeCorner=function(){if(this.curve===Mc)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},Qu.prototype.findMidLabel=function(){for(var t=this.path,e=this.W.j,n=e.length,i=0;i<n;i++){var r=e[i];if(r!==t&&!r.isPanelMain&&(-1/0===r.segmentIndex||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(-1/0===(e=t.value).segmentIndex||isNaN(e.segmentIndex))return e;return null},Qu.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=Vc;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(null!==e&&null!==n){var i=this.findMidLabel();if(null!==i){var r=i.naturalBounds,o=i.margin,s=isNaN(r.width)?30:r.width*i.scale+o.left+o.right;r=isNaN(r.height)?14:r.height*i.scale+o.top+o.bottom,(i=i.segmentOrientation)===Lc||i===Fc||i===jc?t=Math.max(t,r):i===Dc||i===Rc||i===Oc||i===Ic?t=Math.max(t,s):(e=e.ga(le).Sa(n.ga(le))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*s)+Math.abs(Math.cos(e)*r)+1)),this.curve===Mc&&(t*=1.333)}}return t},Qu.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===Cc&&n.Ua()}},Qu.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=zc;var e=this.Lf;if(null!==e){for(var n=T(),i=0,r=e.links,o=0;o<r.length;o++){var s=r[o].computeSpacing();n.push(s),i+=s}for(i=-i/2,o=0;o<r.length;o++){if(r[o]===this){t=i+n[o]/2;break}i+=n[o]}e.Wt===this.fromNode&&(t=-t),N(n)}}return t},Qu.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},Qu.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Lf},Qu.prototype.adjustPoints=function(t,e,n,i){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===Ac)return!1;r===Ec&&(r=Nc)}switch(r){case Ac:var o=this.i(t),s=this.i(n);if(!o.Na(e)||!s.Na(i)){var a=s.x-(r=o.x),l=s.y-(o=o.y),h=Math.sqrt(a*a+l*l);if(!Xe.$(h,0)){if(Xe.$(a,0))var u=0>l?-Math.PI/2:Math.PI/2;else u=Math.atan(l/Math.abs(a)),0>a&&(u=Math.PI-u);var c=e.y;a=i.x-(s=e.x);var f=i.y-c;for(l=Math.sqrt(a*a+f*f),Xe.$(a,0)?f=0>f?-Math.PI/2:Math.PI/2:(f=Math.atan(f/Math.abs(a)),0>a&&(f=Math.PI-f)),h=l/h,u=f-u,this.pd(t,e),t+=1;t<n;t++)a=(e=this.i(t)).x-r,l=e.y-o,e=Math.sqrt(a*a+l*l),Xe.$(e,0)||(Xe.$(a,0)?l=0>l?-Math.PI/2:Math.PI/2:(l=Math.atan(l/Math.abs(a)),0>a&&(l=Math.PI-l)),a=l+u,this.L(t,s+(e*=h)*Math.cos(a),c+e*Math.sin(a)));this.pd(n,i)}}return!0;case Ec:if(o=this.i(t),c=this.i(n),!o.Na(e)||!c.Na(i)){h=((s=c.x)-(r=o.x))*(s-r)+((c=c.y)-(o=o.y))*(c-o),u=e.y,f=i.y;var d=1;if(0!=(l=i.x)-(a=e.x)){var p=(f-u)/(l-a);d=Math.sqrt(1+1/(p*p))}else p=9e9;for(this.pd(t,e),t+=1;t<n;t++){var g=(e=this.i(t)).x,m=e.y,y=.5;0!==h&&(y=((r-g)*(r-s)+(o-m)*(o-c))/h);var v=r+y*(s-r),b=o+y*(c-o);e=Math.sqrt((g-v)*(g-v)+(m-b)*(m-b)),m<p*(g-v)+b&&(e=-e),0<p&&(e=-e),g=a+y*(l-a),y=u+y*(f-u),0!==p?this.L(t,e=g+e/d,y-(e-g)/p):this.L(t,g,y+e)}this.pd(n,i)}return!0;case Nc:return this.isOrthogonal&&(r=this.i(t),o=this.i(t+1),s=this.i(t+2),c=a=o.x,h=u=o.y,Xe.A(r.y,o.y)?Xe.A(o.x,s.x)?u=e.y:Xe.A(o.y,s.y)&&(a=e.x):Xe.A(r.x,o.x)&&(Xe.A(o.y,s.y)?a=e.x:Xe.A(o.x,s.x)&&(u=e.y)),this.L(t+1,a,u),r=this.i(n),o=this.i(n-1),s=this.i(n-2),l=a=o.x,f=u=o.y,Xe.A(r.y,o.y)?Xe.A(o.x,s.x)?u=i.y:Xe.A(o.y,s.y)&&(a=i.x):Xe.A(r.x,o.x)&&(Xe.A(o.y,s.y)?a=i.x:Xe.A(o.x,s.x)&&(u=i.y)),this.L(n-1,a,u),ac(this))?(this.L(t+1,c,h),this.L(n-1,l,f),n=!1):(this.pd(t,e),this.pd(n,i),n=!0),n;default:return!1}},Qu.prototype.addOrthoPoints=function(t,e,n,i,r,o){e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,i=-45<=i&&45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270;var s=r.actualBounds.copy(),a=o.actualBounds.copy();if(s.u()&&a.u()){if(s.Hc(Uc,Uc),a.Hc(Uc,Uc),s.Me(t),a.Me(n),0===e)if(n.x>t.x||270===i&&n.y<t.y&&a.right>t.x||90===i&&n.y>t.y&&a.right>t.x){var l=new dt(n.x,t.y),h=new dt(n.x,(t.y+n.y)/2);180===i?(l.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),h.x=l.x,h.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(l.x=t.x<a.left?this.computeMidOrthoPosition(t.x,t.y,a.left,n.y,!1):t.x<a.right&&(270===i&&t.y<a.top||90===i&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):a.right,h.x=l.x,h.y=n.y):0===i&&t.x<a.left&&t.y>a.top&&t.y<a.bottom&&(l.x=t.x,l.y=t.y<n.y?Math.min(n.y,a.top):Math.max(n.y,a.bottom),h.y=l.y)}else l=new dt(t.x,n.y),h=new dt((t.x+n.x)/2,n.y),(180===i||90===i&&n.y<s.top||270===i&&n.y>s.bottom)&&(180===i&&(a.aa(t)||s.aa(n))?l.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===i||90===i)?l.y=this.computeMidOrthoPosition(t.x,s.top,n.x,Math.max(n.y,a.bottom),!0):n.y>t.y&&(180===i||270===i)&&(l.y=this.computeMidOrthoPosition(t.x,s.bottom,n.x,Math.min(n.y,a.top),!0)),h.x=n.x,h.y=l.y),l.y>s.top&&l.y<s.bottom&&(n.x>=s.left&&n.x<=t.x||t.x<=a.right&&t.x>=n.x?90!==i&&270!==i||(l=new dt(Math.max((t.x+n.x)/2,t.x),t.y),h=new dt(l.x,n.y)):(l.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,0===i?s.top:Math.min(s.top,a.top)):Math.max(n.y,0===i?s.bottom:Math.max(s.bottom,a.bottom)),h.x=n.x,h.y=l.y));else 180===e?n.x<t.x||270===i&&n.y<t.y&&a.left<t.x||90===i&&n.y>t.y&&a.left<t.x?(l=new dt(n.x,t.y),h=new dt(n.x,(t.y+n.y)/2),0===i?(l.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),h.x=l.x,h.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(l.x=t.x>a.right?this.computeMidOrthoPosition(t.x,t.y,a.right,n.y,!1):t.x>a.left&&(270===i&&t.y<a.top||90===i&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):a.left,h.x=l.x,h.y=n.y):180===i&&t.x>a.right&&t.y>a.top&&t.y<a.bottom&&(l.x=t.x,l.y=t.y<n.y?Math.min(n.y,a.top):Math.max(n.y,a.bottom),h.y=l.y)):(l=new dt(t.x,n.y),h=new dt((t.x+n.x)/2,n.y),(0===i||90===i&&n.y<s.top||270===i&&n.y>s.bottom)&&(0===i&&(a.aa(t)||s.aa(n))?l.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===i||90===i)?l.y=this.computeMidOrthoPosition(t.x,s.top,n.x,Math.max(n.y,a.bottom),!0):n.y>t.y&&(0===i||270===i)&&(l.y=this.computeMidOrthoPosition(t.x,s.bottom,n.x,Math.min(n.y,a.top),!0)),h.x=n.x,h.y=l.y),l.y>s.top&&l.y<s.bottom&&(n.x<=s.right&&n.x>=t.x||t.x>=a.left&&t.x<=n.x?90!==i&&270!==i||(l=new dt(Math.min((t.x+n.x)/2,t.x),t.y),h=new dt(l.x,n.y)):(l.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,180===i?s.top:Math.min(s.top,a.top)):Math.max(n.y,180===i?s.bottom:Math.max(s.bottom,a.bottom)),h.x=n.x,h.y=l.y))):90===e?n.y>t.y||180===i&&n.x<t.x&&a.bottom>t.y||0===i&&n.x>t.x&&a.bottom>t.y?(l=new dt(t.x,n.y),h=new dt((t.x+n.x)/2,n.y),270===i?(l.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),h.x=n.x,h.y=l.y):180===i&&n.x<t.x||0===i&&n.x>t.x?(l.y=t.y<a.top?this.computeMidOrthoPosition(t.x,t.y,n.x,a.top,!0):t.y<a.bottom&&(180===i&&t.x<a.left||0===i&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):a.bottom,h.x=n.x,h.y=l.y):90===i&&t.y<a.top&&t.x>a.left&&t.x<a.right&&(l.x=t.x<n.x?Math.min(n.x,a.left):Math.max(n.x,a.right),l.y=t.y,h.x=l.x)):(l=new dt(n.x,t.y),h=new dt(n.x,(t.y+n.y)/2),(270===i||0===i&&n.x<s.left||180===i&&n.x>s.right)&&(270===i&&(a.aa(t)||s.aa(n))?l.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===i||0===i)?l.x=this.computeMidOrthoPosition(s.left,t.y,Math.max(n.x,a.right),n.y,!1):n.x>t.x&&(270===i||180===i)&&(l.x=this.computeMidOrthoPosition(s.right,t.y,Math.min(n.x,a.left),n.y,!1)),h.x=l.x,h.y=n.y),l.x>s.left&&l.x<s.right&&(n.y>=s.top&&n.y<=t.y||t.y<=a.bottom&&t.y>=n.y?0!==i&&180!==i||(l=new dt(t.x,Math.max((t.y+n.y)/2,t.y)),h=new dt(n.x,l.y)):(l.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,90===i?s.left:Math.min(s.left,a.left)):Math.max(n.x,90===i?s.right:Math.max(s.right,a.right)),h.x=l.x,h.y=n.y))):n.y<t.y||180===i&&n.x<t.x&&a.top<t.y||0===i&&n.x>t.x&&a.top<t.y?(l=new dt(t.x,n.y),h=new dt((t.x+n.x)/2,n.y),90===i?(l.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),h.x=n.x,h.y=l.y):180===i&&n.x<t.x||0===i&&n.x>=t.x?(l.y=t.y>a.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,a.bottom,!0):t.y>a.top&&(180===i&&t.x<a.left||0===i&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):a.top,h.x=n.x,h.y=l.y):270===i&&t.y>a.bottom&&t.x>a.left&&t.x<a.right&&(l.x=t.x<n.x?Math.min(n.x,a.left):Math.max(n.x,a.right),l.y=t.y,h.x=l.x)):(l=new dt(n.x,t.y),h=new dt(n.x,(t.y+n.y)/2),(90===i||0===i&&n.x<s.left||180===i&&n.x>s.right)&&(90===i&&(a.aa(t)||s.aa(n))?l.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===i||0===i)?l.x=this.computeMidOrthoPosition(s.left,t.y,Math.max(n.x,a.right),n.y,!1):n.x>t.x&&(90===i||180===i)&&(l.x=this.computeMidOrthoPosition(s.right,t.y,Math.min(n.x,a.left),n.y,!1)),h.x=l.x,h.y=n.y),l.x>s.left&&l.x<s.right&&(n.y<=s.bottom&&n.y>=t.y||t.y>=a.top&&t.y<=n.y?0!==i&&180!==i||(l=new dt(t.x,Math.min((t.y+n.y)/2,t.y)),h=new dt(n.x,l.y)):(l.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,270===i?s.left:Math.min(s.left,a.left)):Math.max(n.x,270===i?s.right:Math.max(s.right,a.right)),h.x=l.x,h.y=n.y)));var u=l,c=h,f=n;if(this.isAvoiding){var d=this.diagram;if(null===d||!zo(d)||s.aa(f)&&!o.Ed(r)||a.aa(t)&&!r.Ed(o)||r===o||this.layer.isTemporary)e=!1;else{var p=Vo(d,!0,this.containingGroup,null);if(17!==this.segmentIndex&&p.xk(Math.min(t.x,u.x),Math.min(t.y,u.y),Math.abs(t.x-u.x),Math.abs(t.y-u.y))&&p.xk(Math.min(u.x,c.x),Math.min(u.y,c.y),Math.abs(u.x-c.x),Math.abs(u.y-c.y))&&p.xk(Math.min(c.x,f.x),Math.min(c.y,f.y),Math.abs(c.x-f.x),Math.abs(c.y-f.y)))e=!1;else{r=t,o=f;var g=n=null;if(d.isVirtualized){(d=p.bounds.copy()).Hc(-p.tq,-p.sq);var m=dt.alloc();Gc(p,t.x,t.y)||(Xe.cd(d.x,d.y,d.x+d.width,d.y+d.height,t.x,t.y,u.x,u.y,m)?(n=t=m.copy(),e=m.Sa(u)):Xe.cd(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,c.x,c.y,m)?(n=t=m.copy(),e=m.Sa(c)):Xe.cd(d.x,d.y,d.x+d.width,d.y+d.height,c.x,c.y,f.x,f.y,m)&&(n=t=m.copy(),e=m.Sa(f))),Gc(p,f.x,f.y)||(Xe.cd(d.x,d.y,d.x+d.width,d.y+d.height,f.x,f.y,c.x,c.y,m)?(g=f=m.copy(),i=c.Sa(m)):Xe.cd(d.x,d.y,d.x+d.width,d.y+d.height,c.x,c.y,u.x,u.y,m)?(g=f=m.copy(),i=u.Sa(m)):Xe.cd(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,t.x,t.y,m)&&(g=f=m.copy(),i=t.Sa(m))),dt.free(m)}(s=s.copy().Pc(a)).Hc(p.tq*p.Ty,p.sq*p.Ty),Zc(p,t,e,f,i,s,!0),a=Yc(p,f.x,f.y),!p.abort&&a>=ef&&(Xc(p),s.Hc(p.tq*p.Dy,p.sq*p.Dy),Zc(p,t,e,f,i,s,!1),a=Yc(p,f.x,f.y)),!p.abort&&a<ef&&Yc(p,f.x,f.y)!==Qc?(lc(this,p,f.x,f.y,i,!0),a=this.i(2),4>this.pointsCount?(0===e||180===e?(a.x=t.x,a.y=f.y):(a.x=f.x,a.y=t.y),this.L(2,a.x,a.y),this.m(3,a.x,a.y)):(s=this.i(3),0===e||180===e?Xe.A(a.x,s.x)?(a=0===e?Math.max(a.x,t.x):Math.min(a.x,t.x),this.L(2,a,t.y),this.L(3,a,s.y)):Xe.A(a.y,s.y)?(Math.abs(t.y-a.y)<=p.sq/2&&(this.L(2,a.x,t.y),this.L(3,s.x,t.y)),this.m(2,a.x,t.y)):this.L(2,t.x,a.y):90!==e&&270!==e||(Xe.A(a.y,s.y)?(a=90===e?Math.max(a.y,t.y):Math.min(a.y,t.y),this.L(2,t.x,a),this.L(3,s.x,a)):Xe.A(a.x,s.x)?(Math.abs(t.x-a.x)<=p.tq/2&&(this.L(2,t.x,a.y),this.L(3,t.x,s.y)),this.m(2,t.x,a.y)):this.L(2,a.x,t.y))),null!==n&&(t=this.i(1),s=this.i(2),t.x!==s.x&&t.y!==s.y?0===e||180===e?this.m(2,t.x,s.y):this.m(2,s.x,t.y):0===e||180===e?this.m(2,r.x,n.y):this.m(2,n.x,r.y)),null!==g&&(0===i||180===i?this.vf(o.x,g.y):this.vf(g.x,o.y)),e=!0):e=!1}}}else e=!1;e||(this.Be(l),this.Be(h))}},Qu.prototype.computeMidOrthoPosition=function(t,e,n,i,r){var o=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Mc()||this.computeSpot(!1,this.toPort).Mc()||(o=this.computeCurviness()),r?(e+i)/2+o:(t+n)/2+o},Qu.prototype.Nz=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),r=vt(e,t,n.x,n.y,i.x,i.y),o=0,s=1;s<this.pointsCount-1;s++){n=this.i(s+1);var a=vt(e,t,i.x,i.y,n.x,n.y);i=n,a<r&&(o=s,r=a)}return o},Qu.prototype.bc=function(){this.Um=!1,this.o()},Qu.prototype.zk=function(t){if(!t){if(!1===this.ed)return;if(t=this.qb(),this.Um&&(null===t||null!==t.geometry))return}if(this.na=this.makeGeometry(),null!==(t=this.path)){t.na=this.na;for(var e=this.W.j,n=e.length,i=0;i<n;i++){var r=e[i];r!==t&&r.isPanelMain&&r instanceof ih&&(r.na=this.na)}}},Qu.prototype.makeGeometry=function(){var t=this.na,e=this.pointsCount;if(2>e)return t.type=sn,this.Um=!0,t;var n=!1,i=this.diagram;null!==i&&pc(this)&&i.Vg.contains(this)&&(0!==this.Pl.width||0!==this.Pl.height)&&(n=!0);var r=this.i(0).copy(),o=r.copy();i=this.Ab.j;var s=this.computeCurve();if(s===Mc&&3<=e&&!Xe.$(this.smoothness,0))if(3===e){var a=this.i(1);i=Math.min(r.x,a.x);var l=Math.min(r.y,a.y);a=this.i(2),i=Math.min(i,a.x),l=Math.min(l,a.y)}else{if(this.isOrthogonal)for(l=0;l<e;l++)a=i[l],o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);else for(i=3;i<e;i+=3)i+3>=e&&(i=e-1),l=this.i(i),o.x=Math.min(l.x,o.x),o.y=Math.min(l.y,o.y);i=o.x,l=o.y}else{for(l=0;l<e;l++)a=i[l],o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);i=o.x,l=o.y}if(l-=this.rv.y,r.x-=i-=this.rv.x,r.y-=l,2!==e||pc(this)){if(t.type=hn,a=nu(t),0!==this.computeShortLength(!0)&&(r=uc(this,r,!0,o)),Zh(a,r.x,r.y,!1),s===Mc&&3<=e&&!Xe.$(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-i,n=n.y-l,(r=this.i(2).copy()).x-=i,r.y-=l,0!==this.computeShortLength(!1)&&(r=uc(this,r,!1,o)),Qh(a,e,n,e,n,r.x,r.y);else if(this.isOrthogonal){o=new dt(i,l),r=this.i(1).copy(),s=new dt(i,l),e=new dt(i,l),n=this.i(0);for(var h,u=this.smoothness/3,c=1;c<this.pointsCount-1;c++){var f=n,d=h=this.i(c),p=this.i(cc(this,h,c,!1));if(!(Xe.$(f.x,d.x)&&Xe.$(d.x,p.x)||Xe.$(f.y,d.y)&&Xe.$(d.y,p.y))){var g=u;isNaN(g)&&(g=this.smoothness/3);var m=f.x,y=d.x,v=p.x;p=p.y;var b=g*hc(m,f=f.y,y,d=d.y);g*=hc(y,d,v,p),Xe.$(f,d)&&Xe.$(y,v)&&(y>m?p>d?(s.x=y-b,s.y=d-b,e.x=y+g,e.y=d+g):(s.x=y-b,s.y=d+b,e.x=y+g,e.y=d-g):p>d?(s.x=y+b,s.y=d-b,e.x=y-g,e.y=d+g):(s.x=y+b,s.y=d+b,e.x=y-g,e.y=d-g)),Xe.$(m,y)&&Xe.$(d,p)&&(d>f?(v>y?(s.x=y-b,s.y=d-b,e.x=y+g):(s.x=y+b,s.y=d-b,e.x=y-g),e.y=d+g):(v>y?(s.x=y-b,s.y=d+b,e.x=y+g):(s.x=y+b,s.y=d+b,e.x=y-g),e.y=d-g)),(Xe.$(m,y)&&Xe.$(y,v)||Xe.$(f,d)&&Xe.$(d,p))&&(f=.5*(f+p),s.x=m=.5*(m+v),s.y=f,e.x=m,e.y=f),(1===c||2===c&&Xe.$(n.x,this.i(0).x)&&Xe.$(n.y,this.i(0).y))&&(r.x=.5*(n.x+h.x),r.y=.5*(n.y+h.y)),Qh(a,r.x-i,r.y-l,s.x-i,s.y-l,h.x-i,h.y-l),o.set(s),r.set(e),n=h}}o=n.x,n=n.y,r=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(r=uc(this,r.copy(),!1,xt)),Qh(a,e.x-i,e.y-l,(o=.5*(o+r.x))-i,(n=.5*(n+r.y))-l,r.x-i,r.y-l)}else for(n=3;n<e;n+=3)o=this.i(n-2),n+3>=e&&(n=e-1),r=this.i(n-1),s=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(s=uc(this,s.copy(),!1,xt)),Qh(a,o.x-i,o.y-l,r.x-i,r.y-l,s.x-i,s.y-l);else{for((o=dt.alloc()).assign(this.i(0)),(r=dt.alloc()).assign(o),s=this.computeCorner(),c=1,h=0;c<e;){if(c=cc(this,o,c,1<c),u=this.i(c),c>=e-1){if(o.w(u)){if(0===h)for(c=1;c<e;)r.assign(o),fc(this,a,-i,-l,o,u=this.i(c++),n),o.assign(u)}else 0!==this.computeShortLength(!1)&&(u=uc(this,u.copy(),!1,xt)),fc(this,a,-i,-l,o,u,n);break}if(h=cc(this,u,c+1,c<e-3),c=-i,m=-l,f=u,g=this.i(h),y=n,Xe.A(o.y,f.y)&&Xe.A(f.x,g.x))if(d=Math.min(s,Math.abs(f.x-r.x)/2),d=v=Math.min(d,Math.abs(g.y-f.y)/2),Xe.A(d,0))fc(this,a,c,m,o,f,y),o.assign(f);else{var w=p=f.x,x=b=f.y;x=g.y>f.y?f.y+v:f.y-v,fc(this,a,c,m,o,new dt(p=f.x>o.x?f.x-d:f.x+d,b),y),tu(a,f.x+c,f.y+m,w+c,x+m),o.h(w,x)}else Xe.A(o.x,f.x)&&Xe.A(f.y,g.y)?(d=Math.min(s,Math.abs(f.y-r.y)/2),d=v=Math.min(d,Math.abs(g.x-f.x)/2),Xe.A(v,0)?(fc(this,a,c,m,o,f,y),o.assign(f)):(w=p=f.x,x=b=f.y,w=g.x>f.x?f.x+v:f.x-v,fc(this,a,c,m,o,new dt(p,b=f.y>o.y?f.y-d:f.y+d),y),tu(a,f.x+c,f.y+m,w+c,x+m),o.h(w,x))):(fc(this,a,c,m,o,f,y),o.assign(f));r.assign(u),c=h}dt.free(o)}iu=a}else(a=this.i(1).copy()).x-=i,a.y-=l,0!==this.computeShortLength(!0)&&(r=uc(this,r,!0,o)),0!==this.computeShortLength(!1)&&(a=uc(this,a,!1,o)),t.type=sn,t.startX=r.x,t.startY=r.y,t.endX=a.x,t.endY=a.y;return this.Um=!0,t},Qu.prototype.Jq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var n=e.diagram;if(null!==n&&!n.animationManager.isTicking){var i=!1;for(n=n.layers;n.next();){var r=n.value;if(r.visible)if(r===e){i=!0;for(var o=!1,s=(r=r.Da.j).length,a=0;a<s;a++){var l=r[a];l instanceof Qu&&(l===this?o=!0:o&&mc(this,l,t))}}else if(i)for(r=(o=r.Da.j).length,s=0;s<r;s++)(a=o[s])instanceof Qu&&mc(this,a,t)}}}},Qu.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),r=t.i(0);if(i.Na(r))return!0;if(e=this.i(e-1),t=t.i(n-1),e.Na(t)||i.Na(t)||e.Na(r))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},Qu.prototype.isVisible=function(){if(!ou.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;null!==i;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},Qu.prototype.Ob=function(t){if(ou.prototype.Ob.call(this,t),null!==this.Lf&&this.Lf.um(),null!==this.jd)for(var e=this.jd.iterator;e.next();)e.value.Ob(t)},Qu.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.isAnimating?Nc:this.Pk},Qu.prototype.Nh=function(){return!0},c.Object.defineProperties(Qu.prototype,{fromNode:{get:function(){return this.Ve},set:function(t){var e=this.Ve;if(e!==t){var n=this.fromPort;null!==e&&(this.rf!==e&&ju(e,this,n),vc(this),this.C(2)),this.Ve=t,null!==t&&this.Ob(t.isVisible()),this.Uf=null,this.Ua();var i=this.diagram;null!==i&&i.Z&&i.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,o=this.fromPortChanged;if(null!==o){var s=!0;null!==i&&(s=i.Z,i.Z=!0),o(this,n,r),null!==i&&(i.Z=s)}null!==t&&(this.rf!==t&&Du(t,this,r),yc(this),this.C(1)),this.g("fromNode",e,t),tc(this)}}},fromPortId:{get:function(){return this.We},set:function(t){var e=this.We;if(e!==t){var n=this.fromPort;null!==n&&Lu(this.fromNode,n),vc(this),this.We=t;var i=this.fromPort;null!==i&&Lu(this.fromNode,i);var r=this.diagram;if(null!==r){var o=this.data,s=r.model;null!==o&&s.nj()&&s.yw(o,t)}n!==i&&(this.Uf=null,this.Ua(),null!==(o=this.fromPortChanged)&&(s=!0,null!==r&&(s=r.Z,r.Z=!0),o(this,n,i),null!==r&&(r.Z=s))),yc(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Ve;return null===t?null:t.Gt(this.We)}},fromPortChanged:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.rf},set:function(t){var e=this.rf;if(e!==t){var n=this.toPort;null!==e&&(this.Ve!==e&&ju(e,this,n),vc(this),this.C(2)),this.rf=t,null!==t&&this.Ob(t.isVisible()),this.Uf=null,this.Ua();var i=this.diagram;null!==i&&i.Z&&i.partManager.setToNodeForLink(this,t,e);var r=this.toPort,o=this.toPortChanged;if(null!==o){var s=!0;null!==i&&(s=i.Z,i.Z=!0),o(this,n,r),null!==i&&(i.Z=s)}null!==t&&(this.Ve!==t&&Du(t,this,r),yc(this),this.C(1)),this.g("toNode",e,t),tc(this)}}},toPortId:{get:function(){return this.sf},set:function(t){var e=this.sf;if(e!==t){var n=this.toPort;null!==n&&Lu(this.toNode,n),vc(this),this.sf=t;var i=this.toPort;null!==i&&Lu(this.toNode,i);var r=this.diagram;if(null!==r){var o=this.data,s=r.model;null!==o&&s.nj()&&s.Dw(o,t)}n!==i&&(this.Uf=null,this.Ua(),null!==(o=this.toPortChanged)&&(s=!0,null!==r&&(s=r.Z,r.Z=!0),o(this,n,i),null!==r&&(r.Z=s))),yc(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.rf;return null===t?null:t.Gt(this.sf)}},toPortChanged:{get:function(){return this.gq},set:function(t){var e=this.gq;e!==t&&(this.gq=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.ah:Te},set:function(t){this.Ic();var e=this.O.ah;e.w(t)||(t=t.G(),this.O.ah=t,this.g("fromSpot",e,t),(e.Mc()||t.Mc())&&null!==(t=this.fromNode)&&Lu(t,this.fromPort),this.Ua())}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.Zg:NaN},set:function(t){this.Ic();var e=this.O.Zg;e!==t&&(0>t&&w(t,">= 0",Qu,"fromEndSegmentLength"),this.O.Zg=t,this.g("fromEndSegmentLength",e,t),this.Ua())}},fromShortLength:{get:function(){return null!==this.O?this.O.$g:NaN},set:function(t){this.Ic();var e=this.O.$g;e!==t&&(this.O.$g=t,this.bc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.O?this.O.Ah:Te},set:function(t){this.Ic();var e=this.O.Ah;e.w(t)||(t=t.G(),this.O.Ah=t,this.g("toSpot",e,t),(e.Mc()||t.Mc())&&null!==(t=this.toNode)&&Lu(t,this.toPort),this.Ua())}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.yh:NaN},set:function(t){this.Ic();var e=this.O.yh;e!==t&&(0>t&&w(t,">= 0",Qu,"toEndSegmentLength"),this.O.yh=t,this.g("toEndSegmentLength",e,t),this.Ua())}},toShortLength:{get:function(){return null!==this.O?this.O.zh:NaN},set:function(t){this.Ic();var e=this.O.zh;e!==t&&(this.O.zh=t,this.bc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.jd&&0<this.jd.count}},labelNodes:{get:function(){return null===this.jd?K:this.jd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Fa)},set:function(t){var e=0!=(1&this.Fa);e!==t&&(this.Fa^=1,this.g("relinkableFrom",e,t),this.Lb())}},relinkableTo:{get:function(){return 0!=(2&this.Fa)},set:function(t){var e=0!=(2&this.Fa);e!==t&&(this.Fa^=2,this.g("relinkableTo",e,t),this.Lb())}},resegmentable:{get:function(){return 0!=(4&this.Fa)},set:function(t){var e=0!=(4&this.Fa);e!==t&&(this.Fa^=4,this.g("resegmentable",e,t),this.Lb())}},isTreeLink:{get:function(){return 0!=(8&this.Fa)},set:function(t){var e=0!=(8&this.Fa);e!==t&&(this.Fa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&Fu(this.fromNode),null!==this.toNode&&Fu(this.toNode))}},path:{get:function(){var t=this.qb();return t instanceof ih?t:null}},routeBounds:{get:function(){this.uj();var t=this.Pl,e=1/0,n=1/0,i=this.pointsCount;if(0===i)t.h(NaN,NaN,0,0);else{if(1===i)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(2===i){i=this.i(0);var r=this.i(1);e=Math.min(i.x,r.x),n=Math.min(i.y,r.y),t.h(i.x,i.y,0,0),t.Me(r)}else if(this.computeCurve()===Mc&&3<=i&&!this.isOrthogonal)if(r=this.i(0),t.h(e=r.x,n=r.y,0,0),3===i){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var o=this.i(2);e=Math.min(o.x,e),n=Math.min(o.y,n),Xe.lm(r.x,r.y,i.x,i.y,i.x,i.y,o.x,o.y,.5,t)}else for(o=3;o<i;o+=3){var s=this.i(o-2);o+3>=i&&(o=i-1);var a=this.i(o-1),l=this.i(o);Xe.lm(r.x,r.y,s.x,s.y,a.x,a.y,l.x,l.y,.5,t),e=Math.min(l.x,e),n=Math.min(l.y,n),r=l}else for(r=this.i(0),o=this.i(1),e=Math.min(r.x,o.x),n=Math.min(r.y,o.y),t.h(r.x,r.y,0,0),t.Me(o),r=2;r<i;r++)o=this.i(r),e=Math.min(o.x,e),n=Math.min(o.y,n),t.Me(o);this.rv.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.uj(),this.computeMidPoint(new dt)}},midAngle:{get:function(){return this.uj(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.Yr){this.ed||ic(this);for(var t=this.Yr=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),r=this.i(n+1);Xe.$(i.x,r.x)?0>(i=r.y-i.y)&&(i=-i):Xe.$(i.y,r.y)?0>(i=r.x-i.x)&&(i=-i):i=Math.sqrt(i.Fe(r)),t.push(i)}}return this.Yr}},flattenedTotalLength:{get:function(){var t=this.Lu;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.Lu=t}return t}},points:{get:function(){return this.Ab},set:function(t){var e=this.Ab;if(e!==t){var n=null;if(Array.isArray(t)){var i=0==t.length%2;if(i)for(var r=0;r<t.length;r++)if("number"!=typeof t[r]||isNaN(t[r])){i=!1;break}if(i)for(n=new tt,i=0;i<t.length/2;i++)r=new dt(t[2*i],t[2*i+1]).freeze(),n.add(r);else{for(i=!0,r=0;r<t.length;r++){var o=t[r];if(!S(o)||"number"!=typeof o.x||isNaN(o.x)||"number"!=typeof o.y||isNaN(o.y)){i=!1;break}}if(i)for(n=new tt,i=0;i<t.length;i++)n.add(new dt((r=t[i]).x,r.y).freeze())}}else if(t instanceof tt)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else v("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Ab=n,this.bc(),ic(this),null!==(t=this.diagram)&&(t.mj||t.undoManager.isUndoingRedoing||t.Tt.add(this),t.animationManager.qc&&(this.qg=n)),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Ab.count}},ed:{get:function(){return 0!=(16&this.Fa)},set:function(t){0!=(16&this.Fa)!==t&&(this.Fa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Fa)},set:function(t){0!=(32&this.Fa)!==t&&(this.Fa^=32)}},yt:{get:function(){return 0!=(64&this.Fa)},set:function(t){0!=(64&this.Fa)!==t&&(this.Fa^=64)}},defaultFromPoint:{get:function(){return this.v},set:function(t){this.v=t.copy()}},defaultToPoint:{get:function(){return this.I},set:function(t){this.I=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.Yj.value)}},isAvoiding:{get:function(){return 4==(4&this.Yj.value)}},Um:{get:function(){return 0!=(128&this.Fa)},set:function(t){0!=(128&this.Fa)!==t&&(this.Fa^=128)}},geometry:{get:function(){return this.Um||(this.uj(),this.na=this.makeGeometry()),this.na}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!sc(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!sc(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.Pk},set:function(t){var e=this.Pk;e!==t&&(this.Pk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.bc(),this.g("corner",e,t))}},curve:{get:function(){return this.En},set:function(t){var e=this.En;e!==t&&(this.En=t,this.Ua(),this.bc(),gc(this,e===Pc||e===Tc||t===Pc||t===Tc),this.g("curve",e,t))}},curviness:{get:function(){return this.Fn},set:function(t){var e=this.Fn;e!==t&&(this.Fn=t,this.Ua(),this.bc(),this.g("curviness",e,t))}},routing:{get:function(){return this.Yj},set:function(t){var e=this.Yj;e!==t&&(this.Yj=t,this.Uf=null,this.Ua(),gc(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.Tp},set:function(t){var e=this.Tp;e!==t&&(this.Tp=t,this.bc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.nj())return t.model.Vb(this.data)}}}),Qu.prototype.invalidateOtherJumpOvers=Qu.prototype.Jq,Qu.prototype.findClosestSegment=Qu.prototype.Nz,Qu.prototype.updateRoute=Qu.prototype.uj,Qu.prototype.invalidateRoute=Qu.prototype.Ua,Qu.prototype.rollbackRoute=Qu.prototype.uw,Qu.prototype.commitRoute=Qu.prototype.xf,Qu.prototype.startRoute=Qu.prototype.Rh,Qu.prototype.clearPoints=Qu.prototype.jk,Qu.prototype.removePoint=Qu.prototype.pw,Qu.prototype.addPointAt=Qu.prototype.vf,Qu.prototype.addPoint=Qu.prototype.Be,Qu.prototype.insertPointAt=Qu.prototype.m,Qu.prototype.insertPoint=Qu.prototype.rA,Qu.prototype.setPointAt=Qu.prototype.L,Qu.prototype.setPoint=Qu.prototype.pd,Qu.prototype.getPoint=Qu.prototype.i,Qu.prototype.getOtherPort=Qu.prototype.iA,Qu.prototype.getOtherNode=Qu.prototype.Eq;var bc=null,wc=null,xc=new H(Qu,"Normal",1),kc=new H(Qu,"Orthogonal",2),Sc=new H(Qu,"AvoidsNodes",6),_c=new H(Qu,"AvoidsNodesStraight",7),Cc=new H(Qu,"None",0),Mc=new H(Qu,"Bezier",9),Pc=new H(Qu,"JumpGap",10),Tc=new H(Qu,"JumpOver",11),Nc=new H(Qu,"End",17),Ac=new H(Qu,"Scale",18),Ec=new H(Qu,"Stretch",19),Lc=new H(Qu,"OrientAlong",21),Oc=new H(Qu,"OrientPlus90",22),Dc=new H(Qu,"OrientMinus90",23),jc=new H(Qu,"OrientOpposite",24),Fc=new H(Qu,"OrientUpright",25),Ic=new H(Qu,"OrientPlus90Upright",26),Rc=new H(Qu,"OrientMinus90Upright",27),Bc=new H(Qu,"OrientUpright45",28),zc=16,Vc=14,Uc=8;function qc(t,e,n,i){it(this),this.oe=this.fs=!1,this.Wt=t,this.Jy=e,this.fw=n,this.Ky=i,this.links=[]}function Hc(){it(this),this.Sy=this.group=null,this.Nt=!0,this.abort=!1,this.xd=this.wd=1,this.Ko=this.Jo=-1,this.ec=this.dc=8,this.Qb=null,this.Yi=this.Xi=0,this.Ty=11,this.Dy=124}function Gc(t,e,n){return t.wd<=e&&e<=t.Jo&&t.xd<=n&&n<=t.Ko}function Yc(t,e,n){return Gc(t,e,n)?(e-=t.wd,n-=t.xd,t.Qb[0|(e/=t.dc)][0|(n/=t.ec)]):nf}function Xc(t){if(null!==t.Qb)for(var e=0;e<=t.Xi;e++)for(var n=t.Qb[e],i=0;i<=t.Yi;i++)n[i]>=tf&&(n[i]=nf)}function Kc(t,e,n,i,r,o,s,a,l){if(!(e<o||e>s||n<a||n>l)){var h=0|e,u=0|n,c=t.Qb[h][u];if(c>=tf&&c<ef)for(r?u+=i:h+=i,c+=1;o<=h&&h<=s&&a<=u&&u<=l&&!(c>=t.Qb[h][u]);)t.Qb[h][u]=c,c+=1,r?u+=i:h+=i;if(h=r?u:h,r)if(0<i)for(n+=i;n<h;n+=i)Kc(t,e,n,1,!r,o,s,a,l),Kc(t,e,n,-1,!r,o,s,a,l);else for(n+=i;n>h;n+=i)Kc(t,e,n,1,!r,o,s,a,l),Kc(t,e,n,-1,!r,o,s,a,l);else if(0<i)for(e+=i;e<h;e+=i)Kc(t,e,n,1,!r,o,s,a,l),Kc(t,e,n,-1,!r,o,s,a,l);else for(e+=i;e>h;e+=i)Kc(t,e,n,1,!r,o,s,a,l),Kc(t,e,n,-1,!r,o,s,a,l)}}function Wc(t,e,n,i,r,o,s,a,l){var h=Qc,u=tf;for(t.Qb[e|=0][n|=0]=u;h===Qc&&e>o&&e<s&&n>a&&n<l;)t.Qb[e][n]=u+=1,r?n+=i:e+=i,h=t.Qb[e][n]}function $c(t,e,n,i,r,o,s,a,l){var h=Qc,u=ef;for(t.Qb[e|=0][n|=0]=u;h===Qc&&e>o&&e<s&&n>a&&n<l;)t.Qb[e][n]=u,r?n+=i:e+=i,h=t.Qb[e][n]}function Zc(t,e,n,i,r,o,s){if(null!==t.Qb){t.abort=!1;var a=e.x,l=e.y;if(Gc(t,a,l)){a-=t.wd,a/=t.dc,l-=t.xd,l/=t.ec;var h=i.x,u=i.y;if(Gc(t,h,u))if(h-=t.wd,h/=t.dc,u-=t.xd,u/=t.ec,1>=Math.abs(a-h)&&1>=Math.abs(l-u))t.abort=!0;else{var c=o.x;i=o.y,e=o.x+o.width;var f=o.y+o.height;c-=t.wd,c/=t.dc,i-=t.xd,i/=t.ec,e-=t.wd,e/=t.dc,f-=t.xd,f/=t.ec,o=Math.max(0,Math.min(t.Xi,0|c)),e=Math.min(t.Xi,Math.max(0,0|e)),c=Math.max(0,Math.min(t.Yi,0|i)),f=Math.min(t.Yi,Math.max(0,0|f)),h|=0,u|=0;var d=0===n||90===n?1:-1;if(n=90===n||270===n,(i=t.Qb)[a|=0][l|=0]===Qc?(Wc(t,a,l,d,n,o,e,c,f),Wc(t,a,l,1,!n,o,e,c,f),Wc(t,a,l,-1,!n,o,e,c,f)):Wc(t,a,l,d,n,a,l,a,l),i[h][u]===Qc?($c(t,h,u,0===r||90===r?1:-1,90===r||270===r,o,e,c,f),$c(t,h,u,1,!(90===r||270===r),o,e,c,f),$c(t,h,u,-1,!(90===r||270===r),o,e,c,f)):$c(t,h,u,d,n,h,u,h,u),n=T(),s&&Jc(t,h,u,r,a,l,n))for(n[0]===h&&n[1]===u||(n.unshift(u),n.unshift(h)),n[n.length-2]===a&&n[n.length-1]===l||(n.push(a),n.push(l)),t=tf,i[r=n[n.length-2]][s=n[n.length-1]]=t++,o=n.length-4;0<=o;o-=2)for(r=n[o+2],s=n[o+3],e=n[o],h=n[o+1];e>r?r++:e<r?r--:h>s?s++:h<s&&s--,i[r][s]=t++,r!==e||s!==h;);else Kc(t,a,l,1,!1,o,e,c,f),Kc(t,a,l,-1,!1,o,e,c,f),Kc(t,a,l,1,!0,o,e,c,f),Kc(t,a,l,-1,!0,o,e,c,f);N(n)}}}}function Jc(t,e,n,i,r,o,s){for(var a=t.Qb,l=e,h=n;;){if(l===r&&h===o)return!0;var u=l,c=h;if(0===i){if(!(u<r))break;u++}else if(90===i){if(!(c<o))break;c++}else if(180===i){if(!(u>r))break;u--}else{if(!(c>o))break;c--}var f=a[u][c];if(0===f||f===rf)break;l=u,h=c}for(;;){if(u=i,c=l,f=h,0===i?f<o?(u=90,f++):f>o&&(u=270,f--):90===i?c<r?(u=0,c++):c>r&&(u=180,c--):180===i?f<o?(u=90,f++):f>o&&(u=270,f--):c<r?(u=0,c++):c>r&&(u=180,c--),c=a[c][f],u!==i&&0!==c&&c!==rf){if(s.push(l),s.push(h),Jc(t,l,h,u,r,o,s))return!0;s.pop(),s.pop()}if(a[l][h]=rf,0===i){if(l===e)return!1;l--}else if(90===i){if(h===n)return!1;h--}else if(180===i){if(l===e)return!1;l++}else{if(h===n)return!1;h++}}}Qu.className="Link",Qu.Normal=xc,Qu.Orthogonal=kc,Qu.AvoidsNodes=Sc,Qu.AvoidsNodesStraight=_c,Qu.None=Cc,Qu.Bezier=Mc,Qu.JumpGap=Pc,Qu.JumpOver=Tc,Qu.End=Nc,Qu.Scale=Ac,Qu.Stretch=Ec,Qu.OrientAlong=Lc,Qu.OrientPlus90=Oc,Qu.OrientMinus90=Dc,Qu.OrientOpposite=jc,Qu.OrientUpright=Fc,Qu.OrientPlus90Upright=Ic,Qu.OrientMinus90Upright=Rc,Qu.OrientUpright45=Bc,Qu.EndSegmentStep=8,Qu.CurvinessStart=zc,Qu.SpacingMin=Vc,Qu.OrthoShortCut=Uc,Qu.AvoidanceCell=8,Qu.AvoidanceLimit=999,qc.prototype.um=function(){if(!this.fs){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.Nu.add(this),this.oe=t.undoManager.isUndoingRedoing)}this.fs=!0},qc.prototype.Rw=function(){if(this.fs){this.fs=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=null===n||n.mj&&!this.oe,this.oe=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.Lf=null,t.length=0)}0===t.length&&(t=this.Wt,null!==this&&null!==t.Re&&t.Re.remove(this),t=this.fw,null!==this&&null!==t.Re&&t.Re.remove(this))}},qc.className="LinkBundle",Hc.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.wd=Math.floor((t.x-this.dc)/this.dc)*this.dc,this.xd=Math.floor((e-this.ec)/this.ec)*this.ec,this.Jo=Math.ceil((n+2*this.dc)/this.dc)*this.dc,this.Ko=Math.ceil((i+2*this.ec)/this.ec)*this.ec,t=1+(0|Math.ceil((this.Jo-this.wd)/this.dc)),e=1+(0|Math.ceil((this.Ko-this.xd)/this.ec)),null===this.Qb||this.Xi<t-1||this.Yi<e-1){for(n=[],i=0;i<=t;i++)n[i]=new Uint32Array(e);this.Qb=n,this.Xi=t-1,this.Yi=e-1}if(t=nf,null!==this.Qb)for(e=0;e<=this.Xi;e++)if((n=this.Qb[e]).fill)n.fill(t);else for(i=0;i<=this.Yi;i++)n[i]=t}},Hc.prototype.xk=function(t,e,n,i){if(t>this.Jo||t+n<this.wd||e>this.Ko||e+i<this.xd)return!0;t=(t-this.wd)/this.dc|0,e=(e-this.xd)/this.ec|0,n=Math.max(0,n)/this.dc+1|0;var r=Math.max(0,i)/this.ec+1|0;if(0>t&&(n+=t,t=0),0>e&&(r+=e,e=0),0>n||0>r)return!0;for(i=0|Math.min(t+n-1,this.Xi),n=0|Math.min(e+r-1,this.Yi);t<=i;t++){r=this.Qb[t];for(var o=e;o<=n;o++)if(r[o]===Qc)return!1}return!0},c.Object.defineProperties(Hc.prototype,{bounds:{get:function(){return new Rt(this.wd,this.xd,this.Jo-this.wd,this.Ko-this.xd)}},tq:{get:function(){return this.dc},set:function(t){0<t&&t!==this.dc&&(this.dc=t,this.initialize(this.bounds))}},sq:{get:function(){return this.ec},set:function(t){0<t&&t!==this.ec&&(this.ec=t,this.initialize(this.bounds))}}});var Qc=0,tf=1,ef=999999,nf=ef+1,rf=ef+2;function of(){it(this),this.port=this.node=null,this.$d=[],this.Oq=!1}function sf(t,e,n,i){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return i&&15!==e&&0>(n-=15)&&(n+=360),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}function af(t,e){var n=t.$d;if(0===n.length){t:if(!t.Oq){n=t.Oq,t.Oq=!0;var i=null,r=t.node,o=r instanceof Xu?r:null;if(null===o||o.isSubGraphExpanded)var s=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.my();else{if(!o.actualBounds.u()){t.Oq=n;break t}s=(i=o).Mv()}o=t.$d.length=0;var a=t.port.ga(re,dt.alloc()),l=t.port.ga(fe,dt.alloc());for((r=Rt.allocAt(a.x,a.y,0,0)).Me(l),dt.free(a),dt.free(l),a=dt.allocAt(r.x+r.width/2,r.y+r.height/2),l=t.port.jj(),s=s.iterator;s.next();){var h=s.value;if(h.isVisible()&&h.fromPort!==h.toPort){var u=h.fromPort===t.port||null!==h.fromNode&&h.fromNode.Ed(i),c=h.computeSpot(u,t.port);if(c.Mc()&&null!==(u=u?h.toPort:h.fromPort)){var f=u.part;if(null!==f){var d=f.findVisibleNode();null!==d&&d!==f&&(u=(f=d).port),u=h.computeOtherPoint(f,u),f=a.Sa(u),0>(f-=l)?f+=360:360<=f&&(f-=360),0===(c=sf(r,c,f,h.isOrthogonal))?(c=4,180<f&&(f-=360)):90===c?(c=8,270<f&&(f-=360)):180===c?c=2:(c=1,90>f&&(f+=360)),void 0===(d=t.$d[o])?(d=new lf(h,f,c),t.$d[o]=d):(d.link=h,d.angle=f,d.zc=c),d.iw.set(u),o++}}}}for(dt.free(a),t.$d.sort(of.prototype.l),l=t.$d.length,i=-1,o=a=0;o<l;o++)void 0!==(s=t.$d[o])&&(s.zc!==i&&(i=s.zc,a=0),s.Fq=a,a++);for(i=-1,a=0,o=l-1;0<=o;o--)void 0!==(l=t.$d[o])&&(l.zc!==i&&(i=l.zc,a=l.Fq+1),l.mm=a);if(o=t.$d,c=t.port,i=t.node.portSpreading,a=dt.alloc(),l=dt.alloc(),s=dt.alloc(),h=dt.alloc(),c.ga(re,a),c.ga(se,l),c.ga(fe,s),c.ga(ue,h),d=f=u=c=0,i===Yu)for(var p=0;p<o.length;p++){var g=o[p];if(null!==g){var m=g.link.computeThickness();switch(g.zc){case 8:f+=m;break;case 2:d+=m;break;case 1:c+=m;break;default:case 4:u+=m}}}var y=p=0,v=1,b=g=0;for(m=0;m<o.length;m++){var w=o[m];if(null!==w){if(p!==w.zc){switch(p=w.zc){case 8:var x=s;y=h;break;case 2:x=h,y=a;break;case 1:x=a,y=l;break;default:case 4:x=l,y=s}switch(g=y.x-x.x,b=y.y-x.y,p){case 8:f>Math.abs(g)?(v=Math.abs(g)/f,f=Math.abs(g)):v=1;break;case 2:d>Math.abs(b)?(v=Math.abs(b)/d,d=Math.abs(b)):v=1;break;case 1:c>Math.abs(g)?(v=Math.abs(g)/c,c=Math.abs(g)):v=1;break;default:case 4:u>Math.abs(b)?(v=Math.abs(b)/u,u=Math.abs(b)):v=1}y=0}var k=w.Mq;if(i===Yu){switch(w=w.link.computeThickness(),w*=v,k.set(x),p){case 8:k.x=x.x+g/2+f/2-y-w/2;break;case 2:k.y=x.y+b/2+d/2-y-w/2;break;case 1:k.x=x.x+g/2-c/2+y+w/2;break;default:case 4:k.y=x.y+b/2-u/2+y+w/2}y+=w}else{var S=.5;i===Gu&&(S=(w.Fq+1)/(w.mm+1)),k.x=x.x+g*S,k.y=x.y+b*S}}}for(dt.free(a),dt.free(l),dt.free(s),dt.free(h),x=t.$d,o=0;o<x.length;o++)null!==(i=x[o])&&(i.Kv=t.computeEndSegmentLength(i));t.Oq=n,Rt.free(r)}n=t.$d}for(t=0;t<n.length;t++)if(null!==(r=n[t])&&r.link===e)return r;return null}function lf(t,e,n){this.link=t,this.angle=e,this.zc=n,this.iw=new dt,this.mm=this.Fq=0,this.Mq=new dt,this.Kv=0}function hf(){this.Ah=this.ah=Te,this.zh=this.$g=this.yh=this.Zg=NaN,this.eq=this.Yn=null,this.fq=this.Zn=1/0}function uf(){it(this),this.v=this.B=null,this.wi=this.po=!0,this.uo=!1,this.hn=new dt(0,0).freeze(),this.ro=!0,this.qn=this.qo=null,this.to=!1,this.l=null,this.I=0,this.Lo=this.kq=null,this.st=!1,this.yg=this.$j=null,this.ht=!1}function cf(t,e,n,i,r,o,s,a){for(n=n.iterator;n.next();){var l=n.value;i&&!l.isTopLevel||null!==r&&!r(l)||!l.canLayout()||(o&&l instanceof Tu?l.isLinkLabel||(l instanceof Xu&&null===l.layout?cf(t,e,l.memberParts,!1,r,o,s,a):(ff(l),e.add(l))):s&&l instanceof Qu?e.add(l):!a||!l.Lc()||l instanceof Tu||(ff(l),e.add(l)))}}function ff(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Ta()}function df(t,e){if(null!==t.workerStateChanged){var n={key:t.group?t.group.key:null};void 0!==e&&(n.time=e),null!==t.$j&&(n.running=pf(t.$j)),null!==t.yg&&(n.waiting=pf(t.yg)),t.workerStateChanged(n,t)}}function pf(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function gf(t,e){var n=mf(t);if(!n)throw Error("Unknown Layout class: "+t);if(e)for(var i in e)n[i]=e[i]}function mf(t){var e=null;if("function"==typeof t){if(!(e=wf.get(t))){var n=A(t);(e=wf.get(n))||((e=new Sf).Gv=t,e.name=n,e.l=t.name,e.zy=xf,wf.set(n,e),wf.set(t,e),wf.set(t.name,e))}}else"string"==typeof t&&(e=wf.get(t));return e}function yf(t,e){t.st=!0;var n=mf(t.constructor),i=vf(t,e,!0);i._GoJS="_GoJS",n.Ne.postMessage(i),n.xm.set(ot(t),t),t.$j=e}function vf(t,e,n){t.onNetworkSerialization(1,n,e,null);var i={};t.serializeLayoutProperties(i,n);var r=[];e.vertexes.each(function(t){var e={};t.serializeVertexProperties(e,n),r.push(e)});var o=[];return e.edges.each(function(t){var e={};t.serializeEdgeProperties(e,n),o.push(e)}),i={id:n?ot(t):t.id,layout:A(t.constructor),p:i,cB:r,Lz:o},t.onNetworkSerialization(2,n,e,i),i}function bf(t,e,n){n&&(t.id=e.id);var i=t.diagram,r=t.createNetwork();t.onNetworkSerialization(3,n,r,e);var o=e.cB,s=new ft;o&&o.forEach(function(t){var e=null;null===t.key||null===i||n||(e=i.Cb(t.key)),null!==e?e=r.hk(e):(e=r.createVertex(),null!==t.key&&(e.data=e),r.Bg(e)),n&&null!==e.data&&(e.data.Ai=t.key),s.set(t.id,e)});var a=e.Lz,l=new ft;return a&&a.forEach(function(t){var e=null;null===t.key||null===i||n||(e=i.findLinkForKey(t.key)),null!==e?e=r.Sx(e):(e=r.createEdge(),null!==t.key&&(e.data=e),r.jm(e)),n&&null!==e.data&&(e.data.Ai=t.key),l.set(t.id,e)}),t.deserializeLayoutProperties(e.p,s,l,n),o&&o.forEach(function(t){var e=s.get(t.id);e&&e.wq(t,s,l,n)}),a&&a.forEach(function(t){var e=l.get(t.id);e&&e.deserializeEdgeProperties(t,s,l,n)}),t.onNetworkSerialization(4,n,r,e),r}Hc.className="PositionArray",of.prototype.toString=function(){for(var t=this.$d,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];null!==i&&(e+="\n  "+i.toString())}return e},of.prototype.um=function(){this.$d.length=0},of.prototype.l=function(t,e){return t===e?0:null===t?-1:null===e?1:t.zc<e.zc?-1:t.zc>e.zc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},of.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,ie,e.fromPort===this.port),i=t.Fq;if(0>i)return n;var r=t.mm;if(1>=r||!e.isOrthogonal)return n;e=t.iw;var o=t.Mq;return 2!==t.zc&&8!==t.zc||(i=r-1-i),((t=2===t.zc||4===t.zc)?e.y<o.y:e.x<o.x)?n+8*i:(t?e.y===o.y:e.x===o.x)?n:n+8*(r-1-i)},of.className="Knot",lf.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.zc.toString()+":"+this.Fq.toString()+"/"+this.mm.toString()+" "+this.Mq.toString()+" "+this.Kv.toString()+" "+this.iw.toString()},lf.className="LinkInfo",hf.prototype.copy=function(){var t=new hf;return t.ah=this.ah.G(),t.Ah=this.Ah.G(),t.Zg=this.Zg,t.yh=this.yh,t.$g=this.$g,t.zh=this.zh,t.Yn=this.Yn,t.eq=this.eq,t.Zn=this.Zn,t.fq=this.fq,t},hf.className="LinkSettings",uf.prototype.cloneProtected=function(t){t.po=this.po,t.wi=this.wi,t.uo=this.uo,t.hn.assign(this.hn),t.ro=this.ro,t.qo=this.qo,t.qn=this.qn,t.to=!0,t.Lo=this.Lo,t.kq=this.kq},uf.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},uf.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},uf.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new dt(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},uf.prototype.ib=function(){},uf.prototype.toString=function(){var t=A(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},uf.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Oc(),this.isOngoing&&t.mj||this.isInitial&&!t.mj)&&(this.isValidLayout=!1,t.Db())}}},uf.prototype.createNetwork=function(){return new _f(this)},uf.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof Dr?(e.Ag(t.nodes,!0),e.Ag(t.links,!0)):e.Ag(t instanceof Xu?t.memberParts:t.iterator),e},uf.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}try{null!==t&&t.va("Layout"),this.commitLayout()}finally{null!==t&&t.Wa("Layout")}}},uf.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},uf.prototype.doLayout=function(t){var e=new nt;t instanceof Dr?(cf(this,e,t.nodes,!0,this.Ph,!0,!1,!0),cf(this,e,t.parts,!0,this.Ph,!0,!1,!0)):t instanceof Xu?cf(this,e,t.memberParts,!1,this.Ph,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.va("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.Wa("Layout")),this.isValidLayout=!0},uf.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,i=n,r=this.arrangementOrigin.y,o=0,s=0;for(t=t.iterator;t.next();){var a=t.value;ff(a);var l=a.measuredBounds,h=l.width;l=l.height,a.moveTo(i,r),a instanceof Xu&&(a.Ph=!1),i+=Math.max(h,50)+20,s=Math.max(s,Math.max(l,50)),o>=e-1?(o=0,i=n,r+=s+20,s=0):o++}},uf.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,i=this.arrangementOrigin.y,r=0,o=0,s=this.network.vertexes.iterator;s.next();){var a=s.value.node;if(!(null===a||a instanceof Qu)&&(ff(a),this.Ph(a))){var l=a.measuredBounds,h=l.width;l=l.height,a.moveTo(n,i),a instanceof Xu&&(a.Ph=!1),n+=Math.max(h,50)+20,o=Math.max(o,Math.max(l,50)),r>=t-1?(r=0,n=e,i+=o+20,o=0):r++}}},uf.prototype.Ph=function(t){return!(t.location.u()&&!(t instanceof Xu&&t.Ph))},uf.prototype.kj=function(t,e){var n=this.boundsComputation;return null!==n?(e||(e=new Rt),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},uf.prototype.Yx=function(t){var e=new nt;return t instanceof Dr?(cf(this,e,t.nodes,!0,null,!0,!0,!0),cf(this,e,t.links,!0,null,!0,!0,!0),cf(this,e,t.parts,!0,null,!0,!0,!0)):cf(this,e,t instanceof Xu?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},uf.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.ga(re),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=(t=e.padding).left,n.y+=t.top),n}return t},uf.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},uf.prototype.workerLayout=function(){return!1},uf.prototype.uz=function(){var t=mf(this.constructor);t&&(null!==t.Ne&&t.Ne.terminate(),t.Ne=null,t.xm.iteratorValues.each(function(t){t.st=!1,t.$j=null,t.yg=null,t.ht=!1,df(t)}),t.xm.clear())},uf.prototype.Qw=function(){if("undefined"==typeof Worker||!kf||"undefined"==typeof self||void 0!==self.DedicatedWorkerGlobalScope)return!1;if(!this.mayUseWorker())return this.st&&(this.ht=!0,this.yg=this.$j=null,df(this)),!1;var t=mf(this.constructor);return null!==t&&(null===t.Ne&&(t.Ne=new Worker(kf),t.Ne.onerror=function(t){t.preventDefault(),x("Worker Error at: "+t.filename+" "+t.lineno+" "+t.colno+"\n  "+t.message)},t.Ne.l=function(t){x("Worker serialization error: "+t)},t.Ne.onmessage=function(e){var n=e.data;if("_GoJS"===n._GoJS)if(n.version)x("GoJS v"+Dr.version+"  Worker v"+n.version);else if(e=t.xm.get(n.id)){if(t.xm.remove(n.id),e.st=!1,e.$j=null,e.ht)e.ht=!1,e.yg=null;else{var i=bf(e,n,!1);e.network=i,e.updateParts(),e.network=null,e.isValidLayout=!0}if(df(e,n.time),null!==(n=e.yg))e.yg=null;else for(i=t.xm.iteratorValues;i.next();){var r=i.value;if(null!==(n=r.yg)){r.yg=null;break}}null!==n&&yf(e,n)}},t.Ne.postMessage({_GoJS:"_GoJS",url:t.zy}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Ne.postMessage({_GoJS:"_GoJS",url:e})}),t.Ne.postMessage({_GoJS:"_GoJS",version:-1})),null!==this.$j?this.yg=this.network:yf(this,this.network),df(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},uf.prototype.onNetworkSerialization=function(){},c.Object.defineProperties(uf.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},group:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,null!==t&&(this.B=t.diagram))}},isOngoing:{get:function(){return this.po},set:function(t){this.po!==t&&(this.po=t)}},isInitial:{get:function(){return this.wi},set:function(t){this.wi=t,t||(this.to=!0)}},isViewportSized:{get:function(){return this.uo},set:function(t){this.uo!==t&&(this.uo=t)&&this.C()}},isRouting:{get:function(){return this.ro},set:function(t){this.ro!==t&&(this.ro=t)}},isRealtime:{get:function(){return this.qo},set:function(t){this.qo!==t&&(this.qo=t)}},isValidLayout:{get:function(){return this.to},set:function(t){this.to!==t&&(this.to=t,t||null!==(t=this.diagram)&&(t.Ng=!0))}},network:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.qn},set:function(t){this.qn!==t&&(this.qn=t,this.C())}},arrangementOrigin:{get:function(){return this.hn},set:function(t){this.hn.w(t)||(this.hn.assign(t),this.C())}},id:{get:function(){return this.I},set:function(t){this.I=t}},mayUseWorkerFunction:{get:function(){return this.Lo},set:function(t){this.Lo!==t&&(this.Lo=t)}},workerStateChanged:{get:function(){return this.kq},set:function(t){this.kq!==t&&(this.kq=t)}}}),uf.prototype.useWorker=uf.prototype.Qw,uf.declareWorkerLayout=gf,uf.prototype.cancelWorker=uf.prototype.uz,uf.prototype.collectParts=uf.prototype.Yx,uf.prototype.getLayoutBounds=uf.prototype.kj,uf.prototype.invalidateLayout=uf.prototype.C;var wf=new ft,xf="object"==typeof d.document&&d.document.currentScript?d.document.currentScript.src:"",kf="undefined"!=typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof Blob?URL.createObjectURL(new Blob(["self.onmessage=function(e){if(e.data.url){\nimportScripts(e.data.url);}}"],{type:"text/javascript"})):"";function Sf(){this.Gv=null,this.zy=this.l=this.name="",this.scripts=[],this.Ne=null,this.xm=new ft}function _f(t){it(this),this.jc=t,this.tf=new nt,this.he=new nt,this.Xt=new ft,this.St=new ft}function Cf(t,e){if(null===e)return!1;var n=t.tf.remove(e);return n&&null!==(e=e.node)&&t.Xt.remove(e),n}function Mf(t,e){if(null!==e){t.he.add(e);var n=e.link;null!==n&&null===t.yq(n)&&t.St.add(n,e),e.network=t}}function Pf(t,e){null!==e&&t.he.remove(e)&&null!==(e=e.link)&&t.St.remove(e)}function Tf(t,e,n){if(null!==n&&n.network!==e){Cf(t,n),e.Bg(n);for(var i=n.sourceEdges;i.next();){var r=i.value;r.network!==e&&(Pf(t,r),Mf(e,r),Tf(t,e,r.fromVertex))}for(i=n.destinationEdges;i.next();)(n=i.value).network!==e&&(Pf(t,n),Mf(e,n),Tf(t,e,n.toVertex))}}function Nf(t){it(this),this.Rc=t,this.l=new Rt(0,0,10,10).freeze(),this.v=new dt(5,5).freeze(),this.Ji=this.mb=null,this.Le=new tt,this.Ee=new tt}function Af(t,e){return e=e.Ji,(t=t.Ji)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function Ef(t){it(this),this.Qc=t,this.vg=this.Wf=this.Fl=this.mb=null}function Lf(){uf.call(this),this.isViewportSized=!0,this.lq=this.mq=NaN,this.Qg=new Dt(NaN,NaN).freeze(),this.kf=new Dt(10,10).freeze(),this.yb=jf,this.Eb=Ff,this.Zc=zf,this.Uc=Of}function Of(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}uf.className="Layout",uf.GoJSScriptURL=xf,uf.declareWorkerLayout=gf,"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&(self.onmessage=function(t){if("_GoJS"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:Dr.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=mf(t.layout));var i=null;if(n&&n.Gv&&(i=new n.Gv),!i)throw Error("no registered Worker Layout: "+t.layout);i.network=bf(i,t,!0),i.workerLayout=function(){var t=vf(i,i.network,!1);return t._GoJS="_GoJS",t.time=performance.now()-e,self.postMessage(t,void 0),!0},i.doLayout(new tt)}}),_f.prototype.clear=function(){if(this.tf)for(var t=this.tf.iterator;t.next();)t.value.clear();if(this.he)for(t=this.he.iterator;t.next();)t.value.clear();this.tf=new nt,this.he=new nt,this.Xt=new ft,this.St=new ft},_f.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.tf.count+" edges: "+this.he.count,1<t){for(var n=this.tf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.he.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},_f.prototype.createVertex=function(){return new Nf(this)},_f.prototype.createEdge=function(){return new Ef(this)},_f.prototype.Ag=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(t){if(t instanceof Tu)return!t.isLinkLabel;if(t instanceof Qu){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&null!==(t=t.toNode)&&!t.isLinkLabel}return!1}),t=t.iterator;t.next();){var i=t.value;if(i instanceof Tu&&(!e||i.isTopLevel)&&i.canLayout()&&n(i))if(i instanceof Xu&&null===i.layout)this.Ag(i.memberParts,!1);else if(null===this.ij(i)){var r=this.createVertex();r.node=i,this.Bg(r)}}for(t.reset();t.next();)if((i=t.value)instanceof Qu&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&null===this.yq(i)){var o=i.fromNode;r=i.toNode,null!==o&&null!==r&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),null!==o&&null!==r&&this.yk(o,r,i))}}},_f.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.ij(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.ij(e)))return t;e=e.containingGroup}return null},(e=_f.prototype).Bg=function(t){if(null!==t){this.tf.add(t);var e=t.node;null!==e&&this.Xt.add(e,t),t.network=this}},e.hk=function(t){if(null===t)return null;var e=this.ij(t);return null===e&&((e=this.createVertex()).node=t,this.Bg(e)),e},e.Jv=function(t){if(null!==t&&Cf(this,t)){for(var e=t.Le,n=e.count-1;0<=n;n--){var i=e.J(n);this.qk(i)}for(t=(e=t.Ee).count-1;0<=t;t--)n=e.J(t),this.qk(n)}},e.Gz=function(t){null!==t&&null!==(t=this.ij(t))&&this.Jv(t)},e.ij=function(t){return null===t?null:this.Xt.H(t)},e.jm=function(t){if(null!==t){Mf(this,t);var e=t.toVertex;null!==e&&e.Av(t),null!==(e=t.fromVertex)&&e.yv(t)}},e.Sx=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,i=this.yq(t);return null===i?((i=this.createEdge()).link=t,null!==e&&(i.fromVertex=this.hk(e)),null!==n&&(i.toVertex=this.hk(n)),this.jm(i)):(i.fromVertex=null!==e?this.hk(e):null,i.toVertex=null!==n?this.hk(n):null),i},e.qk=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.Iv(t),null!==(e=t.fromVertex)&&e.Hv(t),Pf(this,t)}},e.Fz=function(t){null!==t&&null!==(t=this.yq(t))&&this.qk(t)},e.yq=function(t){return null===t?null:this.St.H(t)},e.yk=function(t,e,n){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.jm(i),i}return null},e.Mm=function(t){if(null!==t){var e=t.fromVertex,n=t.toVertex;null!==e&&null!==n&&(e.Hv(t),n.Iv(t),t.Mm(),e.Av(t),n.yv(t))}},e.vq=function(){for(var t=T(),e=this.he.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.qk(t[n]);N(t)},_f.prototype.deleteArtificialVertexes=function(){for(var t=T(),e=this.tf.iterator;e.next();){var n=e.value;null===n.node&&null===n.data&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.Jv(t[e]);for(e=T(),n=this.he.iterator;n.next();){var i=n.value;null===i.link&&null===i.data&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.qk(e[i]);N(t),N(e)},_f.prototype.Uy=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function(t){for(var e=T(),n=t.he.iterator;n.next();){var i=n.value;null!==i.fromVertex&&null!==i.toVertex||e.push(i)}for(n=e.length,i=0;i<n;i++)t.qk(e[i]);N(e)}(this),this.vq()),t=new tt;for(var e=!0;e;){e=!1;for(var n=this.tf.iterator;n.next();){var i=n.value;if(0<i.Le.count||0<i.Ee.count){e=this.layout.createNetwork(),t.add(e),Tf(this,e,i),e=!0;break}}}return t.sort(function(t,e){return null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count}),t},_f.prototype.Mz=function(){for(var t=new nt,e=this.tf.iterator;e.next();)t.add(e.value.node);for(e=this.he.iterator;e.next();)t.add(e.value.link);return t},c.Object.defineProperties(_f.prototype,{layout:{get:function(){return this.jc},set:function(t){null!==t&&(this.jc=t)}},vertexes:{get:function(){return this.tf}},edges:{get:function(){return this.he}}}),_f.prototype.findAllParts=_f.prototype.Mz,_f.prototype.splitIntoSubNetworks=_f.prototype.Uy,_f.prototype.deleteSelfEdges=_f.prototype.vq,_f.prototype.reverseEdge=_f.prototype.Mm,_f.prototype.linkVertexes=_f.prototype.yk,_f.prototype.findEdge=_f.prototype.yq,_f.prototype.deleteLink=_f.prototype.Fz,_f.prototype.deleteEdge=_f.prototype.qk,_f.prototype.addLink=_f.prototype.Sx,_f.prototype.addEdge=_f.prototype.jm,_f.prototype.findVertex=_f.prototype.ij,_f.prototype.deleteNode=_f.prototype.Gz,_f.prototype.deleteVertex=_f.prototype.Jv,_f.prototype.addNode=_f.prototype.hk,_f.prototype.addVertex=_f.prototype.Bg,_f.prototype.addParts=_f.prototype.Ag,_f.className="LayoutNetwork",Nf.prototype.serializeVertexProperties=function(t){t.id=ot(this),t.key=this.node?this.node.key:this.data?this.data.Ai:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.dB=this.bounds.width,t.oA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.Le.each(function(t){e.push(ot(t))}),t.Ry=e;var n=[];this.Ee.each(function(t){n.push(ot(t))}),t.gy=n},Nf.prototype.wq=function(t,e,n){if(null!==t){this.x=t.x,this.y=t.y,this.width=t.dB,this.height=t.oA,this.focusX=t.fx,this.focusY=t.fy;var i=this;t.Ry&&t.Ry.forEach(function(t){(t=n.get(t))&&i.Le.add(t)}),t.gy&&t.gy.forEach(function(t){(t=n.get(t))&&i.Ee.add(t)})}},Nf.prototype.clear=function(){this.Ji=this.mb=null,this.Le=new tt,this.Ee=new tt},Nf.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+ot(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,i=this.Le.iterator;i.next();){var r=i.value;n?n=!1:t+=",",t+=r.toString(0)}for(r="",n=!0,i=this.Ee.iterator;i.next();)n?n=!1:r+=",",r+=i.value.toString(0);e+=" sources: "+t+" destinations: "+r}return e},Nf.prototype.commit=function(){var t=this.mb;if(null!==t){var e=this.bounds,n=t.bounds;S(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof Xu)){n=Rt.alloc();var i=this.network.layout.kj(t,n),r=t.locationObject.ga(le);if(i.u()&&r.u())return t.moveTo(e.x+this.focusX-(r.x-i.x),e.y+this.focusY-(r.y-i.y)),void Rt.free(n);Rt.free(n)}t.moveTo(e.x,e.y)}},Nf.prototype.Av=function(t){null!==t&&(this.Le.contains(t)||this.Le.add(t))},Nf.prototype.Iv=function(t){null!==t&&this.Le.remove(t)},Nf.prototype.yv=function(t){null!==t&&(this.Ee.contains(t)||this.Ee.add(t))},Nf.prototype.Hv=function(t){null!==t&&this.Ee.remove(t)},c.Object.defineProperties(Nf.prototype,{sourceEdgesArrayAccess:{get:function(){return this.Le._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Ee._dataArray}},data:{get:function(){return this.mb},set:function(t){if(this.mb=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,i=e.width;this.v.h(i/2,(e=e.height)/2),this.l.h(t,n,i,e)}}},node:{get:function(){return this.Ji},set:function(t){if(this.Ji!==t){this.Ji=t,t.Ta();var e=this.network.layout,n=Rt.alloc(),i=e.kj(t,n);e=i.x;var r=i.y,o=i.width;if(i=i.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.l.h(e,r,o,i),Rt.free(n),!(t instanceof Xu)&&(t=t.locationObject.ga(le)).u())return void this.v.h(t.x-e,t.y-r);this.v.h(o/2,i/2)}}},bounds:{get:function(){return this.l},set:function(t){this.l.w(t)||this.l.assign(t)}},focus:{get:function(){return this.v},set:function(t){this.v.w(t)||this.v.assign(t)}},centerX:{get:function(){return this.l.x+this.v.x},set:function(t){var e=this.l;e.x+this.v.x!==t&&(e.da(),e.x=t-this.v.x,e.freeze())}},centerY:{get:function(){return this.l.y+this.v.y},set:function(t){var e=this.l;e.y+this.v.y!==t&&(e.da(),e.y=t-this.v.y,e.freeze())}},focusX:{get:function(){return this.v.x},set:function(t){var e=this.v;e.x!==t&&(e.da(),e.x=t,e.freeze())}},focusY:{get:function(){return this.v.y},set:function(t){var e=this.v;e.y!==t&&(e.da(),e.y=t,e.freeze())}},x:{get:function(){return this.l.x},set:function(t){var e=this.l;e.x!==t&&(e.da(),e.x=t,e.freeze())}},y:{get:function(){return this.l.y},set:function(t){var e=this.l;e.y!==t&&(e.da(),e.y=t,e.freeze())}},width:{get:function(){return this.l.width},set:function(t){var e=this.l;e.width!==t&&(e.da(),e.width=t,e.freeze())}},height:{get:function(){return this.l.height},set:function(t){var e=this.l;e.height!==t&&(e.da(),e.height=t,e.freeze())}},network:{get:function(){return this.Rc},set:function(t){this.Rc=t}},sourceVertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new nt,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.Le.iterator}},destinationEdges:{get:function(){return this.Ee.iterator}},edges:{get:function(){for(var t=new tt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.Le.count+this.Ee.count}}}),Nf.prototype.deleteDestinationEdge=Nf.prototype.Hv,Nf.prototype.addDestinationEdge=Nf.prototype.yv,Nf.prototype.deleteSourceEdge=Nf.prototype.Iv,Nf.prototype.addSourceEdge=Nf.prototype.Av,Nf.className="LayoutVertex",Nf.standardComparer=Af,Nf.smartComparer=function(t,e){if(null!==t){if(null!==e){var n=e.Ji;if(null!==(t=t.Ji)){if(null!==n){for(e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var i=parseFloat(e[n]),r=parseFloat(t[n]);if(isNaN(i)){if(!isNaN(r))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(r))return-1;if(0!=i-r)return i-r}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},Ef.prototype.clear=function(){this.vg=this.Wf=this.Fl=this.mb=null},Ef.prototype.serializeEdgeProperties=function(t){t.id=ot(this),t.key=this.link?this.link.key:this.data?this.data.Ai:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?ot(this.fromVertex):null,t.ZA=this.toVertex?ot(this.toVertex):null},Ef.prototype.deserializeEdgeProperties=function(t,e){if(null!==t){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.ZA))&&(this.toVertex=t)}},Ef.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+ot(this);return 0<t&&(e+=null!==this.Fl?"("+this.Fl.toString()+")":"",1<t&&(e+=" "+(this.Wf?this.Wf.toString():"null")+" --\x3e "+(this.vg?this.vg.toString():"null"))),e},Ef.prototype.Mm=function(){var t=this.Wf;this.Wf=this.vg,this.vg=t},Ef.prototype.commit=function(){},Ef.prototype.wy=function(t){return this.vg===t?this.Wf:this.Wf===t?this.vg:null},c.Object.defineProperties(Ef.prototype,{network:{get:function(){return this.Qc},set:function(t){this.Qc=t}},data:{get:function(){return this.mb},set:function(t){this.mb!==t&&(this.mb=t)}},link:{get:function(){return this.Fl},set:function(t){this.Fl!==t&&(this.Fl=t)}},fromVertex:{get:function(){return this.Wf},set:function(t){this.Wf!==t&&(this.Wf=t)}},toVertex:{get:function(){return this.vg},set:function(t){this.vg!==t&&(this.vg=t)}}}),Ef.prototype.getOtherVertex=Ef.prototype.wy,Ef.className="LayoutEdge",u(Lf,uf),Lf.prototype.cloneProtected=function(t){uf.prototype.cloneProtected.call(this,t),t.mq=this.mq,t.lq=this.lq,t.Qg.assign(this.Qg),t.kf.assign(this.kf),t.yb=this.yb,t.Eb=this.Eb,t.Zc=this.Zc,t.Uc=this.Uc},Lf.prototype.ib=function(t){t.classType===Lf?t===zf||t===Vf||t===Rf||t===Bf?this.sorting=t:t===Ff||t===If?this.arrangement=t:t===jf||t===Df?this.alignment=t:v("Unknown enum value: "+t):uf.prototype.ib.call(this,t)},Lf.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Yx(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.Nh()||null===i.fromNode&&null===i.toNode){if(i.Ta(),i instanceof Xu)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var r=e.ma();if(0!==r.length){switch(this.sorting){case Bf:r.reverse();break;case zf:r.sort(this.comparer);break;case Vf:r.sort(this.comparer),r.reverse()}var o=this.wrappingColumn;isNaN(o)&&(o=0);var s=this.wrappingWidth;switch(isNaN(s)&&null!==t?(e=t.padding,s=Math.max(t.viewportBounds.width-e.left-e.right,0)):s=Math.max(this.wrappingWidth,0),0>=o&&0>=s&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.va("Layout"),i=[],this.alignment){case Df:var a=e,l=n,h=Rt.alloc(),u=Math.max(this.cellSize.width,1);if(!isFinite(u))for(var c=u=0;c<r.length;c++){var f=this.kj(r[c],h);u=Math.max(u,f.width)}if(u=Math.max(u+a,1),c=Math.max(this.cellSize.height,1),!isFinite(c))for(f=c=0;f<r.length;f++){var d=this.kj(r[f],h);c=Math.max(c,d.height)}c=Math.max(c+l,1),f=this.arrangement;for(var p=d=this.arrangementOrigin.x,g=this.arrangementOrigin.y,m=0,y=0,v=0;v<r.length;v++){var b=r[v],w=this.kj(b,h),x=Math.ceil((w.width+a)/u)*u,k=Math.ceil((w.height+l)/c)*c;switch(f){case If:var S=Math.abs(p-w.width);break;default:S=p+w.width}switch((0<o&&m>o-1||0<s&&0<m&&S-d>s)&&(i.push(new Rt(0,g,s+a,y)),m=0,p=d,g+=y,y=0),y=Math.max(y,k),f){case If:w=-w.width;break;default:w=0}switch(b.moveTo(p+w,g),f){case If:p-=x;break;default:p+=x}m++}i.push(new Rt(0,g,s+a,y)),Rt.free(h);break;case jf:for(l=s,u=o,c=e,f=n,s=Rt.alloc(),d=Math.max(this.cellSize.width,1),o=g=h=0,a=dt.alloc(),p=0;p<r.length;p++)m=this.kj(y=r[p],s),y=y.Cf(y.locationObject,y.locationSpot,a),h=Math.max(h,y.x),g=Math.max(g,m.width-y.x),o=Math.max(o,y.y);switch(p=this.arrangement){case If:h+=c;break;default:g+=c}d=isFinite(d)?Math.max(d+c,1):Math.max(h+g,1);var _=y=this.arrangementOrigin.x;for(v=this.arrangementOrigin.y,g=0,l>=h&&(l-=h),h=b=0,x=Math.max(this.cellSize.height,1),w=o=0,k=!0,m=dt.alloc(),S=0;S<r.length;S++){var C=r[S],M=this.kj(C,s),P=C.Cf(C.locationObject,C.locationSpot,a);if(0<g)switch(p){case If:_=(_-y-(M.width-P.x))/d,_=(_=Xe.$(Math.round(_),_)?Math.round(_):Math.floor(_))*d+y;break;default:_=(_-y+P.x)/d,_=(_=Xe.$(Math.round(_),_)?Math.round(_):Math.ceil(_))*d+y}else switch(p){case If:b=_+P.x+M.width;break;default:b=_-P.x}switch(p){case If:var T=-(_+P.x)+b;break;default:T=_+M.width-P.x-b}if(0<u&&g>u-1||0<l&&0<g&&T>l){for(i.push(new Rt(0,k?v-o:v,l+c,w+o+f)),_=0;_<g&&S!==g;_++){var N=(T=r[S-g+_]).Cf(T.locationObject,T.locationSpot,m);T.moveTo(T.position.x,T.position.y+o-N.y)}w+=f,v=k?v+w:v+(w+o),g=w=o=0,_=y,k=!1}switch(_===y&&(h=p===If?Math.max(h,M.width-P.x):Math.min(h,-P.x)),o=Math.max(o,P.y),w=Math.max(w,M.height-P.y),isFinite(x)&&(w=Math.max(w,Math.max(M.height,x)-P.y)),C.moveTo(_-P.x,k?v-P.y:v),p){case If:_-=P.x+c;break;default:_+=M.width-P.x+c}g++}if(i.push(new Rt(0,v,l+c,(k?w:w+o)+f)),r.length!==g)for(l=0;l<g;l++)c=(u=r[r.length-g+l]).Cf(u.locationObject,u.locationSpot,a),u.moveTo(u.position.x,u.position.y+o-c.y);if(dt.free(a),dt.free(m),p===If)for(r=0;r<i.length;r++)(o=i[r]).width+=h,o.x-=h;else for(r=0;r<i.length;r++)(o=i[r]).x>h&&(o.width+=o.x-h,o.x=h);Rt.free(s)}for(a=o=s=r=0;a<i.length;a++)l=i[a],r=Math.min(r,l.x),s=Math.min(s,l.y),o=Math.max(o,l.x+l.width);this.commitLayers(i,new dt(this.arrangement===If?r+e/2-(o+r):r-e/2,s-n/2)),null!==t&&t.Wa("Layout"),this.isValidLayout=!0}},Lf.prototype.commitLayers=function(){},c.Object.defineProperties(Lf.prototype,{wrappingWidth:{get:function(){return this.mq},set:function(t){this.mq!==t&&(0<t||isNaN(t))&&(this.mq=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.lq},set:function(t){this.lq!==t&&(0<t||isNaN(t))&&(this.lq=t,this.C())}},cellSize:{get:function(){return this.Qg},set:function(t){this.Qg.w(t)||(this.Qg.assign(t),this.C())}},spacing:{get:function(){return this.kf},set:function(t){this.kf.w(t)||(this.kf.assign(t),this.C())}},alignment:{get:function(){return this.yb},set:function(t){this.yb===t||t!==jf&&t!==Df||(this.yb=t,this.C())}},arrangement:{get:function(){return this.Eb},set:function(t){this.Eb===t||t!==Ff&&t!==If||(this.Eb=t,this.C())}},sorting:{get:function(){return this.Zc},set:function(t){this.Zc===t||t!==Rf&&t!==Bf&&t!==zf&&t!==Vf||(this.Zc=t,this.C())}},comparer:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t,this.C())}}});var Df=new H(Lf,"Position",0),jf=new H(Lf,"Location",1),Ff=new H(Lf,"LeftToRight",2),If=new H(Lf,"RightToLeft",3),Rf=new H(Lf,"Forward",4),Bf=new H(Lf,"Reverse",5),zf=new H(Lf,"Ascending",6),Vf=new H(Lf,"Descending",7);function Uf(){this.cp=new nt,this.Fo=new nt,this.Da=new nt,this.Te=new ft,this.Se=new ft,this.Lj=new ft,this.B=null,this.kr=!1}function qf(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Te.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.B.undoManager.isUndoingRedoing&&!t.Te.contains(e)){var i=t.Cq(e),r=Hf(t,e,i);if(null!==r&&(ql(r),null!==(r=r.copy()))){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Mf=i,r.mb=e,t.kr&&(r.hh="Tool"),t.diagram.add(r),r.mb=null,r.data=e,t.diagram.skipsModelSourceBindings=o,i=r;break t}}i=null}null!==i&&n&&t.resolveReferencesForData(e)}}function Hf(t,e,n){var i=(t=t.B).model;return i.wk()&&i.aw(e)?null===(e=t.groupTemplateMap.H(n))&&null===(e=t.groupTemplateMap.H(""))&&(Zf||(Zf=!0,x('No Group template found for category "'+n+'"'),x("  Using default group template")),e=t.zu):null===(e=t.nodeTemplateMap.H(n))&&null===(e=t.nodeTemplateMap.H(""))&&($f||($f=!0,x('No Node template found for category "'+n+'"'),x("  Using default node template")),e=t.Bu),e}function Gf(t,e,n){for(var i in n){var r=e[i],o=n[i];if(_(o)){if(!_(r)||r.length<o.length)return!1;for(var s=0;s<r.length;s++){var a=o[s];if(void 0!==a&&!Yf(t,r[s],a))return!1}}else if(!Yf(t,r,o))return!1}return!0}function Yf(t,e,n){if("function"==typeof n){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(S(e)&&S(n)){if(!Gf(t,e,n))return!1}else if(e!==n)return!1;return!0}function Xf(t,e){var n=e.zi;if(_(n)){var i=t.Lj.H(n);if(null===i)(i=[]).push(e),t.Lj.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function Kf(t,e,n){Ll(e,function(t){for(var e=(t=t.W.j).length,i=0;i<e;i++)Eo(n,t[i])});var i=e.zi;if(_(i)){var r=t.Lj.H(i);if(null!==r)for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),0===r.length&&t.Lj.remove(i);break}}}function Wf(t,e,n,i,r){if(null===e||r&&!e.canCopy())return null;if(i.contains(e))return i.H(e);var o=t.copyPartData(e,n);if(!(o instanceof ou))return null;if(o.isSelected=!1,o.isHighlighted=!1,i.add(e,o),e instanceof Tu){for(var s=e.linksConnected;s.next();){var a=s.value;if(a.fromNode===e){var l=i.H(a);null!==l&&(l.fromNode=o)}a.toNode===e&&null!==(a=i.H(a))&&(a.toNode=o)}if(e instanceof Xu&&o instanceof Xu)for(e=e.memberParts;e.next();)(s=Wf(t,e.value,n,i,r))instanceof Qu||null===s||(s.containingGroup=o)}else if(e instanceof Qu&&o instanceof Qu)for(null!==(s=e.fromNode)&&null!==(s=i.H(s))&&(o.fromNode=s),null!==(s=e.toNode)&&null!==(s=i.H(s))&&(o.toNode=s),e=e.labelNodes;e.next();)null!==(s=Wf(t,e.value,n,i,r))&&s instanceof Tu&&(s.labeledLink=o);return o}Lf.className="GridLayout",Lf.standardComparer=Of,Lf.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var i=parseFloat(t[n]),r=parseFloat(e[n]);if(isNaN(i)){if(!isNaN(r))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(r))return-1;if(0!=i-r)return i-r}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0}return 1}return null!==e?-1:0},Lf.Position=Df,Lf.Location=jf,Lf.LeftToRight=Ff,Lf.RightToLeft=If,Lf.Forward=Rf,Lf.Reverse=Bf,Lf.Ascending=zf,Lf.Descending=Vf,(e=Uf.prototype).clear=function(){this.cp.clear(),this.Fo.clear(),this.Da.clear(),this.Te.clear(),this.Se.clear(),this.Lj.clear()},e.ae=function(t){this.B=t},e.lj=function(t){if(t instanceof Tu){if(this.cp.add(t),t instanceof Xu){var e=t.containingGroup;null===e?this.B.Bh.add(t):e.Kl.add(t),null!==(e=t.layout)&&(e.diagram=this.B)}}else t instanceof Qu?this.Fo.add(t):t instanceof Pu||this.Da.add(t);null===(e=t.data)||t instanceof Pu||(t instanceof Qu?this.Se.add(e,t):this.Te.add(e,t))},e.Jc=function(t){if(t.ik(),t instanceof Tu){if(this.cp.remove(t),t instanceof Xu){var e=t.containingGroup;null===e?this.B.Bh.remove(t):e.Kl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof Qu?this.Fo.remove(t):t instanceof Pu||this.Da.remove(t);null===(e=t.data)||t instanceof Pu||(t instanceof Qu?this.Se.remove(e):this.Te.remove(e))},e.Gd=function(){for(var t=this.B.nodeTemplateMap.iterator;t.next();){var e=t.value,n=t.key;(!e.Lc()||e instanceof Xu)&&v('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.B.groupTemplateMap.iterator;t.next();)n=t.key,(e=t.value)instanceof Xu||v('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+e);for(t=this.B.linkTemplateMap.iterator;t.next();)n=t.key,(e=t.value)instanceof Qu||v('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+e);for(t=T(),e=this.B.selection.iterator;e.next();)(n=e.value.data)&&t.push(n);for(e=T(),n=this.B.highlighteds.iterator;n.next();){var i=n.value.data;i&&e.push(i)}for(n=T(),i=this.nodes.iterator;i.next();){var r=i.value;null!==r.data&&(n.push(r.data),n.push(r.location))}for(i=this.links.iterator;i.next();)null!==(r=i.value).data&&(n.push(r.data),n.push(r.location));for(i=this.parts.iterator;i.next();)null!==(r=i.value).data&&(n.push(r.data),n.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<t.length;i++)null!==(r=this.xc(t[i]))&&(r.isSelected=!0);for(i=0;i<e.length;i++)null!==(r=this.xc(e[i]))&&(r.isHighlighted=!0);for(i=0;i<n.length;i+=2)null!==(r=this.xc(n[i]))&&(r.location=n[i+1]);N(t),N(e),N(n)},Uf.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Uf.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach(function(t){i.Za(t)&&qf(n,t,!1)}),t.forEach(function(t){i.Za(t)&&n.resolveReferencesForData(t)}),!1!==e&&Oo(this.diagram,!1)},Uf.prototype.insertLink=function(){return null},Uf.prototype.resolveReferencesForData=function(){},Uf.prototype.Cq=function(t){return this.B.model.Cq(t)},Uf.prototype.getLinkCategoryForData=function(){return""},Uf.prototype.setLinkCategoryForData=function(){},Uf.prototype.setFromNodeForLink=function(){},Uf.prototype.setToNodeForLink=function(){},Uf.prototype.findLinkTemplateForCategory=function(t){var e=this.B.linkTemplateMap.H(t);return null===e&&null===(e=this.B.linkTemplateMap.H(""))&&(Jf||(Jf=!0,x('No Link template found for category "'+t+'"'),x("  Using default link template")),e=this.B.Au),e},Uf.prototype.removeAllModeledParts=function(){this.bu(this.diagram.model.nodeDataArray)},Uf.prototype.bu=function(t){var e=this;t.forEach(function(t){e.Xq(t)})},Uf.prototype.Xq=function(t){null!==(t=this.xc(t))&&(yo(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Uf.prototype.unresolveReferencesForPart=function(){},Uf.prototype.removeDataForLink=function(){},Uf.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.B.model.Kb(t))?this.Te.H(t):null},Uf.prototype.Cb=function(t){return null==t||null===(t=this.B.model.Kb(t))?null:(t=this.Te.H(t))instanceof Tu?t:null},Uf.prototype.findLinkForKey=function(){return null},(e=Uf.prototype).xc=function(t){if(null===t)return null;var e=this.Te.H(t);return null!==e?e:e=this.Se.H(t)},e.ej=function(t){return null===t?null:(t=this.Te.H(t))instanceof Tu?t:null},e.wc=function(t){return null===t?null:this.Se.H(t)},e.Ft=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.cp.iterator;n.next();){var i=n.value,r=i.data;if(null!==r)for(var o=0;o<arguments.length;o++){var s=arguments[o];if(S(s)&&Gf(this,r,s)){e.add(i);break}}}return e.iterator},e.Et=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.Fo.iterator;n.next();){var i=n.value,r=i.data;if(null!==r)for(var o=0;o<arguments.length;o++){var s=arguments[o];if(S(s)&&Gf(this,r,s)){e.add(i);break}}}return e.iterator},Uf.prototype.doModelChanged=function(t){if(this.B){var e=this.B;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var i=t.modelChange;if(""!==i)if(n===Cn){if("nodeCategory"===i){var r=this.xc(t.object),o=t.newValue;null!==r&&"string"==typeof o&&(r.category=o)}else"nodeDataArray"===i&&(this.bu(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===Mn){var s=t.newValue;"nodeDataArray"===i&&S(s)&&qf(this,s),e.isModified=!0}else if(n===Pn){var a=t.oldValue;"nodeDataArray"===i&&S(a)&&this.Xq(a),e.isModified=!0}else n===_n&&("SourceChanged"===i?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.gr(),this.updateAllTargetBindings()):"ModelDisplaced"===i&&this.Gd());else if(n===Cn){var l=t.propertyName,h=t.object;h===e.model?"nodeKeyProperty"!==l&&"nodeCategoryProperty"!==l||e.undoManager.isUndoingRedoing||this.Gd():this.updateDataBindings(h,l),e.isModified=!0}else if(n===Mn||n===Pn){var u=t.change===Mn,c=u?t.newParam:t.oldParam,f=u?t.newValue:t.oldValue,d=this.Lj.H(t.object);if(Array.isArray(d))for(t=0;t<d.length;t++){var p=d[t];if(u)Gl(p,f,c);else if(!(0>c)){var g=c+Hl(p);p.Jc(g,!0),Yl(p,g,c)}}e.isModified=!0}}finally{e.Z=!0}}}}},Uf.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ca(t);for(e=this.nodes.iterator;e.next();)e.value.Ca(t);for(e=this.links.iterator;e.next();)e.value.Ca(t)},Uf.prototype.gr=function(){for(var t=this.B.model,e=new nt,n=t.nodeDataArray,i=0;i<n.length;i++)e.add(n[i]);var r=[];for(this.nodes.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),this.parts.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),r.forEach(function(e){kd(t,e,!1)}),i=0;i<n.length;i++){var o=n[i];null===this.xc(o)&&xd(t,o,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},Uf.prototype.refreshDataBoundLinks=function(){},Uf.prototype.updateRelationshipsFromData=function(){},Uf.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.xc(t);if(null!==n)n.Ca(e);else{n=null;for(var i=this.Lj.iterator;i.next();){for(var r=i.value,o=0;o<r.length;o++){var s=r[o].ny(t);null!==s&&(null===n&&(n=T()),n.push(s))}if(null!==n)break}if(null!==n){for(i=0;i<n.length;i++)n[i].Ca(e);N(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Uf.prototype.nk=function(t,e,n){var i=new ft;if(_(t))for(var r=0;r<t.length;r++)Wf(this,t[r],e,i,n);else for(t=t.iterator;t.next();)Wf(this,t.value,e,i,n);if(null!==e){n=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.bl.dragsLink,r=new nt;for(var o=new ft,s=i.iterator;s.next();){var a=s.value;if(a instanceof Qu)t||null!==a.fromNode&&null!==a.toNode||r.add(a);else if(a instanceof Tu&&null!==a.data&&n.wm()){var l=a,h=(a=s.key).Fg();null!==h&&(null!==(h=i.H(h))?(n.be(l.data,n.ja(h.data)),l=e.wc(l.data),null!==(a=a.hj())&&null!==l&&o.add(a,l)):n.be(l.data,void 0))}}if(0<r.count&&e.cu(r,!1),0<o.count)for(n=o.iterator;n.next();)i.add(n.key,n.value)}if(null!==e&&null!==this.B&&null!==(n=(e=e.model).afterCopyFunction)){var u=new ft;i.each(function(t){null!==t.key.data&&u.add(t.key.data,t.value.data)}),n(u,e,this.B.model)}for(e=i.iterator;e.next();)e.value.Ca();return i},Uf.prototype.copyPartData=function(t,e){var n=null,i=t.data;if(null!==i&&null!==e){var r=e.model;t instanceof Qu||S(i=r.copyNodeData(i))&&(r.uf(i),n=e.xc(i))}else ql(t),null!==(n=t.copy())&&(r=this.B,null!==e?e.add(n):null!==i&&null!==r&&null!==r.commandHandler&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,n instanceof Qu||(r=e.copyNodeData(i)),S(r)&&(n.data=r)));return n},c.Object.defineProperties(Uf.prototype,{nodes:{get:function(){return this.cp}},links:{get:function(){return this.Fo}},parts:{get:function(){return this.Da}},diagram:{get:function(){return this.B}},addsToTemporaryLayer:{get:function(){return this.kr},set:function(t){this.kr=t}}}),Uf.prototype.updateAllRelationshipsFromData=Uf.prototype.gr,Uf.prototype.findLinksByExample=Uf.prototype.Et,Uf.prototype.findNodesByExample=Uf.prototype.Ft,Uf.prototype.findLinkForData=Uf.prototype.wc,Uf.prototype.findNodeForData=Uf.prototype.ej,Uf.prototype.findPartForData=Uf.prototype.xc,Uf.prototype.findNodeForKey=Uf.prototype.Cb,Uf.prototype.removeModeledPart=Uf.prototype.Xq,Uf.prototype.removeModeledParts=Uf.prototype.bu,Uf.prototype.rebuildParts=Uf.prototype.Gd;var $f=!1,Zf=!1,Jf=!1;function Qf(t){Uf.apply(this,arguments)}function td(t,e){e.forEach(function(e){ed(t,e)}),Oo(t.diagram,!1)}function ed(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Se.contains(e)){var n=t.getLinkCategoryForData(e),i=t.findLinkTemplateForCategory(n);if(null!==i){ql(i);var r=i.copy();if(null!==r){i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Mf=n,r.mb=e;var o=qd(n=t.diagram.model,e,!0);""!==o&&(r.fromPortId=o),void 0!==(o=Vd(n,e,!0))&&(o=t.Cb(o))instanceof Tu&&(r.fromNode=o),""!==(o=qd(n,e,!1))&&(r.toPortId=o),void 0!==(o=Vd(n,e,!1))&&(o=t.Cb(o))instanceof Tu&&(r.toNode=o),n=n.Bf(e),Array.isArray(n)&&n.forEach(function(e){null!==(e=t.Cb(e))&&(e.labeledLink=r)}),t.kr&&(r.hh="Tool"),t.diagram.add(r),r.mb=null,r.data=e,t.diagram.skipsModelSourceBindings=i}}}}function nd(t,e){e.forEach(function(e){t.Xq(e)})}function id(){Uf.apply(this,arguments),this.qh=null}function rd(t,e,n){if(null!==e&&null!==n){var i=t.diagram.toolManager.findTool("Linking"),r=e,o=n;if(t.diagram.isTreePathToChildren){for(e=o.linksConnected;e.next();)if(e.value.toNode===o)return}else for(o=e,e=(r=n).linksConnected;e.next();)if(e.value.fromNode===r)return;if((null===i||!hi(i,r,o,null,!0))&&(i=t.getLinkCategoryForData(n.data),null!==(e=t.findLinkTemplateForCategory(i))&&(ql(e),null!==(e=e.copy())))){var s=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Mf=i,e.mb=n.data,e.fromNode=r,e.toNode=o,t.diagram.add(e),e.mb=null,e.data=n.data,t.diagram.skipsModelSourceBindings=s}}}function od(t){this.Li=new nt,this.Ii=new nt,this.ou=',\n  "insertedNodeKeys": ',this.hx=',\n  "modifiedNodeData": ',this.qu=',\n  "removedNodeKeys": ',this.Wh=null,it(this),this.Gn=this.Qa="",this.$f=!1,this.l={},this.Ec=[],this.Va=new ft,this.Ki="key",this.$k=this.Hl=null,this.xn=this.yn=!1,this.An=!0,this.dn=null,this.Tj="category",this.Sf=new ft,this.Yu=new tt,this.ug=!1,this.v=null,this.undoManager=new Nn,void 0!==t&&(this.nodeDataArray=t)}function sd(t,e,n,i,r,o){function s(t,n){a?(void 0===t.__gohashid&&o.push(t),i.set(t,n)):(t=st++,i.set(t,n),r.set(t,e))}if(!S(e))return e;o||(o=[]);var a=Object.isExtensible(e);if(i||(i=new ft),a){var l=i.get(e);if(l)return l}else for(r||(r=new ft),l=r.iterator;l.next();){var h=l.key;if(l.value===e&&(h=i.get(h)))return h}if(Array.isArray(e)){s(e,l=[]);for(var u=0;u<e.length;u++)l.push(sd(t,e[u],!1,i,r,o))}else if(e instanceof dt||e instanceof Dt||e instanceof Rt||e instanceof Jt||e instanceof ze)l=e.copy(),s(e,l);else{if(e instanceof Fa||e instanceof Ke||e instanceof H)return e;if(e instanceof tt)l=(new tt).addAll(sd(t,e.ma(),!1,i,r,o)),s(e,l);else if(e instanceof nt)l=(new nt).addAll(sd(t,e.ma(),!1,i,r,o)),s(e,l);else if(e instanceof ft)l=(new ft).addAll(sd(t,e.ma(),!1,i,r,o)),s(e,l);else if(e instanceof Date)l=new Date(e.getTime()),s(e,l);else if(e instanceof RegExp)l=new RegExp(e),s(e,l),l.lastIndex=e.lastIndex;else if("function"==typeof e.copy)l=e.copy(),s(e,l);else for(u in s(e,l={}),e)"__gohashid"!==u&&(l[u]=sd(t,e[u],!1,i,r,o))}return n&&o.forEach(function(t){delete t.__gohashid}),l}function ad(t){return',\n  "modelData": '+yd(t,t.modelData)}function ld(t,e){S(e=e.modelData)&&(t.Jm(e),t.modelData=e)}function hd(t,e,n,i){if(e===n)return!0;if(typeof e!=typeof n||"function"==typeof e||"function"==typeof n)return!1;if(Array.isArray(e)&&Array.isArray(n)){if(i.H(e)===n)return!0;if(i.add(e,n),e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!hd(t,e[r],n[r],i))return!1;return!0}if(S(e)&&S(n)){if(i.H(e)===n)return!0;for(var o in i.add(e,n),e){var s=e[o];if(!gd(o,s)){var a=n[o];if(void 0===a||!hd(t,s,a,i))return!1}}for(r in n)if(!(gd(r,o=n[r])||void 0!==(s=e[r])&&hd(t,s,o,i)))return!1;return!0}return!1}function ud(t,e,n){t[n]!==e[n]&&v("Model.computeJsonDifference: Model."+n+' is not the same in both models: "'+t[n]+'" and "'+e[n]+'"')}function cd(t,e){function n(t,e){if((e=e.part)&&t!==(e=e.data)){var n=i.get(t);null===n?((n=new nt).add(e),i.add(t,n)):n.add(e)}}var i=t.Wh;null===i&&(i=new ft,e.changes.each(function(t){if(null!==t.diagram){var e=t.change;e===Cn?(t=t.object.panel)&&(e=t.data)&&n(e,t):e!==Mn&&e!==Pn||(e=(t=t.object).itemArray)&&n(e,t)}}),t.Wh=i)}function fd(t,e){for(var n=new nt,i=0;i<t.nodeDataArray.length;i++){var r=t.nodeDataArray[i];dd(t,e,r,r,n)}return n}function dd(t,e,n,i,r){if(Array.isArray(n))for(var o=0;o<n.length;o++){var s=n[o];if(s===e)return r.add(i),!0;if(dd(t,e,s,i,r))return!0}else if(S(n)&&Object.getPrototypeOf(n)===Object.prototype)for(o in n){if((s=n[o])===e)return r.add(i),!0;if(dd(t,e,s,i,r))return!0}return!1}function pd(t,e,n){void 0===n&&(n=!1);var i=e.length;if(0>=i)return"[]";var r=new Y;r.add("[ "),n&&1<i&&r.add("\n");for(var o=0;o<i;o++){var s=e[o];void 0!==s&&(0<o&&(r.add(","),n&&r.add("\n")),r.add(t.Wm(s)))}return n&&1<i&&r.add("\n"),r.add(" ]"),r.toString()}function gd(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function md(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function yd(t,e){var n=e;if(n instanceof dt)e={class:"go.Point",x:md(n.x),y:md(n.y)};else if(n instanceof Dt)e={class:"go.Size",width:md(n.width),height:md(n.height)};else if(n instanceof Rt)e={class:"go.Rect",x:md(n.x),y:md(n.y),width:md(n.width),height:md(n.height)};else if(n instanceof Jt)e={class:"go.Margin",top:md(n.top),right:md(n.right),bottom:md(n.bottom),left:md(n.left)};else if(n instanceof ze)e=n.jb()?{class:"go.Spot",x:md(n.x),y:md(n.y),offsetX:md(n.offsetX),offsetY:md(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof Fa){if(e={class:"go.Brush",type:n.type.name},n.type===$a?e.color=n.color:n.type!==Za&&n.type!==Ja||(e.start=n.start,e.end=n.end,n.type===Ja&&(0!==n.startRadius&&(e.startRadius=md(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=md(n.endRadius)))),null!==n.colorStops){var i={};for(n=n.colorStops.iterator;n.next();)i[n.key]=n.value;e.colorStops=i}}else n instanceof Ke?(e={class:"go.Geometry",type:n.type.name},0!==n.startX&&(e.startX=md(n.startX)),0!==n.startY&&(e.startY=md(n.startY)),0!==n.endX&&(e.endX=md(n.endX)),0!==n.endY&&(e.endY=md(n.endY)),n.spot1.w(re)||(e.spot1=n.spot1),n.spot2.w(fe)||(e.spot2=n.spot2),n.type===hn&&(e.path=$e(n))):n instanceof H&&(e={class:"go.EnumValue",classType:Td(t,n.classType),name:n.name});for(var r in i="{",n=!0,e){var o=Ad(e,r);if(!gd(r,o))if(n?n=!1:i+=", ",i+='"'+r+'":',"points"===r&&o instanceof tt){var s="[";for(o=o.iterator;o.next();){var a=o.value;1<s.length&&(s+=","),s+=t.Wm(a.x),s+=",",s+=t.Wm(a.y)}i+=s+="]"}else i+=t.Wm(o)}return i+"}"}function vd(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function bd(t,e,n,i,r,o,s,a,l){void 0===a&&(a=null),void 0===l&&(l=null);var h=new Sn;h.model=t,h.change=n,h.modelChange=e,h.propertyName=i,h.object=r,h.oldValue=o,h.oldParam=a,h.newValue=s,h.newParam=l,t.vt(h)}function wd(t){return"number"==typeof t||"string"==typeof t}function xd(t,e,n){var i=t.ja(e);void 0!==i&&t.Va.H(i)===e||(t.Ut(e),void 0===(i=t.ja(e))?v("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.Va.add(i,e),i=null,n&&M(t.Ec,i=t.Ec.length,e),bd(t,"nodeDataArray",Mn,"nodeDataArray",t,null,e,null,i),t.Lm(e),t.Km(e)))}function kd(t,e,n){var i=t.ja(e);if(void 0!==i&&t.Va.remove(i),i=null,n){t:if(n=t.Ec,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var r=0;r<i;r++)if(n[r]===e){i=r;break t}i=-1}if(0>i)return;P(t.Ec,i)}bd(t,"nodeDataArray",Pn,"nodeDataArray",t,e,null,i,null),t.fr(e)}function Sd(t,e,n){if(void 0!==e){var i=t.Sf.H(e);null===i&&(i=new nt,t.Sf.add(e,i)),i.add(n)}}function _d(t,e,n){if(void 0!==e){var i=t.Sf.H(e);i instanceof nt&&(null==n?t.Sf.remove(e):(i.remove(n),0===i.count&&t.Sf.remove(e)))}}function Cd(t,e){return void 0===e?null:(t=t.Sf.H(e))instanceof nt?t:null}function Md(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var r=Md(t,e[n],t.copiesArrayObjects);i.push(r)}return it(i),i}if(n&&S(e)){for(i in n=(n=e.constructor)?new n:{},r=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===i)n.__gohashid=void 0;else if(i===r)n[r]=void 0;else{var o=Ad(e,i),s=Td(t,o);"GraphObject"===s||"Diagram"===s||"Layer"===s||"RowColumnDefinition"===s||"AnimationManager"===s||"Tool"===s||"CommandHandler"===s||"Layout"===s||"InputEvent"===s||"DiagramEvent"===s||o instanceof od||o instanceof Nn||o instanceof Tn||o instanceof Sn||(o=Md(t,o,!1)),Ed(n,i,o)}return it(n),n}return e instanceof dt||e instanceof Dt||e instanceof Rt||e instanceof ze||e instanceof Jt?e.copy():e}function Pd(){return new od}function Td(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return Td(t,e.constructor);return typeof e}function Nd(t){return Od[t]?Od[t]:void 0!==d.go&&d.go[t]?d.go[t]:null}function Ad(t,e){if(!t||!e)return null;try{if("function"==typeof e)var n=e(t);else"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch(i){}return n}function Ed(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch(i){}}Uf.className="PartManager",u(Qf,Uf),Qf.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),td(this,t.linkDataArray)},Qf.prototype.addModeledParts=function(t){for(Uf.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)tc(t.value);Oo(this.diagram,!1)},Qf.prototype.removeAllModeledParts=function(){var t=this.diagram.model;nd(this,t.linkDataArray),this.bu(t.nodeDataArray)},Qf.prototype.getLinkCategoryForData=function(t){return this.diagram.model.It(t)},Qf.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.$q(t,e)},Qf.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.xw(t.data,n.ja(null!==e?e.data:null))},Qf.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.Cw(t.data,n.ja(null!==e?e.data:null))},Qf.prototype.removeDataForLink=function(t){this.diagram.model.Hm(t.data)},Qf.prototype.findPartForKey=function(t){var e=Uf.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.Dg(t))?this.Se.H(t):e},Qf.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Dg(t))?this.Se.H(t):null},Qf.prototype.doModelChanged=function(t){var e=this;if(Uf.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.Z){n.Z=!1;try{var r=t.modelChange;if(""!==r){if(i===Cn){if("linkFromKey"===r){var o=this.wc(t.object);if(null!==o){var s=this.Cb(t.newValue);o.fromNode=s}}else if("linkToKey"===r){var a=this.wc(t.object);if(null!==a){var l=this.Cb(t.newValue);a.toNode=l}}else if("linkFromPortId"===r){var h=this.wc(t.object);if(null!==h){var u=t.newValue;"string"==typeof u&&(h.fromPortId=u)}}else if("linkToPortId"===r){var c=this.wc(t.object);if(null!==c){var f=t.newValue;"string"==typeof f&&(c.toPortId=f)}}else if("nodeGroupKey"===r){var d=this.xc(t.object);if(null!==d){var p=t.newValue;if(void 0!==p){var g=this.Cb(p);d.containingGroup=g instanceof Xu?g:null}else d.containingGroup=null}}else if("linkLabelKeys"===r){var m=this.wc(t.object);if(null!==m){var y=t.oldValue,v=t.newValue;Array.isArray(y)&&y.forEach(function(t){0<=v.indexOf(t)||null!==(t=e.Cb(t))&&(t.labeledLink=null)}),Array.isArray(v)&&v.forEach(function(t){null!==(t=e.Cb(t))&&(t.labeledLink=m)})}}else if("linkCategory"===r){var b=this.wc(t.object),w=t.newValue;null!==b&&"string"==typeof w&&(b.category=w)}else"linkDataArray"===r&&(nd(this,t.oldValue),td(this,t.newValue));n.isModified=!0}else if(i===Mn){var x=t.newValue;if("linkDataArray"===r&&"object"==typeof x&&null!==x)ed(this,x);else if("linkLabelKeys"===r&&wd(x)){var k=this.wc(t.object),S=this.Cb(x);null!==k&&null!==S&&(S.labeledLink=k)}n.isModified=!0}else if(i===Pn){var _=t.oldValue;if("linkDataArray"===r&&"object"==typeof _&&null!==_)this.Xq(_);else if("linkLabelKeys"===r&&wd(_)){var C=this.Cb(_);null!==C&&(C.labeledLink=null)}n.isModified=!0}}else if(i===Cn){var M=t.propertyName;t.object!==n.model||"linkFromKeyProperty"!==M&&"linkToKeyProperty"!==M&&"linkFromPortIdProperty"!==M&&"linkToPortIdProperty"!==M&&"linkLabelKeysProperty"!==M&&"nodeIsGroupProperty"!==M&&"nodeGroupKeyProperty"!==M&&"linkCategoryProperty"!==M||n.undoManager.isUndoingRedoing||this.Gd(),n.isModified=!0}}finally{n.Z=!0}}}}},Qf.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new nt,i=e.linkDataArray;i.forEach(function(t){n.add(t)});var r=[];this.links.each(function(t){null===t.data||n.contains(t.data)||r.push(t.data)}),r.forEach(function(t){Yd(e,t,!1)}),i.forEach(function(n){null===t.wc(n)&&Gd(e,n,!1)})},Qf.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;if(t instanceof Qu){var r=Vd(i,e,!0);if(r=n.Cb(r),t.fromNode=r,r=Vd(i,e,!1),r=n.Cb(r),t.toNode=r,0<(e=i.Bf(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){r=e[0];var o=t.labelNodes.first();if(i.ja(o.data)===r)return}r=(new nt).addAll(e);var s=new nt;t.labelNodes.each(function(t){null!==t.data&&void 0!==(t=i.ja(t.data))&&s.add(t)}),(e=s.copy()).Wq(r),(r=r.copy()).Wq(s),(0<e.count||0<r.count)&&(e.each(function(e){null!==(e=n.Cb(e))&&e.labeledLink===t&&(e.labeledLink=null)}),r.each(function(e){null!==(e=n.Cb(e))&&e.labeledLink!==t&&(e.labeledLink=t)}))}}else!(t instanceof Pu)&&(e=i.Jh(e),null===(e=n.findPartForKey(e))||e instanceof Xu)&&(t.containingGroup=e)}}},Qf.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ja(t);if(void 0!==n){var i=Cd(e,n),r=this.xc(t);if(null!==i&&null!==r){i=i.iterator;for(var o={};i.next();){var s=i.value;e.Za(s)?r instanceof Xu&&e.Jh(s)===n&&null!==(s=this.xc(s))&&(s.containingGroup=r):(o.link=this.wc(s),null!==o.link&&r instanceof Tu&&(Vd(e,s,!0)===n&&(o.link.fromNode=r),Vd(e,s,!1)===n&&(o.link.toNode=r),s=e.Bf(s),Array.isArray(s)&&s.some(function(t){return function(e){return e===n&&(r.labeledLink=t.link,!0)}}(o)))),o={link:o.link}}_d(e,n)}void 0!==(t=e.Jh(t))&&(t=this.Cb(t))instanceof Xu&&(r.containingGroup=t)}},Qf.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Tu){var n=e.ja(t.data);if(void 0!==n){for(var i=t.linksConnected;i.next();)Sd(e,n,i.value.data);if(t.isLinkLabel&&null!==(i=t.labeledLink)&&Sd(e,n,i.data),t instanceof Xu)for(t=t.memberParts;t.next();)e.Za(i=t.value.data)&&Sd(e,n,i)}}},Qf.prototype.copyPartData=function(t,e){var n=Uf.prototype.copyPartData.call(this,t,e);if(t instanceof Qu)if(null!==(t=t.data)&&null!==e){var i=e.model;"object"==typeof(t=i.uq(t))&&null!==t&&(i.$i(t),n=e.wc(t))}else null!==n&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.uq(t))&&null!==e&&(n.data=e));return n},Qf.prototype.insertLink=function(t,e,n,i){var r=this.diagram,o=r.model,s=r.toolManager.findTool("Linking"),a="";if(null!==t&&(null===e&&(e=t),null===(a=e.portId)&&(a="")),e="",null!==n&&(null===i&&(i=n),null===(e=i.portId)&&(e="")),(i=s.archetypeLinkData)instanceof Qu){if(ql(i),null!==(o=i.copy()))return o.fromNode=t,o.fromPortId=a,o.toNode=n,o.toPortId=e,r.add(o),(t=s.archetypeLabelNodeData)instanceof Tu&&(ql(t),null!==(t=t.copy())&&(t.labeledLink=o,r.add(t))),o}else if(null!==i&&"object"==typeof(i=o.uq(i))&&null!==i)return null!==t&&Ud(o,i,o.ja(t.data),!0),Hd(o,i,a,!0),null!==n&&Ud(o,i,o.ja(n.data),!1),Hd(o,i,e,!1),o.$i(i),null===(t=s.archetypeLabelNodeData)||t instanceof Tu||"object"==typeof(t=o.copyNodeData(t))&&null!==t&&(o.uf(t),void 0!==(t=o.ja(t))&&o.zv(i,t)),r.wc(i);return null},Qf.prototype.findLinkForKey=Qf.prototype.findLinkForKey,Qf.prototype.findPartForKey=Qf.prototype.findPartForKey,Qf.prototype.removeAllModeledParts=Qf.prototype.removeAllModeledParts,Qf.prototype.addModeledParts=Qf.prototype.addModeledParts,Qf.prototype.addAllModeledParts=Qf.prototype.addAllModeledParts,Qf.className="GraphLinksPartManager",u(id,Uf),id.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Kt(t)},id.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.gu(t,e)},id.prototype.setFromNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)i.be(t.data,i.ja(e));else{var r=this.qh;this.qh=t,null!==n&&i.be(n.data,void 0),i.be(e,i.ja(null!==t.toNode?t.toNode.data:null)),this.qh=r}},id.prototype.setToNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var r=this.qh;this.qh=t,null!==n&&i.be(n.data,void 0),i.be(e,i.ja(null!==t.fromNode?t.fromNode.data:null)),this.qh=r}else i.be(t.data,i.ja(e))},id.prototype.removeDataForLink=function(t){this.diagram.model.be(t.data,void 0)},id.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Kb(t))?this.Se.H(t):null},id.prototype.doModelChanged=function(t){if(Uf.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.Z){e.Z=!1;try{var i=t.modelChange;if(""!==i){if(n===Cn){if("nodeParentKey"===i){var r=t.object,o=this.Cb(t.newValue),s=this.ej(r);if(null!==this.qh)null!==o&&(this.qh.data=r,this.qh.category=this.getLinkCategoryForData(r));else if(null!==s){var a=s.hj();null!==a?null===o?e.remove(a):e.isTreePathToChildren?a.fromNode=o:a.toNode=o:rd(this,o,s)}}else if("parentLinkCategory"===i){var l=this.ej(t.object),h=t.newValue;if(null!==l&&"string"==typeof h){var u=l.hj();null!==u&&(u.category=h)}}e.isModified=!0}}else n===Cn&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Gd()),e.isModified=!0)}finally{e.Z=!0}}}}},id.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;t instanceof Tu&&(e=i.Kh(e),(e=n.Cb(e))!==(i=t.Fg())&&(i=t.hj(),null!==e?null!==i?n.isTreePathToChildren?i.fromNode=e:i.toNode=e:rd(this,e,t):null!==i&&yo(n,i,!1)))}}},id.prototype.updateDataBindings=function(t,e){Uf.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.xc(t)&&null!==(t=this.wc(t))&&t.Ca(e)},id.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ja(t);if(void 0!==n){var i=Cd(e,n),r=this.xc(t);if(null!==i&&null!==r){for(i=i.iterator;i.next();){var o=i.value;e.Za(o)&&r instanceof Tu&&e.Kh(o)===n&&rd(this,r,this.ej(o))}_d(e,n)}void 0!==(t=e.Kh(t))&&r instanceof Tu&&rd(this,t=this.Cb(t),r)}},id.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Tu){var n=e.ja(t.data),i=this.wc(t.data);if(null!==i){i.isSelected=!1,i.isHighlighted=!1;var r=i.layer;if(null!==r){var o=r.Jc(-1,i,!1);0<=o&&this.diagram.ab(Pn,"parts",r,i,null,o,null),null!==(o=i.layerChanged)&&o(i,r,null)}}for(i=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,e.Za(r=(i?r.toNode:r.fromNode).data)&&Sd(e,n,r)}},id.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,r=n;return this.diagram.isTreePathToChildren||(i=n,r=t),null!==i&&null!==r?(e.be(r.data,e.ja(i.data)),r.hj()):null},id.prototype.findLinkForKey=id.prototype.findLinkForKey,id.className="TreePartManager",od.prototype.cloneProtected=function(t){t.Qa=this.Qa,t.Gn=this.Gn,t.$f=this.$f,t.Ki=this.Ki,t.Hl=this.Hl,t.$k=this.$k,t.yn=this.yn,t.xn=this.xn,t.An=this.An,t.dn=this.dn,t.Tj=this.Tj},od.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},od.prototype.clear=function(){this.Ec=[],this.Va.clear(),this.Sf.clear(),this.undoManager.clear()},od.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.dr();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var r=t[i];e+=" "+this.ja(r)+":"+E(r)}}return e},od.prototype.$A=function(t){t.change!==_n&&v("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Tn?(cd(this,e),t=this.Uw(e,"FinishedUndo"===t.propertyName),this.Wh=null,t):null},od.prototype.Uw=function(t,e){var n=this,i=!1,r=new nt,o=new nt,s=new nt,a=this.Wh;t.changes.each(function(t){t.model===n&&("nodeDataArray"===t.modelChange?t.change===Mn?r.add(t.newValue):t.change===Pn&&s.add(t.oldValue):n.Za(t.object)?o.add(t.object):t.change!==Cn||n.modelData!==t.object&&"modelData"!==t.propertyName?null!==t.object&&(a&&a.contains(t.object)?a.get(t.object).each(function(t){n.Za(t)&&o.add(t)}):t.object instanceof od||n.nj()&&n.vc(t.object)||fd(n,t.object).each(function(t){o.add(t)})):i=!0)});var l=this.Ii;l.clear(),r.each(function(t){l.add(n.ja(t)),e||o.add(t)});var h=this.Li;h.clear(),s.each(function(t){h.add(n.ja(t)),e&&o.add(t)}),t=n.cloneDeep(o.ma());var u=null;return i&&(null===u&&(u={}),u.modelData=this.cloneDeep(this.modelData)),0<l.count&&(null===u&&(u={}),e?u.removedNodeKeys=l.ma():u.insertedNodeKeys=l.ma()),0<t.length&&(null===u&&(u={}),u.modifiedNodeData=t),0<h.count&&(null===u&&(u={}),e?u.insertedNodeKeys=h.ma():u.removedNodeKeys=h.ma()),h.clear(),l.clear(),u},od.prototype.cloneDeep=function(t){return sd(this,t,!0)},(e=od.prototype).Lk=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},e.Uq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},e.Vw=function(){var t,e=this.modelData,n=!1;for(t in e)if(!gd(t,e[t])){n=!0;break}return e="",n&&(e=ad(this)),e+',\n  "nodeDataArray": '+pd(this,this.nodeDataArray,!0)},e.lw=function(t){ld(this,t),_(t=t.nodeDataArray)&&(this.Jm(t),this.nodeDataArray=t)},e.ir=function(t){ud(this,t,"nodeKeyProperty");var e=this.Ii;e.clear();var n=new nt,i=this.Li;i.clear(),i.addAll(this.Va.iteratorKeys);for(var r=new ft,o=t.nodeDataArray,s=o.length,a=0;a<s;a++){var l=o[a],h=t.ja(l);if(void 0!==h){i.remove(h);var u=this.Kb(h);null===u?(e.add(h),n.add(l)):hd(this,u,l,r)||n.add(l)}else this.Ut(l),h=this.ja(l),e.add(h),n.add(l)}return o="",hd(this,this.modelData,t.modelData,r)||(o+=ad(this)),0<e.count&&(o+=this.ou+pd(this,e.ma(),!0)),0<n.count&&(o+=this.hx+pd(this,n.ma(),!0)),0<i.count&&(o+=this.qu+pd(this,i.ma(),!0)),i.clear(),e.clear(),o},e.yz=function(t,e){return void 0===e&&(e=Td(this,this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.Lk()+this.ir(t)+"}"},e.Tw=function(t,e){var n=this,i=!1,r=new nt,o=new nt,s=new nt,a=this.Wh;t.changes.each(function(t){t.model===n&&("nodeDataArray"===t.modelChange?t.change===Mn?r.add(t.newValue):t.change===Pn&&s.add(t.oldValue):n.Za(t.object)?o.add(t.object):t.change!==Cn||n.modelData!==t.object&&"modelData"!==t.propertyName?null!==t.object&&(a&&a.contains(t.object)?a.get(t.object).each(function(t){n.Za(t)&&o.add(t)}):t.object instanceof od||n.nj()&&n.vc(t.object)||fd(n,t.object).each(function(t){o.add(t)})):i=!0)});var l=this.Ii;l.clear(),r.each(function(t){l.add(n.ja(t)),e||o.add(t)});var h=this.Li;return h.clear(),s.each(function(t){h.add(n.ja(t)),e&&o.add(t)}),t="",i&&(t+=ad(this)),0<l.count&&(t+=(e?this.qu:this.ou)+pd(this,l.ma(),!0)),0<o.count&&(t+=this.hx+pd(this,o.ma(),!0)),0<h.count&&(t+=(e?this.ou:this.qu)+pd(this,h.ma(),!0)),h.clear(),l.clear(),t},e.Tq=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&v("applyIncrementalJson cannot change Model properties"),ld(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new ft;if(Array.isArray(n))for(var r=0;r<n.length;r++){var o=n[r],s=this.ja(o);null!=s&&i.set(s,o)}if(Array.isArray(e))for(r=e.length,o=0;o<r;o++){var a=this.Kb(s=e[o]);null===a&&(a=(a=i.get(s))?a:this.copyNodeData({}),this.Qm(a,s),this.uf(a))}if(Array.isArray(n))for(e=n.length,i=0;i<e;i++)if(o=this.ja(r=n[i]),null!==(o=this.Kb(o))){for(var l in r)"__gohashid"===l||l===this.nodeKeyProperty||this.vk()&&l===this.nodeIsGroupProperty||this.setDataProperty(o,l,r[l]);this.Rm(r,o)}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,l=0;l<n;l++)null!==(e=this.Kb(t[l]))&&this.Im(e)},e.Vy=function(t,e){t.change!==_n&&v("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Tn?(void 0===e&&(e=Td(this,this)),cd(this,n),t=this.Tw(n,"FinishedUndo"===t.propertyName),this.Wh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Lk()+t+"}"):'{ "incremental": 0 }'},e.aB=function(t,e){return this.Vy(t,e)},e.dr=function(t){return void 0===t&&(t=Td(this,this)),'{ "class": '+this.quote(t)+this.Lk()+this.Vw()+"}"},e.toJSON=function(t){return this.dr(t)},e.Vx=function(t){var e=null;if("string"==typeof t)try{e=d.JSON.parse(t)}catch(i){}else"object"==typeof t?e=t:v("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&v("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.va("applyIncrementalJson"),this.Tq(e),this.Wa("applyIncrementalJson"))},e.pz=function(t){return this.Vx(t)},od.constructGraphLinksModel=function(){return new od},(e=od.prototype).Jm=function(t){if(_(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];if(S(i)){var r=n;i=this.Jm(i),Array.isArray(t)?t[r]=i:v("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(S(t)){for(n in t)if(S(r=t[n])&&(r=this.Jm(r),t[n]=r,"points"===n&&Array.isArray(r))){i=0==r.length%2;for(var o=0;o<r.length;o++)if("number"!=typeof r[o]){i=!1;break}if(i){for(i=new tt,o=0;o<r.length/2;o++)i.add(new dt(r[2*o],r[2*o+1]));i.freeze(),t[n]=i}}if("object"==typeof t){if(n=t,0===(r=t.class||"").indexOf("go.")&&(r=r.substr(3)),"NaN"===r)n=NaN;else if("Date"===r)n=new Date(t.value);else if("Point"===r)n=new dt(vd(t.x),vd(t.y));else if("Size"===r)n=new Dt(vd(t.width),vd(t.height));else if("Rect"===r)n=new Rt(vd(t.x),vd(t.y),vd(t.width),vd(t.height));else if("Margin"===r)n=new Jt(vd(t.top),vd(t.right),vd(t.bottom),vd(t.left));else if("Spot"===r)n="string"==typeof t.enum?Ue(t.enum):new ze(vd(t.x),vd(t.y),vd(t.offsetX),vd(t.offsetY));else if("Brush"===r){if((n=new Fa).type=G(Fa,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof ze&&(n.start=t.start),t.end instanceof ze&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=vd(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=vd(t.endRadius)),S(t=t.colorStops))for(e in t)n.addColorStop(parseFloat(e),t[e])}else"Geometry"===r?(e=null,(e="string"==typeof t.path?Ze(t.path):new Ke).type=G(Ke,t.type),"number"==typeof t.startX&&(e.startX=vd(t.startX)),"number"==typeof t.startY&&(e.startY=vd(t.startY)),"number"==typeof t.endX&&(e.endX=vd(t.endX)),"number"==typeof t.endY&&(e.endY=vd(t.endY)),t.spot1 instanceof ze&&(e.spot1=t.spot1),t.spot2 instanceof ze&&(e.spot2=t.spot2),n=e):"EnumValue"===r&&(0===(e=t.classType).indexOf("go.")&&(e=e.substr(3)),"function"==typeof(e=Nd(e))&&(n=G(e,t.name)));t=n}}return t},e.quote=function(t){for(var e="",n=t.length,i=0;i<n;i++){var r=t[i];if('"'===r||"\\"===r)e+="\\"+r;else if("\b"===r)e+="\\b";else if("\f"===r)e+="\\f";else if("\n"===r)e+="\\n";else if("\r"===r)e+="\\r";else if("\t"===r)e+="\\t";else{var o=t.charCodeAt(i);e=16>o?e+"\\u000"+t.charCodeAt(i).toString(16):32>o?e+"\\u00"+t.charCodeAt(i).toString(16):8232===o?e+"\\u2028":8233===o?e+"\\u2029":e+r}}return'"'+e+'"'},e.Wm=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Wm(t.valueOf()):_(t)?pd(this,t):S(t)?yd(this,t):"function"==typeof t?"null":t.toString()},e.Fh=function(t){this.Yu.add(t)},e.Ik=function(t){this.Yu.remove(t)},e.vt=function(t){this.skipsUndoManager||this.undoManager.Wv(t);for(var e=this.Yu,n=e.length,i=0;i<n;i++)e.J(i)(t)},e.ab=function(t,e,n,i,r,o,s){bd(this,"",t,e,n,i,r,o,s)},e.g=function(t,e,n,i,r){bd(this,"",Cn,t,this,e,n,i,r)},e.$t=function(t,e,n,i,r,o){bd(this,"",Cn,e,t,n,i,r,o)},od.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===Cn){var n=t.object,i=t.propertyName,r=t.H(e);i===this.nodeKeyProperty&&this.Za(n)&&(void 0!==(e=t.H(!e))&&this.Va.remove(e),void 0!==r&&this.Va.add(r,n)),Ed(n,i,r)}else t.change===Mn?(n=t.newParam,"nodeDataArray"===t.modelChange?S(t=t.newValue)&&"number"==typeof n&&(i=this.ja(t),e?(this.Ec[n]===t&&P(this.Ec,n),void 0!==i&&this.Va.remove(i)):(this.Ec[n]!==t&&M(this.Ec,n,t),void 0!==i&&this.Va.add(i,t))):""===t.modelChange?((i=t.object)&&!_(i)&&t.propertyName&&(i=Ad(t.object,t.propertyName)),_(i)&&"number"==typeof n&&(t=t.newValue,e?P(i,n):M(i,n,t))):v("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Pn?(n=t.oldParam,"nodeDataArray"===t.modelChange?S(t=t.oldValue)&&"number"==typeof n&&(i=this.ja(t),e?(this.Ec[n]!==t&&M(this.Ec,n,t),void 0!==i&&this.Va.add(i,t)):(this.Ec[n]===t&&P(this.Ec,n),void 0!==i&&this.Va.remove(i))):""===t.modelChange?((i=t.object)&&!_(i)&&t.propertyName&&(i=Ad(t.object,t.propertyName)),_(i)&&"number"==typeof n&&(t=t.oldValue,e?M(i,n,t):P(i,n))):v("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==_n&&v("unknown ChangedEvent: "+t.toString())},od.prototype.va=function(t){return this.undoManager.va(t)},od.prototype.Wa=function(t){return this.undoManager.Wa(t)},od.prototype.Hf=function(){return this.undoManager.Hf()},od.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.va(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Wa(e):this.undoManager.Hf(),this.skipsUndoManager=n}},(e=od.prototype).Ca=function(t,e){void 0===e&&(e=""),bd(this,"SourceChanged",_n,e,t,null,null)},e.ja=function(t){if(null!==t){var e=this.Ki;if(""!==e&&void 0!==(e=Ad(t,e))){if(wd(e))return e;v("Key value for node data "+t+" is not a number or a string: "+e)}}},e.Qm=function(t,e){if(null!==t){var n=this.Ki;if(""!==n)if(this.Za(t)){var i=Ad(t,n);i!==e&&null===this.Kb(e)&&(Ed(t,n,e),void 0!==i&&this.Va.remove(i),this.Va.add(e,t),bd(this,"nodeKey",Cn,n,t,i,e),"string"==typeof n&&this.Ca(t,n),this.Yq(i,e))}else Ed(t,n,e)}},e.Za=function(t){var e=this.ja(t);return void 0!==e&&this.Va.H(e)===t},e.Kb=function(t){return null===t&&v("Model.findNodeDataForKey:key must not be null"),void 0!==t&&wd(t)?this.Va.H(t):null},e.Ut=function(t){if(null!==t){var e=this.Ki;if(""!==e){var n=this.ja(t);if(void 0===n||this.Va.contains(n)){var i=this.Hl;if(null!==i&&null!=(n=i(this,t))&&!this.Va.contains(n))return void Ed(t,e,n);if("string"==typeof n){for(i=2;this.Va.contains(n+i);)i++;Ed(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.Va.count-1;this.Va.contains(n);)n--;Ed(t,e,n)}}}}},e.uf=function(t){null!==t&&(rt(t),this.Za(t)||xd(this,t,!0))},e.lz=function(t){if(_(t))for(var e=t.length,n=0;n<e;n++)this.uf(t[n]);else for(t=t.iterator;t.next();)this.uf(t.value)},e.Im=function(t){null!==t&&kd(this,t,!0)},e.QA=function(t){if(_(t))for(var e=t.length,n=0;n<e;n++)this.Im(t[n]);else for(t=t.iterator;t.next();)this.Im(t.value)},e.GA=function(t){if(t!==this.nodeDataArray&&_(t)){var e=this.Li;e.clear(),e.addAll(this.Va.iteratorKeys);var n=this.Ii;n.clear();for(var i=t.length,r=0;r<i;r++){var o=t[r],s=this.ja(o);if(void 0!==s){n.add(s);var a=this.Kb(s);a!==o&&(null!==a?(this.pq(a,o),this.Rm(o,a)):(o=this.cloneDeep(o),this.Qm(o,s),this.uf(o)))}else s=this.cloneDeep(o),this.uf(s),n.add(this.ja(s))}for(t=e.iterator;t.next();)n.contains(i=t.value)||(i=this.Kb(i))&&this.Im(i);e.clear(),n.clear()}},e.Yq=function(t,e){void 0!==e&&(t=Cd(this,t))instanceof nt&&this.Sf.add(e,t)},e.Ow=function(){},e.Lm=function(){},e.Km=function(){},e.fr=function(){},e.xz=function(t){void 0===t?this.Sf.clear():this.Sf.remove(t)},od.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.$k;return S(t=null!==e?e(t,this):Md(this,t,!0))&&it(t),t},od.prototype.setDataProperty=function(t,e,n){if(this.Za(t)){if(e===this.nodeKeyProperty)return void this.Qm(t,n);if(e===this.nodeCategoryProperty)return void this.Pm(t,n)}else!Ld&&t instanceof Ys&&(Ld=!0,x('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),x("  Is that really your intent?"));var i=Ad(t,e);i!==n&&(Ed(t,e,n),this.$t(t,e,i,n))},(e=od.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},e.pq=function(t,e){if(e){var n,i=this.Za(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},e.iz=function(t,e){this.Lt(t,-1,e)},e.Lt=function(t,e,n){0>e&&(e=t.length),M(t,e,n),bd(this,"",Mn,"",t,null,n,null,e)},e.nw=function(t,e){void 0===e&&(e=-1),t===this.Ec&&v("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];P(t,e),bd(this,"",Pn,"",t,n,null,e,null)},e.Cq=function(t){if(null===t)return"";var e=this.Tj;return""===e||void 0===(e=Ad(t,e))?"":"string"==typeof e?e:(v("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},e.Pm=function(t,e){if(null!==t){var n=this.Tj;if(""!==n)if(this.Za(t)){var i=Ad(t,n);void 0===i&&(i=""),i!==e&&(Ed(t,n,e),bd(this,"nodeCategory",Cn,n,t,i,e))}else Ed(t,n,e)}},e.Rm=function(t,e){this.Pm(e,this.Cq(t))},e.wm=function(){return!1},e.vk=function(){return!1},e.nj=function(){return!1},e.Qt=function(){return!1},e.wk=function(){return!1},c.Object.defineProperties(od.prototype,{name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.g("modelData",e,t),this.Ca(t))}},undoManager:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(null!==e&&e.My(this),this.v=t,null!==t&&t.Tx(this))}},skipsUndoManager:{get:function(){return this.ug},set:function(t){this.ug=t}},nodeKeyProperty:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(""===t&&v("Model.nodeKeyProperty may not be the empty string"),0<this.Va.count&&v("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Ki=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Hl},set:function(t){var e=this.Hl;e!==t&&(this.Hl=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Ec},set:function(t){var e=this.Ec;if(e!==t){this.Va.clear(),this.Ow();for(var n=t.length,i=0;i<n;i++){var r=t[i];if(!S(r))return void v("Model.nodeDataArray must only contain Objects, not: "+r);rt(r)}for(this.Ec=t,i=new tt,r=0;r<n;r++){var o=t[r],s=this.ja(o);void 0===s||null!==this.Va.H(s)?i.add(o):this.Va.add(s,o)}for(i=i.iterator;i.next();)this.Ut(r=i.value),void 0!==(o=this.ja(r))&&this.Va.add(o,r);for(bd(this,"nodeDataArray",Cn,"nodeDataArray",this,e,t),e=0;e<n;e++)this.Lm(i=t[e]),this.Km(i);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.$k},set:function(t){var e=this.$k;e!==t&&(this.$k=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.yn},set:function(t){var e=this.yn;e!==t&&(this.yn=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.xn},set:function(t){var e=this.xn;e!==t&&(this.xn=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.An},set:function(t){var e=this.An;e!==t&&(this.An=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.dn},set:function(t){var e=this.dn;e!==t&&(this.dn=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.Tj},set:function(t){var e=this.Tj;e!==t&&(this.Tj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),od.prototype.setCategoryForNodeData=od.prototype.Pm,od.prototype.getCategoryForNodeData=od.prototype.Cq,od.prototype.removeArrayItem=od.prototype.nw,od.prototype.insertArrayItem=od.prototype.Lt,od.prototype.addArrayItem=od.prototype.iz,od.prototype.assignAllDataProperties=od.prototype.pq,od.prototype.set=od.prototype.set,od.prototype.clearUnresolvedReferences=od.prototype.xz,od.prototype.mergeNodeDataArray=od.prototype.GA,od.prototype.removeNodeDataCollection=od.prototype.QA,od.prototype.removeNodeData=od.prototype.Im,od.prototype.addNodeDataCollection=od.prototype.lz,od.prototype.addNodeData=od.prototype.uf,od.prototype.makeNodeDataKeyUnique=od.prototype.Ut,od.prototype.findNodeDataForKey=od.prototype.Kb,od.prototype.containsNodeData=od.prototype.Za,od.prototype.setKeyForNodeData=od.prototype.Qm,od.prototype.getKeyForNodeData=od.prototype.ja,od.prototype.updateTargetBindings=od.prototype.Ca,od.prototype.commit=od.prototype.commit,od.prototype.rollbackTransaction=od.prototype.Hf,od.prototype.commitTransaction=od.prototype.Wa,od.prototype.startTransaction=od.prototype.va,od.prototype.raiseDataChanged=od.prototype.$t,od.prototype.raiseChanged=od.prototype.g,od.prototype.raiseChangedEvent=od.prototype.ab,od.prototype.removeChangedListener=od.prototype.Ik,od.prototype.addChangedListener=od.prototype.Fh,od.prototype.writeJsonValue=od.prototype.Wm,od.prototype.replaceJsonObjects=od.prototype.Jm,od.prototype.applyIncrementalJSON=od.prototype.pz,od.prototype.applyIncrementalJson=od.prototype.Vx,od.prototype.toJSON=od.prototype.toJSON,od.prototype.toJson=od.prototype.dr,od.prototype.toIncrementalJSON=od.prototype.aB,od.prototype.toIncrementalJson=od.prototype.Vy,od.prototype.computeJsonDifference=od.prototype.yz,od.prototype.toIncrementalData=od.prototype.$A,od.prototype.clear=od.prototype.clear;var Ld=!1,Od={};function Dd(t,e,n){it(this),this.s=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.l=-1,this.ld=null,this.fm=t,this.em=this.aq=0,this.dt=null,this.so=!1,this.Yl=e,this.wn=n,this.Ro=Id,this.pn=null,this.Ju=new nt}function jd(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.$a(t)}od.className="Model",od.fromJSON=od.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=d.JSON.parse(t)}catch(o){}else"object"==typeof t?n=t:v("Unable to construct a Model from: "+t);if(null===e){t=null;var i=n.class;if("string"==typeof i)try{var r=null;0===i.indexOf("go.")?r=Nd(i=i.substr(3)):null===(r=Nd(i))&&(r=d[i]),"function"==typeof r&&(t=new r)}catch(o){}null===t||t instanceof od?e=t:v("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=od.constructGraphLinksModel()),e.Uq(n),e.lw(n),e},od.safePropertyValue=Ad,od.safePropertySet=Ed,Od.Brush=Fa,Od.ChangedEvent=Sn,Od.Geometry=Ke,Od.Margin=Jt,Od.Panel=Ml,Od.Point=dt,Od.Rect=Rt,Od.Size=Dt,Od.Spot=ze,Od.Transaction=Tn,Od.UndoManager=Nn,Dd.prototype.copy=function(){var t=new Dd;return t.fm=this.fm,t.aq=this.aq,t.em=this.em,t.dt=this.dt,t.so=this.so,t.Yl=this.Yl,t.wn=this.wn,t.Ro=this.Ro,t.pn=this.pn,t},(e=Dd.prototype).ib=function(t){t.classType===Dd&&(this.mode=t)},e.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.tj?" "+this.tj:"")+" "+this.mode.name+")"},e.freeze=function(){return this.s=!0,this},e.da=function(){return this.s=!1,this},e.Fy=function(t){return void 0===t&&(t=null),this.mode=Rd,this.backConverter=t,this},e.Qq=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},e.IA=function(){return this.sourceName=null,this.isToModel=!0,this},e.Pw=function(t,e,n){var i=this.Yl;if(void 0===n||""===i||i===n){n=this.fm;var r=this.wn;if(null===r&&""===n)x("Binding error: target property is the empty string: "+this.toString());else{var o=e;if(""!==i&&(o=Ad(e,i)),void 0!==o)if(null===r)""!==n&&Ed(t,n,o);else try{""!==n?Ed(t,n,r(o,t)):r(o,t)}catch(s){}}}},e.hr=function(t,e,n,i){if(this.Ro===Rd){var r=this.fm;if(void 0===n||r===n){n=this.Yl;var o=this.pn,s=t;if(""!==r&&(s=Ad(t,r)),void 0!==s&&!this.Ju.contains(t))try{this.Ju.add(t);var a=null!==i?i.diagram:null,l=null!==a?a.model:null;if(null===o){if(""!==n)null!==l?l.setDataProperty(e,n,s):Ed(e,n,s);else if(null!==l&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var h=i.itemIndex,u=i.panel.itemArray;l.nw(u,h),l.Lt(u,h,s)}}else try{if(""!==n){var c=o(s,e,l);null!==l?l.setDataProperty(e,n,c):Ed(e,n,c)}else{var f=o(s,e,l);if(void 0!==f&&null!==l&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var d=i.itemIndex,p=i.panel.itemArray;l.nw(p,d),l.Lt(p,d,f)}}}catch(g){}}finally{this.Ju.remove(t)}}}},c.Object.defineProperties(Dd.prototype,{tj:{get:function(){return this.l},set:function(t){this.s&&b(this),this.l=t}},targetProperty:{get:function(){return this.fm},set:function(t){this.s&&b(this),this.fm=t}},sourceName:{get:function(){return this.dt},set:function(t){this.s&&b(this),this.dt=t,null!==t&&(this.so=!1)}},isToModel:{get:function(){return this.so},set:function(t){this.s&&b(this),this.so=t}},sourceProperty:{get:function(){return this.Yl},set:function(t){this.s&&b(this),this.Yl=t}},converter:{get:function(){return this.wn},set:function(t){this.s&&b(this),this.wn=t}},backConverter:{get:function(){return this.pn},set:function(t){this.s&&b(this),this.pn=t}},mode:{get:function(){return this.Ro},set:function(t){this.s&&b(this),this.Ro=t}}}),Dd.prototype.updateSource=Dd.prototype.hr,Dd.prototype.updateTarget=Dd.prototype.Pw,Dd.prototype.ofModel=Dd.prototype.IA,Dd.prototype.ofObject=Dd.prototype.Qq,Dd.prototype.makeTwoWay=Dd.prototype.Fy;var Fd="Binding",Id=new H(Dd,"OneWay",1),Rd=new H(Dd,"TwoWay",2);function Bd(t,e){od.call(this),this.nu=',\n  "insertedLinkKeys": ',this.gx=',\n  "modifiedLinkData": ',this.pu=',\n  "removedLinkKeys": ',this.Xc=[],this.ag=new nt,this.fb=new ft,this.Ei="",this.vj=this.Zk=this.Il=null,this.$e="from",this.af="to",this.Qj=this.Pj="",this.Oj="category",this.Vd="",this.Ml="isGroup",this.ve="group",this.zn=!1,void 0!==t&&(this.nodeDataArray=t),void 0!==e&&(this.linkDataArray=e)}function zd(t,e){for(var n=new nt,i=0;i<t.linkDataArray.length;i++){var r=t.linkDataArray[i];dd(t,e,r,r,n)}return n}function Vd(t,e,n){if(null!==e&&""!==(t=n?t.$e:t.af)&&void 0!==(t=Ad(e,t))){if(wd(t))return t;v((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Ud(t,e,n,i){if(null===n&&(n=void 0),null!==e){var r=i?t.$e:t.af;if(""!==r)if(n=t.ym(n),t.vc(e)){var o=Ad(e,r);o!==n&&(_d(t,o,e),Ed(e,r,n),null===t.Kb(n)&&Sd(t,n,e),bd(t,i?"linkFromKey":"linkToKey",Cn,r,e,o,n),"string"==typeof r&&t.Ca(e,r))}else Ed(e,r,n)}}function qd(t,e,n){return null===e||""===(t=n?t.Pj:t.Qj)||void 0===(e=Ad(e,t))?"":e}function Hd(t,e,n,i){if(null!==e){var r=i?t.Pj:t.Qj;if(""!==r)if(t.vc(e)){var o=Ad(e,r);void 0===o&&(o=""),o!==n&&(Ed(e,r,n),bd(t,i?"linkFromPortId":"linkToPortId",Cn,r,e,o,n),"string"==typeof r&&t.Ca(e,r))}else Ed(e,r,n)}}function Gd(t,e,n){if(""!==t.linkKeyProperty){var i=t.Vb(e);if(void 0!==i&&t.fb.H(i)===e)return;if(t.Nq(e),void 0===(i=t.Vb(e)))return void v("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");t.fb.add(i,e)}t.ag.add(e),i=null,n&&t.Xc.splice(i=t.Xc.length,0,e),bd(t,"linkDataArray",Mn,"linkDataArray",t,null,e,null,i),Xd(t,e)}function Yd(t,e,n){t.ag.remove(e);var i=t.Vb(e);if(void 0!==i&&t.fb.remove(i),i=null,n){if(0>(i=t.Xc.indexOf(e)))return;t.Xc.splice(i,1)}if(bd(t,"linkDataArray",Pn,"linkDataArray",t,e,null,i,null),_d(t,n=Vd(t,e,!0),e),_d(t,n=Vd(t,e,!1),e),i=t.Bf(e),Array.isArray(i))for(var r=i.length,o=0;o<r;o++)_d(t,n=i[o],e)}function Xd(t,e){var n=Vd(t,e,!0);n=t.ym(n),null===t.Kb(n)&&Sd(t,n,e),n=Vd(t,e,!1),n=t.ym(n),null===t.Kb(n)&&Sd(t,n,e);var i=t.Bf(e);if(Array.isArray(i))for(var r=i.length,o=0;o<r;o++)null===t.Kb(n=i[o])&&Sd(t,n,e)}function Kd(t,e,n){t.$q(n,t.It(e)),t.xw(n,t.uy(e)),t.Cw(n,t.xy(e)),t.fu(n,t.Bf(e)),t.yw(n,t.vy(e)),t.Dw(n,t.yy(e))}Dd.className="Binding",Dd.parseEnum=function(t,e){return function(n){return null===(n=G(t,n))?e:n}},Dd.toString=E,Dd.OneWay=Id,Dd.TwoWay=Rd,u(Bd,od),Bd.constructGraphLinksModel=od.constructGraphLinksModel,Bd.prototype.cloneProtected=function(t){od.prototype.cloneProtected.call(this,t),t.Ei=this.Ei,t.Il=this.Il,t.Zk=this.Zk,t.$e=this.$e,t.af=this.af,t.Pj=this.Pj,t.Qj=this.Qj,t.Oj=this.Oj,t.Vd=this.Vd,t.Ml=this.Ml,t.ve=this.ve,t.zn=this.zn},(e=Bd.prototype).clear=function(){od.prototype.clear.call(this),this.Xc=[],this.fb.clear(),this.ag.clear()},e.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.dr();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var n,i=(t=this.nodeDataArray).length;for(n=0;n<i;n++){var r=t[n];e+=" "+this.ja(r)+":"+E(r)}for(e+="\n link data:",i=(t=this.linkDataArray).length,n=0;n<i;n++)e+=" "+Vd(this,r=t[n],!0)+"--\x3e"+Vd(this,r,!1)}return e},e.Uw=function(t,e){""===this.linkKeyProperty&&v("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=od.prototype.Uw.call(this,t,e),i=this,r=new nt,o=new nt,s=new nt,a=this.Wh;t.changes.each(function(t){t.model===i&&("linkDataArray"===t.modelChange?t.change===Mn?r.add(t.newValue):t.change===Pn&&s.add(t.oldValue):i.vc(t.object)?o.add(t.object):null!==t.object&&(null!==t.object&&a&&a.contains(t.object)?a.get(t.object).each(function(t){i.vc(t)&&o.add(t)}):t.object instanceof od||i.Za(t.object)||zd(i,t.object).each(function(t){o.add(t)})))});var l=this.Ii;l.clear(),r.each(function(t){l.add(i.Vb(t)),e||o.add(t)});var h=this.Li;return h.clear(),s.each(function(t){h.add(i.Vb(t)),e&&o.add(t)}),t=i.cloneDeep(o.ma()),0<l.count&&(null===n&&(n={}),e?n.removedLinkKeys=l.ma():n.insertedLinkKeys=l.ma()),0<t.length&&(null===n&&(n={}),n.modifiedLinkData=t),0<h.count&&(null===n&&(n={}),e?n.insertedLinkKeys=h.ma():n.removedLinkKeys=h.ma()),h.clear(),l.clear(),n},e.Lk=function(){var t=od.prototype.Lk.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},e.Uq=function(t){od.prototype.Uq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},e.Vw=function(){return od.prototype.Vw.call(this)+',\n  "linkDataArray": '+pd(this,this.linkDataArray,!0)},e.lw=function(t){od.prototype.lw.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Jm(t),this.linkDataArray=t)},e.ir=function(t){if(!(t instanceof Bd))return v("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";""===this.linkKeyProperty&&v("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var e=od.prototype.ir.call(this,t);ud(this,t,"linkKeyProperty"),ud(this,t,"linkFromKeyProperty"),ud(this,t,"linkToKeyProperty"),ud(this,t,"linkLabelKeysProperty"),ud(this,t,"nodeIsGroupProperty"),ud(this,t,"nodeGroupKeyProperty");var n=this.Ii;n.clear();var i=new nt,r=this.Li;r.clear(),r.addAll(this.fb.iteratorKeys);for(var o=new ft,s=t.linkDataArray,a=s.length,l=0;l<a;l++){var h=s[l],u=t.Vb(h);if(void 0!==u){r.remove(u);var c=this.Dg(u);null===c?(n.add(u),i.add(h)):hd(this,c,h,o)||i.add(h)}else this.Nq(h),u=this.Vb(h),n.add(u),i.add(h)}return t=e,0<n.count&&(t+=this.nu+pd(this,n.ma(),!0)),0<i.count&&(t+=this.gx+pd(this,i.ma(),!0)),0<r.count&&(t+=this.pu+pd(this,r.ma(),!0)),r.clear(),n.clear(),t},e.Tw=function(t,e){""===this.linkKeyProperty&&v("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=od.prototype.Tw.call(this,t,e),i=this,r=new nt,o=new nt,s=new nt,a=this.Wh;t.changes.each(function(t){t.model===i&&("linkDataArray"===t.modelChange?t.change===Mn?r.add(t.newValue):t.change===Pn&&s.add(t.oldValue):i.vc(t.object)?o.add(t.object):null!==t.object&&(null!==t.object&&a&&a.contains(t.object)?a.get(t.object).each(function(t){i.vc(t)&&o.add(t)}):t.object instanceof od||i.Za(t.object)||zd(i,t.object).each(function(t){o.add(t)})))});var l=this.Ii;l.clear(),r.each(function(t){l.add(i.Vb(t)),e||o.add(t)});var h=this.Li;return h.clear(),s.each(function(t){h.add(i.Vb(t)),e&&o.add(t)}),t=n,0<l.count&&(t+=(e?this.pu:this.nu)+pd(this,l.ma(),!0)),0<o.count&&(t+=this.gx+pd(this,o.ma(),!0)),0<h.count&&(t+=(e?this.nu:this.pu)+pd(this,h.ma(),!0)),h.clear(),l.clear(),t},e.Tq=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&v("applyIncrementalJson cannot change Model properties"),od.prototype.Tq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var r=e[i],o=this.Dg(r);null===o&&(o=this.uq({}),this.eu(o,r),this.$i(o))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,i=0;i<n;i++)if(o=this.Vb(r=e[i]),null!==(o=this.Dg(o))){for(var s in r)"__gohashid"!==s&&s!==this.linkKeyProperty&&this.setDataProperty(o,s,r[s]);Kd(this,r,o)}if(t=t.removedLinkKeys,Array.isArray(t))for(s=t.length,e=0;e<s;e++)null!==(n=this.Dg(t[e]))&&this.Hm(n)},Bd.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===Cn){var n=t.object,i=t.propertyName;if(i===this.linkKeyProperty&&this.vc(n)){var r=t.H(e);return void 0!==(e=t.H(!e))&&this.fb.remove(e),void 0!==r&&this.fb.add(r,n),void Ed(n,i,r)}}else if(t.change===Mn){if(n=t.newParam,"linkDataArray"===t.modelChange)return void(S(t=t.newValue)&&"number"==typeof n&&(i=this.Vb(t),e?(this.ag.remove(t),this.Xc[n]===t&&this.Xc.splice(n,1),void 0!==i&&this.fb.remove(i)):(this.ag.add(t),this.Xc[n]!==t&&this.Xc.splice(n,0,t),void 0!==i&&this.fb.add(i,t))));if("linkLabelKeys"===t.modelChange)return i=this.Bf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)):0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue)))}else if(t.change===Pn){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void(S(t=t.oldValue)&&"number"==typeof n&&(i=this.Vb(t),e?(this.ag.add(t),this.Xc[n]!==t&&this.Xc.splice(n,0,t),void 0!==i&&this.fb.add(i,t)):(this.ag.remove(t),this.Xc[n]===t&&this.Xc.splice(n,1),void 0!==i&&this.fb.remove(i))));if("linkLabelKeys"===t.modelChange)return i=this.Bf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue):(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1))))}od.prototype.changeState.call(this,t,e)}},(e=Bd.prototype).ym=function(t){if(void 0!==t){var e=this.vj;if(null!==e){var n=this.Kb(t);null===n&&(Ed(n=this.copyNodeData(e),this.nodeKeyProperty,t),this.uf(n))}return t}},e.uy=function(t){return Vd(this,t,!0)},e.xw=function(t,e){Ud(this,t,e,!0)},e.xy=function(t){return Vd(this,t,!1)},e.Cw=function(t,e){Ud(this,t,e,!1)},e.vy=function(t){return qd(this,t,!0)},e.yw=function(t,e){Hd(this,t,e,!0)},e.yy=function(t){return qd(this,t,!1)},e.Dw=function(t,e){Hd(this,t,e,!1)},e.Bf=function(t){if(null===t)return Wd;var e=this.Vd;return""===e||void 0===(t=Ad(t,e))?Wd:t},e.fu=function(t,e){if(null!==t){var n=this.Vd;if(""!==n)if(this.vc(t)){var i=Ad(t,n);if(void 0===i&&(i=Wd),i!==e){if(Array.isArray(i))for(var r=i.length,o=0;o<r;o++)_d(this,i[o],t);for(Ed(t,n,e),r=e.length,o=0;o<r;o++){var s=e[o];null===this.Kb(s)&&Sd(this,s,t)}bd(this,"linkLabelKeys",Cn,n,t,i,e),"string"==typeof n&&this.Ca(t,n)}}else Ed(t,n,e)}},e.zv=function(t,e){if(null!=e&&null!==t){var n=this.Vd;if(""!==n){var i=Ad(t,n);if(void 0===i)(n=[]).push(e),this.fu(t,n);else if(Array.isArray(i)){var r=i.indexOf(e);0<=r||(r=i.length,i.push(e),this.vc(t)&&(null===this.Kb(e)&&Sd(this,e,t),bd(this,"linkLabelKeys",Mn,n,t,null,e,null,r)))}else v(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},e.Ly=function(t,e){if(null!=e&&null!==t){var n=this.Vd;if(""!==n){var i=Ad(t,n);if(Array.isArray(i)){var r=i.indexOf(e);0>r||(i.splice(r,1),this.vc(t)&&(_d(this,e,t),bd(this,"linkLabelKeys",Pn,n,t,e,null,r,null)))}else void 0!==i&&v(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},e.Vb=function(t){if(null!==t){var e=this.Ei;if(""!==e&&void 0!==(e=Ad(t,e))){if(wd(e))return e;v("Key value for link data "+t+" is not a number or a string: "+e)}}},e.eu=function(t,e){if(null!==t){var n=this.Ei;if(""!==n)if(this.vc(t)){var i=Ad(t,n);i!==e&&null===this.Dg(e)&&(Ed(t,n,e),void 0!==i&&this.fb.remove(i),this.fb.add(e,t),bd(this,"linkKey",Cn,n,t,i,e),"string"==typeof n&&this.Ca(t,n))}else Ed(t,n,e)}},e.Dg=function(t){return null===t&&v("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&wd(t)?this.fb.H(t):null},e.Nq=function(t){if(null!==t){var e=this.Ei;if(""!==e){var n=this.Vb(t);if(void 0===n||this.fb.contains(n)){var i=this.Il;if(null!==i&&null!=(n=i(this,t))&&!this.fb.contains(n))return void Ed(t,e,n);if("string"==typeof n){for(i=2;this.fb.contains(n+i);)i++;Ed(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.fb.count-1;this.fb.contains(n);)n--;Ed(t,e,n)}}}}},e.vc=function(t){return null!==t&&this.ag.contains(t)},e.$i=function(t){null!==t&&(rt(t),this.vc(t)||Gd(this,t,!0))},e.kz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.$i(t[n]);else for(t=t.iterator;t.next();)this.$i(t.value)},e.Hm=function(t){null!==t&&Yd(this,t,!0)},e.OA=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Hm(t[n]);else for(t=t.iterator;t.next();)this.Hm(t.value)},e.FA=function(t){if(""===this.linkKeyProperty&&v("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&_(t)){var e=this.Li;e.clear(),e.addAll(this.fb.iteratorKeys);var n=this.Ii;n.clear();for(var i=t.length,r=0;r<i;r++){var o=t[r],s=this.Vb(o);if(void 0!==s){n.add(s);var a=this.Dg(s);a!==o&&(null!==a?(this.pq(a,o),Kd(this,o,a)):(o=this.cloneDeep(o),this.eu(o,s),this.$i(o)))}else s=this.cloneDeep(o),this.$i(s),n.add(this.Vb(s))}for(t=e.iterator;t.next();)n.contains(i=t.value)||(i=this.Dg(i))&&this.Hm(i);e.clear(),n.clear()}},e.uq=function(t){if(null===t)return null;var e=this.Zk;return S(t=null!==e?e(t,this):Md(this,t,!0))&&(it(t),""!==this.$e&&Ed(t,this.$e,void 0),""!==this.af&&Ed(t,this.af,void 0),""!==this.Vd&&Ed(t,this.Vd,[])),t},e.aw=function(t){if(null===t)return!1;var e=this.Ml;return""!==e&&!!Ad(t,e)},e.Jh=function(t){if(null!==t){var e=this.ve;if(""!==e&&void 0!==(e=Ad(t,e))){if(wd(e))return e;v("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},e.ar=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.ve;if(""!==n)if(this.Za(t)){var i=Ad(t,n);i!==e&&(_d(this,i,t),Ed(t,n,e),null===this.Kb(e)&&Sd(this,e,t),bd(this,"nodeGroupKey",Cn,n,t,i,e),"string"==typeof n&&this.Ca(t,n))}else Ed(t,n,e)}},Bd.prototype.copyNodeData=function(t){return null===t?null:(t=od.prototype.copyNodeData.call(this,t),this.lk||""===this.ve||void 0===Ad(t,this.ve)||Ed(t,this.ve,void 0),t)},Bd.prototype.setDataProperty=function(t,e,n){if(this.Za(t)){if(e===this.nodeKeyProperty)return void this.Qm(t,n);if(e===this.nodeCategoryProperty)return void this.Pm(t,n);if(e===this.nodeGroupKeyProperty)return void this.ar(t,n)}else if(this.vc(t)){if(e===this.linkFromKeyProperty)return void Ud(this,t,n,!0);if(e===this.linkToKeyProperty)return void Ud(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void Hd(this,t,n,!0);if(e===this.linkToPortIdProperty)return void Hd(this,t,n,!1);if(e===this.linkKeyProperty)return void this.eu(t,n);if(e===this.linkCategoryProperty)return void this.$q(t,n);if(e===this.linkLabelKeysProperty)return void this.fu(t,n)}var i=Ad(t,e);i!==n&&(Ed(t,e,n),this.$t(t,e,i,n))},(e=Bd.prototype).pq=function(t,e){if(e){var n,i=this.Za(t),r=this.vc(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||i&&n===this.nodeIsGroupProperty&&Ad(t,n)===e[n]||r&&n===this.linkKeyProperty||this.setDataProperty(t,n,e[n])}},e.Yq=function(t,e){od.prototype.Yq.call(this,t,e);for(var n=this.Va.iterator;n.next();)this.rw(n.value,t,e);for(n=this.ag.iterator;n.next();){var i=n.value,r=t,o=e;if(Vd(this,i,!0)===r){var s=this.$e;Ed(i,s,o),bd(this,"linkFromKey",Cn,s,i,r,o),"string"==typeof s&&this.Ca(i,s)}if(Vd(this,i,!1)===r&&(Ed(i,s=this.af,o),bd(this,"linkToKey",Cn,s,i,r,o),"string"==typeof s&&this.Ca(i,s)),s=this.Bf(i),Array.isArray(s))for(var a=s.length,l=this.Vd,h=0;h<a;h++)s[h]===r&&(s[h]=o,bd(this,"linkLabelKeys",Mn,l,i,r,o,h,h))}},e.rw=function(t,e,n){if(this.Jh(t)===e){var i=this.ve;Ed(t,i,n),bd(this,"nodeGroupKey",Cn,i,t,e,n),"string"==typeof i&&this.Ca(t,i)}},e.Ow=function(){od.prototype.Ow.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)Xd(this,t[n])},e.Lm=function(t){od.prototype.Lm.call(this,t);var e=Cd(this,t=this.ja(t));if(null!==e){var n=T();for(e=e.iterator;e.next();){var i=e.value;if(this.Za(i)){if(this.Jh(i)===t){var r=this.ve;bd(this,"nodeGroupKey",Cn,r,i,t,t),"string"==typeof r&&this.Ca(i,r),n.push(i)}}else if(Vd(this,i,!0)===t&&(bd(this,"linkFromKey",Cn,r=this.$e,i,t,t),"string"==typeof r&&this.Ca(i,r),n.push(i)),Vd(this,i,!1)===t&&(bd(this,"linkToKey",Cn,r=this.af,i,t,t),"string"==typeof r&&this.Ca(i,r),n.push(i)),r=this.Bf(i),Array.isArray(r))for(var o=r.length,s=this.Vd,a=0;a<o;a++)r[a]===t&&(bd(this,"linkLabelKeys",Mn,s,i,t,t,a,a),n.push(i))}for(e=0;e<n.length;e++)_d(this,t,n[e]);N(n)}},e.Km=function(t){od.prototype.Km.call(this,t);var e=this.Jh(t);null===this.Kb(e)&&Sd(this,e,t)},e.fr=function(t){od.prototype.fr.call(this,t),_d(this,this.Jh(t),t)},e.It=function(t){if(null===t)return"";var e=this.Oj;return""===e||void 0===(e=Ad(t,e))?"":"string"==typeof e?e:(v("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},Bd.prototype.getLinkCategoryForData=function(t){return this.It(t)},Bd.prototype.$q=function(t,e){if(null!==t){var n=this.Oj;if(""!==n)if(this.vc(t)){var i=Ad(t,n);void 0===i&&(i=""),i!==e&&(Ed(t,n,e),bd(this,"linkCategory",Cn,n,t,i,e),"string"==typeof n&&this.Ca(t,n))}else Ed(t,n,e)}},Bd.prototype.setLinkCategoryForData=function(t,e){this.$q(t,e)},(e=Bd.prototype).Rm=function(t,e){od.prototype.Rm.call(this,t,e),this.ar(e,this.Jh(t))},e.vk=function(){return!0},e.nj=function(){return!0},e.Qt=function(){return!0},e.wk=function(){return!0},c.Object.defineProperties(Bd.prototype,{archetypeNodeData:{get:function(){return this.vj},set:function(t){var e=this.vj;e!==t&&(this.vj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.af},set:function(t){var e=this.af;e!==t&&(this.af=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.Pj},set:function(t){var e=this.Pj;e!==t&&(this.Pj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.Qj},set:function(t){var e=this.Qj;e!==t&&(this.Qj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(this.Vd=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.Xc},set:function(t){var e=this.Xc;if(e!==t){this.fb.clear();for(var n=t.length,i=0;i<n;i++){var r=t[i];if(!S(r))return void v("GraphLinksModel.linkDataArray must only contain Objects, not: "+r);rt(r)}if(this.Xc=t,""!==this.linkKeyProperty){for(i=new tt,r=0;r<n;r++){var o=t[r],s=this.Vb(o);void 0===s||null!==this.fb.H(s)?i.add(o):this.fb.add(s,o)}for(i=i.iterator;i.next();)this.Nq(r=i.value),void 0!==(o=this.Vb(r))&&this.fb.add(o,r)}for(i=new nt,r=0;r<n;r++)i.add(t[r]);for(this.ag=i,bd(this,"linkDataArray",Cn,"linkDataArray",this,e,t),e=0;e<n;e++)Xd(this,t[e])}}},linkKeyProperty:{get:function(){return this.Ei},set:function(t){var e=this.Ei;if(e!==t){this.Ei=t,this.fb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var r=this.linkDataArray[i],o=this.Vb(r);void 0===o&&(this.Nq(r),o=this.Vb(r)),void 0!==o&&this.fb.add(o,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Il},set:function(t){var e=this.Il;e!==t&&(this.Il=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.Zk},set:function(t){var e=this.Zk;e!==t&&(this.Zk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Ml},set:function(t){var e=this.Ml;e!==t&&(this.Ml=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.ve},set:function(t){var e=this.ve;e!==t&&(this.ve=t,this.g("nodeGroupKeyProperty",e,t))}},lk:{get:function(){return this.zn},set:function(t){this.zn!==t&&(this.zn=t)}},linkCategoryProperty:{get:function(){return this.Oj},set:function(t){var e=this.Oj;e!==t&&(this.Oj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Bd.prototype.setCategoryForLinkData=Bd.prototype.$q,Bd.prototype.getCategoryForLinkData=Bd.prototype.It,Bd.prototype.assignAllDataProperties=Bd.prototype.pq,Bd.prototype.setGroupKeyForNodeData=Bd.prototype.ar,Bd.prototype.getGroupKeyForNodeData=Bd.prototype.Jh,Bd.prototype.isGroupForNodeData=Bd.prototype.aw,Bd.prototype.copyLinkData=Bd.prototype.uq,Bd.prototype.mergeLinkDataArray=Bd.prototype.FA,Bd.prototype.removeLinkDataCollection=Bd.prototype.OA,Bd.prototype.removeLinkData=Bd.prototype.Hm,Bd.prototype.addLinkDataCollection=Bd.prototype.kz,Bd.prototype.addLinkData=Bd.prototype.$i,Bd.prototype.containsLinkData=Bd.prototype.vc,Bd.prototype.makeLinkDataKeyUnique=Bd.prototype.Nq,Bd.prototype.findLinkDataForKey=Bd.prototype.Dg,Bd.prototype.setKeyForLinkData=Bd.prototype.eu,Bd.prototype.getKeyForLinkData=Bd.prototype.Vb,Bd.prototype.removeLabelKeyForLinkData=Bd.prototype.Ly,Bd.prototype.addLabelKeyForLinkData=Bd.prototype.zv,Bd.prototype.setLabelKeysForLinkData=Bd.prototype.fu,Bd.prototype.getLabelKeysForLinkData=Bd.prototype.Bf,Bd.prototype.setToPortIdForLinkData=Bd.prototype.Dw,Bd.prototype.getToPortIdForLinkData=Bd.prototype.yy,Bd.prototype.setFromPortIdForLinkData=Bd.prototype.yw,Bd.prototype.getFromPortIdForLinkData=Bd.prototype.vy,Bd.prototype.setToKeyForLinkData=Bd.prototype.Cw,Bd.prototype.getToKeyForLinkData=Bd.prototype.xy,Bd.prototype.setFromKeyForLinkData=Bd.prototype.xw,Bd.prototype.getFromKeyForLinkData=Bd.prototype.uy,Bd.prototype.clear=Bd.prototype.clear;var Wd=Object.freeze([]);function $d(t){od.call(this),this.we="parent",this.Bn=!1,this.Vj="parentLinkCategory",void 0!==t&&(this.nodeDataArray=t)}function Zd(){uf.call(this),this.sx=this.Pn=this.Zb=0,this.Sr=360,this.qx=hp,this.Dj=0,this.ix=new dt,this.Er=this.Xd=0,this.qt=new _p,this.wu=this.Uj=0,this.cz=600,this.rp=NaN,this.kn=1,this.Wp=0,this.cm=360,this.Eb=hp,this.K=dp,this.Zc=xp,this.Uc=Af,this.kf=6,this.ap=kp}function Jd(t,e,n,i,r){var o=t.Sr,s=t.Zb;t=t.Xd,i=i*Math.PI/180,n=n*Math.PI/180;for(var a=e.length,l=0;l<a;l++){var h=i+(r===dp?l*n/(360<=o?a:a-1):-l*n/a),u=e.J(l),c=s*Math.tan(h)/t;c=Math.sqrt((s*s+t*t*c*c)/(1+c*c)),u.centerX=c*Math.cos(h),u.centerY=c*Math.sin(h),u.actualAngle=180*h/Math.PI}}function Qd(t,e,n,i){var r=t.Zb,o=t.Xd,s=t.Dj;n=n*Math.PI/180;for(var a=e.length,l=0;l<a;l++){var h=e.J(l),u=e.J(l===a-1?0:l+1),c=o*Math.sin(n);h.centerX=r*Math.cos(n),h.centerY=c,h.actualAngle=180*n/Math.PI,isNaN(h.diameter)&&Pp(h,0),isNaN(u.diameter)&&Pp(u,0),h=lp(t,r,o,i===dp?n:-n,(h.diameter+u.diameter)/2+s),n+=i===dp?h:-h}}function tp(t,e,n,i){var r=t.Zb,o=t.Xd,s=t.Er;n=n*Math.PI/180;for(var a=e.length,l=0;l<a;l++){var h=e.J(l);h.centerX=r*Math.cos(n),h.centerY=o*Math.sin(n),h.actualAngle=180*n/Math.PI,h=lp(t,r,o,i===dp?n:-n,s),n+=i===dp?h:-h}}function ep(t,e,n,i,r){var o=t.Sr;if(t.Uj=0,t.qt=new _p,360>n){for(o=i+(r===dp?o:-o);0>o;)o+=360;180<(o%=360)&&(o-=360),o*=Math.PI/180,t.wu=o,ip(t,e,n,i,r)}else np(t,e,n,i,r);t.qt.commit(e)}function np(t,e,n,i,r){var o=t.Zb,s=t.Dj,a=t.Pn,l=o*Math.cos(i*Math.PI/180),h=t.Xd*Math.sin(i*Math.PI/180),u=e.ma();if(3===u.length)u[0].centerX=o,u[0].centerY=0,u[1].centerX=u[0].centerX-u[0].width/2-u[1].width/2-s,u[1].y=u[0].y,u[2].centerX=(u[0].centerX+u[1].centerX)/2,u[2].y=u[0].y-u[2].height-s;else if(4===u.length)u[0].centerX=o,u[0].centerY=0,u[2].centerX=-u[0].centerX,u[2].centerY=u[0].centerY,u[1].centerX=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-s,u[3].centerX=0,u[3].y=Math.max(u[0].y+u[0].height+s,u[2].y+u[2].height+s);else{o=dt.alloc();for(var c=0;c<u.length&&(u[c].centerX=l,u[c].centerY=h,!(c>=u.length-1));c++)rp(t,l,h,u,c,r,o)||op(t,l,h,u,c,r,o),l=o.x,h=o.y;if(dt.free(o),t.Uj++,!(23<t.Uj)){l=u[0].centerX,h=u[0].centerY,o=u[u.length-1].centerX,c=u[u.length-1].centerY;var f=Math.abs(l-o)-((u[0].width+u[u.length-1].width)/2+s),d=Math.abs(h-c)-((u[0].height+u[u.length-1].height)/2+s);s=0,1>Math.abs(d)?Math.abs(l-o)<(u[0].width+u[u.length-1].width)/2&&(s=0):s=0<d?d:1>Math.abs(f)?0:f,l=Math.abs(o)>Math.abs(c)?0<o!=h>c:0<c!=l<o,(l=r===dp?l:!l)&&(s=-Math.abs(s),s=Math.min(s,-u[u.length-1].width),s=Math.min(s,-u[u.length-1].height)),t.qt.compare(s,u),1<Math.abs(s)&&(t.Zb=8>t.Uj?t.Zb-s/(2*Math.PI):5>u.length&&10<s?t.Zb/2:t.Zb-(0<s?1.7:-2.3),t.Xd=t.Zb*a,np(t,e,n,i,r))}}}function ip(t,e,n,i,r){for(var o=t.Zb,s=t.Xd,a=t.Pn,l=o*Math.cos(i*Math.PI/180),h=s*Math.sin(i*Math.PI/180),u=dt.alloc(),c=e.ma(),f=0;f<c.length&&(c[f].centerX=l,c[f].centerY=h,!(f>=c.length-1));f++)rp(t,l,h,c,f,r,u)||op(t,l,h,c,f,r,u),l=u.x,h=u.y;if(dt.free(u),t.Uj++,!(23<t.Uj)){if(l=Math.atan2(h,l),l=r===dp?t.wu-l:l-t.wu,o=(l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI)*(o+s)/2,s=t.qt,Math.abs(o)<Math.abs(s.rm))for(s.rm=o,s.Mk=[],s.Xm=[],l=0;l<c.length;l++)s.Mk[l]=c[l].bounds.x,s.Xm[l]=c[l].bounds.y;1<Math.abs(o)&&(t.Zb=8>t.Uj?t.Zb-o/(2*Math.PI):t.Zb-(0<o?1.7:-2.3),t.Xd=t.Zb*a,ip(t,e,n,i,r))}}function rp(t,e,n,i,r,o,s){var a=t.Zb,l=t.Xd,h=0;t=(i[r].width+i[r+1].width)/2+t.Dj;var u=!1;if(0<=n!=(o===dp)){if((o=e+t)>a){if((o=e-t)<-a)return s.x=o,s.y=h,!1;u=!0}}else if((o=e-t)<-a){if((o=e+t)>a)return s.x=o,s.y=h,!1;u=!0}return h=Math.sqrt(1-Math.min(1,o*o/(a*a)))*l,0>n!==u&&(h=-h),Math.abs(n-h)>(i[r].height+i[r+1].height)/2?(s.x=o,s.y=h,!1):(s.x=o,s.y=h,!0)}function op(t,e,n,i,r,o,s){var a=t.Zb,l=t.Xd,h=0;if(t=(i[r].height+i[r+1].height)/2+t.Dj,i=!1,0<=e!=(o===dp)){if((o=n-t)<-l){if((o=n+t)>l)return s.x=h,void(s.y=o);i=!0}}else if((o=n+t)>l){if((o=n-t)<-l)return s.x=h,void(s.y=o);i=!0}h=Math.sqrt(1-Math.min(1,o*o/(l*l)))*a,0>e!==i&&(h=-h),s.x=h,s.y=o}function sp(t,e,n,i,r){var o=t.cz;if(.001>Math.abs(t.Pn-1))return void 0!==i&&void 0!==r?r*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var s=0,a=void 0!==i&&void 0!==r?r/(o+1):Math.PI/(2*(o+1)),l=0,h=0;h<=o;h++){l=void 0!==i&&void 0!==r?i+h*r/o:h*Math.PI/(2*o);var u=Math.sin(l);s+=Math.sqrt(1-t*t*u*u)*a}return void 0!==i&&void 0!==r?(e>n?e:n)*s:4*(e>n?e:n)*s}function ap(t,e,n,i,r){return e/(void 0!==i&&void 0!==r?sp(t,1,n,i,r):sp(t,1,n))}function lp(t,e,n,i,r){if(.001>Math.abs(t.Pn-1))return r/e;var o=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,s=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(i+=Math.PI/2);for(var a=0;;a++){var l=Math.sin(i+a*t);if((s+=(e>n?e:n)*Math.sqrt(1-o*o*l*l)*t)>=r)return a*t}}Bd.className="GraphLinksModel",Od.GraphLinksModel=Bd,od.constructGraphLinksModel=od.constructGraphLinksModel=function(){return new Bd},od.initDiagramModel=Pd=function(){return new Bd},u($d,od),$d.constructGraphLinksModel=od.constructGraphLinksModel,$d.prototype.cloneProtected=function(t){od.prototype.cloneProtected.call(this,t),t.we=this.we,t.Bn=this.Bn,t.Vj=this.Vj},(e=$d.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.dr();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var r=t[i];e+=" "+this.ja(r)+":"+E(r)}}return e},e.Lk=function(){var t=od.prototype.Lk.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},e.Uq=function(t){od.prototype.Uq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},e.ir=function(t){return ud(this,t,"nodeParentKeyProperty"),od.prototype.ir.call(this,t)},e.Tq=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&v("applyIncrementalJson cannot change Model properties"),od.prototype.Tq.call(this,t)},e.ym=function(t){return t},e.Kh=function(t){if(null!==t){var e=this.we;if(""!==e&&void 0!==(e=Ad(t,e))){if(wd(e))return e;v("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},e.be=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.we;if(""!==n)if(e=this.ym(e),this.Za(t)){var i=Ad(t,n);i!==e&&(_d(this,i,t),Ed(t,n,e),null===this.Kb(e)&&Sd(this,e,t),bd(this,"nodeParentKey",Cn,n,t,i,e),"string"==typeof n&&this.Ca(t,n))}else Ed(t,n,e)}},e.Kt=function(t){if(null===t)return"";var e=this.Vj;return""===e||void 0===(e=Ad(t,e))?"":"string"==typeof e?e:(v("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},$d.prototype.getLinkCategoryForData=function(t){return this.Kt(t)},$d.prototype.gu=function(t,e){if(null!==t){var n=this.Vj;if(""!==n)if(this.Za(t)){var i=Ad(t,n);void 0===i&&(i=""),i!==e&&(Ed(t,n,e),bd(this,"parentLinkCategory",Cn,n,t,i,e),"string"==typeof n&&this.Ca(t,n))}else Ed(t,n,e)}},$d.prototype.setLinkCategoryForData=function(t,e){this.gu(t,e)},$d.prototype.copyNodeData=function(t){return null===t?null:(t=od.prototype.copyNodeData.call(this,t),this.mk||""===this.we||void 0===Ad(t,this.we)||Ed(t,this.we,void 0),t)},$d.prototype.setDataProperty=function(t,e,n){if(this.Za(t)){if(e===this.nodeKeyProperty)return void this.Qm(t,n);if(e===this.nodeCategoryProperty)return void this.Pm(t,n);if(e===this.nodeParentKeyProperty)return void this.be(t,n)}var i=Ad(t,e);i!==n&&(Ed(t,e,n),this.$t(t,e,i,n))},(e=$d.prototype).Yq=function(t,e){od.prototype.Yq.call(this,t,e);for(var n=this.Va.iterator;n.next();)this.rw(n.value,t,e)},e.rw=function(t,e,n){if(this.Kh(t)===e){var i=this.we;Ed(t,i,n),bd(this,"nodeParentKey",Cn,i,t,e,n),"string"==typeof i&&this.Ca(t,i)}},e.Lm=function(t){od.prototype.Lm.call(this,t);var e=Cd(this,t=this.ja(t));if(null!==e){var n=T();for(e=e.iterator;e.next();){var i=e.value;if(this.Za(i)&&this.Kh(i)===t){var r=this.we;bd(this,"nodeParentKey",Cn,r,i,t,t),"string"==typeof r&&this.Ca(i,r),n.push(i)}}for(e=0;e<n.length;e++)_d(this,t,n[e]);N(n)}},e.Km=function(t){od.prototype.Km.call(this,t);var e=this.Kh(t);e=this.ym(e),null===this.Kb(e)&&Sd(this,e,t)},e.fr=function(t){od.prototype.fr.call(this,t),_d(this,this.Kh(t),t)},e.Rm=function(t,e){od.prototype.Rm.call(this,t,e),this.gu(e,this.Kt(t)),this.be(e,this.Kh(t))},e.wm=function(){return!0},e.Qt=function(){return!0},c.Object.defineProperties($d.prototype,{nodeParentKeyProperty:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(this.we=t,this.g("nodeParentKeyProperty",e,t))}},mk:{get:function(){return this.Bn},set:function(t){this.Bn!==t&&(this.Bn=t)}},parentLinkCategoryProperty:{get:function(){return this.Vj},set:function(t){var e=this.Vj;e!==t&&(this.Vj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),$d.prototype.setParentLinkCategoryForNodeData=$d.prototype.gu,$d.prototype.getParentLinkCategoryForNodeData=$d.prototype.Kt,$d.prototype.setParentKeyForNodeData=$d.prototype.be,$d.prototype.getParentKeyForNodeData=$d.prototype.Kh,$d.className="TreeModel",Od.TreeModel=$d,u(Zd,uf),Zd.prototype.cloneProtected=function(t){uf.prototype.cloneProtected.call(this,t),t.rp=this.rp,t.kn=this.kn,t.Wp=this.Wp,t.cm=this.cm,t.Eb=this.Eb,t.K=this.K,t.Zc=this.Zc,t.Uc=this.Uc,t.kf=this.kf,t.ap=this.ap},Zd.prototype.ib=function(t){t.classType===Zd?t===bp||t===wp||t===yp||t===vp||t===xp?this.sorting=t:t===gp||t===mp||t===dp||t===pp?this.direction=t:t===cp||t===up||t===hp||t===fp?this.arrangement=t:t!==Sp&&t!==kp||(this.nodeDiameterFormula=t):uf.prototype.ib.call(this,t)},Zd.prototype.createNetwork=function(){return new Cp(this)},Zd.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new tt;e.addAll(t.iterator),t=new tt;var n,i,r=new tt,o=this.sort(e),s=this.Er,a=this.arrangement,l=this.nodeDiameterFormula,h=this.radius;(!isFinite(h)||0>=h)&&(h=NaN);var u=this.aspectRatio;(!isFinite(u)||0>=u)&&(u=1);var c=this.startAngle;isFinite(c)||(c=0);var f=this.sweepAngle;if((!isFinite(f)||360<f||1>f)&&(f=360),e=this.spacing,isFinite(e)||(e=NaN),a===fp&&l===Sp?a=hp:a===fp&&l!==Sp&&(a=this.arrangement),(this.direction===gp||this.direction===mp)&&this.sorting!==xp){for(l=0;!(l>=o.length||(t.add(o.J(l)),l+1>=o.length));l+=2)r.add(o.J(l+1));this.direction===gp?(this.arrangement===fp&&t.reverse(),(o=new tt).addAll(t),o.addAll(r)):(this.arrangement===fp&&r.reverse(),(o=new tt).addAll(r),o.addAll(t))}l=o.length;for(var d=i=n=0;d<o.length;d++){var p=c+f*i*(this.direction===dp?1:-1)/l,g=o.J(d).diameter;isNaN(g)&&(g=Pp(o.J(d),p)),360>f&&(0===d||d===o.length-1)&&(g/=2),n+=g,i++}if(isNaN(h)||a===fp){if(isNaN(e)&&(e=6),a!==hp&&a!==fp){for(i=-1/0,s=0;s<l;s++)d=o.J(s),n=o.J(s===l-1?0:s+1),isNaN(d.diameter)&&Pp(d,0),isNaN(n.diameter)&&Pp(n,0),i=Math.max(i,(d.diameter+n.diameter)/2);s=i+e,h=a===cp?(i+e)/(2*Math.PI/l):ap(this,s*(360<=f?l:l-1),u,c*Math.PI/180,f*Math.PI/180)}else h=ap(this,n+(360<=f?l:l-1)*(a!==fp?e:1.6*e),u,c*Math.PI/180,f*Math.PI/180);i=h*u}else if(d=sp(this,h,i=h*u,c*Math.PI/180,f*Math.PI/180),isNaN(e))a!==hp&&a!==fp||(e=(d-n)/(360<=f?l:l-1));else if(a===hp||a===fp)(d=(d-n)/(360<=f?l:l-1))<e?i=(h=ap(this,n+e*(360<=f?l:l-1),u,c*Math.PI/180,f*Math.PI/180))*u:e=d;else{for(s=-1/0,n=0;n<l;n++)p=o.J(n),g=o.J(n===l-1?0:n+1),isNaN(p.diameter)&&Pp(p,0),isNaN(g.diameter)&&Pp(g,0),s=Math.max(s,(p.diameter+g.diameter)/2);(n=ap(this,(s+=e)*(360<=f?l:l-1),u,c*Math.PI/180,f*Math.PI/180))>h?i=(h=n)*u:s=d/(360<=f?l:l-1)}if(this.qx=a,this.Zb=h,this.Pn=u,this.sx=c,this.Sr=f,this.Dj=e,this.Xd=i,this.Er=s,e=o,o=this.qx,a=this.Zb,h=this.sx,u=this.Sr,c=this.Dj,f=this.Xd,l=this.Er,this.direction!==gp&&this.direction!==mp||o!==fp)if(this.direction===gp||this.direction===mp){switch(s=0,o){case up:s=180*lp(this,a,f,h,l)/Math.PI;break;case hp:l=e=0,null!==(s=t.first())&&(e=Pp(s,Math.PI/2)),null!==(s=r.first())&&(l=Pp(s,Math.PI/2)),s=180*lp(this,a,f,h,c+(e+l)/2)/Math.PI;break;case cp:s=u/e.length}if(this.direction===gp){switch(o){case up:tp(this,t,h,pp);break;case hp:Qd(this,t,h,pp);break;case cp:Jd(this,t,u/2,h,pp)}switch(o){case up:tp(this,r,h+s,dp);break;case hp:Qd(this,r,h+s,dp);break;case cp:Jd(this,r,u/2,h+s,dp)}}else{switch(o){case up:tp(this,r,h,pp);break;case hp:Qd(this,r,h,pp);break;case cp:Jd(this,r,u/2,h,pp)}switch(o){case up:tp(this,t,h+s,dp);break;case hp:Qd(this,t,h+s,dp);break;case cp:Jd(this,t,u/2,h+s,dp)}}}else switch(o){case up:tp(this,e,h,this.direction);break;case hp:Qd(this,e,h,this.direction);break;case cp:Jd(this,e,u,h,this.direction);break;case fp:ep(this,e,u,h,this.direction)}else ep(this,e,u,h-u/2,dp)}this.updateParts(),this.network=null,this.isValidLayout=!0},Zd.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Zd.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new dt(0,0):(n.x=this.arrangementOrigin.x+this.Zb,n.y=this.arrangementOrigin.y+this.Xd);for(var i=this.network.vertexes.iterator;i.next();){var r=i.value;r.x+=n.x,r.y+=n.y,r.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.ce(n.ce(t)),this.group.move(e),this.ix=e.ce(t))},Zd.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Zd.prototype.sort=function(t){switch(this.sorting){case yp:break;case vp:t.reverse();break;case bp:t.sort(this.comparer);break;case wp:t.sort(this.comparer),t.reverse();break;case xp:return this.hw(function(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new tt;for(var i=0;i<t.length;i++){var r=-1,o=-1;if(0===i)for(var s=0;s<t.length;s++){var a=t.J(s).edgesCount;a>r&&(r=a,o=s)}else for(s=0;s<t.length;s++)(a=e[s])>r&&(r=a,o=s);for(n.add(t.J(o)),e[o]=-1,s=(o=t.J(o)).sourceEdges;s.next();)0>(r=t.indexOf(s.value.fromVertex))||0<=e[r]&&e[r]++;for(o=o.destinationEdges;o.next();)0>(r=t.indexOf(o.value.toVertex))||0<=e[r]&&e[r]++}return n}(t));default:v("Invalid sorting type.")}return t},Zd.prototype.hw=function(t){for(var e=[],n=0;n<t.length;n++){var i=t.J(n);e[n]=[];for(var r,o=i.destinationEdges;o.next();)(r=t.indexOf(o.value.toVertex))!==n&&0>e[n].indexOf(r)&&e[n].push(r);for(i=i.sourceEdges;i.next();)(r=t.indexOf(i.value.fromVertex))!==n&&0>e[n].indexOf(r)&&e[n].push(r)}for(o=[],n=0;n<e.length;n++)o[n]=0;n=[];var s=[],a=[];i=[],r=new tt;for(var l=0,h=0;h<e.length;h++){var u=e[h].length;if(1===u)i.push(h);else if(0===u)r.add(t.J(h));else{if(0===l)n.push(h);else{for(var c=u=1/0,f=-1,d=[],p=0;p<n.length;p++)0>e[n[p]].indexOf(n[p===n.length-1?0:p+1])&&d.push(p===n.length-1?0:p+1);if(0===d.length)for(p=0;p<n.length;p++)d.push(p);for(p=0;p<d.length;p++){for(var g=d[p],m=e[h],y=0,v=0;v<s.length;v++){var b=o[s[v]],w=o[a[v]];if(b<w){var x=b;b=w}else x=w;if(x<g&&g<=b)for(w=0;w<m.length;w++){var k=m[w];0>n.indexOf(k)||x<o[k]&&o[k]<b||x===o[k]||b===o[k]||y++}else for(w=0;w<m.length;w++)0>n.indexOf(k=m[w])||x<o[k]&&o[k]<b&&x!==o[k]&&b!==o[k]&&y++}for(m=y,v=y=0;v<e[h].length;v++)0<=(x=n.indexOf(e[h][v]))&&(y+=(x=Math.abs(g-(x>=g?x+1:x)))<n.length+1-x?x:n.length+1-x);for(v=0;v<s.length;v++)(x=o[s[v]])>=g&&x++,(b=o[a[v]])>=g&&b++,x>b&&(w=b,b=x,x=w),b-x<(n.length+2)/2==(x<g&&g<=b)&&y++;(m<u||m===u&&y<c)&&(u=m,c=y,f=g)}for(n.splice(f,0,h),u=0;u<n.length;u++)o[n[u]]=u;for(u=0;u<e[h].length;u++)0<=n.indexOf(c=e[h][u])&&(s.push(h),a.push(c))}l++}}for(s=n.length;;){for(o=!0,a=0;a<i.length;a++)if(0<=(u=n.indexOf(h=e[l=i[a]][0]))){for(f=c=0;f<e[h].length;f++)0>(d=n.indexOf(e[h][f]))||d===u||(c+=d<u!=(p=d>u?d-u:u-d)>s-p?1:-1);n.splice(0>c?u:u+1,0,l),i.splice(a,1),a--}else o=!1;if(o)break;n.push(i[0]),i.splice(0,1)}for(e=0;e<n.length;e++)r.add(t.J(n[e]));return r},c.Object.defineProperties(Zd.prototype,{radius:{get:function(){return this.rp},set:function(t){this.rp!==t&&(0<t||isNaN(t))&&(this.rp=t,this.C())}},aspectRatio:{get:function(){return this.kn},set:function(t){this.kn!==t&&0<t&&(this.kn=t,this.C())}},startAngle:{get:function(){return this.Wp},set:function(t){this.Wp!==t&&(this.Wp=t,this.C())}},sweepAngle:{get:function(){return this.cm},set:function(t){this.cm!==t&&(this.cm=0<t&&360>=t?t:360,this.C())}},arrangement:{get:function(){return this.Eb},set:function(t){this.Eb===t||t!==fp&&t!==hp&&t!==up&&t!==cp||(this.Eb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==dp&&t!==pp&&t!==gp&&t!==mp||(this.K=t,this.C())}},sorting:{get:function(){return this.Zc},set:function(t){this.Zc===t||t!==yp&&t!==vp&&t!==bp&&!wp&&t!==xp||(this.Zc=t,this.C())}},comparer:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t,this.C())}},spacing:{get:function(){return this.kf},set:function(t){this.kf!==t&&(this.kf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.ap},set:function(t){this.ap===t||t!==kp&&t!==Sp||(this.ap=t,this.C())}},actualXRadius:{get:function(){return this.Zb}},actualYRadius:{get:function(){return this.Xd}},actualSpacing:{get:function(){return this.Dj}},actualCenter:{get:function(){return this.ix}}});var hp=new H(Zd,"ConstantSpacing",0),up=new H(Zd,"ConstantDistance",1),cp=new H(Zd,"ConstantAngle",2),fp=new H(Zd,"Packed",3),dp=new H(Zd,"Clockwise",4),pp=new H(Zd,"Counterclockwise",5),gp=new H(Zd,"BidirectionalLeft",6),mp=new H(Zd,"BidirectionalRight",7),yp=new H(Zd,"Forwards",8),vp=new H(Zd,"Reverse",9),bp=new H(Zd,"Ascending",10),wp=new H(Zd,"Descending",11),xp=new H(Zd,"Optimized",12),kp=new H(Zd,"Pythagorean",13),Sp=new H(Zd,"Circular",14);function _p(){this.rm=-1/0,this.Xm=this.Mk=null}function Cp(t){_f.call(this,t)}function Mp(t){Nf.call(this,t),this.I=this.Bj=NaN}function Pp(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===fp)if(n.nodeDiameterFormula===Sp)t.Bj=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.Bj=Math.min(t.height/n,t.width/e)}else t.Bj=n.nodeDiameterFormula===Sp?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Bj}function Tp(t){Ef.call(this,t)}function Np(){uf.call(this),this.Dh=null,this.wo=0,this.Kd=new Dt(100,100).freeze(),this.jn=!1,this.hf=!0,this.fd=!1,this.Jl=100,this.Sn=1,this.Xf=1e3,this.Uo=10,this.sp=Math,this.fl=.05,this.el=50,this.cl=150,this.dl=0,this.Jn=10,this.In=5}function Ap(t,e,n){if(function(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Dh=t.network.vertexes.ma(),(t=t.Dh).sort(function(t,e){return null===t||null===e||t===e?0:e.Fd-t.Fd}),e=t.length-1;0<=e&&1>=t[e].Fd;)e--;return 1<t.length-e}(t,e)){var i=t.Xf;t.Xf*=1+1/(e+1);var r=function(t,e){for(var n=t.network,i=new Ip(t),r=0;r<t.Dh.length;r++){var o=t.Dh[r];if(!(1<o.Fd))break;i.Bg(o);var s=new Fp;s.lu=o.Fd,s.mu=o.width,s.ku=o.height,s.Ww=o.focus.x,s.Xw=o.focus.y,null===o.Ke&&(o.Ke=new tt),o.Ke.add(s),o.vw=o.Ke.count-1}for(o=n.edges.iterator;o.next();){var a=o.value;s=a.toVertex,(r=a.fromVertex).network===i&&s.network===i?i.jm(a):r.network===i?(null===(a=r.kk)&&(a=new tt,r.kk=a),a.add(s),r.Fd--,r.Qh+=s.Qh):s.network===i&&(null===(a=s.kk)&&(a=new tt,s.kk=a),a.add(r),s.Fd--,s.Qh+=r.Qh)}for(r=i.edges.iterator;r.next();)(o=r.value).length*=Math.max(1,Xe.sqrt((o.fromVertex.Qh+o.toVertex.Qh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){var l=(r=e.value).kk;if(null!==l&&0<l.count&&!(0>=(s=r.Ke.J(r.Ke.count-1).lu-r.Fd))){for(var h=a=0,u=l.count-s;u<l.count;u++){var c=l.J(u),f=null;for(o=c.edges.iterator;o.next();){var d=o.value;if(d.wy(c)===r){f=d;break}}null!==f&&(h+=f.length,a+=c.width*c.height)}o=r.centerX,l=r.centerY,f=r.focus,1>(d=(u=r.width)*(c=r.height))&&(d=1),a=Xe.sqrt((a+d+h*h*4/(s*s))/d),r.bounds=new Rt(o-f.x-(s=(a-1)*u/2),l-f.y-(a=(a-1)*c/2),u+2*s,c+2*a),r.focus=new dt(f.x+s,f.y+a)}}return t.network=i,n}(t,e),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=o,Ap(t,e+1,n),Dp(t,o),function(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i=n.value;if(i.network=e,null!==i.Ke){var r=i.Ke.J(i.vw);i.Fd=r.lu;var o=r.Ww,s=r.Xw;i.bounds=new Rt(i.centerX-o,i.centerY-s,r.mu,r.ku),i.focus=new dt(o,s),i.vw--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}(t,r),(e=r.vertexes.ma()).sort(function(t,e){return null===t||null===e||t===e?0:e.Fd-t.Fd}),n=0;n<e.length;n++)Ep(t,e[n]);t.Xf=i}}function Ep(t,e){var n=e.kk;if(null!==n&&0!==n.count){var i=e.centerX,r=e.centerY,o=e.width,s=e.height;null!==e.Ke&&0<e.Ke.count&&(o=(s=e.Ke.J(0)).mu,s=s.ku),o=Xe.sqrt(o*o+s*s)/2;for(var a=!1,l=s=0,h=0,u=e.vertexes.iterator;u.next();){var c=u.value;1>=c.Fd?l++:(a=!0,h++,s+=Math.atan2(e.centerY-c.centerY,e.centerX-c.centerX))}if(0!==l)for(0<h&&(s/=h),h=e=0,e=a?2*Math.PI/(l+1):2*Math.PI/l,0==l%2&&(h=e/2),1<n.count&&n.sort(function(t,e){return null===t||null===e||t===e?0:e.width*e.height-t.width*t.height}),a=0==l%2?0:1,n=n.iterator;n.next();)if(!(1<(l=n.value).Fd||t.isFixed(l))){for(u=null,c=l.edges.iterator;c.next();){u=c.value;break}var f=l.height;c=Xe.sqrt((c=l.width)*c+f*f)/2,u=o+u.length+c,c=s+(e*(a/2>>1)+h)*(0==a%2?1:-1),l.centerX=i+u*Math.cos(c),l.centerY=r+u*Math.sin(c),a++}}}function Lp(t,e,n,i,r,o,s){var a=9e19,l=-1,h=0;t:for(;h<e;h++){var u=t[h],c=u.x-n,f=u.y-i;if((c=c*c+f*f)<a){for(f=h-1;0<=f;f--)if(t[f].y>u.y&&t[f].x-u.x<r+s.width)continue t;for(f=h+1;f<e;f++)if(t[f].x>u.x&&t[f].y-u.y<o+s.height)continue t;l=h,a=c}}return l}function Op(t,e){var n=t.bounds,i=n.x;t=n.y;var r=n.width;n=n.height;var o=e.bounds,s=o.x;e=o.y;var a=o.width;return o=o.height,i+r<s?t>e+o?Xe.sqrt((n=i+r-s)*n+(t=t-e-o)*t):t+n<e?Xe.sqrt((i=i+r-s)*i+(t=t+n-e)*t):s-(i+r):i>s+a?t>e+o?Xe.sqrt((n=i-s-a)*n+(t=t-e-o)*t):t+n<e?Xe.sqrt((i=i-s-a)*i+(t=t+n-e)*t):i-(s+a):t>e+o?t-(e+o):t+n<e?e-(t+n):.1}function Dp(t,e){for(t.Dh=null,e=t.wo+e;t.wo<e&&(t.wo++,jp(t)););t.Dh=null}function jp(t){null===t.Dh&&(t.Dh=t.network.vertexes.ma());var e=t.Dh;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,r=i,o=n=n.centerY,s=1;s<e.length;s++){var a=e[s];a.forceX=0,a.forceY=0;var l=a.centerX;a=a.centerY,i=Math.min(i,l),r=Math.max(r,l),n=Math.min(n,a),o=Math.max(o,a)}(r=r-i>o-n)?e.sort(function(t,e){return null===t||null===e||t===e?0:t.centerX-e.centerX}):e.sort(function(t,e){return null===t||null===e||t===e?0:t.centerY-e.centerY}),n=t.Xf;var h=i=a=0;for(o=0;o<e.length;o++){var u=(i=(s=e[o]).bounds).y+(a=s.focus).y;i=s.charge*t.electricalFieldX(l=i.x+a.x,u),h=s.charge*t.electricalFieldY(l,u),i+=s.mass*t.gravitationalFieldX(l,u),h+=s.mass*t.gravitationalFieldY(l,u),s.forceX+=i,s.forceY+=h;for(var c=o+1;c<e.length;c++){var f=e[c];if(f!==s){var d=(i=f.bounds).y+(a=f.focus).y;if(l-(h=i.x+a.x)>n||h-l>n){if(r)break}else if(u-d>n||d-u>n){if(!r)break}else{var p=Op(s,f);1>p?(null===(i=t.randomNumberGenerator)&&(t.randomNumberGenerator=i=new zp),p=i.random(),a=i.random(),i=l>h?(1+(i=Math.abs(f.bounds.right-s.bounds.x)))*p:l<h?-(1+(i=Math.abs(f.bounds.x-s.bounds.right)))*p:(1+(i=Math.max(f.width,s.width)))*p-i/2,h=u>d?(1+(h=Math.abs(f.bounds.bottom-s.bounds.y)))*a:l<h?-(1+(h=Math.abs(f.bounds.y-s.bounds.bottom)))*a:(1+(h=Math.max(f.height,s.height)))*a-h/2):(i=(h-l)/p*(a=-s.charge*f.charge/(p*p)),h=(d-u)/p*a),s.forceX+=i,s.forceY+=h,f.forceX-=i,f.forceY-=h}}}}for(r=t.network.edges.iterator;r.next();)i=(s=(n=(a=r.value).fromVertex).bounds).x+(l=n.focus).x,s=s.y+l.y,l=(u=(o=a.toVertex).bounds).x+(c=o.focus).x,u=u.y+c.y,1>(c=Op(n,o))?(null===(c=t.randomNumberGenerator)&&(t.randomNumberGenerator=c=new zp),a=c.random(),c=c.random(),i=(i>l?1:-1)*(1+(o.width>n.width?o.width:n.width))*a,h=(s>u?1:-1)*(1+(o.height>n.height?o.height:n.height))*c):(i=(l-i)/c*(a=a.stiffness*(c-a.length)),h=(u-s)/c*a),n.forceX+=i,n.forceY+=h,o.forceX-=i,o.forceY-=h;for(r=i=0;r<e.length;r++)t.isFixed(n=e[r])?t.moveFixedVertex(n):i=Math.max(i,t.moveVertex(n)||0);return i>t.epsilonDistance*t.epsilonDistance}function Fp(){this.Xw=this.Ww=this.ku=this.mu=this.lu=0}function Ip(t){_f.call(this,t)}function Rp(t){Nf.call(this,t),this.Ka=!1,this.cb=this.I=NaN,this.Qh=this.Fd=this.Ja=this.T=0,this.Ke=this.kk=null,this.vw=0}function Bp(t){Ef.call(this,t),this.l=this.v=NaN}function zp(){var t=0;void 0===t&&(t=42),this.seed=t,this.Wy=48271,this.Yy=2147483647,this.Q=44488.07041494893,this.Zy=3399,this.Xy=1/2147483647,this.random()}function Vp(){uf.call(this),this.Yb=this.qe=25,this.K=0,this.al=wg,this.El=Sg,this.tl=Mg,this.Mj=4,this.Qk=Ag,this.ng=7,this.hf=!0,this.Eo=4,this.Ba=this.Gi=this.ra=-1,this.nc=this.lh=0,this.Ia=this.ud=this.vd=this.Ud=this.zb=null,this.nh=0,this.Xo=this.Rj=null,this.Dc=0,this.Yo=null,this.Tc=new dt,this.te=[],this.te.length=100}function Up(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function qp(t){null===t.Rj&&(t.Rj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.Rj[e]=i.layer,e++,t.Rj[e]=i.column,e++,t.Rj[e]=i.index,e++}return t.Rj}function Hp(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function Gp(t,e,n){var i=vg(t,e),r=t.zb[e];(null===t.Xo||t.Xo.length<r*r)&&(t.Xo=[]);for(var o=t.Xo,s=0;s<r;s++){var a,l=0,h=i[s],u=h.near;if(null!==u&&u.layer===h.layer)if((h=u.index)>s)for(var c=s+1;c<h;c++){var f=i[c];f.near===u&&f.wf===u.wf||l++}else for(c=s-1;c>h;c--)(f=i[c]).near===u&&f.wf===u.wf||l++;if(0<=n)for(h=i[s].sourceEdgesArrayAccess,u=0;u<h.length;u++){var d=h[u];if(d.valid&&d.fromVertex.layer!==e)for(f=d.fromVertex.index,c=d.portToPos,d=d.portFromPos,a=u+1;a<h.length;a++){var p=h[a];if(p.valid&&p.fromVertex.layer!==e){var g=p.fromVertex.index,m=p.portToPos;p=p.portFromPos,c<m&&(f>g||f===g&&d>p)&&l++,m<c&&(g>f||g===f&&p>d)&&l++}}}if(0>=n)for(h=i[s].destinationEdgesArrayAccess,u=0;u<h.length;u++)if((d=h[u]).valid&&d.toVertex.layer!==e)for(f=d.toVertex.index,c=d.portToPos,d=d.portFromPos,a=u+1;a<h.length;a++)(p=h[a]).valid&&p.toVertex.layer!==e&&(g=p.toVertex.index,m=p.portToPos,d<(p=p.portFromPos)&&(f>g||f===g&&c>m)&&l++,p<d&&(g>f||g===f&&m>c)&&l++);for(o[s*r+s]=l,h=s+1;h<r;h++){var y=0,v=0;if(0<=n){l=i[s].sourceEdgesArrayAccess;var b=i[h].sourceEdgesArrayAccess;for(u=0;u<l.length;u++)if((d=l[u]).valid&&d.fromVertex.layer!==e)for(f=d.fromVertex.index,d=d.portFromPos,a=0;a<b.length;a++)(p=b[a]).valid&&p.fromVertex.layer!==e&&(g=p.fromVertex.index,p=p.portFromPos,(f<g||f===g&&d<p)&&v++,(g<f||g===f&&p<d)&&y++)}if(0>=n)for(l=i[s].destinationEdgesArrayAccess,b=i[h].destinationEdgesArrayAccess,u=0;u<l.length;u++)if((d=l[u]).valid&&d.toVertex.layer!==e)for(f=d.toVertex.index,c=d.portToPos,a=0;a<b.length;a++)(p=b[a]).valid&&p.toVertex.layer!==e&&(m=p.portToPos,(f<(g=p.toVertex.index)||f===g&&c<m)&&v++,(g<f||g===f&&m<c)&&y++);o[s*r+h]=y,o[h*r+s]=v}}return bg(t,e,i),o}function Yp(t){for(var e=0,n=0;n<=t.ra;n++){for(var i=t,r=n,o=vg(i,r),s=i.zb[r],a=0,l=0;l<s;l++){var h=o[l].destinationEdgesArrayAccess;if(null!==h)for(var u=0;u<h.length;u++){var c=h[u];c.valid&&c.toVertex.layer!==r&&(a+=(Math.abs(c.fromVertex.column+c.portFromColOffset-(c.toVertex.column+c.portToColOffset))+1)*Up(c))}}bg(i,r,o),e+=a}return e}function Xp(t,e,n){for(var i=vg(t,e),r=t.zb[e],o=[],s=0;s<r;s++){var a=i[s],l=null;0>=n&&(l=a.sourceEdgesArrayAccess);var h=null;0<=n&&(h=a.destinationEdgesArrayAccess);var u=0,c=0,f=a.near;if(null!==f&&f.layer===a.layer&&(u+=f.column-1,c++),null!==l)for(f=0;f<l.length;f++){var d=(a=l[f]).fromVertex;a.valid&&!a.rev&&d.layer!==e&&(u+=d.column,c++)}if(null!==h)for(l=0;l<h.length;l++)f=(a=h[l]).toVertex,a.valid&&!a.rev&&f.layer!==e&&(u+=f.column,c++);o[s]=0===c?-1:u/c}return bg(t,e,i),o}function Kp(t,e,n){for(var i=vg(t,e),r=t.zb[e],o=[],s=0;s<r;s++){var a=i[s],l=null;0>=n&&(l=a.sourceEdgesArrayAccess);var h=null;0<=n&&(h=a.destinationEdgesArrayAccess);var u=0,c=[],f=a.near;if(null!==f&&f.layer===a.layer&&(c[u]=f.column-1,u++),a=void 0,null!==l)for(f=0;f<l.length;f++){var d=(a=l[f]).fromVertex;a.valid&&!a.rev&&d.layer!==e&&(c[u]=d.column+a.portFromColOffset,u++)}if(null!==h)for(l=0;l<h.length;l++)f=(a=h[l]).toVertex,a.valid&&!a.rev&&f.layer!==e&&(c[u]=f.column+a.portToColOffset,u++);0===u?o[s]=-1:(c.sort(function(t,e){return t-e}),h=u>>1,o[s]=0!=(1&u)?c[h]:c[h-1]+c[h]>>1)}return bg(t,e,i),o}function Wp(t,e,n,i,r,o){if(e.component===i){if(e.component=n,r)for(var s=e.destinationEdges;s.next();){var a=s.value,l=a.toVertex,h=e.layer-l.layer;h===(a=t.linkMinLength(a))&&Wp(t,l,n,i,r,o)}if(o)for(s=e.sourceEdges;s.next();)(h=(l=(a=s.value).fromVertex).layer-e.layer)===(a=t.linkMinLength(a))&&Wp(t,l,n,i,r,o)}}function $p(t,e,n,i,r,o){if(e.component===i){if(e.component=n,r)for(var s=e.destinationEdges;s.next();)$p(t,s.value.toVertex,n,i,r,o);if(o)for(e=e.sourceEdges;e.next();)$p(t,e.value.fromVertex,n,i,r,o)}}function Zp(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Jp(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function Qp(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function tg(t,e){e.Cg=t.nh,t.nh++;for(var n=e.destinationEdges;n.next();){var i=n.value,r=i.toVertex;-1===r.Cg&&(i.forest=!0,tg(t,r))}e.finish=t.nh,t.nh++}function eg(t){for(var e=t.network.vertexes.iterator;e.next();){var n=ng(t,e.value);t.ra=Math.max(n,t.ra)}}function ng(t,e){var n=0;if(-1===e.layer){for(var i=e.destinationEdges;i.next();){var r=i.value,o=r.toVertex;r=t.linkMinLength(r),n=Math.max(n,ng(t,o)+r)}e.layer=n}else n=e.layer;return n}function ig(t,e){var n=0;if(-1===e.layer){for(var i=e.sourceEdges;i.next();){var r=i.value,o=r.fromVertex;r=t.linkMinLength(r),n=Math.max(n,ig(t,o)+r)}e.layer=n}else n=e.layer;return n}function rg(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)rg(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var i=e.sourceEdgesArrayAccess,r=i.length,o=0;o<r;o++){var s=i[o],a=s.fromVertex,l=s.toVertex;s=t.linkMinLength(s),a.layer-l.layer>s&&Wp(t,a,0,-1,!0,!1)}for(Wp(t,e,1,-1,!0,!0);0!==e.component;){for(o=0,i=1/0,a=0,l=null,s=t.network.vertexes.iterator;s.next();){var h=s.value;if(1===h.component){var u=0,c=!1,f=h.sourceEdgesArrayAccess;r=f.length;for(var d=0;d<r;d++){var p=f[d],g=p.fromVertex;u+=1,1!==g.component&&(o+=1,g=g.layer-h.layer,p=t.linkMinLength(p),i=Math.min(i,g-p))}for(r=(f=h.destinationEdgesArrayAccess).length,d=0;d<r;d++)--u,1!==(p=f[d].toVertex).component?--o:c=!0;(null===l||u<a)&&!c&&(l=h,a=u)}}if(0<o){for(n.reset();n.next();)1===(r=n.value).component&&(r.layer+=i);e.component=0}else l.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(Wp(t,e,1,-1,!0,!1);0!==e.component;){for(i=0,r=1/0,o=0,a=null,l=t.network.vertexes.iterator;l.next();)if(1===(s=l.value).component){for(h=0,u=!1,c=(f=s.sourceEdgesArrayAccess).length,d=0;d<c;d++)h+=1,1!==(p=f[d].fromVertex).component?i+=1:u=!0;for(c=(f=s.destinationEdgesArrayAccess).length,d=0;d<c;d++)--h,1!==(g=(p=f[d]).toVertex).component&&(--i,g=s.layer-g.layer,p=t.linkMinLength(p),r=Math.min(r,g-p));(null===a||h>o)&&!u&&(a=s,o=h)}if(0>i){for(n.reset();n.next();)1===(i=n.value).component&&(i.layer-=r);e.component=0}else a.component=0}}}function og(t,e,n){return 90===t.K?n&&!e.rev||!n&&e.rev?270:90:180===t.K?n&&!e.rev||!n&&e.rev?0:180:270===t.K?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function sg(t,e){var n=e.layer;for(e.index=t.zb[n],t.zb[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];r.portFromColOffset>o.portFromColOffset&&(n=!0,e[i]=o,e[i+1]=r)}}for(n=0;n<e.length;n++)(i=e[n]).valid&&-1===(i=i.toVertex).index&&sg(t,i)}function ag(t,e){var n=e.layer;e.index=t.zb[n],t.zb[n]++,e=e.sourceEdgesArrayAccess;for(var i=!0;i;)for(i=!1,n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];r.portToColOffset>o.portToColOffset&&(i=!0,e[n]=o,e[n+1]=r)}for(n=0;n<e.length;n++)(i=e[n]).valid&&-1===(i=i.fromVertex).index&&ag(t,i)}function lg(t,e,n){var i=vg(t,e),r=t.zb[e],o=Kp(t,e,n),s=Xp(t,e,n);for(n=0;n<r;n++)-1===s[n]&&(s[n]=i[n].column),-1===o[n]&&(o[n]=i[n].column);for(var a,l=!0;l;)for(l=!1,n=0;n<r-1;n++)(o[n+1]<o[n]||o[n+1]===o[n]&&s[n+1]<s[n])&&(l=!0,a=o[n],o[n]=o[n+1],o[n+1]=a,a=s[n],s[n]=s[n+1],s[n+1]=a,a=i[n],i[n]=i[n+1],i[n+1]=a);for(n=o=0;n<r;n++)(a=i[n]).index=n,o+=t.nodeMinColumnSpace(a,!0),a.column=o,o+=1,o+=t.nodeMinColumnSpace(a,!1);bg(t,e,i)}function hg(t,e,n){var i,r=vg(t,e),o=t.zb[e];n=Gp(t,e,n);var s=[];for(i=0;i<o;i++)s[i]=-1;var a=[];for(i=0;i<o;i++)a[i]=-1;for(var l=!1,h=!0;h;)for(h=!1,i=0;i<o-1;i++){var u=n[r[i].index*o+r[i+1].index],c=n[r[i+1].index*o+r[i].index],f=0,d=0,p=r[i].column,g=r[i+1].column,m=t.nodeMinColumnSpace(r[i],!0),y=t.nodeMinColumnSpace(r[i],!1),v=t.nodeMinColumnSpace(r[i+1],!0),b=t.nodeMinColumnSpace(r[i+1],!1);m=p-m+v,y=g-y+b;var w=r[i].sourceEdges.iterator;for(w.reset();w.next();)if(b=(v=w.value).fromVertex,v.valid&&b.layer===e){for(v=0;r[v]!==b;)v++;v<i&&(f+=2*(i-v),d+=2*(i+1-v)),v===i+1&&(f+=1),v>i+1&&(f+=4*(v-i),d+=4*(v-(i+1)))}for((w=r[i].destinationEdges.iterator).reset();w.next();)if(b=(v=w.value).toVertex,v.valid&&b.layer===e){for(v=0;r[v]!==b;)v++;v===i+1&&(d+=1)}for((w=r[i+1].sourceEdges.iterator).reset();w.next();)if(b=(v=w.value).fromVertex,v.valid&&b.layer===e){for(v=0;r[v]!==b;)v++;v<i&&(f+=2*(i+1-v),d+=2*(i-v)),v===i&&(d+=1),v>i+1&&(f+=4*(v-(i+1)),d+=4*(v-i))}for((w=r[i+1].destinationEdges.iterator).reset();w.next();)if(b=(v=w.value).toVertex,v.valid&&b.layer===e){for(v=0;r[v]!==b;)v++;v===i&&(f+=1)}v=b=0;var x=a[r[i].index],k=s[r[i+1].index],S=a[r[i+1].index];-1!==(w=s[r[i].index])&&(b+=Math.abs(w-p),v+=Math.abs(w-y)),-1!==x&&(b+=Math.abs(x-p),v+=Math.abs(x-y)),-1!==k&&(b+=Math.abs(k-g),v+=Math.abs(k-m)),-1!==S&&(b+=Math.abs(S-g),v+=Math.abs(S-m)),(d<f-.5||d===f&&c<u-.5||d===f&&c===u&&v<b-.5)&&(h=l=!0,r[i].column=y,r[i+1].column=m,u=r[i],r[i]=r[i+1],r[i+1]=u)}for(i=0;i<o;i++)r[i].index=i;return bg(t,e,r),l}function ug(t,e,n){for(var i=!1;cg(t,e,n);)i=!0;return i}function cg(t,e,n){var i,r=vg(t,e),o=t.zb[e],s=Xp(t,e,-1);if(0<n)for(i=0;i<o;i++)s[i]=-1;var a=Xp(t,e,1);if(0>n)for(i=0;i<o;i++)a[i]=-1;for(var l=!1,h=!0;h;)for(h=!1,i=0;i<o;i++){var u,c=r[i].column,f=t.nodeMinColumnSpace(r[i],!0),d=t.nodeMinColumnSpace(r[i],!1);u=0>i-1||c-r[i-1].column-1>f+t.nodeMinColumnSpace(r[i-1],!1)?c-1:c,f=i+1>=o||r[i+1].column-c-1>d+t.nodeMinColumnSpace(r[i+1],!0)?c+1:c;var p=d=0,g=0;if(0>=n)for(var m=r[i].sourceEdges.iterator;m.next();){var y=m.value,v=y.fromVertex;if(y.valid&&v.layer!==e){var b=Up(y),w=y.portFromColOffset;y=y.portToColOffset,v=v.column,d+=(Math.abs(c+y-(v+w))+1)*b,p+=(Math.abs(u+y-(v+w))+1)*b,g+=(Math.abs(f+y-(v+w))+1)*b}}if(0<=n)for(m=r[i].destinationEdges.iterator;m.next();)v=(y=m.value).toVertex,y.valid&&v.layer!==e&&(b=Up(y),w=y.portFromColOffset,y=y.portToColOffset,v=v.column,d+=(Math.abs(c+w-(v+y))+1)*b,p+=(Math.abs(u+w-(v+y))+1)*b,g+=(Math.abs(f+w-(v+y))+1)*b);y=w=b=0,v=a[r[i].index],-1!==(m=s[r[i].index])&&(b+=Math.abs(m-c),w+=Math.abs(m-u),y+=Math.abs(m-f)),-1!==v&&(b+=Math.abs(v-c),w+=Math.abs(v-u),y+=Math.abs(v-f)),p<d||p===d&&w<b?(h=l=!0,r[i].column=u):(g<d||g===d&&y<b)&&(h=l=!0,r[i].column=f)}return bg(t,e,r),t.normalize(),l}function fg(t,e,n){var i=vg(t,e),r=t.zb[e],o=Kp(t,e,n),s=[];for(n=0;n<r;n++)s[n]=o[n];for(o=!0;o;)for(o=!1,n=0;n<r;n++){var a=i[n].column,l=t.nodeMinColumnSpace(i[n],!0),h=t.nodeMinColumnSpace(i[n],!1),u=0;if(-1===s[n])if(0===n&&n===r-1)u=a;else if(0===n){var c=i[n+1].column;u=c-a===h+t.nodeMinColumnSpace(i[n+1],!0)?a-1:a}else u=n===r-1?a-(c=i[n-1].column)===l+t.nodeMinColumnSpace(i[n-1],!1)?a+1:a:((l=(c=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+l+1)+(h=(c=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-h-1))/2|0;else 0===n&&n===r-1?u=s[n]:0===n?(h=(c=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-h-1,u=Math.min(s[n],h)):n===r-1?(l=(c=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+l+1,u=Math.max(s[n],l)):(l=(c=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+l+1,h=(c=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-h-1,l<s[n]&&s[n]<h?u=s[n]:l>=s[n]?u=l:h<=s[n]&&(u=h));u!==a&&(o=!0,i[n].column=u)}bg(t,e,i),t.normalize()}function dg(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var r=i.value,o=t.nodeMinColumnSpace(r,!0),s=t.nodeMinColumnSpace(r,!1);if(r.column-o<=e&&r.column+s>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)(n=i.value).column>e&&(--n.column,t=!0);return t}function pg(t,e){var n,i=e+1,r=[],o=[];for(n=0;n<=t.ra;n++)r[n]=!1,o[n]=!1;for(var s=t.network.vertexes.iterator;s.next();){var a=(n=s.value).column-t.nodeMinColumnSpace(n,!0),l=n.column+t.nodeMinColumnSpace(n,!1);a<=e&&l>=e&&(r[n.layer]=!0),a<=i&&l>=i&&(o[n.layer]=!0)}for(a=!0,i=!1,n=0;n<=t.ra;n++)a=a&&!(r[n]&&o[n]);if(a)for(s.reset();s.next();)(t=s.value).column>e&&(--t.column,i=!0);return i}function gg(t,e){for(var n=0;n<=t.Ba;n++)for(;dg(t,n););for(t.normalize(),n=0;n<t.Ba;n++)for(;pg(t,n););var i;if(t.normalize(),0<e)for(n=0;n<=t.Ba;n++){var r=qp(t),o=Yp(t);for(i=o+1;o<i;){i=o,mg(t,n,1);var s=Yp(t);s>o?Hp(t,r):s<o&&(o=s,r=qp(t))}}if(0>e)for(n=t.Ba;0<=n;n--)for(r=qp(t),i=(o=Yp(t))+1;o<i;)i=o,mg(t,n,-1),(s=Yp(t))>o?Hp(t,r):s<o&&(o=s,r=qp(t));t.normalize()}function mg(t,e,n){t.Dc=0;for(var i=t.network.vertexes.iterator;i.next();)i.value.component=-1;if(0<n)for(i.reset();i.next();){var r=i.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.Dc)}if(0>n)for(i.reset();i.next();)(r=i.value).column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.Dc);for(t.Dc++,i.reset();i.next();)-1===(e=i.value).component&&($p(t,e,t.Dc,-1,!0,!0),t.Dc++);var o;for(e=[],o=0;o<t.Dc*t.Dc;o++)e[o]=!1;for(r=[],o=0;o<(t.ra+1)*(t.Ba+1);o++)r[o]=-1;for(i.reset();i.next();)for(var s=(o=i.value).layer,a=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),l=Math.min(t.Ba,o.column+t.nodeMinColumnSpace(o,!1));a<=l;a++)r[s*(t.Ba+1)+a]=o.component;for(o=0;o<=t.ra;o++){if(0<n)for(s=0;s<t.Ba;s++)-1!==r[o*(t.Ba+1)+s]&&-1!==r[o*(t.Ba+1)+s+1]&&r[o*(t.Ba+1)+s]!==r[o*(t.Ba+1)+s+1]&&(e[r[o*(t.Ba+1)+s]*t.Dc+r[o*(t.Ba+1)+s+1]]=!0);if(0>n)for(s=t.Ba;0<s;s--)-1!==r[o*(t.Ba+1)+s]&&-1!==r[o*(t.Ba+1)+s-1]&&r[o*(t.Ba+1)+s]!==r[o*(t.Ba+1)+s-1]&&(e[r[o*(t.Ba+1)+s]*t.Dc+r[o*(t.Ba+1)+s-1]]=!0)}for(r=[],o=0;o<t.Dc;o++)r[o]=!0;for((s=[]).push(0);0!==s.length;)if(l=s[s.length-1],s.pop(),r[l])for(r[l]=!1,o=0;o<t.Dc;o++)e[l*t.Dc+o]&&s.splice(0,0,o);if(0<n)for(i.reset();i.next();)r[(t=i.value).component]&&--t.column;if(0>n)for(i.reset();i.next();)r[(n=i.value).component]&&(n.column+=1)}function yg(t,e){return 270===t.K?e?Oe:Fe:90===t.K?e?Fe:Oe:180===t.K?e?De:je:e?je:De}function vg(t,e){var n=t.zb[e];if(n>=t.te.length){for(var i=[],r=0;r<t.te.length;r++)i[r]=t.te[r];t.te=i}for(null==t.te[n]?i=[]:(i=t.te[n],t.te[n]=null),t=t.Yo[e],e=0;e<t.length;e++)i[(n=t[e]).index]=n;return i}function bg(t,e,n){t.te[t.zb[e]]=n}Zd.className="CircularLayout",Zd.ConstantSpacing=hp,Zd.ConstantDistance=up,Zd.ConstantAngle=cp,Zd.Packed=fp,Zd.Clockwise=dp,Zd.Counterclockwise=pp,Zd.BidirectionalLeft=gp,Zd.BidirectionalRight=mp,Zd.Forwards=yp,Zd.Reverse=vp,Zd.Ascending=bp,Zd.Descending=wp,Zd.Optimized=xp,Zd.Pythagorean=kp,Zd.Circular=Sp,_p.prototype.compare=function(t,e){if(0<t&&0>this.rm||Math.abs(t)<Math.abs(this.rm)&&!(0>t&&0<this.rm))for(this.rm=t,this.Mk=[],this.Xm=[],t=0;t<e.length;t++)this.Mk[t]=e[t].bounds.x,this.Xm[t]=e[t].bounds.y},_p.prototype.commit=function(t){if(null!==this.Mk&&null!==this.Xm)for(var e=0;e<this.Mk.length;e++){var n=t.J(e);n.x=this.Mk[e],n.y=this.Xm[e]}},_p.className="VertexArrangement",u(Cp,_f),Cp.prototype.createVertex=function(){return new Mp(this)},Cp.prototype.createEdge=function(){return new Tp(this)},Cp.className="CircularNetwork",u(Mp,Nf),c.Object.defineProperties(Mp.prototype,{diameter:{get:function(){return this.Bj},set:function(t){this.Bj!==t&&(this.Bj=t)}},actualAngle:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}}}),Mp.className="CircularVertex",u(Tp,Ef),Tp.className="CircularEdge",u(Np,uf),Np.prototype.cloneProtected=function(t){uf.prototype.cloneProtected.call(this,t),t.Kd.assign(this.Kd),t.jn=this.jn,t.hf=this.hf,t.fd=this.fd,t.Jl=this.Jl,t.Sn=this.Sn,t.Xf=this.Xf,t.Uo=this.Uo,t.sp=this.sp,t.fl=this.fl,t.el=this.el,t.cl=this.cl,t.dl=this.dl,t.Jn=this.Jn,t.In=this.In},Np.prototype.serializeLayoutProperties=function(t,e){uf.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},Np.prototype.deserializeLayoutProperties=function(t,e,n,i){uf.prototype.deserializeLayoutProperties.call(this,t,e,n,i),this.arrangementSpacing=new Dt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},Np.prototype.createNetwork=function(){return new Ip(this)},Np.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.Qw()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.vq();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.Bv(),this.wo=0,this.needsClusterLayout()){for(var i=(n=(e=this.network).Uy()).iterator;i.next();){this.network=i.value;for(var r=this.network.vertexes.iterator;r.next();){var o=r.value;o.Fd=o.vertexes.count,o.Qh=1,o.kk=null,o.Ke=null}Ap(this,0,t)}this.network=e;var s=i=n.iterator;i=this.arrangementSpacing;var a=s.count,l=!0;o=r=0;for(var h=T(),u=0;u<a+e.vertexes.count+2;u++)h[u]=null;a=0,s.reset();for(var c=Rt.alloc();s.next();)if(this.computeBounds(u=s.value,c),l)l=!1,r=c.x+c.width/2,o=c.y+c.height/2,h[0]=new dt(c.x+c.width+i.width,c.y),h[1]=new dt(c.x,c.y+c.height+i.height),a=2;else{var f=Lp(h,a,r,o,c.width,c.height,i),d=h[f],p=new dt(d.x+c.width+i.width,d.y),g=new dt(d.x,d.y+c.height+i.height);for(f+1<a&&h.splice(f+1,0,null),h[f]=p,h[f+1]=g,a++,f=d.x-c.x,d=d.y-c.y,u=u.vertexes.iterator;u.next();)(p=u.value).centerX+=f,p.centerY+=d}for(Rt.free(c),u=e.vertexes.iterator;u.next();)f=(s=u.value).bounds,2>a?(r=f.x+f.width/2,o=f.y+f.height/2,h[0]=new dt(f.x+f.width+i.width,f.y),h[1]=new dt(f.x,f.y+f.height+i.height),a=2):(d=new dt((c=h[l=Lp(h,a,r,o,f.width,f.height,i)]).x+f.width+i.width,c.y),f=new dt(c.x,c.y+f.height+i.height),l+1<a&&h.splice(l+1,0,null),h[l]=d,h[l+1]=f,a++,s.centerX=c.x+s.width/2,s.centerY=c.y+s.height/2);for(N(h),i=n.iterator;i.next();){for(r=(n=i.value).vertexes.iterator;r.next();)e.Bg(r.value);for(n=n.edges.iterator;n.next();)e.jm(n.value)}}Dp(this,t),this.updateParts()}this.Jl=t,this.network=null,this.isValidLayout=!0}},Np.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Kc(n)&&2<++t)return!0;if(10<e)break;e++}return!1},Np.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Pc(i.bounds)}return e},Np.prototype.Bv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Np.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Nv();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var i=this.network.ij(n);null===i&&(i=this.network.hk(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var r=i.destinationEdges;r.next();){var o=r.value;if(o.toVertex===t){n=o;break}}if(null===n)for(r=i.sourceEdges;r.next();)if((o=r.value).fromVertex===t){n=o;break}null===n&&(n=this.network.yk(t,i,null)),n.length=this.defaultCommentSpringLength}}},Np.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,i=this.moveLimit;return e<-i?e=-i:e>i&&(e=i),n<-i?n=-i:n>i&&(n=i),t.centerX+=e,t.centerY+=n,e*e+n*n},Np.prototype.moveFixedVertex=function(){},Np.prototype.commitLayout=function(){this.zw(),this.commitNodes(),this.isRouting&&this.commitLinks()},Np.prototype.zw=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Te,e.toSpot=Te)}},Np.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=Rt.alloc();this.computeBounds(this.network,n),t=(e=this.arrangementOrigin).x-n.x,e=e.y-n.y,Rt.free(n)}n=Rt.alloc();for(var i=this.network.vertexes.iterator;i.next();){var r=i.value;0===t&&0===e||(n.assign(r.bounds),n.x+=t,n.y+=e,r.bounds=n),r.commit()}Rt.free(n)},Np.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Np.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.fl:t},Np.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.el:t},Np.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.cl:t},Np.prototype.electricalFieldX=function(){return 0},Np.prototype.electricalFieldY=function(){return 0},Np.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.dl:t},Np.prototype.gravitationalFieldX=function(){return 0},Np.prototype.gravitationalFieldY=function(){return 0},Np.prototype.isFixed=function(t){return t.isFixed},c.Object.defineProperties(Np.prototype,{currentIteration:{get:function(){return this.wo}},arrangementSpacing:{get:function(){return this.Kd},set:function(t){this.Kd.w(t)||(this.Kd.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.jn},set:function(t){this.jn!==t&&(this.jn=t,this.C())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.C())}},comments:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t,this.C())}},maxIterations:{get:function(){return this.Jl},set:function(t){this.Jl!==t&&0<=t&&(this.Jl=t,this.C())}},epsilonDistance:{get:function(){return this.Sn},set:function(t){this.Sn!==t&&0<t&&(this.Sn=t,this.C())}},infinityDistance:{get:function(){return this.Xf},set:function(t){this.Xf!==t&&1<t&&(this.Xf=t,this.C())}},moveLimit:{get:function(){return this.Uo},set:function(t){this.Uo!==t&&1<t&&(this.Uo=t,this.C())}},randomNumberGenerator:{get:function(){return this.sp},set:function(t){this.sp!==t&&(null!==t&&"function"!=typeof t.random&&v('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.sp=t)}},defaultSpringStiffness:{get:function(){return this.fl},set:function(t){this.fl!==t&&(this.fl=t,this.C())}},defaultSpringLength:{get:function(){return this.el},set:function(t){this.el!==t&&(this.el=t,this.C())}},defaultElectricalCharge:{get:function(){return this.cl},set:function(t){this.cl!==t&&(this.cl=t,this.C())}},defaultGravitationalMass:{get:function(){return this.dl},set:function(t){this.dl!==t&&(this.dl=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Jn},set:function(t){this.Jn!==t&&(this.Jn=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.In},set:function(t){this.In!==t&&(this.In=t,this.C())}}}),Np.className="ForceDirectedLayout",Fp.className="ForceDirectedSubnet",u(Ip,_f),Ip.prototype.createVertex=function(){return new Rp(this)},Ip.prototype.createEdge=function(){return new Bp(this)},Ip.className="ForceDirectedNetwork",u(Rp,Nf),Rp.prototype.serializeVertexProperties=function(t,e){Nf.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},Rp.prototype.wq=function(t,e,n,i){Nf.prototype.wq.call(this,t,e,n,i),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},c.Object.defineProperties(Rp.prototype,{isFixed:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},charge:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},mass:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},forceX:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},forceY:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}}}),Rp.className="ForceDirectedVertex",u(Bp,Ef),Bp.prototype.serializeEdgeProperties=function(t,e){Ef.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Bp.prototype.deserializeEdgeProperties=function(t,e,n,i){Ef.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.stiffness=t.stiffness,this.length=t.length},c.Object.defineProperties(Bp.prototype,{stiffness:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},length:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}}}),Bp.className="ForceDirectedEdge",zp.prototype.random=function(){var t=this.seed%this.Q*this.Wy-this.seed/this.Q*this.Zy;return this.seed=0<t?t:t+this.Yy,this.seed*this.Xy},zp.className="RandomNumberGenerator",u(Vp,uf),Vp.prototype.cloneProtected=function(t){uf.prototype.cloneProtected.call(this,t),t.qe=this.qe,t.Yb=this.Yb,t.K=this.K,t.al=this.al,t.El=this.El,t.tl=this.tl,t.Mj=this.Mj,t.Qk=this.Qk,t.ng=this.ng,t.hf=this.hf,t.Eo=this.Eo},Vp.prototype.serializeLayoutProperties=function(t,e){uf.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.Gi=this.Gi,t.Ba=this.Ba,t.lh=this.lh,t.nc=this.nc,t.zb=this.zb,t.nh=this.nh,t.Dc=this.Dc,t.Tc={x:this.Tc.x,y:this.Tc.y}},Vp.prototype.deserializeLayoutProperties=function(t,e,n,i){uf.prototype.deserializeLayoutProperties.call(this,t,e,n,i),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=G(Vp,t.cycleRemoveOption),this.layeringOption=G(Vp,t.layeringOption),this.initializeOption=G(Vp,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=G(Vp,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.Gi=t.Gi,this.Ba=t.Ba,this.lh=t.lh,this.nc=t.nc,this.zb=t.zb,this.nh=t.nh,this.Dc=t.Dc,this.Tc=new dt(this.Tc.x,this.Tc.y)},Vp.prototype.ib=function(t){t.classType===Vp?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:v("Unknown enum value: "+t):uf.prototype.ib.call(this,t)},Vp.prototype.createNetwork=function(){return new Og(this)},Vp.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Gi=-1,this.nc=this.lh=0,this.Yo=this.Xo=this.Rj=null,t=0;t<this.te.length;t++)this.te[t]=null;if(0<this.network.vertexes.count){if(this.network.vq(),this.Qw())return;for(this.cycleRemoveOption!==kg&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===kg&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){var r=(i=e[n]).fromVertex,o=i.toVertex;if(!(i.valid||(null===r.node&&null===r.data||null===o.node&&null===o.data)&&r.layer===o.layer)){var s=0,a=0,l=0,h=0;if(null!==i.link){if(null===(a=i.link))continue;var u=r.node;if(s=o.node,null===u||null===s)continue;var c=a.fromNode;l=a.toNode;var f=a.fromPort;if(a=a.toPort,i.rev){h=c;var d=f;c=l,f=a,l=h,a=d}var p=r.focus;h=o.focus;var g=i.rev?o.bounds:r.bounds;d=dt.alloc(),u!==c?g.u()&&c.isVisible()?c.actualBounds.u()?(c.Cf(f,le,d),d.x+=c.actualBounds.x-g.x,d.y+=c.actualBounds.y-g.y):(c.Cf(f,le,d),d.u()||d.assign(p)):d.assign(p):g.u()?(c.Cf(f,le,d),d.u()||d.assign(p)):d.assign(p),c=i.rev?r.bounds:o.bounds,u=dt.alloc(),s!==l?c.u()&&l.isVisible()?l.actualBounds.u()?(l.Cf(a,le,u),u.x+=l.actualBounds.x-c.x,u.y+=l.actualBounds.y-c.y):(l.Cf(a,le,u),u.u()||u.assign(h)):u.assign(h):c.u()?(l.Cf(a,le,u),u.u()||u.assign(h)):u.assign(h),90===this.K||270===this.K?(s=Math.round((d.x-p.x)/this.Yb),l=d.x,a=Math.round((u.x-h.x)/this.Yb),h=u.x):(s=Math.round((d.y-p.y)/this.Yb),l=d.y,a=Math.round((u.y-h.y)/this.Yb),h=u.y),dt.free(d),dt.free(u),i.portFromColOffset=s,i.portFromPos=l,i.portToColOffset=a,i.portToPos=h}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(d=r.layer,u=o.layer,c=0,null!==(g=i.link)){var m=g.fromPort,y=g.toPort;if(null!==m&&null!==y){var v=g.fromNode;if(f=g.toNode,null!==v&&null!==f){var b=yg(this,!0),w=yg(this,!1),x=this.setsPortSpots?b:g.computeSpot(!0,m);p=this.setsPortSpots?w:g.computeSpot(!1,y);var k=g.isOrthogonal;x.Mc()&&x.Df(w)&&p.Mc()&&p.Df(b)?c=0:(b=g.getLinkPoint(v,m,x,!0,k,f,y,dt.alloc()),w=g.getLinkDirection(v,m,b,x,!0,k,f,y),dt.free(b),x.Rt()||w!==og(this,i,!0)?this.setsPortSpots&&null!==v&&1===v.ports.count&&i.rev&&(c+=1):c+=1,x=g.getLinkPoint(f,y,p,!1,k,v,m,dt.alloc()),g=g.getLinkDirection(f,y,x,p,!1,k,v,m),dt.free(x),p.Rt()||g!==og(this,i,!1)?this.setsPortSpots&&null!==f&&1===f.ports.count&&i.rev&&(c+=2):c+=2)}}}if(c=1===(f=c)||3===f,(f=2===f||3===f)&&((p=t.createVertex()).node=null,p.wf=1,p.layer=d,p.near=r,t.Bg(p),(r=t.yk(r,p,i.link)).valid=!1,r.rev=i.rev,r.portFromColOffset=s,r.portToColOffset=0,r.portFromPos=l,r.portToPos=0,r=p),g=1,c&&g--,d-u>g&&0<d){for(i.valid=!1,(p=t.createVertex()).node=null,p.wf=2,p.layer=d-1,t.Bg(p),(r=t.yk(r,p,i.link)).valid=!0,r.rev=i.rev,r.portFromColOffset=f?0:s,r.portToColOffset=0,r.portFromPos=f?0:l,r.portToPos=0,r=p,d--;d-u>g&&0<d;)(p=t.createVertex()).node=null,p.wf=3,p.layer=d-1,t.Bg(p),(r=t.yk(r,p,i.link)).valid=!0,r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=p,d--;(r=t.yk(p,o,i.link)).valid=!c,c&&(p.near=o),r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=a,r.portFromPos=0,r.portToPos=h}else i.valid=!0}}for(t=this.zb=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Gi=-1,n=this.nc=this.lh=0;n<=this.ra;n++)t[n]>t[this.nc]&&(this.Gi=t[n]-1,this.nc=n),t[n]<t[this.lh]&&(this.lh=n);for(this.Yo=[],n=0;n<t.length;n++)this.Yo[n]=[];for(e.reset();e.next();)this.Yo[(t=e.value).layer][t.index]=t;for(this.Ba=-1,t=0;t<=this.ra;t++){for(e=vg(this,t),n=0,i=this.zb[t],o=0;o<i;o++)n+=this.nodeMinColumnSpace(r=e[o],!0),r.column=n,n+=1,n+=this.nodeMinColumnSpace(r,!1);this.Ba=Math.max(this.Ba,n-1),bg(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Vp.prototype.linkMinLength=function(){return 1},Vp.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.K||270===this.K?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Vp.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var n=e?t.Gk:t.Fk;return null!==n?n:90===(n=this.K)||270===n?e?t.Gk=t.focus.x/this.Yb+1|0:t.Fk=(t.bounds.width-t.focus.x)/this.Yb+1|0:e?t.Gk=t.focus.y/this.Yb+1|0:t.Fk=(t.bounds.height-t.focus.y)/this.Yb+1|0},Vp.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var n=Gp(this,e,1),i=this.zb[e],r=0;r<i;r++)for(var o=r;o<i;o++)t+=n[r*i+o];return t},Vp.prototype.normalize=function(){var t=1/0;this.Ba=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ba=Math.max(this.Ba,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ba-=t},Vp.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.al){default:case xg:var e=0,n=(t=this.network).vertexes.count-1,i=[];i.length=n+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;null!==Zp(t);){for(r=Jp(t);null!==r;)i[n]=r,n--,r.valid=!1,r=Jp(t);for(r=Qp(t);null!==r;)i[e]=r,e++,r.valid=!1,r=Qp(t);r=null;for(var o=0,s=this.network.vertexes.iterator;s.next();){var a=s.value;if(a.valid){for(var l=0,h=a.destinationEdges;h.next();)h.value.toVertex.valid&&l++;h=0;for(var u=a.sourceEdges;u.next();)u.value.fromVertex.valid&&h++;(null===r||o<l-h)&&(r=a,o=l-h)}}null!==r&&(i[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.index>e.toVertex.index&&(t.Mm(e),e.rev=!0);break;case wg:for(i=this.network.vertexes.iterator;i.next();)(t=i.value).Cg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.nh=0,i.reset();i.next();)0===(e=i.value).sourceEdges.count&&tg(this,e);for(i.reset();i.next();)-1===(e=i.value).Cg&&tg(this,e);for(t.reset();t.next();)(i=t.value).forest||(n=(e=i.fromVertex).finish,o=(r=i.toVertex).finish,r.Cg<e.Cg&&n<o&&(this.network.Mm(i),i.rev=!0));break;case kg:for(e=(t=this.network).vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(1/0>i){if(0>i)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)void 0===(r=i[(n=e.value).layer])?i[n.layer]=[n]:r.push(n);for(n=e=0;n<i.length;n++)if((r=i[n])&&0!==r.length){if(0<n)for(o=0;o<r.length;o++)r[o].layer-=e}else e++;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.layer<e.toVertex.layer&&(t.Mm(e),e.rev=!0)}}},Vp.prototype.assignLayers=function(){switch(this.El){case _g:eg(this);break;case Cg:for(var t,e=this.network.vertexes.iterator;e.next();)t=ig(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)(t=e.value).layer=this.ra-t.layer;break;default:case Sg:for(eg(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&rg(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.ra=Math.max(this.ra,n.layer)}}},Vp.prototype.initializeIndices=function(){switch(this.tl){default:case Tg:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.zb[n],this.zb[n]++}break;case Mg:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&sg(this,n);break;case Pg:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&ag(this,n)}},Vp.prototype.reduceCrossings=function(){var t,e,n,i,r,o=this.countCrossings(),s=qp(this);for(t=0;t<this.Mj;t++){for(e=0;e<=this.ra;e++)lg(this,e,1),hg(this,e,1);var a=this.countCrossings();for(a<o&&(o=a,s=qp(this)),e=this.ra;0<=e;e--)lg(this,e,-1),hg(this,e,-1);(a=this.countCrossings())<o&&(o=a,s=qp(this))}for(Hp(this,s),t=0;t<this.Mj;t++){for(e=0;e<=this.ra;e++)lg(this,e,0),hg(this,e,0);for((a=this.countCrossings())<o&&(o=a,s=qp(this)),e=this.ra;0<=e;e--)lg(this,e,0),hg(this,e,0);(a=this.countCrossings())<o&&(o=a,s=qp(this))}switch(Hp(this,s),this.Qk){case Ng:break;case Eg:for(r=o+1;(e=this.countCrossings())<r;)for(r=e,t=this.ra;0<=t;t--)for(i=0;i<=t;i++){for(n=!0;n;)for(n=!1,e=t;e>=i;e--)n=hg(this,e,-1)||n;for((a=this.countCrossings())>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=hg(this,e,1)||n;for((a=this.countCrossings())>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=hg(this,e,1)||n;for(a>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=hg(this,e,-1)||n;for(a>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=hg(this,e,0)||n;for(a>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=hg(this,e,0)||n;a>=o?Hp(this,s):(o=a,s=qp(this))}break;default:case Ag:for(t=this.ra,i=0,r=o+1;(e=this.countCrossings())<r;){for(r=e,n=!0;n;)for(n=!1,e=t;e>=i;e--)n=hg(this,e,-1)||n;for((a=this.countCrossings())>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=hg(this,e,1)||n;for((a=this.countCrossings())>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=hg(this,e,1)||n;for(a>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=hg(this,e,-1)||n;for(a>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=hg(this,e,0)||n;for(a>=o?Hp(this,s):(o=a,s=qp(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=hg(this,e,0)||n;a>=o?Hp(this,s):(o=a,s=qp(this))}}Hp(this,s)},Vp.prototype.straightenAndPack=function(){var t=0!=(1&this.ng),e=7===this.ng;if(1e3<this.network.edges.count&&!e&&(t=!1),t){var n=[];for(e=0;e<=this.ra;e++)n[e]=0;for(var i,r=this.network.vertexes.iterator;r.next();){var o=r.value;e=o.layer,i=o.column,o=this.nodeMinColumnSpace(o,!1),n[e]=Math.max(n[e],i+o)}for(r.reset();r.next();)(o=r.value).column=(8*(this.Ba-n[e=o.layer])>>1)+8*(i=o.column);this.Ba*=8}if(0!=(2&this.ng))for(n=!0;n;){for(n=!1,e=this.nc+1;e<=this.ra;e++)n=ug(this,e,1)||n;for(e=this.nc-1;0<=e;e--)n=ug(this,e,-1)||n;n=ug(this,this.nc,0)||n}if(0!=(4&this.ng)){for(e=this.nc+1;e<=this.ra;e++)fg(this,e,1);for(e=this.nc-1;0<=e;e--)fg(this,e,-1);fg(this,this.nc,0)}if(t&&(gg(this,-1),gg(this,1)),0!=(2&this.ng))for(n=!0;n;){for(n=!1,n=ug(this,this.nc,0)||n,e=this.nc+1;e<=this.ra;e++)n=ug(this,e,0)||n;for(e=this.nc-1;0<=e;e--)n=ug(this,e,0)||n}},Vp.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=yg(this,!0),e=yg(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;null!==i&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.Dv(),this.isRouting&&this.commitLinks()},Vp.prototype.commitNodes=function(){this.Ud=[],this.vd=[],this.ud=[],this.Ia=[];for(var t=0;t<=this.ra;t++)this.Ud[t]=0,this.vd[t]=0,this.ud[t]=0,this.Ia[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.Ud[n]=Math.max(this.Ud[n],this.nodeMinLayerSpace(e,!0)),this.vd[n]=Math.max(this.vd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.qe;for(var i=0;i<=this.ra;i++){var r=n;0>=this.Ud[i]+this.vd[i]&&(r=0),0<i&&(e+=r/2),90===this.K||0===this.K?(this.ud[i]=e+=this.vd[i],e+=this.Ud[i]):(this.ud[i]=e+=this.Ud[i],e+=this.vd[i]),i<this.ra&&(e+=r/2),this.Ia[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.ra;i++)270===this.K?this.ud[i]=e.y+this.ud[i]:90===this.K?(this.ud[i]=e.y+n-this.ud[i],this.Ia[i]=n-this.Ia[i]):180===this.K?this.ud[i]=e.x+this.ud[i]:(this.ud[i]=e.x+n-this.ud[i],this.Ia[i]=n-this.Ia[i]);for(t.reset(),n=i=1/0;t.next();){var o=(r=t.value).layer,s=0|r.column;if(270===this.K||90===this.K){var a=e.x+this.Yb*s;o=this.ud[o]}else a=this.ud[o],o=e.y+this.Yb*s;r.centerX=a,r.centerY=o,i=Math.min(r.x,i),n=Math.min(r.y,n)}for(this.Tc=new dt(i=e.x-i,e=e.y-n),t.reset();t.next();)(n=t.value).x+=i,n.y+=e,n.commit()},Vp.prototype.Dv=function(){for(var t=0,e=this.qe,n=0;n<=this.ra;n++)t+=this.Ud[n],t+=this.vd[n];t+=this.ra*e,e=[],n=this.Yb*this.Ba;for(var i=this.maxLayer;0<=i;i--)e.push(270===this.K?0===i?new Rt(0,0,n,Math.abs(this.Ia[0])):new Rt(0,this.Ia[i-1],n,Math.abs(this.Ia[i-1]-this.Ia[i])):90===this.K?0===i?new Rt(0,this.Ia[0],n,Math.abs(this.Ia[0]-t)):new Rt(0,this.Ia[i],n,Math.abs(this.Ia[i-1]-this.Ia[i])):180===this.K?0===i?new Rt(0,0,Math.abs(this.Ia[0]),n):new Rt(this.Ia[i-1],0,Math.abs(this.Ia[i-1]-this.Ia[i]),n):0===i?new Rt(this.Ia[0],0,Math.abs(this.Ia[0]-t),n):new Rt(this.Ia[i],0,Math.abs(this.Ia[i-1]-this.Ia[i]),n));this.commitLayers(e,this.Tc)},Vp.prototype.commitLayers=function(){},Vp.prototype.commitLinks=function(){for(var t,e=this.network.edges.iterator;e.next();)null!==(t=e.value.link)&&(t.Rh(),t.jk(),t.xf());for(e.reset();e.next();)null!==(t=e.value.link)&&t.uj();for(e.reset();e.next();){var n=e.value;if(null!==(t=n.link)){t.Rh();var i=t,r=i.fromNode,o=i.toNode,s=i.fromPort,a=i.toPort;if(null!==r){var l=r.findVisibleNode();null!==l&&l!==r&&(r=l,s=l.port)}null!==o&&null!==(l=o.findVisibleNode())&&l!==o&&(o=l,a=l.port);var h=t.computeSpot(!0,s);l=t.computeSpot(!1,a);var u=n.fromVertex,c=n.toVertex;if(n.valid){if(t.curve===Mc&&4===t.pointsCount)if(u.column===c.column)n=t.getLinkPoint(r,s,h,!0,!1,o,a),s=t.getLinkPoint(o,a,l,!1,!1,r,s),n.u()||n.set(r.actualBounds.center),s.u()||s.set(o.actualBounds.center),t.jk(),t.vf(n.x,n.y),t.vf((2*n.x+s.x)/3,(2*n.y+s.y)/3),t.vf((n.x+2*s.x)/3,(n.y+2*s.y)/3),t.vf(s.x,s.y);else{var f=!1,d=!1;if(null!==s&&h===ie&&(f=!0),null!==a&&l===ie&&(d=!0),f||d){var p=t.i(0).x;n=t.i(0).y,u=t.i(3).x,i=t.i(3).y,f&&(90===this.K||270===this.K?(f=p,c=(n+i)/2):(f=(p+u)/2,c=n),t.L(1,f,c),(h=t.getLinkPoint(r,s,h,!0,!1,o,a)).u()||h.set(r.actualBounds.center),t.L(0,h.x,h.y)),d&&(90===this.K||270===this.K?(h=u,n=(n+i)/2):(h=(p+u)/2,n=i),t.L(2,h,n),(r=t.getLinkPoint(o,a,l,!1,!1,r,s)).u()||r.set(o.actualBounds.center),t.L(3,r.x,r.y))}}t.xf()}else if(u.layer===c.layer)t.xf();else{if(f=d=!1,p=t.firstPickIndex+1,t.isOrthogonal){f=!0;var g=t.pointsCount;4<g&&t.points.removeRange(2,g-3)}else if(t.curve===Mc)d=!0,4<(g=t.pointsCount)&&t.points.removeRange(2,g-3),4===g&&(p=2);else{var m=h===ie,y=l===ie;2<(g=t.pointsCount)&&m&&y?t.points.removeRange(1,g-2):3<g&&m&&!y?t.points.removeRange(1,g-3):3<g&&!m&&y?t.points.removeRange(2,g-2):4<g&&!m&&!y&&t.points.removeRange(2,g-3)}if(n.rev){for(;null!==c&&u!==c;){var v=g=null;for(m=c.sourceEdges.iterator;m.next()&&((y=m.value).link!==n.link||(v=y.toVertex,null!==(g=y.fromVertex).node)););if(g!==u){m=t.i(p-1).x,y=t.i(p-1).y;var b=g.centerX,w=g.centerY;if(f)180===this.K||0===this.K?p===t.firstPickIndex+1?(t.m(p++,m,y),t.m(p++,m,w)):(null!==v?v.centerY:y)!==w&&(t.m(p++,v=this.Ia[g.layer-1]+this.Tc.x,y),t.m(p++,v,w)):p===t.firstPickIndex+1?(t.m(p++,m,y),t.m(p++,b,y)):(null!==v?v.centerX:m)!==b&&(t.m(p++,m,v=this.Ia[g.layer-1]+this.Tc.y),t.m(p++,b,v));else if(p===t.firstPickIndex+1){v=Math.max(10,this.Ud[c.layer]);var x=Math.max(10,this.vd[c.layer]);if(d)180===this.K?b<=c.bounds.x?(t.m(p++,(c=c.bounds.x)-v,w),t.m(p++,c,w),t.m(p++,c+x,w)):(t.m(p++,b-v,w),t.m(p++,b,w),t.m(p++,b+x,w)):90===this.K?w>=c.bounds.bottom?(t.m(p++,b,(c=c.bounds.y+c.bounds.height)+x),t.m(p++,b,c),t.m(p++,b,c-v)):(t.m(p++,b,w+x),t.m(p++,b,w),t.m(p++,b,w-v)):270===this.K?w<=c.bounds.y?(t.m(p++,b,(c=c.bounds.y)-v),t.m(p++,b,c),t.m(p++,b,c+x)):(t.m(p++,b,w-v),t.m(p++,b,w),t.m(p++,b,w+x)):0===this.K&&(b>=c.bounds.right?(t.m(p++,(c=c.bounds.x+c.bounds.width)+x,w),t.m(p++,c,w),t.m(p++,c-v,w)):(t.m(p++,b+x,w),t.m(p++,b,w),t.m(p++,b-v,w)));else{t.m(p++,m,y);var k=0;180===this.K||0===this.K?((180===this.K?b>=c.bounds.right:b<=c.bounds.x)&&(k=(0===this.K?-v:x)/2),t.m(p++,m+k,w)):((270===this.K?w>=c.bounds.bottom:w<=c.bounds.y)&&(k=(90===this.K?-v:x)/2),t.m(p++,b,y+k)),t.m(p++,b,w)}}else v=Math.max(10,this.Ud[g.layer]),x=Math.max(10,this.vd[g.layer]),180===this.K?(d&&t.m(p++,b-v,w),t.m(p++,b,w),d&&t.m(p++,b+x,w)):90===this.K?(d&&t.m(p++,b,w+x),t.m(p++,b,w),d&&t.m(p++,b,w-v)):270===this.K?(d&&t.m(p++,b,w-v),t.m(p++,b,w),d&&t.m(p++,b,w+x)):(d&&t.m(p++,b+x,w),t.m(p++,b,w),d&&t.m(p++,b-v,w))}c=g}(null===a||h!==ie||f)&&(m=t.i(p-1).x,y=t.i(p-1).y,b=t.i(p).x,w=t.i(p).y,f?(c=this.vd[u.layer],180===this.K||0===this.K?((f=y)>=u.bounds.y&&f<=u.bounds.bottom&&(180===this.K?b>=u.bounds.x:b<=u.bounds.right)&&(f=f<u.bounds.y+u.bounds.height/2?u.bounds.y-this.Yb/2:u.bounds.bottom+this.Yb/2,t.m(p++,c=u.centerX+(180===this.K?-c:c),y),t.m(p++,c,f)),t.m(p++,b,f)):((f=m)>=u.bounds.x&&f<=u.bounds.right&&(270===this.K?w>=u.bounds.y:w<=u.bounds.bottom)&&(f=f<u.bounds.x+u.bounds.width/2?u.bounds.x-this.Yb/2:u.bounds.right+this.Yb/2,t.m(p++,m,c=u.centerY+(270===this.K?-c:c)),t.m(p++,f,c)),t.m(p++,f,w)),t.m(p++,b,w)):d?(v=Math.max(10,this.Ud[u.layer]),x=Math.max(10,this.vd[u.layer]),180===this.K&&b>=u.bounds.x?(t.L(p-2,c=u.bounds.x+u.bounds.width,y),t.L(p-1,c+x,y)):90===this.K&&w<=u.bounds.bottom?(t.L(p-2,m,c=u.bounds.y),t.L(p-1,m,c-v)):270===this.K&&w>=u.bounds.y?(t.L(p-2,m,c=u.bounds.y+u.bounds.height),t.L(p-1,m,c+x)):0===this.K&&b<=u.bounds.right&&(t.L(p-2,c=u.bounds.x,y),t.L(p-1,c-v,y))):(v=Math.max(10,this.Ud[u.layer]),x=Math.max(10,this.vd[u.layer]),f=0,180===this.K||0===this.K?((180===this.K?b<=u.bounds.x:b>=u.bounds.right)&&(f=(0===this.K?x:-v)/2),t.m(p++,b+f,y)):((270===this.K?w<=u.bounds.y:w>=u.bounds.bottom)&&(f=(90===this.K?x:-v)/2),t.m(p++,m,w+f)),t.m(p++,b,w)))}else{for(;null!==u&&u!==c;){for(v=g=null,u=u.destinationEdges.iterator;u.next()&&((m=u.value).link!==n.link||(null!==(v=m.fromVertex).node&&(v=null),null!==(g=m.toVertex).node)););g!==c&&(m=t.i(p-1).x,y=t.i(p-1).y,b=g.centerX,w=g.centerY,f?180===this.K||0===this.K?(null!==v?v.centerY:y)!==w&&(v=this.Ia[g.layer]+this.Tc.x,p===t.firstPickIndex+1&&(v=0===this.K?Math.max(v,m):Math.min(v,m)),t.m(p++,v,y),t.m(p++,v,w)):(null!==v?v.centerX:m)!==b&&(v=this.Ia[g.layer]+this.Tc.y,p===t.firstPickIndex+1&&(v=90===this.K?Math.max(v,y):Math.min(v,y)),t.m(p++,m,v),t.m(p++,b,v)):(v=Math.max(10,this.Ud[g.layer]),x=Math.max(10,this.vd[g.layer]),180===this.K?(t.m(p++,b+x,w),d&&t.m(p++,b,w),t.m(p++,b-v,w)):90===this.K?(t.m(p++,b,w-v),d&&t.m(p++,b,w),t.m(p++,b,w+x)):270===this.K?(t.m(p++,b,w+x),d&&t.m(p++,b,w),t.m(p++,b,w-v)):(t.m(p++,b-v,w),d&&t.m(p++,b,w),t.m(p++,b+x,w)))),u=g}f&&(m=t.i(p-1).x,y=t.i(p-1).y,b=t.i(p).x,w=t.i(p).y,180===this.K||0===this.K?y!==w&&(v=0===this.K?Math.min(Math.max((b+m)/2,this.Ia[c.layer]+this.Tc.x),b):Math.max(Math.min((b+m)/2,this.Ia[c.layer]+this.Tc.x),b),t.m(p++,v,y),t.m(p++,v,w)):m!==b&&(v=90===this.K?Math.min(Math.max((w+y)/2,this.Ia[c.layer]+this.Tc.y),w):Math.max(Math.min((w+y)/2,this.Ia[c.layer]+this.Tc.y),w),t.m(p++,m,v),t.m(p++,b,v)))}null!==i&&d&&(null!==s&&(h===ie&&(h=t.i(0),i=t.i(2),h.w(i)||t.L(1,(h.x+i.x)/2,(h.y+i.y)/2)),(h=t.getLinkPoint(r,s,ie,!0,!1,o,a)).u()||h.set(r.actualBounds.center),t.L(0,h.x,h.y)),null!==a&&(l===ie&&(l=t.i(t.pointsCount-1),h=t.i(t.pointsCount-3),l.w(h)||t.L(t.pointsCount-2,(l.x+h.x)/2,(l.y+h.y)/2)),(r=t.getLinkPoint(o,a,ie,!1,!1,r,s)).u()||r.set(o.actualBounds.center),t.L(t.pointsCount-1,r.x,r.y))),t.xf(),n.commit()}}}this.avoidOrthogonalOverlaps()},Vp.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new tt,e=this.network.edges.iterator;e.next();){var n=e.value.link;null!==n&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(90===this.K||270===this.K){for(e=0,n=[],t=t.iterator;t.next();){var i=t.value;if(null!==i&&i.isOrthogonal)for(var r=2;r<i.pointsCount-3;r++){var o=i.i(r),s=i.i(r+1);if(this.A(o.y,s.y)&&!this.A(o.x,s.x)){var a=new Lg;a.layer=Math.floor(o.y/2);var l=i.i(0),h=i.i(i.pointsCount-1);if(a.first=l.x*l.x+l.y,a.Wb=h.x*h.x+h.y,a.bd=Math.min(o.x,s.x),a.tc=Math.max(o.x,s.x),a.index=r,a.link=i,r+2<i.pointsCount){l=i.i(r-1),h=i.i(r+2);var u=0;l.y<o.y?u=h.y<o.y?3:o.x<s.x?2:1:l.y>o.y&&(u=h.y>o.y?0:s.x<o.x?2:1),a.l=u}n.push(a)}}}if(1<n.length)for(n.sort(this.Oy),t=0;t<n.length;){for(o=n[t].layer,i=t+1;i<n.length&&n[i].layer===o;)i++;if(1<i-t)for(o=t;o<i;){for(s=n[o].tc,r=t+1;r<i&&n[r].bd<s;)s=Math.max(s,n[r].tc),r++;if(1<(s=r-o)){for(this.rj(n,this.du,o,o+s),u=1,a=n[o].Wb,l=o;l<r;l++)(h=n[l]).Wb!==a&&(u++,a=h.Wb);this.rj(n,this.Ny,o,o+s);var c=1;for(a=n[o].first,l=o;l<r;l++)(h=n[l]).first!==a&&(c++,a=h.first);for(l=!0,h=c,u<c?(l=!1,h=u,a=n[o].Wb,this.rj(n,this.du,o,o+s)):a=n[o].first,u=0,c=o;c<r;c++){var f=n[c];(l?f.first:f.Wb)!==a&&(u++,a=l?f.first:f.Wb);var d=f.link;o=d.i(f.index),s=d.i(f.index+1);var p=this.linkSpacing*(u-(h-1)/2);e++,d.Rh(),d.L(f.index,o.x,o.y+p),d.L(f.index+1,s.x,s.y+p),d.xf()}}o=r}t=i}}else{for(e=0,n=[],t=t.iterator;t.next();)if(null!==(i=t.value)&&i.isOrthogonal)for(r=2;r<i.pointsCount-3;r++)o=i.i(r),s=i.i(r+1),this.A(o.x,s.x)&&!this.A(o.y,s.y)&&((a=new Lg).layer=Math.floor(o.x/2),l=i.i(0),h=i.i(i.pointsCount-1),a.first=l.x+l.y*l.y,a.Wb=h.x+h.y*h.y,a.bd=Math.min(o.y,s.y),a.tc=Math.max(o.y,s.y),a.index=r,a.link=i,r+2<i.pointsCount&&(l=i.i(r-1),h=i.i(r+2),u=0,l.x<o.x?u=h.x<o.x?3:o.y<s.y?2:1:l.x>o.x&&(u=h.x>o.x?0:s.y<o.y?2:1),a.l=u),n.push(a));if(1<n.length)for(n.sort(this.Oy),t=0;t<n.length;){for(o=n[t].layer,i=t+1;i<n.length&&n[i].layer===o;)i++;if(1<i-t)for(o=t;o<i;){for(s=n[o].tc,r=t+1;r<i&&n[r].bd<s;)s=Math.max(s,n[r].tc),r++;if(1<(s=r-o)){for(this.rj(n,this.du,o,o+s),u=1,a=n[o].Wb,l=o;l<r;l++)(h=n[l]).Wb!==a&&(u++,a=h.Wb);for(this.rj(n,this.Ny,o,o+s),c=1,a=n[o].first,l=o;l<r;l++)(h=n[l]).first!==a&&(c++,a=h.first);for(l=!0,h=c,u<c?(l=!1,h=u,a=n[o].Wb,this.rj(n,this.du,o,o+s)):a=n[o].first,u=0,c=o;c<r;c++)f=n[c],(l?f.first:f.Wb)!==a&&(u++,a=l?f.first:f.Wb),o=(d=f.link).i(f.index),s=d.i(f.index+1),p=this.linkSpacing*(u-(h-1)/2),e++,d.Rh(),d.L(f.index,o.x+p,o.y),d.L(f.index+1,s.x+p,s.y),d.xf()}o=r}t=i}}}},(e=Vp.prototype).Oy=function(t,e){return t instanceof Lg&&e instanceof Lg&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.bd<e.bd?-1:t.bd>e.bd?1:t.tc<e.tc?-1:t.tc>e.tc?1:0:0},e.Ny=function(t,e){return t instanceof Lg&&e instanceof Lg&&t!==e?t.first<e.first?-1:t.first>e.first||t.l<e.l?1:t.l>e.l||t.bd<e.bd?-1:t.bd>e.bd?1:t.tc<e.tc?-1:t.tc>e.tc?1:0:0},e.du=function(t,e){return t instanceof Lg&&e instanceof Lg&&t!==e?t.Wb<e.Wb?-1:t.Wb>e.Wb||t.l<e.l?1:t.l>e.l||t.bd<e.bd?-1:t.bd>e.bd?1:t.tc<e.tc?-1:t.tc>e.tc?1:0:0},e.A=function(t,e){return-1<(t-=e)&&1>t},e.rj=function(t,e,n,i){var r=t.length,o=i-n;if(!(1>=o))if((0>n||n>=r-1)&&v("not in range 0 <= from < length: "+n),2===o)0<e(i=t[n],r=t[n+1])&&(t[n]=r,t[n+1]=i);else if(0===n)if(i>=r)t.sort(e);else for((n=t.slice(0,i)).sort(e),e=0;e<i;e++)t[e]=n[e];else if(i>=r)for((i=t.slice(n)).sort(e),e=n;e<r;e++)t[e]=i[e-n];else for((r=t.slice(n,i)).sort(e),e=n;e<i;e++)t[e]=r[e-n]},c.Object.defineProperties(Vp.prototype,{layerSpacing:{get:function(){return this.qe},set:function(t){this.qe!==t&&0<=t&&(this.qe=t,this.C())}},columnSpacing:{get:function(){return this.Yb},set:function(t){this.Yb!==t&&0<t&&(this.Yb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(0===t||90===t||180===t||270===t?(this.K=t,this.C()):v("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.al},set:function(t){this.al===t||t!==xg&&t!==wg&&t!==kg||(this.al=t,this.C())}},layeringOption:{get:function(){return this.El},set:function(t){this.El===t||t!==Sg&&t!==_g&&t!==Cg||(this.El=t,this.C())}},initializeOption:{get:function(){return this.tl},set:function(t){this.tl===t||t!==Mg&&t!==Pg&&t!==Tg||(this.tl=t,this.C())}},iterations:{get:function(){return this.Mj},set:function(t){this.Mj!==t&&0<=t&&(this.Mj=t,this.C())}},aggressiveOption:{get:function(){return this.Qk},set:function(t){this.Qk===t||t!==Ng&&t!==Ag&&t!==Eg||(this.Qk=t,this.C())}},packOption:{get:function(){return this.ng},set:function(t){this.ng!==t&&0<=t&&8>t&&(this.ng=t,this.C())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.C())}},linkSpacing:{get:function(){return this.Eo},set:function(t){this.Eo!==t&&0<=t&&(this.Eo=t,this.C())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.Gi}},maxColumn:{get:function(){return this.Ba}},minIndexLayer:{get:function(){return this.lh}},maxIndexLayer:{get:function(){return this.nc}}});var wg=new H(Vp,"CycleDepthFirst",0),xg=new H(Vp,"CycleGreedy",1),kg=new H(Vp,"CycleFromLayers",2),Sg=new H(Vp,"LayerOptimalLinkLength",0),_g=new H(Vp,"LayerLongestPathSink",1),Cg=new H(Vp,"LayerLongestPathSource",2),Mg=new H(Vp,"InitDepthFirstOut",0),Pg=new H(Vp,"InitDepthFirstIn",1),Tg=new H(Vp,"InitNaive",2),Ng=new H(Vp,"AggressiveNone",0),Ag=new H(Vp,"AggressiveLess",1),Eg=new H(Vp,"AggressiveMore",2);function Lg(){this.index=this.tc=this.bd=this.Wb=this.first=this.layer=0,this.link=null,this.l=0}function Og(t){_f.call(this,t)}function Dg(t){Nf.call(this,t),this.Pa=this.Rg=this.Ci=-1,this.I=NaN,this.T=null,this.valid=!1,this.finish=this.Cg=NaN,this.wf=0,this.Fk=this.Gk=null}function jg(t){Ef.call(this,t),this.l=this.Ka=this.cb=!1,this.Ja=this.I=NaN,this.T=this.v=0}function Fg(){uf.call(this),this.Jb=new nt,this.mp=dm,this.gd=pm,this.iq=Am,this.rs=Im,this.jx=[],this.fd=!0,this.Eb=Dm,this.Kd=new Dt(10,10).freeze();var t=new zm(this);this.U=new Vm(t),this.V=new Vm(t),this.qv=[]}function Ig(t){var e=new nt;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}function Rg(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.gd){case pm:r.sourceEdges.count<n&&(n=r.sourceEdges.count,i=r);break;case gm:r.destinationEdges.count<n&&(n=r.destinationEdges.count,i=r);break;default:v("Unhandled path value "+t.gd.toString())}}return i}function Bg(t,e){if(null!==e){switch(t.gd){case pm:if(0<e.destinationEdges.count){for(var n=new tt,i=e.destinationVertexes;i.next();){var r=i.value;zg(t,e,r)&&n.add(r)}0<n.count&&(e.children=n.ma())}break;case gm:if(0<e.sourceEdges.count){for(n=new tt,i=e.sourceVertexes;i.next();)zg(t,e,r=i.value)&&n.add(r);0<n.count&&(e.children=n.ma())}break;default:v("Unhandled path value"+t.gd.toString())}for(i=(n=e.children).length,r=0;r<i;r++){var o=n[r];o.initialized=!0,o.level=e.level+1,o.parent=e,t.Jb.remove(o)}for(e=0;e<i;e++)Bg(t,n[e])}}function zg(t,e,n){if(n.initialized){if(null===e)var i=!1;else{for(i=e.parent;null!==i&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}function Vg(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===Cm&&t.sortTreeVertexChildren(e);for(var n=0,i=e.childrenCount,r=0,o=e.children,s=o.length,a=0;a<s;a++){var l=o[a];Vg(t,l),n+=l.descendantCount+1,i=Math.max(i,l.maxChildrenCount),r=Math.max(r,l.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=i,e.maxGenerationCount=0<i?r+1:0}}function Ug(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var n=(e=e.children).length,i=0;i<n;i++)Ug(t,e[i])}}function qg(t,e){if(null!==e){e.alignment!==Cm&&t.sortTreeVertexChildren(e);for(var n=(e=e.children).length,i=0;i<n;i++)qg(t,e[i])}}function Hg(t){return t===_m||t===Cm||t===Mm||t===Pm}function Gg(t){return t===_m||t===Cm}function Yg(t){var e=t.parent;if(null!==e){var n=e.alignment;if(Hg(n)){if(Gg(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return 0==n%2}if(n===Mm)return!0}}return!1}function Xg(t,e){if(0===e.childrenCount){var n=!1,i=0;null!==e.parent&&(i=e.parent.angle,n=Hg(n=e.parent.alignment));var r=Yg(e);e.S.h(0,0),e.ua.h(e.width,e.height),null===e.parent||null===e.comments||(180!==i&&270!==i||n)&&!r?e.ea.h(0,0):180===i&&!n||(90===i||270===i)&&r?e.ea.h(e.width-2*e.focus.x,0):e.ea.h(0,e.height-2*e.focus.y)}else{n=90===(i=um(e))||270===i;for(var o=0,s=(r=e.children).length,a=0;a<s;a++){var l=r[a];o=Math.max(o,n?l.ua.width:l.ua.height)}var h=e.alignment,u=h===km,c=h===Sm;a=Hg(h);var f=Math.max(0,e.breadthLimit);l=cm(e);var d=e.nodeSpacing,p=fm(e),g=u||c?0:p/2,m=e.rowSpacing,y=0;(u||c||e.Nm||e.Om&&1===e.maxGenerationCount)&&(y=Math.max(0,e.rowIndent)),u=e.width;var b=e.height,w=0,x=0,k=0,S=0,_=0,C=0,M=0,P=0,T=0;if(a&&!Gg(h)&&135<i&&r.reverse(),Gg(h))if(1<s)for(var N=0;N<s;N++){var A=r[N],E=A.ua;0==N%2&&N!==s-1&&(T=Math.max(T,(n?E.width:E.height)+$g(A)-d))}else 1===s&&(T=n?r[0].ua.width:r[0].ua.height);if(a)switch(h){case _m:case Cm:T=(x=135>i?Kg(e,r,T,w,x):Wg(e,r,T,w,x)).x,w=x.width,x=x.height;break;case Mm:for(t=0;t<s;t++)g=(f=r[t]).ua,k=0===M?0:m,n?(f.S.h(o-g.width,_+k),w=Math.max(w,g.width),x=Math.max(x,_+k+g.height),_+=k+g.height):(f.S.h(S+k,o-g.height),w=Math.max(w,S+k+g.width),x=Math.max(x,g.height),S+=k+g.width),M++;break;case Pm:for(o=0;o<s;o++)f=(t=r[o]).ua,g=0===M?0:m,n?(t.S.h(d/2+e.focus.x,_+g),w=Math.max(w,f.width),x=Math.max(x,_+g+f.height),_+=g+f.height):(t.S.h(S+g,d/2+e.focus.y),w=Math.max(w,S+g+f.width),x=Math.max(x,f.height),S+=g+f.width),M++}else for(N=0;N<s;N++){if(E=(A=r[N]).ua,n){0<f&&0<M&&S+d+E.width>f&&(S<o&&em(e,h,o-S,0,P,N-1),C++,M=0,P=N,k=x,S=0,_=135<i?-x-m:x+m);var L=0===M?g:d;im(t,A,0,_),A.S.h(S+L,_),w=Math.max(w,S+L+E.width),x=Math.max(x,k+(0===C?0:m)+E.height),S+=L+E.width}else 0<f&&0<M&&_+d+E.height>f&&(_<o&&em(e,h,0,o-_,P,N-1),C++,M=0,P=N,k=w,_=0,S=135<i?-w-m:w+m),L=0===M?g:d,im(t,A,S,0),A.S.h(S,_+L),x=Math.max(x,_+L+E.height),w=Math.max(w,k+(0===C?0:m)+E.width),_+=L+E.height;M++}switch(0<C&&(n?(x+=Math.max(0,l),S<w&&em(e,h,w-S,0,P,s-1),0<y&&(c||nm(e,y,0,0,s-1),w+=y)):(w+=Math.max(0,l),_<x&&em(e,h,0,x-_,P,s-1),0<y&&(c||nm(e,0,y,0,s-1),x+=y))),y=c=0,h){case wm:n?c+=w/2-e.focus.x-p/2:y+=x/2-e.focus.y-p/2;break;case xm:0<C?n?c+=w/2-e.focus.x-p/2:y+=x/2-e.focus.y-p/2:n?c+=(h=r[0].S.x+r[0].ea.x)+(r[s-1].S.x+r[s-1].ea.x+2*r[s-1].focus.x-h)/2-e.focus.x-p/2:y+=(h=r[0].S.y+r[0].ea.y)+(r[s-1].S.y+r[s-1].ea.y+2*r[s-1].focus.y-h)/2-e.focus.y-p/2;break;case km:n?(c-=p,w+=p):(y-=p,x+=p);break;case Sm:n?(c+=w-e.width+p,w+=p):(y+=x-e.height+p,x+=p);break;case _m:case Cm:n?c+=1<s?T+d/2-e.focus.x:r[0].focus.x-e.focus.x+r[0].ea.x:y+=1<s?T+d/2-e.focus.y:r[0].focus.y-e.focus.y+r[0].ea.y;break;case Mm:n?c+=w+d/2-e.focus.x:y+=x+d/2-e.focus.y;break;case Pm:break;default:v("Unhandled alignment value "+h.toString())}for(p=0;p<s;p++)h=r[p],n?h.S.h(h.S.x+h.ea.x-c,h.S.y+(135<i?(a?-x:-h.ua.height)+h.ea.y-l:b+l+h.ea.y)):h.S.h(h.S.x+(135<i?(a?-w:-h.ua.width)+h.ea.x-l:u+l+h.ea.x),h.S.y+h.ea.y-y);n?(w=Jg(e,w,c),0>c&&(c=0),135<i&&(y+=x+l),x=Math.max(Math.max(x,b),x+b+l)):(135<i&&(c+=w+l),w=Math.max(Math.max(w,u),w+u+l),x=Qg(e,x,y),0>y&&(y=0)),e.ea.h(c,y),e.ua.h(w,x)}}function Kg(t,e,n,i,r){var o=e.length;if(0===o)return new Rt(n,0,i,r);if(1===o)return new Rt(n,0,i=(t=e[0]).ua.width,r=t.ua.height);for(var s=t.nodeSpacing,a=t.rowSpacing,l=90===um(t),h=0,u=0,c=0,f=0;f<o;f++)if(!(0!=f%2||1<o&&f===o-1)){var d=e[f],p=d.ua,g=0===h?0:a;if(l){var m=$g(d)-s;d.S.h(n-(p.width+m),c+g),i=Math.max(i,p.width+m),r=Math.max(r,c+g+p.height),c+=g+p.height}else m=$g(d)-s,d.S.h(u+g,n-(p.height+m)),r=Math.max(r,p.height+m),i=Math.max(i,u+g+p.width),u+=g+p.width;h++}for(h=0,d=u,f=c,l?(u=n+s,c=0):(u=0,c=n+s),p=0;p<o;p++)if(0!=p%2){m=(g=e[p]).ua;var y=0===h?0:a;if(l){var v=$g(g)-s;g.S.h(u+v,c+y),i=Math.max(i,u+m.width+v),r=Math.max(r,c+y+m.height),c+=y+m.height}else v=$g(g)-s,g.S.h(u+y,c+v),i=Math.max(i,u+y+m.width),r=Math.max(r,c+m.height+v),u+=y+m.width;h++}return 1<o&&1==o%2&&(o=(e=e[o-1]).ua,a=null===e.parent?0:e.parent.rowSpacing,l?(e.S.h(n+s/2-e.focus.x-e.ea.x,r+a),l=n+s/2-e.focus.x-e.ea.x,i=Math.max(i,l+o.width),0>l&&(i-=l),r=Math.max(r,Math.max(f,c)+a+o.height),0>e.S.x&&(n=Zg(t,e.S.x,!1,n,s))):(e.S.h(i+a,n+s/2-e.focus.y-e.ea.y),i=Math.max(i,Math.max(d,u)+a+o.width),c=n+s/2-e.focus.y-e.ea.y,r=Math.max(r,c+o.height),0>c&&(r-=c),0>e.S.y&&(n=Zg(t,e.S.y,!0,n,s)))),new Rt(n,0,i,r)}function Wg(t,e,n,i,r){var o=e.length;if(0===o)return new Rt(n,0,i,r);if(1===o)return new Rt(n,0,i=(e=e[0]).ua.width,r=e.ua.height);for(var s=t.nodeSpacing,a=t.rowSpacing,l=270===um(t),h=0,u=0,c=0,f=0;f<o;f++)if(!(0!=f%2||1<o&&f===o-1)){var d=e[f],p=d.ua,g=0===h?0:a;if(l){var m=$g(d)-s;d.S.h(n-(p.width+m),c-=g+p.height),i=Math.max(i,p.width+m),r=Math.max(r,Math.abs(c))}else m=$g(d)-s,d.S.h(u-=g+p.width,n-(p.height+m)),r=Math.max(r,p.height+m),i=Math.max(i,Math.abs(u));h++}for(h=0,d=u,f=c,l?(u=n+s,c=0):(u=0,c=n+s),p=0;p<o;p++)if(0!=p%2){m=(g=e[p]).ua;var y=0===h?0:a;if(l){var v=$g(g)-s;g.S.h(u+v,c-=y+m.height),i=Math.max(i,u+m.width+v),r=Math.max(r,Math.abs(c))}else v=$g(g)-s,g.S.h(u-=y+m.width,c+v),r=Math.max(r,c+m.height+v),i=Math.max(i,Math.abs(u));h++}for(1<o&&1==o%2&&(h=(a=e[o-1]).ua,p=null===a.parent?0:a.parent.rowSpacing,l?(a.S.h(n+s/2-a.focus.x-a.ea.x,-r-h.height-p),u=n+s/2-a.focus.x-a.ea.x,i=Math.max(i,u+h.width),0>u&&(i-=u),r=Math.max(r,Math.abs(Math.min(f,c))+p+h.height),0>a.S.x&&(n=Zg(t,a.S.x,!1,n,s))):(a.S.h(-i-h.width-p,n+s/2-a.focus.y-a.ea.y),i=Math.max(i,Math.abs(Math.min(d,u))+p+h.width),c=n+s/2-a.focus.y-a.ea.y,r=Math.max(r,c+h.height),0>c&&(r-=c),0>a.S.y&&(n=Zg(t,a.S.y,!0,n,s)))),t=0;t<o;t++)s=e[t],l?s.S.h(s.S.x,s.S.y+r):s.S.h(s.S.x+i,s.S.y);return new Rt(n,0,i,r)}function $g(t){return null===t.parent?0:t.parent.nodeSpacing}function Zg(t,e,n,i,r){for(var o=(t=t.children).length,s=0;s<o;s++)n?t[s].S.h(t[s].S.x,t[s].S.y-e):t[s].S.h(t[s].S.x-e,t[s].S.y);return e=t[o-1],Math.max(i,n?e.ea.y+e.focus.y-r/2:e.ea.x+e.focus.x-r/2)}function Jg(t,e,n){switch(t.alignment){case xm:case wm:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case km:return t.width>e?t.width:e;case Sm:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case _m:case Cm:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case Mm:return t.width-t.focus.x+t.nodeSpacing/2+e;case Pm:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Qg(t,e,n){switch(t.alignment){case xm:case wm:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case km:return t.height>e?t.height:e;case Sm:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case _m:case Cm:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case Mm:return t.height-t.focus.y+t.nodeSpacing/2+e;case Pm:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function tm(t,e,n){switch(t){case wm:case xm:e/=2,n/=2;break;case km:n=e=0;break;case Sm:break;default:v("Unhandled alignment value "+t.toString())}return new dt(e,n)}function em(t,e,n,i,r,o){nm(t,(e=tm(e,n,i)).x,e.y,r,o)}function nm(t,e,n,i,r){if(0!==e||0!==n)for(t=t.children;i<=r;i++){var o=t[i].S;o.x+=e,o.y+=n}}function im(t,e,n,i){var r=e.parent;switch(t.gd){case pm:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===r&&e.relativePoint.h(n,i);break;case gm:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===r&&e.relativePoint.h(n,i);break;default:v("Unhandled path value "+t.gd.toString())}}function rm(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];r.x+=e,r.y+=n}}function om(t,e,n,i,r,o,s,a){var l=um(e),h=90===l||270===l,u=e.nodeSpacing;e=i;var c=r;i=o;var f=s,d=n.Lq,p=n.Zq;s=n.ua;var g=h?Math.max(f,s.height):Math.max(i,s.width);if(null!==d&&l===um(n)||(d=sm(t,2),p=sm(t,2),h?(d[0].h(0,0),d[1].h(0,s.height),p[0].h(s.width,0),p[1].h(p[0].x,d[1].y)):(d[0].h(0,0),d[1].h(s.width,0),p[0].h(0,s.height),p[1].h(d[1].x,p[0].y))),h){if(f=9999999,!(null===c||2>c.length||null===d||2>d.length))for(r=n=0;n<c.length&&r<d.length;){var m=d[r];l=m.x,h=m.y,l+=i;var y=o=c[n];n+1<c.length&&(y=c[n+1]);var v=m;m=v.x,v=v.y,r+1<d.length&&(m=(v=d[r+1]).x,v=v.y,m+=i);var b=f;o.y===h?b=l-o.x:o.y>h&&o.y<v?b=l+(o.y-h)/(v-h)*(m-l)-o.x:h>o.y&&h<y.y&&(b=l-(o.x+(h-o.y)/(y.y-o.y)*(y.x-o.x))),b<f&&(f=b),y.y<=o.y?n++:v<=h?r++:(y.y<=v&&n++,v<=y.y&&r++)}if(f=i-f,n=d,r=f+=u,null===e||2>e.length||null===n||2>n.length)i=null;else{for(u=sm(t,e.length+n.length),i=o=l=0;o<n.length&&n[o].y<e[0].y;)h=n[o++],u[i++].h(h.x+r,h.y);for(;l<e.length;)h=e[l++],u[i++].h(h.x,h.y);for(l=e[e.length-1].y;o<n.length&&n[o].y<=l;)o++;for(;o<n.length&&n[o].y>l;)h=n[o++],u[i++].h(h.x+r,h.y);for(n=sm(t,i),l=0;l<i;l++)n[l].assign(u[l]);am(t,u),i=n}if(o=p,l=f,null===c||2>c.length||null===o||2>o.length)r=null;else{for(u=sm(t,c.length+o.length),r=h=n=0;n<c.length&&c[n].y<o[0].y;)y=c[n++],u[r++].h(y.x,y.y);for(;h<o.length;)y=o[h++],u[r++].h(y.x+l,y.y);for(o=o[o.length-1].y;n<c.length&&c[n].y<=o;)n++;for(;n<c.length&&c[n].y>o;)l=c[n++],u[r++].h(l.x,l.y);for(o=sm(t,r),n=0;n<r;n++)o[n].assign(u[n]);am(t,u),r=o}return o=Math.max(0,f)+s.width,s=g,am(t,e),am(t,d),am(t,c),am(t,p),a[0]=i,a[1]=r,new Rt(f,0,o,s)}if(i=9999999,!(null===c||2>c.length||null===d||2>d.length))for(r=n=0;n<c.length&&r<d.length;)l=(m=d[r]).x,h=m.y,h+=f,y=o=c[n],n+1<c.length&&(y=c[n+1]),m=(v=m).x,v=v.y,r+1<d.length&&(m=(v=d[r+1]).x,v=v.y,v+=f),b=i,o.x===l?b=h-o.y:o.x>l&&o.x<m?b=h+(o.x-l)/(m-l)*(v-h)-o.y:l>o.x&&l<y.x&&(b=h-(o.y+(l-o.x)/(y.x-o.x)*(y.y-o.y))),b<i&&(i=b),y.x<=o.x?n++:m<=l?r++:(y.x<=m&&n++,m<=y.x&&r++);if(f-=i,n=d,r=f+=u,null===e||2>e.length||null===n||2>n.length)i=null;else{for(u=sm(t,e.length+n.length),i=o=l=0;o<n.length&&n[o].x<e[0].x;)h=n[o++],u[i++].h(h.x,h.y+r);for(;l<e.length;)h=e[l++],u[i++].h(h.x,h.y);for(l=e[e.length-1].x;o<n.length&&n[o].x<=l;)o++;for(;o<n.length&&n[o].x>l;)h=n[o++],u[i++].h(h.x,h.y+r);for(n=sm(t,i),l=0;l<i;l++)n[l].assign(u[l]);am(t,u),i=n}if(o=p,l=f,null===c||2>c.length||null===o||2>o.length)r=null;else{for(u=sm(t,c.length+o.length),r=h=n=0;n<c.length&&c[n].x<o[0].x;)y=c[n++],u[r++].h(y.x,y.y);for(;h<o.length;)y=o[h++],u[r++].h(y.x,y.y+l);for(o=o[o.length-1].x;n<c.length&&c[n].x<=o;)n++;for(;n<c.length&&c[n].x>o;)l=c[n++],u[r++].h(l.x,l.y);for(o=sm(t,r),n=0;n<r;n++)o[n].assign(u[n]);am(t,u),r=o}return o=g,s=Math.max(0,f)+s.height,am(t,e),am(t,d),am(t,c),am(t,p),a[0]=i,a[1]=r,new Rt(f,0,o,s)}function sm(t,e){if(void 0!==(t=t.qv[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new dt;return t}function am(t,e){var n=e.length,i=t.qv[n];void 0===i&&(t.qv[n]=i=[]),i.push(e)}function lm(t,e,n,i){if(null!==e){e.x=n,e.y=i;for(var r=(e=e.children).length,o=0;o<r;o++){var s=e[o];lm(t,s,n+s.S.x,i+s.S.y)}}}function hm(t,e){if(null!==e){t.setPortSpots(e);for(var n=(e=e.children).length,i=0;i<n;i++)hm(t,e[i])}}function um(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function cm(t){var e=um(t);e=90===e||270===e;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var i=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*i:t.width*i}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function fm(t){var e=um(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var i=Math.min(1,t.nodeIndentPastParent);n+=90===e||270===e?t.width*i:t.height*i}return Math.max(0,n)}Vp.className="LayeredDigraphLayout",Vp.CycleDepthFirst=wg,Vp.CycleGreedy=xg,Vp.CycleFromLayers=kg,Vp.LayerOptimalLinkLength=Sg,Vp.LayerLongestPathSink=_g,Vp.LayerLongestPathSource=Cg,Vp.InitDepthFirstOut=Mg,Vp.InitDepthFirstIn=Pg,Vp.InitNaive=Tg,Vp.AggressiveNone=Ng,Vp.AggressiveLess=Ag,Vp.AggressiveMore=Eg,Vp.PackNone=0,Vp.PackExpand=1,Vp.PackStraighten=2,Vp.PackMedian=4,Vp.PackAll=7,Lg.className="SegInfo",u(Og,_f),Og.prototype.createVertex=function(){return new Dg(this)},Og.prototype.createEdge=function(){return new jg(this)},Og.className="LayeredDigraphNetwork",u(Dg,Nf),Dg.prototype.serializeVertexProperties=function(t,e){Nf.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?ot(this.near):null,t.valid=this.valid,t.Cg=this.Cg,t.finish=this.finish,t.wf=this.wf,t.Gk=this.Gk,t.Fk=this.Fk},Dg.prototype.wq=function(t,e,n,i){Nf.prototype.wq.call(this,t,e,n,i),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.Cg=t.Cg,this.finish=t.finish,this.wf=t.wf,this.Gk=t.Gk,this.Fk=t.Fk},c.Object.defineProperties(Dg.prototype,{layer:{get:function(){return this.Ci},set:function(t){this.Ci!==t&&(this.Ci=t)}},column:{get:function(){return this.Rg},set:function(t){this.Rg!==t&&(this.Rg=t)}},index:{get:function(){return this.Pa},set:function(t){this.Pa!==t&&(this.Pa=t)}},component:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},near:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),Dg.className="LayeredDigraphVertex",u(jg,Ef),jg.prototype.serializeEdgeProperties=function(t,e){Ef.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},jg.prototype.deserializeEdgeProperties=function(t,e,n,i){Ef.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},c.Object.defineProperties(jg.prototype,{valid:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},rev:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},forest:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},portFromPos:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},portToPos:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},portFromColOffset:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},portToColOffset:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),jg.className="LayeredDigraphEdge",u(Fg,uf),Fg.prototype.cloneProtected=function(t){uf.prototype.cloneProtected.call(this,t),t.mp=this.mp,t.iq=this.iq,t.rs=this.rs,t.fd=this.fd,t.Eb=this.Eb,t.Kd.assign(this.Kd),t.U.copyInheritedPropertiesFrom(this.U),t.V.copyInheritedPropertiesFrom(this.V)},Fg.prototype.ib=function(t){t.classType===Fg?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:v("Unknown enum value: "+t):uf.prototype.ib.call(this,t)},Fg.prototype.createNetwork=function(){return new zm(this)},Fg.prototype.makeNetwork=function(t){function e(t){if(t instanceof Tu)return!t.isLinkLabel&&"Comment"!==t.category;if(t instanceof Qu){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&"Comment"!==e.category&&null!==(t=t.toNode)&&!t.isLinkLabel&&"Comment"!==t.category}return!1}var n=this.createNetwork();return t instanceof Dr?(n.Ag(t.nodes,!0,e),n.Ag(t.links,!0,e)):n.Ag(t instanceof Xu?t.memberParts:t.iterator,!1,e),n},Fg.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Fm&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof Dr&&(e=t),this.gd=this.path===dm&&null!==e?e.isTreePathToChildren?pm:gm:this.path===dm?pm:this.path,0<this.network.vertexes.count){for(this.network.vq(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Jb.count){for(t=new nt,e=this.Jb.iterator;e.next();){var n=e.value;n instanceof Tu?null!==(n=this.network.ij(n))&&t.add(n):n instanceof Vm&&t.add(n)}this.Jb=t}for(0===this.Jb.count&&this.findRoots(),t=this.Jb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,Bg(this,e));for(e=this.network.vertexes,t=null;0<(t=Ig(e)).count;)null!==(e=Rg(this,t))&&this.Jb.add(e),e.initialized=!0,Bg(this,e),e=t;for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Vm&&Vg(this,e);for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Vm&&Ug(this,e);for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Vm&&qg(this,e);if(this.Bv(),this.layerStyle===Bm){for(t=[],e=this.network.vertexes.iterator;e.next();){var i=(n=e.value).parent;null===i&&(i=n),i=0===i.angle||180===i.angle;var r=t[n.level];void 0===r&&(r=0),t[n.level]=Math.max(r,i?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.jx=t,e=this.network.vertexes.iterator;e.next();)null===(i=(n=e.value).parent)&&(i=n),0===i.angle||180===i.angle?(180===i.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===i.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===Rm)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,i=-1,r=0;r<e.children.length;r++){var o=e.children[r];i=Math.max(i,n?o.width:o.height)}if(0<=i)for(r=0;r<e.children.length;r++)o=e.children[r],n?(180===e.angle&&(o.focusX+=i-o.width),o.width=i):(270===e.angle&&(o.focusY+=i-o.height),o.height=i)}for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Vm&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Jb=new nt,this.isValidLayout=!0},Fg.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.gd){case pm:0===n.sourceEdges.count&&this.Jb.add(n);break;case gm:0===n.destinationEdges.count&&this.Jb.add(n);break;default:v("Unhandled path value "+this.gd.toString())}}0===this.Jb.count&&null!==(t=Rg(this,t))&&this.Jb.add(t)},Fg.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,i=0,r=0;r<n.length;r++)n[r]===e&&i++;if(0<i){i=Array(n.length-i);for(var o=r=0;o<n.length;o++)n[o]!==e&&(i[r++]=n[o]);t.children=i}}},Fg.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function(t,e){switch(t.iq){default:case Am:return null!==e.parent?e.parent:t.U;case Om:return null===e.parent?t.U:null===e.parent.parent?t.V:e.parent;case Lm:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.V:t.U;case Em:var n=!0;if(0===e.childrenCount)n=!1;else for(var i=e.children,r=i.length,o=0;o<r;o++)if(0<i[o].childrenCount){n=!1;break}return n&&null!==e.parent?t.V:null!==e.parent?e.parent:t.U}}(this,t)),null!==t.parent&&t.parent.alignment===Cm){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;0==i%2?i!==n.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},Fg.prototype.assignTreeVertexValues=function(){},Fg.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case mm:break;case ym:t.children.reverse();break;case vm:t.children.sort(t.comparer);break;case bm:t.children.sort(t.comparer),t.children.reverse();break;default:v("Unhandled sorting value "+t.sorting.toString())}},Fg.prototype.Bv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Fg.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,r=!1;null!==n&&(i=n.angle,r=Hg(r=n.alignment)),e=90===e||270===e,i=90===i||270===i,n=0===t.childrenCount;var o=0,s=0,a=0,l=t.commentSpacing;if(null!==t.node)for(var h=t.node.Nv();h.next();){var u=h.value;"Comment"===u.category&&u.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.Ta(),u=u.measuredBounds,e&&!n||!r&&!i&&n||r&&i&&n?(o=Math.max(o,u.width),s+=u.height+Math.abs(a)):(o+=u.width+Math.abs(a),s=Math.max(s,u.height)),a=l)}null!==t.comments&&(e&&!n||!r&&!i&&n||r&&i&&n?(o+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),r=Rt.allocAt(0,0,t.bounds.width+o,t.bounds.height+s),t.bounds=r,Rt.free(r))},Fg.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,i=t.angle,r=0,o=!1;null!==n&&(r=n.angle,o=Hg(o=n.alignment)),i=90===i||270===i,n=90===r||270===r;for(var s=0===t.childrenCount,a=Yg(t),l=0,h=t.comments,u=h.length,c=dt.alloc(),f=0;f<u;f++){var d=h[f],p=d.measuredBounds;if(i&&!s||!o&&!n&&s||o&&n&&s){if(135<r&&!o||n&&a)if(0<=t.commentMargin)for(c.h(t.bounds.x-t.commentMargin-p.width,t.bounds.y+l),d.move(c),d=d.Cd();d.next();){var g=d.value;g.fromSpot=De,g.toSpot=je}else for(c.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+l),d.move(c),d=d.Cd();d.next();)(g=d.value).fromSpot=je,g.toSpot=De;else if(0<=t.commentMargin)for(c.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+l),d.move(c),d=d.Cd();d.next();)(g=d.value).fromSpot=je,g.toSpot=De;else for(c.h(t.bounds.x+t.commentMargin-p.width,t.bounds.y+l),d.move(c),d=d.Cd();d.next();)(g=d.value).fromSpot=De,g.toSpot=je;l=0<=t.commentSpacing?l+(p.height+t.commentSpacing):l+(t.commentSpacing-p.height)}else{if(135<r&&!o||!n&&a)if(0<=t.commentMargin)for(c.h(t.bounds.x+l,t.bounds.y-t.commentMargin-p.height),d.move(c),d=d.Cd();d.next();)(g=d.value).fromSpot=Oe,g.toSpot=Fe;else for(c.h(t.bounds.x+l,t.bounds.y+2*t.focus.y-t.commentMargin),d.move(c),d=d.Cd();d.next();)(g=d.value).fromSpot=Fe,g.toSpot=Oe;else if(0<=t.commentMargin)for(c.h(t.bounds.x+l,t.bounds.y+2*t.focus.y+t.commentMargin),d.move(c),d=d.Cd();d.next();)(g=d.value).fromSpot=Fe,g.toSpot=Oe;else for(c.h(t.bounds.x+l,t.bounds.y+t.commentMargin-p.height),d.move(c),d=d.Cd();d.next();)(g=d.value).fromSpot=Oe,g.toSpot=Fe;l=0<=t.commentSpacing?l+(p.width+t.commentSpacing):l+(t.commentSpacing-p.width)}}if(dt.free(c),e=l-t.commentSpacing-(i?e.height:e.width),this.gd===pm)for(t=t.destinationEdges;t.next();)null===(r=t.value.link)||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(r=t.value.link)||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},Fg.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,n=e.length,i=0;i<n;i++)this.layoutTree(e[i]);switch(t.compaction){case Tm:Xg(this,t);break;case Nm:if(t.alignment===Cm)Xg(this,t);else if(0===t.childrenCount)n=!1,e=0,null!==(i=t.parent)&&(e=i.angle,n=Hg(n=i.alignment)),i=Yg(t),t.S.h(0,0),t.ua.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!i?t.ea.h(0,0):180===e&&!n||(90===e||270===e)&&i?t.ea.h(t.width-2*t.focus.x,0):t.ea.h(0,t.height-2*t.focus.y),t.Lq=null,t.Zq=null;else{var r=um(t);e=90===r||270===r;var o=0,s=t.children,a=s.length;for(n=0;n<a;n++)i=s[n],o=Math.max(o,e?i.ua.width:i.ua.height);var l=t.alignment,h=l===Sm,u=Hg(l),c=Math.max(0,t.breadthLimit);n=cm(t);var f=t.nodeSpacing,d=fm(t),p=t.rowSpacing,g=0;(l===km||h||t.Nm||t.Om&&1===t.maxGenerationCount)&&(g=Math.max(0,t.rowIndent)),i=t.width;var m=t.height,y=0,b=0,w=0,x=null,k=null,S=0,_=0,C=0,M=0,P=0,A=0,E=0,L=0;if(u&&!Gg(l)&&135<r&&s.reverse(),Gg(l))if(1<a)for(var O=0;O<a;O++)0==O%2&&O!==a-1&&(L=Math.max(L,e?s[O].ua.width:s[O].ua.height));else 1===a&&(L=e?s[0].ua.width:s[0].ua.height);if(u){switch(l){case _m:L=(b=135>r?Kg(t,s,L,y,b):Wg(t,s,L,y,b)).x,y=b.width,b=b.height;break;case Mm:for(x=0;x<a;x++)c=(k=s[x]).ua,w=0===A?0:p,e?(k.S.h(o-c.width,M+w),y=Math.max(y,c.width),b=Math.max(b,M+w+c.height),M+=w+c.height):(k.S.h(C+w,o-c.height),y=Math.max(y,C+w+c.width),b=Math.max(b,c.height),C+=w+c.width),A++;break;case Pm:for(x=0;x<a;x++)o=(k=s[x]).ua,c=0===A?0:p,e?(k.S.h(f/2+t.focus.x,M+c),y=Math.max(y,o.width),b=Math.max(b,M+c+o.height),M+=c+o.height):(k.S.h(C+c,f/2+t.focus.y),y=Math.max(y,C+c+o.width),b=Math.max(b,o.height),C+=c+o.width),A++}x=sm(this,2),k=sm(this,2),e?(x[0].h(0,0),x[1].h(0,b),k[0].h(y,0)):(x[0].h(0,0),x[1].h(y,0),k[0].h(0,b)),k[1].h(y,b)}else for(O=0;O<a;O++){var D=s[O],j=D.ua;if(e){0<c&&0<A&&C+f+j.width>c&&(C<o&&em(t,l,o-C,0,E,O-1),P++,A=0,E=O,w=b,C=0,M=135<r?-b-p:b+p),im(this,D,0,M);var F=0;if(0===A)k=D.Zq,S=j.width,_=j.height,(null===(x=D.Lq)||null===k||r!==um(D))&&(x=sm(this,2),k=sm(this,2),x[0].h(0,0),x[1].h(0,_),k[0].h(S,0),k[1].h(S,_));else{var I=T();F=(_=om(this,t,D,x,k,S,_,I)).x,x=I[0],k=I[1],S=_.width,_=_.height,N(I),C<j.width&&0>F&&(nm(t,-F,0,E,O-1),rm(x,-F,0),rm(k,-F,0),F=0)}D.S.h(F,M),y=Math.max(y,S),b=Math.max(b,w+(0===P?0:p)+j.height),C=S}else 0<c&&0<A&&M+f+j.height>c&&(M<o&&em(t,l,0,o-M,E,O-1),P++,A=0,E=O,w=y,M=0,C=135<r?-y-p:y+p),im(this,D,C,0),F=0,0===A?(k=D.Zq,S=j.width,_=j.height,(null===(x=D.Lq)||null===k||r!==um(D))&&(x=sm(this,2),k=sm(this,2),x[0].h(0,0),x[1].h(S,0),k[0].h(0,_),k[1].h(S,_))):(F=(_=om(this,t,D,x,k,S,_,I=T())).x,x=I[0],k=I[1],S=_.width,_=_.height,N(I),M<j.height&&0>F&&(nm(t,0,-F,E,O-1),rm(x,0,-F),rm(k,0,-F),F=0)),D.S.h(C,F),b=Math.max(b,_),y=Math.max(y,w+(0===P?0:p)+j.width),M=_;A++}switch(0<P&&(e?(b+=Math.max(0,n),C<y&&em(t,l,y-C,0,E,a-1),0<g&&(h||nm(t,g,0,0,a-1),y+=g)):(y+=Math.max(0,n),M<b&&em(t,l,0,b-M,E,a-1),0<g&&(h||nm(t,0,g,0,a-1),b+=g))),g=h=0,l){case wm:e?h+=y/2-t.focus.x-d/2:g+=b/2-t.focus.y-d/2;break;case xm:0<P?e?h+=y/2-t.focus.x-d/2:g+=b/2-t.focus.y-d/2:e?h+=(L=s[0].S.x+s[0].ea.x)+(s[a-1].S.x+s[a-1].ea.x+2*s[a-1].focus.x-L)/2-t.focus.x-d/2:g+=(L=s[0].S.y+s[0].ea.y)+(s[a-1].S.y+s[a-1].ea.y+2*s[a-1].focus.y-L)/2-t.focus.y-d/2;break;case km:e?(h-=d,y+=d):(g-=d,b+=d);break;case Sm:e?(h+=y-t.width+d,y+=d):(g+=b-t.height+d,b+=d);break;case _m:e?h+=1<a?L+f/2-t.focus.x:s[0].focus.x-t.focus.x+s[0].ea.x:g+=1<a?L+f/2-t.focus.y:s[0].focus.y-t.focus.y+s[0].ea.y;break;case Mm:e?h+=y+f/2-t.focus.x:g+=b+f/2-t.focus.y;break;case Pm:break;default:v("Unhandled alignment value "+l.toString())}for(d=0;d<a;d++)L=s[d],e?L.S.h(L.S.x+L.ea.x-h,L.S.y+(135<r?(u?-b:-L.ua.height)+L.ea.y-n:m+n+L.ea.y)):L.S.h(L.S.x+(135<r?(u?-y:-L.ua.width)+L.ea.x-n:i+n+L.ea.x),L.S.y+L.ea.y-g);if(a=s=0,u?e?(y=Jg(t,y,h),0>h&&(h=0),135<r&&(g+=b+n),b+=m+n,l===Pm&&(s+=f/2+t.focus.x),a+=m+n):(135<r&&(h+=y+n),y+=i+n,b=Qg(t,b,g),0>g&&(g=0),l===Pm&&(a+=f/2+t.focus.y),s+=i+n):e?(null===t.comments?i>y&&(s=(y=tm(l,i-y,0)).x,a=y.y,y=i,h=0):y=Jg(t,y,h),0>h&&(s-=h,h=0),135<r&&(g+=b+n),b=Math.max(Math.max(b,m),b+m+n),a+=m+n):(135<r&&(h+=y+n),y=Math.max(Math.max(y,i),y+i+n),null===t.comments?m>b&&(s=(b=tm(l,0,m-b)).x,a=b.y,b=m,g=0):b=Qg(t,b,g),0>g&&(a-=g,g=0),s+=i+n),0<P)r=sm(this,4),P=sm(this,4),e?(r[2].h(0,m+n),r[3].h(r[2].x,b),P[2].h(y,r[2].y),P[3].h(P[2].x,r[3].y)):(r[2].h(i+n,0),r[3].h(y,r[2].y),P[2].h(r[2].x,b),P[3].h(r[3].x,P[2].y));else{for(r=sm(this,x.length+2),P=sm(this,k.length+2),l=0;l<x.length;l++)r[l+2].h((u=x[l]).x+s,u.y+a);for(l=0;l<k.length;l++)P[l+2].h((u=k[l]).x+s,u.y+a)}e?(r[0].h(h,0),r[1].h(r[0].x,m),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),P[0].h(h+i,0),P[1].h(P[0].x,m),P[2].y<P[1].y&&(P[2].x<P[0].x?P[2].assign(P[1]):P[1].assign(P[2])),P[3].y<P[2].y&&(P[3].x<P[0].x?P[3].assign(P[2]):P[2].assign(P[3])),r[2].y-=n/2,P[2].y-=n/2):(r[0].h(0,g),r[1].h(i,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),P[0].h(0,g+m),P[1].h(i,P[0].y),P[2].x<P[1].x&&(P[2].y<P[0].y?P[2].assign(P[1]):P[1].assign(P[2])),P[3].x<P[2].x&&(P[3].y<P[0].y?P[3].assign(P[2]):P[2].assign(P[3])),r[2].x-=n/2,P[2].x-=n/2),am(this,x),am(this,k),t.Lq=r,t.Zq=P,t.ea.h(h,g),t.ua.h(y,b)}break;default:v("Unhandled compaction value "+t.compaction.toString())}}},Fg.prototype.arrangeTrees=function(){if(this.Eb===Fm)for(var t=this.Jb.iterator;t.next();){var e=t.value;if(e instanceof Vm){var n=e.node;if(null!==n){var i=n.position;n=i.x,i=i.y,isFinite(n)||(n=0),isFinite(i)||(i=0),lm(this,e,n,i)}}}else{for(t=[],e=this.Jb.iterator;e.next();)(n=e.value)instanceof Vm&&t.push(n);switch(this.sorting){case mm:break;case ym:t.reverse();break;case vm:t.sort(this.comparer);break;case bm:t.sort(this.comparer),t.reverse();break;default:v("Unhandled sorting value "+this.sorting.toString())}for(e=(n=this.arrangementOrigin).x,n=n.y,i=0;i<t.length;i++){var r=t[i];switch(lm(this,r,e+r.ea.x,n+r.ea.y),this.Eb){case Dm:n+=r.ua.height+this.Kd.height;break;case jm:e+=r.ua.width+this.Kd.width;break;default:v("Unhandled arrangement value "+this.Eb.toString())}}}},Fg.prototype.commitLayout=function(){this.zw(),this.commitNodes(),this.Dv(),this.isRouting&&this.commitLinks()},Fg.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Fg.prototype.Dv=function(){if(this.layerStyle===Bm){for(var t=this.jx,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var r=i.value;null===n?n=r.bounds.copy():n.Pc(r.bounds);var o=e[r.level];o=void 0===o?cm(r):Math.max(o,cm(r)),e[r.level]=o}for(i=0;i<e.length;i++)void 0===e[i]&&(e[i]=0);if(90===this.angle||270===this.angle?(n.Hc(this.nodeSpacing/2,this.layerSpacing),i=new dt(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.Hc(this.layerSpacing,this.nodeSpacing/2),i=new dt(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],n=90===this.angle||270===this.angle?n.width:n.height,o=0,180===this.angle||270===this.angle)for(var s=0;s<t.length;s++)o+=t[s]+e[s];for(s=0;s<t.length;s++){var a=t[s]+e[s];270===this.angle?r.push(new Rt(0,o-=a,n,a)):90===this.angle?(r.push(new Rt(0,o,n,a)),o+=a):180===this.angle?r.push(new Rt(o-=a,0,a,n)):(r.push(new Rt(o,0,a,n)),o+=a)}this.commitLayers(r,i)}},Fg.prototype.commitLayers=function(){},Fg.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Fg.prototype.zw=function(){for(var t=this.Jb.iterator;t.next();){var e=t.value;e instanceof Vm&&hm(this,e)}},Fg.prototype.setPortSpots=function(t){var e=t.alignment;if(Hg(e)){var n=this.gd===pm,i=um(t);switch(i){case 0:var r=je;break;case 90:r=Fe;break;case 180:r=De;break;default:r=Oe}var o=t.children,s=o.length;switch(e){case _m:case Cm:for(e=0;e<s;e++){var a=o[e];if(null!==(a=(n?a.sourceEdges:a.destinationEdges).first())&&null!==(a=a.link)){var l=90===i||270===i?De:Oe;if(1===s||e===s-1&&1==s%2)switch(i){case 0:l=De;break;case 90:l=Oe;break;case 180:l=je;break;default:l=Fe}else 0==e%2&&(l=90===i||270===i?je:Fe);n?(t.setsPortSpot&&(a.fromSpot=r),t.setsChildPortSpot&&(a.toSpot=l)):(t.setsPortSpot&&(a.fromSpot=l),t.setsChildPortSpot&&(a.toSpot=r))}}break;case Mm:for(i=90===i||270===i?je:Fe,o=n?t.destinationEdges:t.sourceEdges;o.next();)null!==(s=o.value.link)&&(n?(t.setsPortSpot&&(s.fromSpot=r),t.setsChildPortSpot&&(s.toSpot=i)):(t.setsPortSpot&&(s.fromSpot=i),t.setsChildPortSpot&&(s.toSpot=r)));break;case Pm:for(i=90===i||270===i?De:Oe,o=n?t.destinationEdges:t.sourceEdges;o.next();)null!==(s=o.value.link)&&(n?(t.setsPortSpot&&(s.fromSpot=r),t.setsChildPortSpot&&(s.toSpot=i)):(t.setsPortSpot&&(s.fromSpot=i),t.setsChildPortSpot&&(s.toSpot=r)))}}else if(n=um(t),this.gd===pm){for(r=t.destinationEdges;r.next();)if(null!==(i=r.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(n){case 0:i.fromSpot=je;break;case 90:i.fromSpot=Fe;break;case 180:i.fromSpot=De;break;default:i.fromSpot=Oe}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(n){case 0:i.toSpot=De;break;case 90:i.toSpot=Oe;break;case 180:i.toSpot=je;break;default:i.toSpot=Fe}else i.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(null!==(i=r.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(n){case 0:i.toSpot=je;break;case 90:i.toSpot=Fe;break;case 180:i.toSpot=De;break;default:i.toSpot=Oe}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(n){case 0:i.fromSpot=De;break;case 90:i.fromSpot=Oe;break;case 180:i.fromSpot=je;break;default:i.fromSpot=Fe}else i.fromSpot=t.childPortSpot}},c.Object.defineProperties(Fg.prototype,{roots:{get:function(){return this.Jb},set:function(t){this.Jb!==t&&(this.Jb=t,this.C())}},path:{get:function(){return this.mp},set:function(t){this.mp!==t&&(this.mp=t,this.C())}},treeStyle:{get:function(){return this.iq},set:function(t){this.Eb===t||t!==Am&&t!==Lm&&t!==Em&&t!==Om||(this.iq=t,this.C())}},layerStyle:{get:function(){return this.rs},set:function(t){this.Eb===t||t!==Im&&t!==Rm&&t!==Bm||(this.rs=t,this.C())}},comments:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t,this.C())}},arrangement:{get:function(){return this.Eb},set:function(t){this.Eb===t||t!==Dm&&t!==jm&&t!==Fm||(this.Eb=t,this.C())}},arrangementSpacing:{get:function(){return this.Kd},set:function(t){this.Kd.w(t)||(this.Kd.assign(t),this.C())}},rootDefaults:{get:function(){return this.U},set:function(t){this.U!==t&&(this.U=t,this.C())}},alternateDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.C())}},sorting:{get:function(){return this.U.sorting},set:function(t){this.U.sorting===t||t!==mm&&t!==ym&&t!==vm&&!bm||(this.U.sorting=t,this.C())}},comparer:{get:function(){return this.U.comparer},set:function(t){this.U.comparer!==t&&(this.U.comparer=t,this.C())}},angle:{get:function(){return this.U.angle},set:function(t){this.U.angle!==t&&(0===t||90===t||180===t||270===t?(this.U.angle=t,this.C()):v("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.U.alignment},set:function(t){this.U.alignment!==t&&(this.U.alignment=t,this.C())}},nodeIndent:{get:function(){return this.U.nodeIndent},set:function(t){this.U.nodeIndent!==t&&0<=t&&(this.U.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.U.nodeIndentPastParent},set:function(t){this.U.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.U.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.U.nodeSpacing},set:function(t){this.U.nodeSpacing!==t&&(this.U.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.U.layerSpacing},set:function(t){this.U.layerSpacing!==t&&(this.U.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.U.layerSpacingParentOverlap},set:function(t){this.U.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.U.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.U.compaction},set:function(t){this.U.compaction===t||t!==Tm&&t!==Nm||(this.U.compaction=t,this.C())}},breadthLimit:{get:function(){return this.U.breadthLimit},set:function(t){this.U.breadthLimit!==t&&0<=t&&(this.U.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.U.rowSpacing},set:function(t){this.U.rowSpacing!==t&&(this.U.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.U.rowIndent},set:function(t){this.U.rowIndent!==t&&0<=t&&(this.U.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.U.commentSpacing},set:function(t){this.U.commentSpacing!==t&&(this.U.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.U.commentMargin},set:function(t){this.U.commentMargin!==t&&(this.U.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.U.setsPortSpot},set:function(t){this.U.setsPortSpot!==t&&(this.U.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.U.portSpot},set:function(t){this.U.portSpot.w(t)||(this.U.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.U.setsChildPortSpot},set:function(t){this.U.setsChildPortSpot!==t&&(this.U.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.U.childPortSpot},set:function(t){this.U.childPortSpot.w(t)||(this.U.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==mm&&t!==ym&&t!==vm&&!bm||(this.V.sorting=t,this.C())}},alternateComparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.C())}},alternateAngle:{get:function(){return this.V.angle},set:function(t){this.V.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.V.angle=t,this.C())}},alternateAlignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==Tm&&t!==Nm||(this.V.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.w(t)||(this.V.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.w(t)||(this.V.childPortSpot=t,this.C())}}});var dm=new H(Fg,"PathDefault",-1),pm=new H(Fg,"PathDestination",0),gm=new H(Fg,"PathSource",1),mm=new H(Fg,"SortingForwards",10),ym=new H(Fg,"SortingReverse",11),vm=new H(Fg,"SortingAscending",12),bm=new H(Fg,"SortingDescending",13),wm=new H(Fg,"AlignmentCenterSubtrees",20),xm=new H(Fg,"AlignmentCenterChildren",21),km=new H(Fg,"AlignmentStart",22),Sm=new H(Fg,"AlignmentEnd",23),_m=new H(Fg,"AlignmentBus",24),Cm=new H(Fg,"AlignmentBusBranching",25),Mm=new H(Fg,"AlignmentTopLeftBus",26),Pm=new H(Fg,"AlignmentBottomRightBus",27),Tm=new H(Fg,"CompactionNone",30),Nm=new H(Fg,"CompactionBlock",31),Am=new H(Fg,"StyleLayered",40),Em=new H(Fg,"StyleLastParents",41),Lm=new H(Fg,"StyleAlternating",42),Om=new H(Fg,"StyleRootOnly",43),Dm=new H(Fg,"ArrangementVertical",50),jm=new H(Fg,"ArrangementHorizontal",51),Fm=new H(Fg,"ArrangementFixedRoots",52),Im=new H(Fg,"LayerIndividual",60),Rm=new H(Fg,"LayerSiblings",61),Bm=new H(Fg,"LayerUniform",62);function zm(t){_f.call(this,t)}function Vm(t){Nf.call(this,t),this.Ja=!1,this.Ac=null,this.I=[],this.Qc=this.cb=this.T=this.Ka=0,this.fd=null,this.S=new dt(0,0),this.ua=new Dt(0,0),this.ea=new dt(0,0),this.Om=this.Nm=this.SA=!1,this.Zq=this.Lq=null,this.Zc=mm,this.Uc=Af,this.Xb=0,this.yb=xm,this.Bs=this.As=0,this.Cs=20,this.qe=50,this.qs=0,this.Cr=Nm,this.ur=0,this.Ps=25,this.Br=this.Os=10,this.Ar=20,this.bt=!0,this.Ls=Te,this.at=!0,this.xr=Te}function Um(t){Ef.call(this,t),this.gv=new dt(0,0)}Fg.className="TreeLayout",Fg.PathDefault=dm,Fg.PathDestination=pm,Fg.PathSource=gm,Fg.SortingForwards=mm,Fg.SortingReverse=ym,Fg.SortingAscending=vm,Fg.SortingDescending=bm,Fg.AlignmentCenterSubtrees=wm,Fg.AlignmentCenterChildren=xm,Fg.AlignmentStart=km,Fg.AlignmentEnd=Sm,Fg.AlignmentBus=_m,Fg.AlignmentBusBranching=Cm,Fg.AlignmentTopLeftBus=Mm,Fg.AlignmentBottomRightBus=Pm,Fg.CompactionNone=Tm,Fg.CompactionBlock=Nm,Fg.StyleLayered=Am,Fg.StyleLastParents=Em,Fg.StyleAlternating=Lm,Fg.StyleRootOnly=Om,Fg.ArrangementVertical=Dm,Fg.ArrangementHorizontal=jm,Fg.ArrangementFixedRoots=Fm,Fg.LayerIndividual=Im,Fg.LayerSiblings=Rm,Fg.LayerUniform=Bm,u(zm,_f),zm.prototype.createVertex=function(){return new Vm(this)},zm.prototype.createEdge=function(){return new Um(this)},zm.className="TreeNetwork",u(Vm,Nf),Vm.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.Zc=t.sorting,this.Uc=t.comparer,this.Xb=t.angle,this.yb=t.alignment,this.As=t.nodeIndent,this.Bs=t.nodeIndentPastParent,this.Cs=t.nodeSpacing,this.qe=t.layerSpacing,this.qs=t.layerSpacingParentOverlap,this.Cr=t.compaction,this.ur=t.breadthLimit,this.Ps=t.rowSpacing,this.Os=t.rowIndent,this.Br=t.commentSpacing,this.Ar=t.commentMargin,this.bt=t.setsPortSpot,this.Ls=t.portSpot,this.at=t.setsChildPortSpot,this.xr=t.childPortSpot)},c.Object.defineProperties(Vm.prototype,{initialized:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},parent:{get:function(){return this.Ac},set:function(t){this.Ac!==t&&(this.Ac=t)}},children:{get:function(){return this.I},set:function(t){if(this.I!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.I=t}}},level:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},descendantCount:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},maxChildrenCount:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},maxGenerationCount:{get:function(){return this.Qc},set:function(t){this.Qc!==t&&(this.Qc=t)}},comments:{get:function(){return this.fd},set:function(t){if(this.fd!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.fd=t}}},sorting:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t)}},comparer:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},angle:{get:function(){return this.Xb},set:function(t){this.Xb!==t&&(this.Xb=t)}},alignment:{get:function(){return this.yb},set:function(t){this.yb!==t&&(this.yb=t)}},nodeIndent:{get:function(){return this.As},set:function(t){this.As!==t&&(this.As=t)}},nodeIndentPastParent:{get:function(){return this.Bs},set:function(t){this.Bs!==t&&(this.Bs=t)}},nodeSpacing:{get:function(){return this.Cs},set:function(t){this.Cs!==t&&(this.Cs=t)}},layerSpacing:{get:function(){return this.qe},set:function(t){this.qe!==t&&(this.qe=t)}},layerSpacingParentOverlap:{get:function(){return this.qs},set:function(t){this.qs!==t&&(this.qs=t)}},compaction:{get:function(){return this.Cr},set:function(t){this.Cr!==t&&(this.Cr=t)}},breadthLimit:{get:function(){return this.ur},set:function(t){this.ur!==t&&(this.ur=t)}},rowSpacing:{get:function(){return this.Ps},set:function(t){this.Ps!==t&&(this.Ps=t)}},rowIndent:{get:function(){return this.Os},set:function(t){this.Os!==t&&(this.Os=t)}},commentSpacing:{get:function(){return this.Br},set:function(t){this.Br!==t&&(this.Br=t)}},commentMargin:{get:function(){return this.Ar},set:function(t){this.Ar!==t&&(this.Ar=t)}},setsPortSpot:{get:function(){return this.bt},set:function(t){this.bt!==t&&(this.bt=t)}},portSpot:{get:function(){return this.Ls},set:function(t){this.Ls.w(t)||(this.Ls=t)}},setsChildPortSpot:{get:function(){return this.at},set:function(t){this.at!==t&&(this.at=t)}},childPortSpot:{get:function(){return this.xr},set:function(t){this.xr.w(t)||(this.xr=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.ua},set:function(t){this.ua.set(t)}},subtreeOffset:{get:function(){return this.ea},set:function(t){this.ea.set(t)}}}),Vm.className="TreeVertex",u(Um,Ef),Um.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.gd){case pm:n=this.fromVertex,i=this.toVertex;break;case gm:n=this.toVertex,i=this.fromVertex;break;default:v("Unhandled path value "+e.gd.toString())}if(null!==n&&null!==i)if(0!==(e=this.gv).x||0!==e.y||n.SA){i=n.bounds;var r=um(n),o=cm(n),s=n.rowSpacing;t.uj();var a,l=t.curve===Mc,h=t.isOrthogonal;if(t.Rh(),h||l){for(a=2;4<t.pointsCount;)t.pw(2);var u=t.i(1),c=t.i(2)}else{for(a=1;3<t.pointsCount;)t.pw(1);u=t.i(0),c=t.i(t.pointsCount-1)}var f=t.i(t.pointsCount-1);0===r?(n.alignment===Sm?(r=i.bottom+e.y,0===e.y&&u.y>f.y+n.rowIndent&&(r=Math.min(r,Math.max(u.y,r-fm(n))))):n.alignment===km?(r=i.top+e.y,0===e.y&&u.y<f.y-n.rowIndent&&(r=Math.max(r,Math.min(u.y,r+fm(n))))):r=n.Nm||n.Om&&1===n.maxGenerationCount?i.top-n.ea.y+e.y:i.y+i.height/2+e.y,l?(t.m(a,u.x,r),a++,t.m(a,i.right+o,r),a++,t.m(a,i.right+o+(e.x-s)/3,r),a++,t.m(a,i.right+o+2*(e.x-s)/3,r),a++,t.m(a,i.right+o+(e.x-s),r),a++,t.m(a,c.x,r)):(h&&(t.m(a,i.right+o/2,u.y),a++),t.m(a,i.right+o/2,r),a++,t.m(a,i.right+o+e.x-(h?s/2:s),r),a++,h&&t.m(a,t.i(a-1).x,c.y))):90===r?(n.alignment===Sm?(r=i.right+e.x,0===e.x&&u.x>f.x+n.rowIndent&&(r=Math.min(r,Math.max(u.x,r-fm(n))))):n.alignment===km?(r=i.left+e.x,0===e.x&&u.x<f.x-n.rowIndent&&(r=Math.max(r,Math.min(u.x,r+fm(n))))):r=n.Nm||n.Om&&1===n.maxGenerationCount?i.left-n.ea.x+e.x:i.x+i.width/2+e.x,l?(t.m(a,r,u.y),a++,t.m(a,r,i.bottom+o),a++,t.m(a,r,i.bottom+o+(e.y-s)/3),a++,t.m(a,r,i.bottom+o+2*(e.y-s)/3),a++,t.m(a,r,i.bottom+o+(e.y-s)),a++,t.m(a,r,c.y)):(h&&(t.m(a,u.x,i.bottom+o/2),a++),t.m(a,r,i.bottom+o/2),a++,t.m(a,r,i.bottom+o+e.y-(h?s/2:s)),a++,h&&t.m(a,c.x,t.i(a-1).y))):180===r?(n.alignment===Sm?(r=i.bottom+e.y,0===e.y&&u.y>f.y+n.rowIndent&&(r=Math.min(r,Math.max(u.y,r-fm(n))))):n.alignment===km?(r=i.top+e.y,0===e.y&&u.y<f.y-n.rowIndent&&(r=Math.max(r,Math.min(u.y,r+fm(n))))):r=n.Nm||n.Om&&1===n.maxGenerationCount?i.top-n.ea.y+e.y:i.y+i.height/2+e.y,l?(t.m(a,u.x,r),a++,t.m(a,i.left-o,r),a++,t.m(a,i.left-o+(e.x+s)/3,r),a++,t.m(a,i.left-o+2*(e.x+s)/3,r),a++,t.m(a,i.left-o+(e.x+s),r),a++,t.m(a,c.x,r)):(h&&(t.m(a,i.left-o/2,u.y),a++),t.m(a,i.left-o/2,r),a++,t.m(a,i.left-o+e.x+(h?s/2:s),r),a++,h&&t.m(a,t.i(a-1).x,c.y))):270===r?(n.alignment===Sm?(r=i.right+e.x,0===e.x&&u.x>f.x+n.rowIndent&&(r=Math.min(r,Math.max(u.x,r-fm(n))))):n.alignment===km?(r=i.left+e.x,0===e.x&&u.x<f.x-n.rowIndent&&(r=Math.max(r,Math.min(u.x,r+fm(n))))):r=n.Nm||n.Om&&1===n.maxGenerationCount?i.left-n.ea.x+e.x:i.x+i.width/2+e.x,l?(t.m(a,r,u.y),a++,t.m(a,r,i.top-o),a++,t.m(a,r,i.top-o+(e.y+s)/3),a++,t.m(a,r,i.top-o+2*(e.y+s)/3),a++,t.m(a,r,i.top-o+(e.y+s)),a++,t.m(a,r,c.y)):(h&&(t.m(a,u.x,i.top-o/2),a++),t.m(a,r,i.top-o/2),a++,t.m(a,r,i.top-o+e.y+(h?s/2:s)),a++,h&&t.m(a,c.x,t.i(a-1).y))):v("Invalid angle "+r),t.xf()}else t=this.link,(o=um(n))!==um(i)&&(s=cm(n),l=n.bounds,n=i.bounds,0===o&&n.left-l.right<s+1||90===o&&n.top-l.bottom<s+1||180===o&&l.left-n.right<s+1||270===o&&l.top-n.bottom<s+1||(t.uj(),n=t.curve===Mc,e=t.isOrthogonal,i=Hg(this.fromVertex.alignment),t.Rh(),0===o?(o=l.right+s/2,n?4===t.pointsCount&&(n=t.i(3).y,t.L(1,o-20,t.i(1).y),t.m(2,o-20,n),t.m(3,o,n),t.m(4,o+20,n),t.L(5,t.i(5).x,n)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,o,t.i(2).y),t.L(3,o,t.i(3).y)):4===t.pointsCount?t.m(2,o,t.i(2).y):3===t.pointsCount?t.L(1,o,t.i(2).y):2===t.pointsCount&&t.m(1,o,t.i(1).y)):90===o?(o=l.bottom+s/2,n?4===t.pointsCount&&(n=t.i(3).x,t.L(1,t.i(1).x,o-20),t.m(2,n,o-20),t.m(3,n,o),t.m(4,n,o+20),t.L(5,n,t.i(5).y)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,o),t.L(3,t.i(3).x,o)):4===t.pointsCount?t.m(2,t.i(2).x,o):3===t.pointsCount?t.L(1,t.i(2).x,o):2===t.pointsCount&&t.m(1,t.i(1).x,o)):180===o?(o=l.left-s/2,n?4===t.pointsCount&&(n=t.i(3).y,t.L(1,o+20,t.i(1).y),t.m(2,o+20,n),t.m(3,o,n),t.m(4,o-20,n),t.L(5,t.i(5).x,n)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,o,t.i(2).y),t.L(3,o,t.i(3).y)):4===t.pointsCount?t.m(2,o,t.i(2).y):3===t.pointsCount?t.L(1,o,t.i(2).y):2===t.pointsCount&&t.m(1,o,t.i(1).y)):270===o&&(o=l.top-s/2,n?4===t.pointsCount&&(n=t.i(3).x,t.L(1,t.i(1).x,o+20),t.m(2,n,o+20),t.m(3,n,o),t.m(4,n,o-20),t.L(5,n,t.i(5).y)):e?i?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,o),t.L(3,t.i(3).x,o)):4===t.pointsCount?t.m(2,t.i(2).x,o):3===t.pointsCount?t.L(1,t.i(2).x,o):2===t.pointsCount&&t.m(1,t.i(1).x,o)),t.xf()))}},c.Object.defineProperties(Um.prototype,{relativePoint:{get:function(){return this.gv},set:function(t){this.gv.set(t)}}}),Um.className="TreeEdge",Ln.prototype.initializeStandardTools=function(){this.Xa("Action",new Pi,this.mouseDownTools),this.Xa("Relinking",new mi,this.mouseDownTools),this.Xa("LinkReshaping",new vi,this.mouseDownTools),this.Xa("Rotating",new Ci,this.mouseDownTools),this.Xa("Resizing",new _i,this.mouseDownTools),this.Xa("Linking",new fi,this.mouseMoveTools),this.Xa("Dragging",new zn,this.mouseMoveTools),this.Xa("DragSelecting",new Ni,this.mouseMoveTools),this.Xa("Panning",new Ai,this.mouseMoveTools),this.Xa("ContextMenu",new Oi,this.mouseUpTools),this.Xa("TextEditing",new Vi,this.mouseUpTools),this.Xa("ClickCreating",new Ti,this.mouseUpTools),this.Xa("ClickSelecting",new Mi,this.mouseUpTools)},Kl("Horizontal",new dl),Kl("Spot",new gl),Kl("Table",new yl),Kl("Viewbox",new wl),Kl("TableRow",new vl),Kl("TableColumn",new bl),Kl("Graduated",new Cl),Kl("Grid",new xl),Ko.add("GraphLinksModel",Qf),Ko.add("TreeModel",id),gf(Np,null),gf(Vp,null);var qm=d.go,Hm={get licenseKey(){return Dr.licenseKey},set licenseKey(t){Dr.licenseKey=t},get version(){return Dr.version},Group:Xu,EnumValue:H,List:tt,Set:nt,Map:ft,Point:dt,Size:Dt,Rect:Rt,Margin:Jt,Spot:ze,Geometry:Ke,PathFigure:cn,PathSegment:fn,InputEvent:xn,DiagramEvent:kn,ChangedEvent:Sn,Model:od,GraphLinksModel:Bd,TreeModel:$d,Binding:Dd,Transaction:Tn,UndoManager:Nn,CommandHandler:qs,Tool:En,DraggingTool:zn,DraggingInfo:Ss,DraggingOptions:Fs,LinkingBaseTool:ai,LinkingTool:fi,RelinkingTool:mi,LinkReshapingTool:vi,ResizingTool:_i,RotatingTool:Ci,ClickSelectingTool:Mi,ActionTool:Pi,ClickCreatingTool:Ti,HTMLInfo:Ei,ContextMenuTool:Oi,DragSelectingTool:Ni,PanningTool:Ai,TextEditingTool:Vi,ToolManager:Ln,Animation:vr,AnimationManager:ir,AnimationTrigger:Pr,Layer:Er,Diagram:Dr,Palette:Is,Overview:Bs,Brush:Fa,GraphObject:Ys,Panel:Ml,RowColumnDefinition:Jl,Shape:ih,TextBlock:dh,TextBlockMetrics:Bh,Picture:zh,Part:ou,Adornment:Pu,Node:Tu,Link:Qu,Placeholder:Ju,Layout:uf,LayoutNetwork:_f,LayoutVertex:Nf,LayoutEdge:Ef,GridLayout:Lf,PanelLayout:cl,CircularLayout:Zd,CircularNetwork:Cp,CircularVertex:Mp,CircularEdge:Tp,ForceDirectedLayout:Np,ForceDirectedNetwork:Ip,ForceDirectedVertex:Rp,ForceDirectedEdge:Bp,LayeredDigraphLayout:Vp,LayeredDigraphNetwork:Og,LayeredDigraphVertex:Dg,LayeredDigraphEdge:jg,TreeLayout:Fg,TreeNetwork:zm,TreeVertex:Vm,TreeEdge:Um};"object"==typeof qm&&qm.version&&v("WARNING: a `go` object on the root object is already defined.  "+("Debug"in qm?"debug ":"")+"version: "+qm.version+", replaced with version: "+Hm.version),Dr.prototype.go=Hm,d.go=Hm,(void 0===d||void 0===d.module||"object"!=typeof d.module.exports)&&d.define&&"function"==typeof d.define&&d.define.amd&&d.define(Hm),"object"==typeof t.exports&&(t.exports="undefined"!=typeof global?global.go:self.go)}()},zUnb:function(t,e,n){"use strict";function i(t){return"function"==typeof t}n.r(e);let r=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function h(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let c=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(i(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){e=a instanceof u?f(a.errors):[a]}}if(l(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(h(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof u?e=e.concat(f(a.errors)):e.push(a)}}}if(e)throw new u(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends c{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[d](){return this}static create(t,e,n){const i=new p(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,r){let o;super(),this._parentSubscriber=t;let s=this;i(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==a&&(s=Object.create(e),i(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(s(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof p)return t;if(t[d])return t[d]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const w=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class x extends c{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class k extends p{constructor(t){super(t),this.destination=t}}let S=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new k(this)}lift(t){const e=new _(this,this);return e.operator=t,e}next(t){if(this.closed)throw new w;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new w;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),c.EMPTY):this.isStopped?(t.complete(),c.EMPTY):(this.observers.push(t),new x(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new _(t,e),t})();class _ extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):c.EMPTY}}function C(t){return t&&"function"==typeof t.schedule}function M(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new P(t,e))}}class P{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new T(t,this.project,this.thisArg))}}class T extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const N=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()};function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const E=A(),L=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function O(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const D=t=>{if(t&&"function"==typeof t[m])return i=t,t=>{const e=i[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(L(t))return N(t);if(O(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[E])return e=t,t=>{const n=e[E]();for(;;){let e;try{e=n.next()}catch(i){return t.error(i),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=h(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,i};function j(t,e){return new v(n=>{const i=new c;let r=0;return i.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function F(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new v(n=>{const i=new c;return i.add(e.schedule(()=>{const r=t[m]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(O(t))return function(t,e){return new v(n=>{const i=new c;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(L(t))return j(t,e);if(function(t){return t&&"function"==typeof t[E]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v(n=>{const i=new c;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[E](),i.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof v?t:new v(D(t))}class I extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class R extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function B(t,e){if(!e.closed)return t instanceof v?t.subscribe(e):D(t)(e)}function z(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(z((n,i)=>F(t(n,i)).pipe(M((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new V(t,n)))}class V{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new U(t,this.project,this.concurrent))}}class U extends R{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e)}_innerSub(t){const e=new I(this),n=this.destination;n.add(e);const i=B(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function q(t=Number.POSITIVE_INFINITY){return z(y,t)}function H(t,e){return e?j(t,e):new v(N(t))}function G(){return function(t){return t.lift(new Y(t))}}class Y{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new X(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class X extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class K extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new c,t.add(this.source.subscribe(new $(this.getSubject(),this))),t.closed&&(this._connection=null,t=c.EMPTY)),t}refCount(){return G()(this)}}const W=(()=>{const t=K.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class $ extends k{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Z(){return new S}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function Q(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function tt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(tt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function et(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const nt=J({__forward_ref__:J});function it(t){return t.__forward_ref__=it,t.toString=function(){return tt(this())},t}function rt(t){return ot(t)?t():t}function ot(t){return"function"==typeof t&&t.hasOwnProperty(nt)&&t.__forward_ref__===it}class st extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function at(t){return"string"==typeof t?t:null==t?"":String(t)}function lt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():at(t)}function ht(t,e){const n=e?` in ${e}`:"";throw new st("201",`No provider for ${lt(t)} found${n}`)}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ct(t){return{providers:t.providers||[],imports:t.imports||[]}}function ft(t){return dt(t,gt)||dt(t,yt)}function dt(t,e){return t.hasOwnProperty(e)?t[e]:null}function pt(t){return t&&(t.hasOwnProperty(mt)||t.hasOwnProperty(vt))?t[mt]:null}const gt=J({"\u0275prov":J}),mt=J({"\u0275inj":J}),yt=J({ngInjectableDef:J}),vt=J({ngInjectorDef:J});var bt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let wt;function xt(t){const e=wt;return wt=t,e}function kt(t,e,n){const i=ft(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&bt.Optional?null:void 0!==e?e:void ht(tt(t),"Injector")}function St(t){return{toString:t}.toString()}var _t=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Ct=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Mt="undefined"!=typeof globalThis&&globalThis,Pt="undefined"!=typeof window&&window,Tt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt="undefined"!=typeof global&&global,At=Mt||Nt||Pt||Tt,Et={},Lt=[],Ot=[],Dt=J({"\u0275cmp":J}),jt=J({"\u0275dir":J}),Ft=J({"\u0275pipe":J}),It=J({"\u0275mod":J}),Rt=J({"\u0275loc":J}),Bt=J({"\u0275fac":J}),zt=J({__NG_ELEMENT_ID__:J});let Vt=0;function Ut(t){return St(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===_t.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ct.Emulated,id:"c",styles:t.styles||Ot,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,r=t.features,o=t.pipes;return n.id+=Vt++,n.inputs=Xt(t.inputs,e),n.outputs=Xt(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(qt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ht):null,n})}function qt(t){return Wt(t)||function(t){return t[jt]||null}(t)}function Ht(t){return function(t){return t[Ft]||null}(t)}const Gt={};function Yt(t){const e={type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&St(()=>{Gt[t.id]=t.type}),e}function Xt(t,e){if(null==t)return Et;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}const Kt=Ut;function Wt(t){return t[Dt]||null}function $t(t,e){const n=t[It]||null;if(!n&&!0===e)throw new Error(`Type ${tt(t)} does not have '\u0275mod' property.`);return n}const Zt=20,Jt=10;function Qt(t){return Array.isArray(t)&&"object"==typeof t[1]}function te(t){return Array.isArray(t)&&!0===t[1]}function ee(t){return 0!=(8&t.flags)}function ne(t){return 2==(2&t.flags)}function ie(t){return 1==(1&t.flags)}function re(t){return null!==t.template}function oe(t,e){return t.hasOwnProperty(Bt)?t[Bt]:null}class se{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ae(){return le}function le(t){return t.type.prototype.ngOnChanges&&(t.setInput=ue),he}function he(){const t=ce(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Et)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function ue(t,e,n,i){const r=ce(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Et,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],l=s[a];o[a]=new se(l&&l.currentValue,e,s===Et),t[i]=e}function ce(t){return t.__ngSimpleChanges__||null}let fe;function de(t){return!!t.listen}ae.ngInherit=!0;const pe={createRenderer:(t,e)=>void 0!==fe?fe:"undefined"!=typeof document?document:void 0};function ge(t){for(;Array.isArray(t);)t=t[0];return t}function me(t,e){return ge(e[t])}function ye(t,e){return ge(e[t.index])}function ve(t,e){return t.data[e]}function be(t,e){const n=e[t];return Qt(n)?n:n[0]}function we(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function xe(t){return 4==(4&t[2])}function ke(t){return 128==(128&t[2])}function Se(t,e){return null==e?null:t[e]}function _e(t){t[18]=0}function Ce(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Me={lFrame:We(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Pe(){return Me.bindingsEnabled}function Te(){return Me.lFrame.lView}function Ne(){return Me.lFrame.tView}function Ae(t){Me.lFrame.contextLView=t}function Ee(){let t=Le();for(;null!==t&&64===t.type;)t=t.parent;return t}function Le(){return Me.lFrame.currentTNode}function Oe(t,e){const n=Me.lFrame;n.currentTNode=t,n.isParent=e}function De(){return Me.lFrame.isParent}function je(){Me.lFrame.isParent=!1}function Fe(){return Me.isInCheckNoChangesMode}function Ie(t){Me.isInCheckNoChangesMode=t}function Re(){const t=Me.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Be(){return Me.lFrame.bindingIndex++}function ze(t){const e=Me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ve(t,e){const n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ue(e)}function Ue(t){Me.lFrame.currentDirectiveIndex=t}function qe(){return Me.lFrame.currentQueryIndex}function He(t){Me.lFrame.currentQueryIndex=t}function Ge(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ye(t,e,n){if(n&bt.SkipSelf){let i=e,r=t;for(;i=i.parent,!(null!==i||n&bt.Host||(i=Ge(r),null===i)||(r=r[15],10&i.type)););if(null===i)return!1;e=i,t=r}const i=Me.lFrame=Ke();return i.currentTNode=e,i.lView=t,!0}function Xe(t){const e=Ke(),n=t[1];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ke(){const t=Me.lFrame,e=null===t?null:t.child;return null===e?We(t):e}function We(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function $e(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ze=$e;function Je(){const t=$e();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Qe(){return Me.lFrame.selectedIndex}function tn(t){Me.lFrame.selectedIndex=t}function en(){const t=Me.lFrame;return ve(t.tView,t.selectedIndex)}function nn(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;i&&(t.contentHooks||(t.contentHooks=[])).push(-n,i),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function rn(t,e,n){an(t,e,3,n)}function on(t,e,n,i){(3&t[2])===n&&an(t,e,n,i)}function sn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function an(t,e,n,i){const r=null!=i?i:-1,o=e.length-1;let s=0;for(let a=void 0!==i?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=i&&s>=i)break}else e[a]<0&&(t[18]+=65536),(s<r||-1==r)&&(ln(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ln(t,e,n,i){const r=n[i]<0,o=n[i+1],s=t[r?-n[i]:n[i]];r?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const hn=-1;class un{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function cn(t,e,n){const i=de(t);let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const s=n[r++],a=n[r++],l=n[r++];i?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++r];dn(s)?i&&t.setProperty(e,s,a):i?t.setAttribute(e,s,a):e.setAttribute(s,a),r++}}return r}function fn(t){return 3===t||4===t||6===t}function dn(t){return 64===t.charCodeAt(0)}function pn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||gn(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function gn(t,e,n,i,r){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}function mn(t){return t!==hn}function yn(t){return 32767&t}function vn(t,e){let n=t>>16,i=e;for(;n>0;)i=i[15],n--;return i}let bn=!0;function wn(t){const e=bn;return bn=t,e}let xn=0;function kn(t,e){const n=_n(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,Sn(i.data,t),Sn(e,null),Sn(i.blueprint,null));const r=Cn(t,e),o=t.injectorIndex;if(mn(r)){const t=yn(r),n=vn(r,e),i=n[1].data;for(let r=0;r<8;r++)e[o+r]=n[t+r]|i[t+r]}return e[o+8]=r,o}function Sn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _n(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Cn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){const t=r[1],e=t.type;if(i=2===e?t.declTNode:1===e?r[6]:null,null===i)return hn;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return hn}function Mn(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(zt)&&(i=n[zt]),null==i&&(i=n[zt]=xn++);const r=255&i;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function Pn(t,e,n){if(n&bt.Optional)return t;ht(e,"NodeInjector")}function Tn(t,e,n,i){if(n&bt.Optional&&void 0===i&&(i=null),0==(n&(bt.Self|bt.Host))){const r=t[9],o=xt(void 0);try{return r?r.get(e,i,n&bt.Optional):kt(e,i,n&bt.Optional)}finally{xt(o)}}return Pn(i,e,n)}function Nn(t,e,n,i=bt.Default,r){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(zt)?t[zt]:void 0;return"number"==typeof e?e>=0?255&e:En:e}(n);if("function"==typeof o){if(!Ye(e,t,i))return i&bt.Host?Pn(r,n,i):Tn(e,n,i,r);try{const t=o();if(null!=t||i&bt.Optional)return t;ht(n)}finally{Ze()}}else if("number"==typeof o){let r=null,s=_n(t,e),a=hn,l=i&bt.Host?e[16][6]:null;for((-1===s||i&bt.SkipSelf)&&(a=-1===s?Cn(t,e):e[s+8],a!==hn&&Fn(i,!1)?(r=e[1],s=yn(a),e=vn(a,e)):s=-1);-1!==s;){const t=e[1];if(jn(o,s,t.data)){const t=Ln(s,e,n,r,i,l);if(t!==An)return t}a=e[s+8],a!==hn&&Fn(i,e[1].data[s+8]===l)&&jn(o,s,e)?(r=t,s=yn(a),e=vn(a,e)):s=-1}}}return Tn(e,n,i,r)}const An={};function En(){return new In(Ee(),Te())}function Ln(t,e,n,i,r,o){const s=e[1],a=s.data[t+8],l=On(a,s,n,null==i?ne(a)&&bn:i!=s&&0!=(3&a.type),r&bt.Host&&o===a);return null!==l?Dn(e,s,l,a):An}function On(t,e,n,i,r){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,h=o>>20,u=r?a+h:t.directiveEnd;for(let c=i?a:a+h;c<u;c++){const t=s[c];if(c<l&&n===t||c>=l&&t.type===n)return c}if(r){const t=s[l];if(t&&re(t)&&t.type===n)return l}return null}function Dn(t,e,n,i){let r=t[n];const o=e.data;if(r instanceof un){const s=r;s.resolving&&function(t,e){throw new st("200",`Circular dependency in DI detected for ${t}`)}(lt(o[n]));const a=wn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?xt(s.injectImpl):null;Ye(t,i,bt.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const i=le(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&xt(l),wn(a),s.resolving=!1,Ze()}}return r}function jn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Fn(t,e){return!(t&bt.Self||t&bt.Host&&e)}class In{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Nn(this._tNode,this._lView,t,void 0,e)}}function Rn(t){return St(()=>{const e=t.prototype.constructor,n=e[Bt]||Bn(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const t=r[Bt]||Bn(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function Bn(t){return ot(t)?()=>{const e=Bn(rt(t));return e&&e()}:oe(t)}const zn="__parameters__";function Vn(t,e,n){return St(()=>{const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty(zn)?t[zn]:Object.defineProperty(t,zn,{value:[]})[zn];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Un{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qn=new Un("AnalyzeForEntryComponents"),Hn=Function;function Gn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)?(e===t&&(e=t.slice(0,n)),Gn(i,e)):e!==t&&e.push(i)}return e}function Yn(t,e){t.forEach(t=>Array.isArray(t)?Yn(t,e):e(t))}function Xn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Wn(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function $n(t,e,n){let i=Jn(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function Zn(t,e){const n=Jn(t,e);if(n>=0)return t[1|n]}function Jn(t,e){return function(t,e,n){let i=0,r=t.length>>1;for(;r!==i;){const n=i+(r-i>>1),o=t[n<<1];if(e===o)return n<<1;o>e?r=n:i=n+1}return~(r<<1)}(t,e)}const Qn={},ti=/\n/gm,ei="__source",ni=J({provide:String,useValue:J});let ii;function ri(t){const e=ii;return ii=t,e}function oi(t,e=bt.Default){if(void 0===ii)throw new Error("inject() must be called from an injection context");return null===ii?kt(t,void 0,e):ii.get(t,e&bt.Optional?null:void 0,e)}function si(t,e=bt.Default){return(wt||oi)(rt(t),e)}function ai(t){const e=[];for(let n=0;n<t.length;n++){const i=rt(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t,n=bt.Default;for(let e=0;e<i.length;e++){const r=i[e],o=r.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=r.token:n|=o:t=r}e.push(si(t,n))}else e.push(si(i))}return e}function li(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const hi=li(Vn("Inject",t=>({token:t})),-1),ui=li(Vn("Optional"),8),ci=li(Vn("SkipSelf"),4);class fi{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function di(t){return t instanceof fi?t.changingThisBreaksApplicationSecurity:t}const pi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var mi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yi(t){const e=function(){const t=Te();return t&&t[12]}();return e?e.sanitize(mi.URL,t)||"":function(t,e){const n=function(t){return t instanceof fi&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?di(t):(n=at(t),(n=String(n)).match(pi)||n.match(gi)?n:"unsafe:"+n);var n}function vi(t){return t.ngDebugContext}function bi(t){return t.ngOriginalError}function wi(t,...e){t.error(...e)}class xi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t.ngErrorLogger||wi}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vi(t)?vi(t):this._findContext(bi(t)):null}_findOriginalError(t){let e=bi(t);for(;e&&bi(e);)e=bi(e);return e}}function ki(t,e){t.__ngContext__=e}const Si=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))();function _i(t){return t instanceof Function?t():t}var Ci=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Mi(t,e){return(void 0)(t,e)}function Pi(t){const e=t[3];return te(e)?e[3]:e}function Ti(t){return Ai(t[13])}function Ni(t){return Ai(t[4])}function Ai(t){for(;null!==t&&!te(t);)t=t[4];return t}function Ei(t,e,n,i,r){if(null!=i){let o,s=!1;te(i)?o=i:Qt(i)&&(s=!0,i=i[0]);const a=ge(i);0===t&&null!==n?null==r?Bi(e,n,a):Ri(e,n,a,r||null,!0):1===t&&null!==n?Ri(e,n,a,r||null,!0):2===t?function(t,e,n){const i=Vi(t,e);i&&function(t,e,n,i){de(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,i,r){const o=n[7];o!==ge(n)&&Ei(e,t,i,o,r);for(let s=Jt;s<n.length;s++){const r=n[s];Wi(r[1],r,t,e,i,o)}}(e,t,o,n,r)}}function Li(t,e,n){return de(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Oi(t,e){const n=t[9],i=n.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,Ce(r,-1)),n.splice(i,1)}function Di(t,e){if(t.length<=Jt)return;const n=Jt+e,i=t[n];if(i){const o=i[17];null!==o&&o!==t&&Oi(o,i),e>0&&(t[n-1][4]=i[4]);const s=Kn(t,Jt+e);Wi(i[1],r=i,r[11],2,null,null),r[0]=null,r[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}var r;return i}function ji(t,e){if(!(256&e[2])){const n=e[11];de(n)&&n.destroyNode&&Wi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Fi(t[1],t);for(;e;){let n=null;if(Qt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Qt(e)&&Fi(e[1],e),e=e[3];null===e&&(e=t),Qt(e)&&Fi(e[1],e),n=e&&e[4]}e=n}}(e)}}function Fi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];if(!(t instanceof un)){const e=n[i+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,i=e[7];let r=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):ge(e[t]),a=i[r=n[o+2]],l=n[o+3];"boolean"==typeof l?s.removeEventListener(n[o],a,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),o+=2}else{const t=i[r=n[o+1]];n[o].call(t)}if(null!==i){for(let t=r+1;t<i.length;t++)(0,i[t])();e[7]=null}}(t,e),1===e[1].type&&de(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&te(e[3])){n!==e[3]&&Oi(n,e);const i=e[19];null!==i&&i.detachView(t)}}}function Ii(t,e,n){return function(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[0];if(2&i.flags){const e=t.data[i.directiveStart].encapsulation;if(e===Ct.None||e===Ct.Emulated)return null}return ye(i,n)}(t,e.parent,n)}function Ri(t,e,n,i,r){de(t)?t.insertBefore(e,n,i,r):e.insertBefore(n,i,r)}function Bi(t,e,n){de(t)?t.appendChild(e,n):e.appendChild(n)}function zi(t,e,n,i,r){null!==i?Ri(t,e,n,i,r):Bi(t,e,n)}function Vi(t,e){return de(t)?t.parentNode(e):e.parentNode}function Ui(t,e,n){return qi(t,e,n)}let qi=function(t,e,n){return 40&t.type?ye(t,n):null};function Hi(t,e,n,i){const r=Ii(t,i,e),o=e[11],s=Ui(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(n))for(let a=0;a<n.length;a++)zi(o,r,n[a],s,!1);else zi(o,r,n,s,!1)}function Gi(t,e){if(null!==e){const n=e.type;if(3&n)return ye(e,t);if(4&n)return Xi(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Gi(t,n);{const n=t[e.index];return te(n)?Xi(-1,n):ge(n)}}if(32&n)return Mi(e,t)()||ge(t[e.index]);{const n=Yi(t,e);return null!==n?Array.isArray(n)?n[0]:Gi(Pi(t[16]),n):Gi(t,e.next)}}return null}function Yi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Xi(t,e){const n=Jt+t+1;if(n<e.length){const t=e[n],i=t[1].firstChild;if(null!==i)return Gi(t,i)}return e[7]}function Ki(t,e,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;if(s&&0===e&&(a&&ki(ge(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)Ki(t,e,n.child,i,r,o,!1),Ei(e,t,r,a,o);else if(32&l){const s=Mi(n,i);let l;for(;l=s();)Ei(e,t,r,l,o);Ei(e,t,r,a,o)}else 16&l?$i(t,e,i,n,r,o):Ei(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Wi(t,e,n,i,r,o){Ki(n,i,t.firstChild,e,r,o,!1)}function $i(t,e,n,i,r,o){const s=n[16],a=s[6].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Ei(e,t,r,a[l],o);else Ki(t,e,a,s[3],r,o,!0)}function Zi(t,e,n){de(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ji(t,e,n){de(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Qi(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}const tr="ng-template";function er(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==Qi(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function nr(t){return 4===t.type&&t.value!==tr}function ir(t,e,n){return e===(4!==t.type||n?t.value:tr)}function rr(t,e,n){let i=4;const r=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(fn(t[e]))return e;return t.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!ir(t,l,n)||""===l&&1===e.length){if(or(i))return!1;s=!0}}else{const h=8&i?l:e[++a];if(8&i&&null!==t.attrs){if(!er(t.attrs,h,n)){if(or(i))return!1;s=!0}continue}const u=sr(8&i?"class":l,r,nr(t),n);if(-1===u){if(or(i))return!1;s=!0;continue}if(""!==h){let t;t=u>o?"":r[u+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==Qi(e,h,0)||2&i&&h!==t){if(or(i))return!1;s=!0}}}}else{if(!s&&!or(i)&&!or(l))return!1;if(s&&or(l))continue;s=!1,i=l|1&i}}return or(i)||s}function or(t){return 0==(1&t)}function sr(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function ar(t,e,n=!1){for(let i=0;i<e.length;i++)if(rr(t,e[i],n))return!0;return!1}function lr(t,e){return t?":not("+e.trim()+")":e}function hr(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&i){const e=t[++n];r+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""===r||or(s)||(e+=lr(o,r),r=""),i=s,o=o||!or(i);n++}return""!==r&&(e+=lr(o,r)),e}const ur={};function cr(t){fr(Ne(),Te(),Qe()+t,Fe())}function fr(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&rn(e,i,n)}else{const i=t.preOrderHooks;null!==i&&on(e,i,0,n)}tn(n)}function dr(t,e){return t<<17|e<<2}function pr(t){return t>>17&32767}function gr(t){return 2|t}function mr(t){return(131068&t)>>2}function yr(t,e){return-131069&t|e<<2}function vr(t){return 1|t}function br(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const n=t.data[o];He(r),n.contentQueries(2,e[o],o)}}}function wr(t,e,n,i,r,o,s,a,l,h){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,_e(u),u[3]=u[15]=t,u[8]=n,u[10]=s||t&&t[10],u[11]=a||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=h||t&&t[9]||null,u[6]=o,u[16]=2==e.type?t[16]:u,u}function xr(t,e,n,i,r){let o=t.data[e];if(null===o)o=function(t,e,n,i,r){const o=Le(),s=De(),a=t.data[e]=function(t,e,n,i,r,o){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,i,r),Me.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const t=function(){const t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Oe(o,!0),o}function kr(t,e,n,i){if(0===n)return-1;const r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function Sr(t,e,n){Xe(e);try{const i=t.viewQuery;null!==i&&Jr(1,i,n);const r=t.template;null!==r&&Mr(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&br(t,e),t.staticViewQueries&&Jr(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Xr(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),i}finally{e[2]&=-5,Je()}}function _r(t,e,n,i){const r=e[2];if(256==(256&r))return;Xe(e);const o=Fe();try{_e(e),Me.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Mr(t,e,n,2,i);const s=3==(3&r);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&rn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&on(e,n,0,null),sn(e,0)}if(function(t){for(let e=Ti(t);null!==e;e=Ni(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],i=n[3];0==(1024&n[2])&&Ce(i,1),n[2]|=1024}}}(e),function(t){for(let e=Ti(t);null!==e;e=Ni(e))for(let t=Jt;t<e.length;t++){const n=e[t],i=n[1];ke(n)&&_r(i,n,i.template,n[8])}}(e),null!==t.contentQueries&&br(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&rn(e,n)}else{const n=t.contentHooks;null!==n&&on(e,n,1),sn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const i=n[t];if(i<0)tn(~i);else{const r=i,o=n[++t],s=n[++t];Ve(o,r),s(2,e[r])}}}finally{tn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Gr(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Jr(2,l,i),!o)if(s){const n=t.viewCheckHooks;null!==n&&rn(e,n)}else{const n=t.viewHooks;null!==n&&on(e,n,2),sn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ce(e[3],-1))}finally{Je()}}function Cr(t,e,n,i){const r=e[10],o=!Fe(),s=xe(e);try{o&&!s&&r.begin&&r.begin(),s&&Sr(t,e,i),_r(t,e,n,i)}finally{o&&!s&&r.end&&r.end()}}function Mr(t,e,n,i,r){const o=Qe();try{tn(-1),2&i&&e.length>Zt&&fr(t,e,Zt,Fe()),n(i,r)}finally{tn(o)}}function Pr(t,e,n){Pe()&&(function(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||kn(n,e),ki(i,e);const s=n.initialInputs;for(let a=r;a<o;a++){const i=t.data[a],o=re(i);o&&Vr(e,n,i);const l=Dn(e,t,a,n);ki(l,e),null!==s&&Ur(0,a-r,l,i,0,s),o&&(be(n.index,e)[8]=l)}}(t,e,n,ye(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=Me.lFrame.currentDirectiveIndex;try{tn(o);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];Ue(n),null===i.hostBindings&&0===i.hostVars&&null===i.hostAttrs||Fr(i,r)}}finally{tn(-1),Ue(s)}}(t,e,n))}function Tr(t,e,n=ye){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(e,t):t[s];t[r++]=a}}}function Nr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ar(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ar(t,e,n,i,r,o,s,a,l,h){const u=Zt+i,c=u+r,f=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:ur);return n}(u,c),d="function"==typeof h?h():h;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:c,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:d,incompleteFirstPass:!1}}function Er(t,e,n,i){const r=to(e);null===n?r.push(i):(r.push(n),t.firstCreatePass&&eo(t).push(i,r.length-1))}function Lr(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function Or(t,e,n,i,r,o,s,a){const l=ye(e,n);let h,u=e.inputs;var c;!a&&null!=u&&(h=u[i])?(io(t,n,h,i,r),ne(e)&&function(t,e){const n=be(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(i="class"===(c=i)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,r=null!=s?s(r,e.value||"",i):r,de(o)?o.setProperty(l,i,r):dn(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Dr(t,e,n,i){let r=!1;if(Pe()){const o=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];ar(n,s.selectors,!1)&&(r||(r=[]),Mn(kn(n,e),t,s.type),re(s)?(Ir(t,n),r.unshift(s)):r.push(s))}return r}(t,e,n),s=null===i?null:{"":-1};if(null!==o){r=!0,Br(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let i=!1,a=!1,l=kr(t,e,o.length,null);for(let r=0;r<o.length;r++){const h=o[r];n.mergedAttrs=pn(n.mergedAttrs,h.hostAttrs),zr(t,n,e,l,h),Rr(l,h,s),null!==h.contentQueries&&(n.flags|=8),null===h.hostBindings&&null===h.hostAttrs&&0===h.hostVars||(n.flags|=128);const u=h.type.prototype;!i&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),i=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,o=[];let s=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=i[l],n=t.inputs,h=null===r||nr(e)?null:qr(n,r);o.push(h),s=Lr(n,l,s),a=Lr(t.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new st("301",`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,s)}return n.mergedAttrs=pn(n.mergedAttrs,n.attrs),r}function jr(t,e,n,i,r,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(i,r,s)}}function Fr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ir(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Rr(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;re(e)&&(n[""]=t)}}function Br(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zr(t,e,n,i,r){t.data[i]=r;const o=r.factory||(r.factory=oe(r.type)),s=new un(o,re(r),null);t.blueprint[i]=s,n[i]=s,jr(t,e,0,i,kr(t,n,r.hostVars,ur),r)}function Vr(t,e,n){const i=ye(e,t),r=Nr(n),o=t[10],s=Kr(t,wr(t,r,null,n.onPush?64:16,i,e,o,o.createRenderer(i,n),null,null));t[e.index]=s}function Ur(t,e,n,i,r,o){const s=o[e];if(null!==s){const t=i.setInput;for(let e=0;e<s.length;){const r=s[e++],o=s[e++],a=s[e++];null!==t?i.setInput(n,a,r,o):n[o]=a}}}function qr(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function Hr(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}function Gr(t,e){const n=be(e,t);if(ke(n)){const t=n[1];80&n[2]?_r(t,n,t.template,n[8]):n[5]>0&&Yr(n)}}function Yr(t){for(let n=Ti(t);null!==n;n=Ni(n))for(let t=Jt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];_r(t,e,t.template,e[8])}else e[5]>0&&Yr(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const i=be(e[n],t);ke(i)&&i[5]>0&&Yr(i)}}function Xr(t,e){const n=be(e,t),i=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n),Sr(i,n,n[8])}function Kr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Wr(t){for(;t;){t[2]|=64;const e=Pi(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function $r(t,e,n){const i=e[10];i.begin&&i.begin();try{_r(t,e,t.template,n)}catch(r){throw no(e,r),r}finally{i.end&&i.end()}}function Zr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=we(n),r=i[1];Cr(r,i,r.template,n)}}(t[8])}function Jr(t,e,n){He(0),e(t,n)}const Qr=(()=>Promise.resolve(null))();function to(t){return t[7]||(t[7]=[])}function eo(t){return t.cleanup||(t.cleanup=[])}function no(t,e){const n=t[9],i=n?n.get(xi,null):null;i&&i.handleError(e)}function io(t,e,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],h=t.data[s];null!==h.setInput?h.setInput(l,r,i,a):l[a]=r}}function ro(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?r=et(r,t):2==o&&(i=et(i,t+": "+e[++s]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}const oo=new Un("INJECTOR",-1);class so{get(t,e=Qn){if(e===Qn){const e=new Error(`NullInjectorError: No provider for ${tt(t)}!`);throw e.name="NullInjectorError",e}return e}}const ao=new Un("Set Injector scope."),lo={},ho={},uo=[];let co;function fo(){return void 0===co&&(co=new so),co}function po(t,e=null,n=null,i){return new go(t,n,e||fo(),i)}class go{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&Yn(e,n=>this.processProvider(n,t,e)),Yn([t],t=>this.processInjectorType(t,[],r)),this.records.set(oo,vo(void 0,this));const o=this.records.get(ao);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof t?null:tt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Qn,n=bt.Default){this.assertNotDestroyed();const i=ri(this);try{if(!(n&bt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Un)&&ft(t);e=n&&this.injectableDefInScope(n)?vo(mo(t),lo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&bt.Self?fo():this.parent).get(t,e=n&bt.Optional&&e===Qn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(tt(t)),i)throw o;return function(t,e,n,i){const r=t.ngTempTokenPath;throw e[ei]&&r.unshift(e[ei]),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=tt(e);if(Array.isArray(e))r=e.map(tt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):tt(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(ti,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{ri(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(tt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=rt(t)))return!1;let i=pt(t);const r=null==i&&t.ngModule||void 0,o=void 0===r?t:r,s=-1!==n.indexOf(o);if(void 0!==r&&(i=pt(r)),null==i)return!1;if(null!=i.imports&&!s){let t;n.push(o);try{Yn(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];Yn(i,t=>this.processProvider(t,n,i||uo))}}this.injectorDefTypes.add(o);const a=oe(o)||(()=>new o);this.records.set(o,vo(a,lo));const l=i.providers;if(null!=l&&!s){const e=t;Yn(l,t=>this.processProvider(t,e,l))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=wo(t=rt(t))?t:rt(t&&t.provide);const r=function(t,e,n){return bo(t)?vo(void 0,t.useValue):vo(yo(t),lo)}(t);if(wo(t)||!0!==t.multi)this.records.get(i);else{let e=this.records.get(i);e||(e=vo(void 0,lo,!0),e.factory=()=>ai(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){var n;return e.value===lo&&(e.value=ho,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function mo(t){const e=ft(t),n=null!==e?e.factory:oe(t);if(null!==n)return n;if(t instanceof Un)throw new Error(`Token ${tt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Wn(e,"?");throw new Error(`Can't resolve all parameters for ${tt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[gt]||t[yt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function yo(t,e,n){let i;if(wo(t)){const e=rt(t);return oe(e)||mo(e)}if(bo(t))i=()=>rt(t.useValue);else if((r=t)&&r.useFactory)i=()=>t.useFactory(...ai(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>si(rt(t.useExisting));else{const e=rt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return oe(e)||mo(e);i=()=>new e(...ai(t.deps))}var r;return i}function vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bo(t){return null!==t&&"object"==typeof t&&ni in t}function wo(t){return"function"==typeof t}const xo=function(t,e,n){return function(t,e=null,n=null,i){const r=po(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let ko=(()=>{class t{static create(t,e){return Array.isArray(t)?xo(t,e,""):xo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Qn,t.NULL=new so,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>si(oo)}),t.__NG_ELEMENT_ID__=-1,t})();function So(t,e){nn(we(t)[1],Ee())}function _o(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const i=[t];for(;e;){let r;if(re(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=Co(t.inputs),e.declaredInputs=Co(t.declaredInputs),e.outputs=Co(t.outputs);const n=r.hostBindings;n&&To(t,n);const o=r.viewQuery,s=r.contentQueries;if(o&&Mo(t,o),s&&Po(t,s),Q(t.inputs,r.inputs),Q(t.declaredInputs,r.declaredInputs),Q(t.outputs,r.outputs),re(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===_o&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=pn(r.hostAttrs,n=pn(n,r.hostAttrs))}}(i)}function Co(t){return t===Et?{}:t===Ot?[]:t}function Mo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function Po(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function To(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}let No=null;function Ao(){if(!No){const t=At.Symbol;if(t&&t.iterator)No=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(No=n)}}}return No}function Eo(t){return!!Lo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ao()in t)}function Lo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Oo(t,e,n){return t[e]=n}function Do(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function jo(t,e,n,i){const r=Do(t,e,n);return Do(t,e+1,i)||r}function Fo(t,e,n,i){const r=Te();return Do(r,Be(),e)&&(Ne(),function(t,e,n,i,r,o){const s=ye(t,e);!function(t,e,n,i,r,o,s){if(null==o)de(t)?t.removeAttribute(e,r,n):e.removeAttribute(r);else{const a=null==s?at(o):s(o,i||"",r);de(t)?t.setAttribute(e,r,a,n):n?e.setAttributeNS(n,r,a):e.setAttribute(r,a)}}(e[11],s,o,t.value,n,i,r)}(en(),r,t,e,n,i)),Fo}function Io(t,e,n,i){return Do(t,Be(),n)?e+at(n)+i:ur}function Ro(t,e,n,i,r,o,s,a){const l=Te(),h=Ne(),u=t+Zt,c=h.firstCreatePass?function(t,e,n,i,r,o,s,a,l){const h=e.consts,u=xr(e,t,4,s||null,Se(h,a));Dr(e,n,u,Se(h,l)),nn(e,u);const c=u.tViews=Ar(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h);return null!==e.queries&&(e.queries.template(e,u),c.queries=e.queries.embeddedTView(u)),u}(u,h,l,e,n,i,r,o,s):h.data[u];Oe(c,!1);const f=l[11].createComment("");Hi(h,l,f,c),ki(f,l),Kr(l,l[u]=Hr(f,l,f,c)),ie(c)&&Pr(h,l,c),null!=s&&Tr(l,c,a)}function Bo(t,e=bt.Default){const n=Te();return null===n?si(t,e):Nn(Ee(),n,rt(t),e)}function zo(t,e,n){const i=Te();return Do(i,Be(),e)&&Or(Ne(),en(),i,t,e,i[11],n,!1),zo}function Vo(t,e,n,i,r){const o=r?"class":"style";io(t,n,e.inputs[o],o,i)}function Uo(t,e,n,i){const r=Te(),o=Ne(),s=Zt+t,a=r[11],l=r[s]=Li(a,e,Me.lFrame.currentNamespace),h=o.firstCreatePass?function(t,e,n,i,r,o,s){const a=e.consts,l=xr(e,t,2,r,Se(a,o));return Dr(e,n,l,Se(a,s)),null!==l.attrs&&ro(l,l.attrs,!1),null!==l.mergedAttrs&&ro(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,r,0,e,n,i):o.data[s];Oe(h,!0);const u=h.mergedAttrs;null!==u&&cn(a,l,u);const c=h.classes;null!==c&&Ji(a,l,c);const f=h.styles;null!==f&&Zi(a,l,f),64!=(64&h.flags)&&Hi(o,r,l,h),0===Me.lFrame.elementDepthCount&&ki(l,r),Me.lFrame.elementDepthCount++,ie(h)&&(Pr(o,r,h),function(t,e,n){if(ee(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}(o,h,r)),null!==i&&Tr(r,h)}function qo(){let t=Ee();De()?je():(t=t.parent,Oe(t,!1));const e=t;Me.lFrame.elementDepthCount--;const n=Ne();n.firstCreatePass&&(nn(n,t),ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Vo(n,e,Te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Vo(n,e,Te(),e.stylesWithoutHost,!1)}function Ho(t,e,n,i){Uo(t,e,n,i),qo()}function Go(){return Te()}function Yo(t){return!!t&&"function"==typeof t.then}const Xo=function(t){return!!t&&"function"==typeof t.subscribe};function Ko(t,e,n=!1,i){const r=Te(),o=Ne(),s=Ee();return function(t,e,n,i,r,o,s=!1,a){const l=ie(i),h=t.firstCreatePass&&eo(t),u=to(e);let c=!0;if(3&i.type){const f=ye(i,e),d=a?a(f):Et,p=d.target||f,g=u.length,m=a?t=>a(ge(t[i.index])).target:i.index;if(de(n)){let s=null;if(!a&&l&&(s=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const t=r[o];if(t===n&&r[o+1]===i){const t=e[7],n=r[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,r,i.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,c=!1;else{o=$o(i,e,o,!1);const t=n.listen(d.name||p,r,o);u.push(o,t),h&&h.push(r,m,g,g+1)}}else o=$o(i,e,o,!0),p.addEventListener(r,o,s),u.push(o),h&&h.push(r,m,g,s)}else o=$o(i,e,o,!1);const f=i.outputs;let d;if(c&&null!==f&&(d=f[r])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=u.length;u.push(o,t),h&&h.push(r,i.index,s,-(s+1))}}}(o,r,r[11],s,t,e,n,i),Ko}function Wo(t,e,n){try{return!1!==e(n)}catch(i){return no(t,i),!1}}function $o(t,e,n,i){return function r(o){if(o===Function)return n;const s=2&t.flags?be(t.index,e):e;0==(32&e[2])&&Wr(s);let a=Wo(e,n,o),l=r.__ngNextListenerFn__;for(;l;)a=Wo(e,l,o)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Zo(t=1){return function(t){return(Me.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Me.lFrame.contextLView))[8]}(t)}function Jo(t,e,n){return Qo(t,"",e,"",n),Jo}function Qo(t,e,n,i,r){const o=Te(),s=Io(o,e,n,i);return s!==ur&&Or(Ne(),en(),o,t,s,o[11],r,!1),Qo}function ts(t,e,n,i,r){const o=t[n+1],s=null===e;let a=i?pr(o):mr(o),l=!1;for(;0!==a&&(!1===l||s);){const n=t[a+1];es(t[a],e)&&(l=!0,t[a+1]=i?vr(n):gr(n)),a=i?pr(n):mr(n)}l&&(t[n+1]=i?gr(o):vr(o))}function es(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Jn(t,e)>=0}const ns={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function is(t){return t.substring(ns.key,ns.keyEnd)}function rs(t,e){const n=ns.textEnd;return n===e?-1:(e=ns.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ns.key=e,n),os(t,e,n))}function os(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ss(t,e){return function(t,e,n,i){const r=Te(),o=Ne(),s=ze(2);o.firstUpdatePass&&us(o,t,s,true),e!==ur&&Do(r,s,e)&&ds(o,o.data[Qe()],r,r[11],t,r[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=tt(di(t))),t}(e),true,s)}(t,e),ss}function as(t){!function(t,e,n,i){const r=Ne(),o=ze(2);r.firstUpdatePass&&us(r,null,o,i);const s=Te();if(n!==ur&&Do(s,o,n)){const a=r.data[Qe()];if(ms(a,i)&&!hs(r,o)){let t=a.classesWithoutHost;null!==t&&(n=et(t,n||"")),Vo(r,a,s,n,i)}else!function(t,e,n,i,r,o,s,a){r===ur&&(r=Lt);let l=0,h=0,u=0<r.length?r[0]:null,c=0<o.length?o[0]:null;for(;null!==u||null!==c;){const s=l<r.length?r[l+1]:void 0,f=h<o.length?o[h+1]:void 0;let d,p=null;u===c?(l+=2,h+=2,s!==f&&(p=c,d=f)):null===c||null!==u&&u<c?(l+=2,p=u):(h+=2,p=c,d=f),null!==p&&ds(t,e,n,i,p,d,true,a),u=l<r.length?r[l]:null,c=h<o.length?o[h]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Lt;const i=[],r=di(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),0,o)}}($n,ls,t,!0)}function ls(t,e){for(let n=function(t){return function(t){ns.key=0,ns.keyEnd=0,ns.value=0,ns.valueEnd=0,ns.textEnd=t.length}(t),rs(t,os(t,0,ns.textEnd))}(e);n>=0;n=rs(e,n))$n(t,is(e),!0)}function hs(t,e){return e>=t.expandoStartIndex}function us(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[Qe()],s=hs(t,n);ms(o,i)&&null===e&&!s&&(e=!1),e=function(t,e,n,i){const r=function(t){const e=Me.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=fs(n=cs(null,t,e,n,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==r)if(n=cs(r,t,e,n,i),null===o){let n=function(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==mr(i))return t[pr(i)]}(t,e,i);void 0!==n&&Array.isArray(n)&&(n=cs(null,t,e,n[1],i),n=fs(n,e.attrs,i),function(t,e,n,i){t[pr(n?e.classBindings:e.styleBindings)]=i}(t,e,i,n))}else o=function(t,e,n){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=fs(i,t[o].hostAttrs,n);return fs(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=pr(s),l=mr(s);t[i]=n;let h,u=!1;if(Array.isArray(n)){const t=n;h=t[1],(null===h||Jn(t,h)>0)&&(u=!0)}else h=n;if(r)if(0!==l){const e=pr(t[a+1]);t[i+1]=dr(e,a),0!==e&&(t[e+1]=yr(t[e+1],i)),t[a+1]=131071&t[a+1]|i<<17}else t[i+1]=dr(a,0),0!==a&&(t[a+1]=yr(t[a+1],i)),a=i;else t[i+1]=dr(l,0),0===a?a=i:t[l+1]=yr(t[l+1],i),l=i;u&&(t[i+1]=gr(t[i+1])),ts(t,h,i,!0),ts(t,h,i,!1),function(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Jn(o,e)>=0&&(n[i+1]=vr(n[i+1]))}(e,h,t,i,o),s=dr(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,n,s,i)}}function cs(t,e,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],i=fs(i,o.hostAttrs,r),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function fs(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),$n(t,s,!!n||e[++o]))}return void 0===t?null:t}function ds(t,e,n,i,r,o,s,a){if(!(3&e.type))return;const l=t.data,h=l[a+1];gs(1==(1&h)?ps(l,e,n,r,mr(h),s):void 0)||(gs(o)||2==(2&h)&&(o=ps(l,null,n,r,a,s)),function(t,e,n,i,r){const o=de(t);if(e)r?o?t.addClass(n,i):n.classList.add(i):o?t.removeClass(n,i):n.classList.remove(i);else{let e=-1===i.indexOf("-")?void 0:Ci.DashCase;if(null==r)o?t.removeStyle(n,i,e):n.style.removeProperty(i);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),e|=Ci.Important),o?t.setStyle(n,i,r,e):n.style.setProperty(i,r,s?"important":"")}}}(i,s,me(Qe(),n),r,o))}function ps(t,e,n,i,r,o){const s=null===e;let a;for(;r>0;){const e=t[r],o=Array.isArray(e),l=o?e[1]:e,h=null===l;let u=n[r+1];u===ur&&(u=h?Lt:void 0);let c=h?Zn(u,i):l===i?u:void 0;if(o&&!gs(c)&&(c=Zn(e,i)),gs(c)&&(a=c,s))return a;const f=t[r+1];r=s?pr(f):mr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Zn(t,i))}return a}function gs(t){return void 0!==t}function ms(t,e){return 0!=(t.flags&(e?16:32))}function ys(t,e=""){const n=Te(),i=Ne(),r=t+Zt,o=i.firstCreatePass?xr(i,r,1,e,null):i.data[r],s=n[r]=function(t,e){return de(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Hi(i,n,s,o),Oe(o,!1)}function vs(t){return bs("",t,""),vs}function bs(t,e,n){const i=Te(),r=Io(i,t,e,n);return r!==ur&&function(t,e,n){const i=me(e,t);!function(t,e,n){de(t)?t.setValue(e,n):e.textContent=n}(t[11],i,n)}(i,Qe(),r),bs}const ws=void 0;var xs=["en",[["a","p"],["AM","PM"],ws],[["AM","PM"],ws,ws],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ws,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ws,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ws,"{1} 'at' {0}",ws],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ks={};function Ss(t){return t in ks||(ks[t]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[t]),ks[t]}var _s=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Cs="en-US";let Ms=Cs;function Ps(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ms=t.toLowerCase().replace(/_/g,"-"))}function Ts(t,e,n,i,r){if(t=rt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ts(t[o],e,n,i,r);else{const o=Ne(),s=Te();let a=wo(t)?t:rt(t.provide),l=yo(t);const h=Ee(),u=1048575&h.providerIndexes,c=h.directiveStart,f=h.providerIndexes>>20;if(wo(t)||!t.multi){const i=new un(l,r,Bo),d=Es(a,e,r?u:u+f,c);-1===d?(Mn(kn(h,s),o,a),Ns(o,t,e.length),e.push(a),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),n.push(i),s.push(i)):(n[d]=i,s[d]=i)}else{const d=Es(a,e,u+f,c),p=Es(a,e,u,u+f),g=d>=0&&n[d],m=p>=0&&n[p];if(r&&!m||!r&&!g){Mn(kn(h,s),o,a);const u=function(t,e,n,i,r){const o=new un(t,n,Bo);return o.multi=[],o.index=e,o.componentProviders=0,As(o,r,i&&!n),o}(r?Os:Ls,n.length,r,i,l);!r&&m&&(n[p].providerFactory=u),Ns(o,t,e.length,0),e.push(a),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),n.push(u),s.push(u)}else Ns(o,t,d>-1?d:p,As(n[r?p:d],l,!r&&i));!r&&i&&m&&n[p].componentProviders++}}}function Ns(t,e,n,i){const r=wo(e);if(r||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[i,o]):s[t+1].push(i,o)}else s.push(n,o)}}}function As(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Es(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Ls(t,e,n,i){return Ds(this.multi,[])}function Os(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Dn(n,n[1],this.providerFactory.index,i);o=e.slice(0,t),Ds(r,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ds(r,o);return o}function Ds(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function js(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=Ne();if(i.firstCreatePass){const r=re(t);Ts(n,i.data,i.blueprint,r,!0),Ts(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}class Fs{}class Is{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${tt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Rs=(()=>{class t{}return t.NULL=new Is,t})();function Bs(...t){}function zs(t,e){return new Us(ye(t,e))}const Vs=function(){return zs(Ee(),Te())};let Us=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Vs,t})();function qs(t){return t instanceof Us?t.nativeElement:t}class Hs{}let Gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ys(),t})();const Ys=function(){const t=Te(),e=be(Ee().index,t);return function(t){return t[11]}(Qt(e)?e:t)};let Xs=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class Ks{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ws=new Ks("11.2.6");class $s{constructor(){}supports(t){return Eo(t)}create(t){return new Js(t)}}const Zs=(t,e)=>e;class Js{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Zs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const o=!n||e&&e.currentIndex<na(n,i,r)?e:n,s=na(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);const t=s-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,o=i+n;e<=o&&o<t&&(r[n]=i+1)}r[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Eo(t))throw new Error(`Error trying to diff '${tt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,n,i,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),o=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ao()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,t,i,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),o=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):t=this._addAfter(new Qs(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ea),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ea),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Qs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ta{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ea{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ta,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function na(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class ia{constructor(){}supports(t){return t instanceof Map||Lo(t)}create(){return new ra}}class ra{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Lo(t)))throw new Error(`Error trying to diff '${tt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new oa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class oa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sa(){return new aa([new $s])}let aa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||sa()),deps:[[t,new ci,new ui]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:sa}),t})();function la(){return new ha([new ia])}let ha=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||la()),deps:[[t,new ci,new ui]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:la}),t})();function ua(t,e,n,i,r=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&i.push(ge(o)),te(o))for(let t=Jt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ua(e[1],e,n,i)}const s=n.type;if(8&s)ua(t,e,n.child,i);else if(32&s){const t=Mi(n,e);let r;for(;r=t();)i.push(r)}else if(16&s){const t=Yi(e,n);if(Array.isArray(t))i.push(...t);else{const n=Pi(e[16]);ua(n[1],n,t,i,!0)}}n=r?n.projectionNext:n.next}return i}class ca{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ua(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(te(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Di(t,n),Kn(e,n))}this._attachedToViewContainer=!1}ji(this._lView[1],this._lView)}onDestroy(t){Er(this._lView[1],this._lView,null,t)}markForCheck(){Wr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$r(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ie(!0);try{$r(t,e,n)}finally{Ie(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Wi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class fa extends ca{constructor(t){super(t),this._view=t}detectChanges(){Zr(this._view)}checkNoChanges(){!function(t){Ie(!0);try{Zr(t)}finally{Ie(!1)}}(this._view)}get context(){return null}}const da=function(t=!1){return function(t,e,n){if(!n&&ne(t)){const n=be(t.index,e);return new ca(n,n)}return 47&t.type?new ca(e[16],e):null}(Ee(),Te(),t)};let pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=da,t.__ChangeDetectorRef__=!0,t})();const ga=[new ia],ma=new aa([new $s]),ya=new ha(ga),va=function(){return ka(Ee(),Te())};let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=va,t})();const wa=ba,xa=class extends wa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=wr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(n[19]=i.createEmbeddedView(e)),Sr(e,n,t),new ca(n)}};function ka(t,e){return 4&t.type?new xa(e,t,zs(t,e)):null}class Sa{}class _a{}const Ca=function(){return Ea(Ee(),Te())};let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ca,t})();const Pa=Ma,Ta=class extends Pa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return zs(this._hostTNode,this._hostLView)}get injector(){return new In(this._hostTNode,this._hostLView)}get parentInjector(){const t=Cn(this._hostTNode,this._hostLView);if(mn(t)){const e=vn(t,this._hostLView),n=yn(t);return new In(e[1].data[n+8],e)}return new In(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Na(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const o=n||this.parentInjector;if(!r&&null==t.ngModule&&o){const t=o.get(Sa,null);t&&(r=t)}const s=t.create(o,i,void 0,r);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,i=n[1];if(te(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new Ta(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,i){const r=Jt+i,o=n.length;i>0&&(n[r-1][4]=e),i<o-Jt?(e[4]=n[r],Xn(n,Jt+i,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,n,o,r);const s=Xi(r,o),a=n[11],l=Vi(a,o[7]);return null!==l&&function(t,e,n,i,r,o){i[0]=r,i[6]=e,Wi(t,i,n,1,r,o)}(i,o[6],a,n,l,s),t.attachToViewContainerRef(),Xn(Aa(o),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Na(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Di(this._lContainer,e);n&&(Kn(Aa(this._lContainer),e),ji(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Di(this._lContainer,e);return n&&null!=Kn(Aa(this._lContainer),e)?new ca(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Na(t){return t[8]}function Aa(t){return t[8]||(t[8]=[])}function Ea(t,e){let n;const i=e[t.index];if(te(i))n=i;else{let r;if(8&t.type)r=ge(i);else{const n=e[11];r=n.createComment("");const i=ye(t,e);Ri(n,Vi(n,i),r,function(t,e){return de(t)?t.nextSibling(e):e.nextSibling}(n,i),!1)}e[t.index]=n=Hr(i,e,r,t),Kr(e,n)}return new Ta(n,t,e)}const La={};class Oa extends Rs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Wt(t);return new Fa(e,this.ngModule)}}function Da(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ja=new Un("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Si});class Fa extends Fs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(hr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Da(this.componentDef.inputs)}get outputs(){return Da(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const o=t.get(n,La,r);return o!==La||i===La?o:e.get(n,i,r)}}}(t,i.injector):t,o=r.get(Hs,pe),s=r.get(Xs,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(de(t))return t.selectRootElement(e,n===Ct.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(a,n,this.componentDef.encapsulation):Li(o.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,c={components:[],scheduler:Si,clean:Qr,playerHandler:null,flags:0},f=Ar(0,null,null,1,0,null,null,null,null,null),d=wr(null,f,c,u,null,null,o,a,s,r);let p,g;Xe(d);try{const t=function(t,e,n,i,r,o){const s=n[1];n[20]=t;const a=xr(s,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(ro(a,l,!0),null!==t&&(cn(r,t,l),null!==a.classes&&Ji(r,t,a.classes),null!==a.styles&&Zi(r,t,a.styles)));const h=i.createRenderer(t,e),u=wr(n,Nr(e),null,e.onPush?64:16,n[20],a,i,h,null,null);return s.firstCreatePass&&(Mn(kn(a,n),s,e.type),Ir(s,a),Br(a,n.length,1)),Kr(n,u),n[20]=u}(h,this.componentDef,d,o,a);if(h)if(n)cn(a,h,["ng-version",Ws.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!or(r))break;r=o}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&cn(a,h,t),e&&e.length>0&&Ji(a,h,e.join(" "))}if(g=ve(f,Zt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=e[n];t.push(null!=i?Array.from(i):null)}}p=function(t,e,n,i,r){const o=n[1],s=function(t,e,n){const i=Ee();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),zr(t,i,e,kr(t,e,1,null),n));const r=Dn(e,t,i.directiveStart,i);ki(r,e);const o=ye(i,e);return o&&ki(o,e),r}(o,n,e);if(i.components.push(s),t[8]=s,r&&r.forEach(t=>t(s,e)),e.contentQueries){const t=Ee();e.contentQueries(1,s,t.directiveStart)}const a=Ee();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(tn(a.index),jr(n[1],a,0,a.directiveStart,a.directiveEnd,e),Fr(e,s)),s}(t,this.componentDef,d,c,[So]),Sr(f,d,null)}finally{Je()}return new Ia(this.componentType,p,zs(g,d),d,g)}}class Ia extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.instance=e,this.hostView=this.changeDetectorRef=new fa(i),this.componentType=t}get injector(){return new In(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ra=new Map;class Ba extends Sa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Oa(this);const n=$t(t),i=t[Rt]||null;i&&Ps(i),this._bootstrapComponents=_i(n.bootstrap),this._r3Injector=po(t,e,[{provide:Sa,useValue:this},{provide:Rs,useValue:this.componentFactoryResolver}],tt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ko.THROW_IF_NOT_FOUND,n=bt.Default){return t===ko||t===Sa||t===oo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class za extends _a{constructor(t){super(),this.moduleType=t,null!==$t(t)&&function(t){const e=new Set;!function t(n){const i=$t(n,!0),r=i.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${tt(e)} vs ${tt(e.name)}`)}(r,Ra.get(r),n),Ra.set(r,n));const o=_i(i.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ba(this.moduleType,t)}}function Va(t,e,n,i,r,o){return function(t,e,n,i,r,o,s,a){const l=e+n;return function(t,e,n,i,r){const o=jo(t,e,n,i);return Do(t,e+2,r)||o}(t,l,r,o,s)?Oo(t,l+3,a?i.call(a,r,o,s):i(r,o,s)):Ua(t,l+3)}(Te(),Re(),t,e,n,i,r,o)}function Ua(t,e){const n=t[e];return n===ur?void 0:n}const qa=class extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let i,r=t=>null,o=()=>null;t&&"object"==typeof t?(i=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(i,r,o);return t instanceof c&&t.add(s),s}};function Ha(){return this._results[Ao()]()}class Ga{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ao(),n=Ga.prototype;n[e]||(n[e]=Ha)}get changes(){return this._changes||(this._changes=new qa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const i=Gn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(n._results,i,e))&&(n._results=i,n.length=i.length,n.last=i[this.length-1],n.first=i[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ya{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ya(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);i.push(this.queries[n.indexInDeclarationView].clone())}return new Xa(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==rl(t,e).matches&&this.queries[e].setDirty()}}class Ka{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Wa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const i=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,i);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new Wa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class $a{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new $a(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const r=n[i];this.matchTNodeWithReadOption(t,e,Za(e,r)),this.matchTNodeWithReadOption(t,e,On(e,t,r,!1,!1))}else n===ba?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,On(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===Us||i===Ma||i===ba&&4&e.type)this.addMatch(e.index,-2);else{const n=On(e,t,i,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Za(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function Ja(t,e,n,i){return-1===n?function(t,e){return 11&t.type?zs(t,e):4&t.type?ka(t,e):null}(e,t):-2===n?function(t,e,n){return n===Us?zs(e,t):n===ba?ka(e,t):n===Ma?Ea(e,t):void 0}(t,e,i):Dn(t,t[1],n,e)}function Qa(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const i=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const r=o[t];s.push(r<0?null:Ja(e,i[r],o[t+1],n.metadata.read))}r.matches=s}return r.matches}function tl(t,e,n,i){const r=t.queries.getByIndex(n),o=r.matches;if(null!==o){const s=Qa(t,e,r,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)i.push(s[t/2]);else{const r=o[t+1],s=e[-n];for(let t=Jt;t<s.length;t++){const e=s[t];e[17]===e[3]&&tl(e[1],e,r,i)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];tl(n[1],n,r,i)}}}}}return i}function el(t){const e=Te(),n=Ne(),i=qe();He(i+1);const r=rl(n,i);if(t.dirty&&xe(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?tl(n,e,i,[]):Qa(n,e,r,i);t.reset(o,qs),t.notifyOnChanges()}return!0}return!1}function nl(t,e,n){const i=Ne();i.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Wa),t.queries.track(new $a(e,-1))}(i,new Ka(t,e,n)),2==(2&e)&&(i.staticViewQueries=!0)),function(t,e,n){const i=new Ga(4==(4&n));Er(t,e,i,i.destroy),null===e[19]&&(e[19]=new Xa),e[19].queries.push(new Ya(i))}(i,Te(),e)}function il(){return t=Te(),e=qe(),t[19].queries[e].queryList;var t,e}function rl(t,e){return t.queries.getByIndex(e)}const ol=new Un("Application Initializer");let sl=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Bs,this.reject=Bs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Yo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(si(ol,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const al=new Un("AppId"),ll={provide:al,useFactory:function(){return`${hl()}${hl()}${hl()}`},deps:[]};function hl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ul=new Un("Platform Initializer"),cl=new Un("Platform ID"),fl=new Un("appBootstrapListener");let dl=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const pl=new Un("LocaleId"),gl=new Un("DefaultCurrencyCode");class ml{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const yl=function(t){return new za(t)},vl=yl,bl=function(t){return Promise.resolve(yl(t))},wl=function(t){const e=yl(t),n=_i($t(t).declarations).reduce((t,e)=>{const n=Wt(e);return n&&t.push(new Fa(n)),t},[]);return new ml(e,n)},xl=wl,kl=function(t){return Promise.resolve(wl(t))};let Sl=(()=>{class t{constructor(){this.compileModuleSync=vl,this.compileModuleAsync=bl,this.compileModuleAndAllComponentsSync=xl,this.compileModuleAndAllComponentsAsync=kl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const _l=(()=>Promise.resolve(0))();function Cl(t){"undefined"==typeof Zone?_l.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ml{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qa(!1),this.onMicrotaskEmpty=new qa(!1),this.onStable=new qa(!1),this.onError=new qa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&e,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=At.requestAnimationFrame,e=At.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Nl(t),Tl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Nl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return Al(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),El(t)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return Al(t),n.invoke(r,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),El(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,Nl(t),Tl(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ml.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ml.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,Pl,Bs,Bs);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Pl={};function Tl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Nl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Al(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function El(t){t._nesting--,Tl(t)}class Ll{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qa,this.onMicrotaskEmpty=new qa,this.onStable=new qa,this.onError=new qa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let Ol=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ml.assertNotInAngularZone(),Cl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(si(Ml))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Dl=(()=>{class t{constructor(){this._applications=new Map,Il.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Il.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class jl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Fl,Il=new jl,Rl=!0,Bl=!1;function zl(){return Bl=!0,Rl}const Vl=new Un("AllowMultipleToken");class Ul{constructor(t,e){this.name=t,this.token=e}}function ql(t,e,n=[]){const i=`Platform: ${e}`,r=new Un(i);return(e=[])=>{let o=Hl();if(!o||o.injector.get(Vl,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:ao,useValue:"platform"});!function(t){if(Fl&&!Fl.destroyed&&!Fl.injector.get(Vl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Fl=t.get(Gl);const e=t.get(ul,null);e&&e.forEach(t=>t())}(ko.create({providers:t,name:i}))}return function(t){const e=Hl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function Hl(){return Fl&&!Fl.destroyed?Fl:null}let Gl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ll:("zone.js"===t?void 0:t)||new Ml({enableLongStackTrace:zl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),i=[{provide:Ml,useValue:n}];return n.run(()=>{const e=ko.create({providers:i,parent:this.injector,name:t.moduleType.name}),r=t.create(e),o=r.injector.get(xi,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});r.onDestroy(()=>{Kl(this._modules,r),t.unsubscribe()})}),function(t,e,n){try{const i=n();return Yo(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(o,n,()=>{const t=r.injector.get(sl);return t.runInitializers(),t.donePromise.then(()=>(Ps(r.injector.get(pl,Cs)||Cs),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const n=Yl({},e);return function(t,e,n){const i=new za(n);return Promise.resolve(i)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Xl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${tt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(si(ko))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Yl(t,e){return Array.isArray(e)?e.reduce(Yl,t):Object.assign(Object.assign({},t),e)}let Xl=(()=>{class t{constructor(t,e,n,i,r){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ml.assertNotInAngularZone(),Cl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ml.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return C(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:q(e)(H(t,n))}(o,s.pipe(t=>{return G()((e=Z,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,W);return i.source=t,i.subjectFactory=n,i})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Fs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(Sa),r=n.create(ko.NULL,[],e||n.selector,i),o=r.location.nativeElement,s=r.injector.get(Ol,null),a=s&&r.injector.get(Dl);return s&&a&&a.registerApplication(o,s),r.onDestroy(()=>{this.detachView(r.hostView),Kl(this.components,r),a&&a.unregisterApplication(o)}),this._loadComponent(r),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Kl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(fl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(si(Ml),si(ko),si(xi),si(Rs),si(sl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Kl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Wl{}class $l{}const Zl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Jl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Zl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split("#");return void 0===i&&(i="default"),n("zn8P")(e).then(t=>t[i]).then(t=>Ql(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>Ql(t,e,i))}}return t.\u0275fac=function(e){return new(e||t)(si(Sl),si($l,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Ql(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const th=ql(null,"core",[{provide:cl,useValue:"unknown"},{provide:Gl,deps:[ko]},{provide:Dl,deps:[]},{provide:dl,deps:[]}]),eh=[{provide:Xl,useClass:Xl,deps:[Ml,ko,xi,Rs,sl]},{provide:ja,deps:[Ml],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:sl,useClass:sl,deps:[[new ui,ol]]},{provide:Sl,useClass:Sl,deps:[]},ll,{provide:aa,useFactory:function(){return ma},deps:[]},{provide:ha,useFactory:function(){return ya},deps:[]},{provide:pl,useFactory:function(t){return Ps(t=t||"undefined"!=typeof $localize&&$localize.locale||Cs),t},deps:[[new hi(pl),new ui,new ci]]},{provide:gl,useValue:"USD"}];let nh=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(si(Xl))},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({providers:eh}),t})(),ih=null;function rh(){return ih}const oh=new Un("DocumentToken");let sh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:ah,token:t,providedIn:"platform"}),t})();function ah(){return si(hh)}const lh=new Un("Location Initialized");let hh=(()=>{class t extends sh{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=rh().getLocation(),this._history=rh().getHistory()}getBaseHrefFromDOM(){return rh().getBaseHref(this._doc)}onPopState(t){rh().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){rh().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){uh()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){uh()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(si(oh))},t.\u0275prov=ut({factory:ch,token:t,providedIn:"platform"}),t})();function uh(){return!!window.history.pushState}function ch(){return new hh(si(oh))}function fh(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function dh(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ph(t){return t&&"?"!==t[0]?"?"+t:t}let gh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:mh,token:t,providedIn:"root"}),t})();function mh(t){const e=si(oh).location;return new vh(si(sh),e&&e.origin||"")}const yh=new Un("appBaseHref");let vh=(()=>{class t extends gh{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fh(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+ph(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+ph(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+ph(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(si(sh),si(yh,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),bh=(()=>{class t extends gh{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=fh(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+ph(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+ph(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(si(sh),si(yh,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),wh=(()=>{class t{constructor(t,e){this._subject=new qa,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=dh(kh(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+ph(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,kh(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ph(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ph(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(si(gh),si(sh))},t.normalizeQueryParams=ph,t.joinWithSlash=fh,t.stripTrailingSlash=dh,t.\u0275prov=ut({factory:xh,token:t,providedIn:"root"}),t})();function xh(){return new wh(si(gh),si(sh))}function kh(t){return t.replace(/\/index.html$/,"")}var Sh=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class _h{}let Ch=(()=>{class t extends _h{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ss(e);if(n)return n;const i=e.split("-")[0];if(n=Ss(i),n)return n;if("en"===i)return xs;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[_s.PluralCase]}(e||this.locale)(t)){case Sh.Zero:return"zero";case Sh.One:return"one";case Sh.Two:return"two";case Sh.Few:return"few";case Sh.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(si(pl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Mh=(()=>{class t{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Eo(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${tt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Bo(aa),Bo(ha),Bo(Us),Bo(Gs))},t.\u0275dir=Kt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Ph{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Th=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Ph(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new Nh(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const o=new Nh(t,r);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Bo(Ma),Bo(ba),Bo(aa))},t.\u0275dir=Kt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Nh{constructor(t,e){this.record=t,this.view=e}}let Ah=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({providers:[{provide:_h,useClass:Ch}]}),t})(),Eh=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new Lh(si(oh),window)}),t})();class Lh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Oh(this.window.history)||Oh(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Oh(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Dh extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Dh,ih||(ih=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Fh||(Fh=document.querySelector("base"),Fh)?Fh.getAttribute("href"):null;return null==e?null:(n=e,jh||(jh=document.createElement("a")),jh.setAttribute("href",n),"/"===jh.pathname.charAt(0)?jh.pathname:"/"+jh.pathname);var n}resetBaseElement(){Fh=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}(document.cookie,t)}}let jh,Fh=null;const Ih=new Un("TRANSITION_ID"),Rh=[{provide:ol,useFactory:function(t,e,n){return()=>{n.get(sl).donePromise.then(()=>{const n=rh();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Ih,oh,ko],multi:!0}];class Bh{static init(){var t;t=new Bh,Il=t}addToWindow(t){At.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},At.getAllAngularTestabilities=()=>t.getAllTestabilities(),At.getAllAngularRootElements=()=>t.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(t=>{const e=At.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(r)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?rh().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const zh=new Un("EventManagerPlugins");let Vh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(si(zh),si(Ml))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Uh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=rh().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let qh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Hh=(()=>{class t extends qh{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>rh().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(si(oh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Gh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yh=/%COMP%/g;function Xh(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Xh(t,r,n):(r=r.replace(Yh,t),n.push(r))}return n}function Kh(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new $h(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ct.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Zh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Ct.ShadowDom:return new Jh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Xh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(si(Vh),si(Hh),si(al))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class $h{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=Gh[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=Gh[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(Ci.DashCase|Ci.Important)?t.style.setProperty(e,n,i&Ci.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ci.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Kh(n)):this.eventManager.addEventListener(t,e,Kh(n))}}class Zh extends $h{constructor(t,e,n,i){super(t),this.component=n;const r=Xh(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(Yh,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Yh,i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Jh extends $h{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=Xh(i.id,i.styles,[]);for(let o=0;o<r.length;o++){const t=document.createElement("style");t.textContent=r[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Qh=(()=>{class t extends Uh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(si(oh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const tu=["alt","control","meta","shift"],eu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},iu={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ru=(()=>{class t extends Uh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),o=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rh().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let o="";if(tu.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=r,0!=n.length||0===r.length)return null;const s={};return s.domEventName=i,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&nu.hasOwnProperty(e)&&(e=nu[e]))}return eu[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),tu.forEach(i=>{i!=n&&(0,iu[i])(t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(si(oh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const ou=ql(th,"browser",[{provide:cl,useValue:"browser"},{provide:ul,useValue:function(){Dh.makeCurrent(),Bh.init()},multi:!0},{provide:oh,useFactory:function(){return function(t){fe=t}(document),document},deps:[]}]),su=[[],{provide:ao,useValue:"root"},{provide:xi,useFactory:function(){return new xi},deps:[]},{provide:zh,useClass:Qh,multi:!0,deps:[oh,Ml,cl]},{provide:zh,useClass:ru,multi:!0,deps:[oh]},[],{provide:Wh,useClass:Wh,deps:[Vh,Hh,al]},{provide:Hs,useExisting:Wh},{provide:qh,useExisting:Hh},{provide:Hh,useClass:Hh,deps:[oh]},{provide:Ol,useClass:Ol,deps:[Ml]},{provide:Vh,useClass:Vh,deps:[zh,Ml]},[]];let au=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:al,useValue:e.appId},{provide:Ih,useExisting:al},Rh]}}}return t.\u0275fac=function(e){return new(e||t)(si(t,12))},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({providers:su,imports:[Ah,nh]}),t})();function lu(...t){let e=t[t.length-1];return C(e)?(t.pop(),j(t,e)):H(t)}function hu(){}function uu(t,e,n){return function(i){return i.lift(new cu(t,e,n))}}"undefined"!=typeof window&&window;class cu{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new fu(t,this.nextOrObserver,this.error,this.complete))}}class fu extends p{constructor(t,e,n,r){super(t),this._tapNext=hu,this._tapError=hu,this._tapComplete=hu,this._tapError=n||hu,this._tapComplete=r||hu,i(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||hu,this._tapError=e.error||hu,this._tapComplete=e.complete||hu)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class du extends c{constructor(t,e){super()}schedule(t,e=0){return this}}class pu extends du{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,i=!1;try{this.work(t)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let gu=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class mu extends gu{constructor(t,e=gu.now){super(t,()=>mu.delegate&&mu.delegate!==this?mu.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return mu.delegate&&mu.delegate!==this?mu.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const yu=new mu(pu);function vu(t,e){return function(n){return n.lift(new bu(t,e))}}class bu{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new wu(t,this.predicate,this.thisArg))}}class wu extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const xu=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})(),ku=new v(t=>t.complete());function Su(t){return t?function(t){return new v(e=>t.schedule(()=>e.complete()))}(t):ku}function _u(t){return e=>0===t?Su():e.lift(new Cu(t))}class Cu{constructor(t){if(this.total=t,this.total<0)throw new xu}call(t,e){return e.subscribe(new Mu(t,this.total))}}class Mu extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}let Pu;try{Pu="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(db){Pu=!1}let Tu=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Pu)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(si(cl))},t.\u0275prov=ut({factory:function(){return new t(si(cl))},token:t,providedIn:"root"}),t})(),Nu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})();"undefined"!=typeof Element&&Element;const Au="cdk-high-contrast-black-on-white",Eu="cdk-high-contrast-white-on-black",Lu="cdk-high-contrast-active";let Ou=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Lu),t.remove(Au),t.remove(Eu);const e=this.getHighContrastMode();1===e?(t.add(Lu),t.add(Au)):2===e&&(t.add(Lu),t.add(Eu))}}}return t.\u0275fac=function(e){return new(e||t)(si(Tu),si(oh))},t.\u0275prov=ut({factory:function(){return new t(si(Tu),si(oh))},token:t,providedIn:"root"}),t})(),Du=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})();const ju=new Ks("11.1.0");function Fu(...t){return q(1)(lu(...t))}class Iu{}const Ru="*";function Bu(t,e=null){return{type:2,steps:t,options:e}}function zu(t){return{type:6,styles:t,offset:null}}function Vu(t){Promise.resolve(null).then(t)}class Uu{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Vu(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class qu{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?Vu(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Hu(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Gu(t){switch(t.length){case 0:return new Uu;case 1:return t[0];default:return new qu(t)}}function Yu(t,e,n,i,r={},o={}){const s=[],a=[];let l=-1,h=null;if(i.forEach(t=>{const n=t.offset,i=n==l,u=i&&h||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,s),a){case"!":a=r[n];break;case Ru:a=o[n];break;default:a=e.normalizeStyleValue(n,i,a,s)}u[i]=a}),i||a.push(u),h=u,l=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function Xu(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&Ku(n,"start",t)));break;case"done":t.onDone(()=>i(n&&Ku(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&Ku(n,"destroy",t)))}}function Ku(t,e,n){const i=n.totalTime,r=Wu(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),o=t._data;return null!=o&&(r._data=o),r}function Wu(t,e,n,i,r="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function $u(t,e,n){let i;return t instanceof Map?(i=t.get(e),i||t.set(e,i=n)):(i=t[e],i||(i=t[e]=n)),i}function Zu(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Ju=(t,e)=>!1,Qu=(t,e)=>!1,tc=(t,e,n)=>[];const ec=Hu();(ec||"undefined"!=typeof Element)&&(Ju=(t,e)=>t.contains(e),Qu=(()=>{if(ec||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Qu}})(),tc=(t,e,n)=>{let i=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)i.push(n[t])}else{const n=t.querySelector(e);n&&i.push(n)}return i});let nc=null,ic=!1;function rc(t){nc||(nc=("undefined"!=typeof document?document.body:null)||{},ic=!!nc.style&&"WebkitAppearance"in nc.style);let e=!0;return nc.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in nc.style,!e&&ic)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in nc.style),e}const oc=Qu,sc=Ju,ac=tc;function lc(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}let hc=(()=>{class t{validateStyleProperty(t){return rc(t)}matchesElement(t,e){return oc(t,e)}containsElement(t,e){return sc(t,e)}query(t,e,n){return ac(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,o=[],s){return new Uu(n,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),uc=(()=>{class t{}return t.NOOP=new hc,t})();const cc="ng-enter",fc="ng-leave",dc="ng-trigger",pc=".ng-trigger",gc="ng-animating",mc=".ng-animating";function yc(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:vc(parseFloat(e[1]),e[2])}function vc(t,e){switch(e){case"s":return 1e3*t;default:return t}}function bc(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=vc(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(r=vc(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else i=t;if(!n){let n=!1,o=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:o}}(t,e,n)}function wc(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function xc(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else wc(t,n);return n}function kc(t,e,n){return n?e+":"+n+";":""}function Sc(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=kc(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=kc(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function _c(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=Lc(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),Hu()&&Sc(t))}function Cc(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Lc(e);t.style[n]=""}),Hu()&&Sc(t))}function Mc(t){return Array.isArray(t)?1==t.length?t[0]:Bu(t):t}const Pc=new RegExp("{{\\s*(.+?)\\s*}}","g");function Tc(t){let e=[];if("string"==typeof t){let n;for(;n=Pc.exec(t);)e.push(n[1]);Pc.lastIndex=0}return e}function Nc(t,e,n){const i=t.toString(),r=i.replace(Pc,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function Ac(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Ec=/-+([a-z0-9])/g;function Lc(t){return t.replace(Ec,(...t)=>t[1].toUpperCase())}function Oc(t,e){return 0===t||0===e}function Dc(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let o=e[0],s=[];if(i.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var r=1;r<e.length;r++){let n=e[r];s.forEach(function(e){n[e]=Fc(t,e)})}}return e}function jc(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Fc(t,e){return window.getComputedStyle(t)[e]}const Ic="*";function Rc(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],o=i[2],s=i[3];e.push(Vc(r,s)),"<"!=o[0]||r==Ic&&s==Ic||e.push(Vc(s,r))}(t,n,e)):n.push(t),n}const Bc=new Set(["true","1"]),zc=new Set(["false","0"]);function Vc(t,e){const n=Bc.has(t)||zc.has(t),i=Bc.has(e)||zc.has(e);return(r,o)=>{let s=t==Ic||t==r,a=e==Ic||e==o;return!s&&n&&"boolean"==typeof r&&(s=r?Bc.has(t):zc.has(t)),!a&&i&&"boolean"==typeof o&&(a=o?Bc.has(e):zc.has(e)),s&&a}}const Uc=new RegExp("s*:selfs*,?","g");function qc(t,e,n){return new Hc(t).build(e,n)}class Hc{constructor(t){this._driver=t}build(t,e){const n=new Gc(e);return this._resetContextStyleTimingState(n),jc(this,Mc(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,o.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:o,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,o=i||{};if(n.styles.forEach(t=>{if(Yc(t)){const e=t;Object.keys(e).forEach(t=>{Tc(e[t]).forEach(t=>{o.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=Ac(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=jc(this,Mc(t.animation),e);return{type:1,matchers:Rc(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Xc(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>jc(this,t,e)),options:Xc(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=jc(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:Xc(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Kc(bc(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Kc(0,0,"");return t.dynamic=!0,t.strValue=i,t}return n=n||bc(i,e),Kc(n.duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:zu({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,o=!1;if(!r){o=!0;const t={};n.easing&&(t.easing=n.easing),r=zu(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(r,e);s.isEmptyStep=o,i=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Ru?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(Yc(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(r!=i&&r>=s.startTime&&i<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=s.startTime),a&&(o[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=Tc(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let o=!1,s=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Yc(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Yc(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),h=0;return null!=l&&(i++,h=n.offset=l),s=s||h<0||h>1,o=o||h<a,a=h,r.push(h),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const h=t.steps.length;let u=0;i>0&&i<h?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(u=1/(h-1));const c=h-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return l.forEach((t,i)=>{const o=u>0?i==c?1:u*i:r[i],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:jc(this,Mc(t.animation),e),options:Xc(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Xc(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Xc(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Uc,"")),[t=t.replace(/@\*/g,pc).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,mc),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,$u(e.collectedStyles,e.currentQuerySelector,{});const s=jc(this,Mc(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Xc(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:bc(t.timings,e.errors,!0);return{type:12,animation:jc(this,Mc(t.animation),e),timings:n,options:null}}}class Gc{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Yc(t){return!Array.isArray(t)&&"object"==typeof t}function Xc(t){var e;return t?(t=wc(t)).params&&(t.params=(e=t.params)?wc(e):null):t={},t}function Kc(t,e,n){return{duration:t,delay:e,easing:n}}function Wc(t,e,n,i,r,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class $c{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Zc=new RegExp(":enter","g"),Jc=new RegExp(":leave","g");function Qc(t,e,n,i,r,o={},s={},a,l,h=[]){return(new tf).buildKeyframes(t,e,n,i,r,o,s,a,l,h)}class tf{buildKeyframes(t,e,n,i,r,o,s,a,l,h=[]){l=l||new $c;const u=new nf(t,e,l,i,r,h,[]);u.options=a,u.currentTimeline.setStyles([o],null,u.errors,a),jc(this,n,u);const c=u.timelines.filter(t=>t.containsAnimation());if(c.length&&Object.keys(s).length){const t=c[c.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,u.errors,a)}return c.length?c.map(t=>t.buildKeyframes()):[Wc(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,i,i.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?yc(n.duration):null,o=null!=n.delay?yc(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,o);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),jc(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&(i=e.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=ef);const t=yc(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>jc(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?yc(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);r&&s.delayNextStep(r),jc(this,o,s),i=Math.max(i,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return bc(e.params?Nc(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?yc(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ef);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,i)=>{e.currentQueryIndex=i;const s=e.createSubContext(t.options,n);r&&s.delayNextStep(r),n===e.element&&(a=s.currentTimeline),jc(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const h=l.currentTime;jc(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-h+(i.startTime-n.currentTimeline.startTime)}}const ef={};class nf{constructor(t,e,n,i,r,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ef,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new rf(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=yc(n.duration)),null!=n.delay&&(i.delay=yc(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Nc(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new nf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=ef,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new of(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,o){let s=[];if(i&&s.push(this.element),t.length>0){t=(t=t.replace(Zc,"."+this._enterClassName)).replace(Jc,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return r||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class rf{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new rf(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ru,this._currentKeyframe[t]=Ru}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},o=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e),i.forEach(t=>{n[t]=Ru})):xc(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Nc(o[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Ru),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,o)=>{const s=xc(r,!0);Object.keys(s).forEach(n=>{const i=s[n];"!"==i?t.add(n):i==Ru&&e.add(n)}),n||(s.offset=o/this.duration),i.push(s)});const r=t.size?Ac(t.values()):[],o=e.size?Ac(e.values()):[];if(n){const t=i[0],e=wc(t);t.offset=0,e.offset=1,i=[t,e]}return Wc(this.element,i,r,o,this.duration,this.startTime,this.easing,!1)}}class of extends rf{constructor(t,e,n,i,r,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=n+e,s=e/o,a=xc(t[0],!1);a.offset=0,r.push(a);const l=xc(t[0],!1);l.offset=sf(s),r.push(l);const h=t.length-1;for(let i=1;i<=h;i++){let s=xc(t[i],!1);s.offset=sf((e+s.offset*n)/o),r.push(s)}n=o,e=0,i="",t=r}return Wc(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function sf(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class af{}class lf extends af{normalizePropertyName(t,e){return Lc(t)}normalizeStyleValue(t,e,n,i){let r="";const o=n.toString().trim();if(hf[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+r}}const hf=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function uf(t,e,n,i,r,o,s,a,l,h,u,c,f){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:h,postStyleProps:u,totalTime:c,errors:f}}const cf={};class ff{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],o=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):o}build(t,e,n,i,r,o,s,a,l,h){const u=[],c=this.ast.options&&this.ast.options.params||cf,f=this.buildStyles(n,s&&s.params||cf,u),d=a&&a.params||cf,p=this.buildStyles(i,d,u),g=new Set,m=new Map,y=new Map,v="void"===i,b={params:Object.assign(Object.assign({},c),d)},w=h?[]:Qc(t,e,this.ast.animation,r,o,f,p,b,l,u);let x=0;if(w.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),u.length)return uf(e,this._triggerName,n,i,v,f,p,[],[],m,y,x,u);w.forEach(t=>{const n=t.element,i=$u(m,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=$u(y,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&g.add(n)});const k=Ac(g.values());return uf(e,this._triggerName,n,i,v,f,p,w,k,m,y,x)}}class df{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},i=wc(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let o=r[t];o.length>1&&(o=Nc(o,i,e)),n[t]=o})}}),n}}class pf{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new df(t.style,t.options&&t.options.params||{})}),gf(this.states,"true","1"),gf(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new ff(t,e,this.states))}),this.fallbackTransition=new ff(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function gf(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const mf=new $c;class yf{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=qc(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=Yu(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let o;const s=new Map;if(r?(o=Qc(this._driver,e,r,cc,fc,{},{},n,mf,i),o.forEach(t=>{const e=$u(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),o=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Ru)})});const a=Gu(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=Wu(e,"","","");return Xu(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const vf="ng-animate-queued",bf="ng-animate-disabled",wf=".ng-animate-disabled",xf=[],kf={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Sf={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class _f{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(i=n?t.value:t)?i:null,n){const e=wc(t);delete e.value,this.options=e}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Cf="void",Mf=new _f(Cf);class Pf{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Df(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const o=$u(this._elementListeners,t,[]),s={name:e,phase:n,callback:i};o.push(s);const a=$u(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Df(t,dc),Df(t,"ng-trigger-"+e),a[e]=Mf),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),o=new Nf(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Df(t,dc),Df(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const l=new _f(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[e]=l,a||(a=Mf),l.value!==Cf&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,l.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Cc(t,n),_c(t,i)})}return}const h=$u(this._engine.playersByElement,t,[]);h.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let u=r.matchTransition(a.value,l.value,t,l.params),c=!1;if(!u){if(!i)return;u=r.fallbackTransition,c=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:u,fromState:a,toState:l,player:o,isFallbackTransition:c}),c||(Df(t,vf),o.onStart(()=>{jf(t,vf)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),h.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,pc,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const o=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Cf,i);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Gu(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const i=new Set;e.forEach(e=>{const r=e.name;if(i.has(r))return;i.add(r);const o=this._triggers[r].fallbackTransition,s=n[r]||Mf,a=new _f(Cf),l=new Nf(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:o,fromState:s,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{const i=t.__ng_removed;i&&i!==kf||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Df(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,o=this._elementListeners.get(r);o&&o.forEach(e=>{if(e.name==n.triggerName){const i=Wu(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,Xu(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Tf{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Pf(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(Af(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!Af(e))return;const r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Df(t,bf)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),jf(t,bf))}removeNode(t,e,n,i){if(Af(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return Af(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,pc,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,mc,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Gu(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=kf,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,wf)&&this.markElementAsDisabled(t,!1),this.driver.query(t,wf,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Df(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Gu(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new $c,i=[],r=new Map,o=[],s=new Map,a=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(t=>{h.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)h.add(e[n])});const u=this.bodyNode,c=Array.from(this.statesByElement.keys()),f=Of(c,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=cc+p++;d.set(e,n),t.forEach(t=>Df(t,n))});const g=[],m=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=Of(c,Array.from(m));b.forEach((t,e)=>{const n=fc+p++;v.set(e,n),t.forEach(t=>Df(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>jf(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>jf(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const w=[],x=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(w.push(e),this.collectedEnterElements.length){const t=r.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const h=!u||!this.driver.containsElement(u,r),c=v.get(r),f=d.get(r),p=this._buildInstruction(t,n,f,c,h);if(p.errors&&p.errors.length)x.push(p);else{if(h)return e.onStart(()=>Cc(r,p.fromStyles)),e.onDestroy(()=>_c(r,p.toStyles)),void i.push(e);if(t.isFallbackTransition)return e.onStart(()=>Cc(r,p.fromStyles)),e.onDestroy(()=>_c(r,p.toStyles)),void i.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,p.timelines),o.push({instruction:p,player:e,element:r}),p.queriedElements.forEach(t=>$u(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=l.get(e);i||l.set(e,i=new Set),n.forEach(t=>i.add(t))})}});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const k=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,k))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{$u(k,e,[]).push(t),t.destroy()})});const _=g.filter(t=>Rf(t,a,l)),C=new Map;Lf(C,this.driver,y,l,Ru).forEach(t=>{Rf(t,a,l)&&_.push(t)});const M=new Map;f.forEach((t,e)=>{Lf(M,this.driver,new Set(t),a,"!")}),_.forEach(t=>{const e=C.get(t),n=M.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const P=[],T=[],N={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(h.has(e))return o.onDestroy(()=>_c(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);let t=N;if(S.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,k,r,M,C);if(o.setRealPlayer(n),t===N)P.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Gu(e)),i.push(o)}}else Cc(e,s.fromStyles),o.onDestroy(()=>_c(e,s.toStyles)),T.push(o),h.has(e)&&i.push(o)}),T.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=Gu(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<g.length;A++){const t=g[A],e=t.__ng_removed;if(jf(t,fc),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,mc,!0);for(let t=0;t<i.length;t++){let e=s.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?Ff(this,t,i):this.processLeaveNode(t)}return g.length=0,P.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),P}elementContainsData(t,e){let n=!1;const i=e.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==Cf;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&o.push(e)})}}return(n||i)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==i,l=$u(n,t,[]);this._getPreviousPlayers(t,a,r,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}Cc(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,o){const s=e.triggerName,a=e.element,l=[],h=new Set,u=new Set,c=e.timelines.map(e=>{const c=e.element;h.add(c);const f=c.__ng_removed;if(f&&f.removedBeforeQueried)return new Uu(e.duration,e.delay);const d=c!==a,p=function(t){const e=[];return If(t,e),e}((n.get(c)||xf).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===c),g=r.get(c),m=o.get(c),y=Yu(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&i&&u.add(c),d){const e=new Nf(t,s,c);e.setRealPlayer(v),l.push(e)}return v});l.forEach(t=>{$u(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e),i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e],i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i}(this.playersByQueriedElement,t.element,t))}),h.forEach(t=>Df(t,gc));const f=Gu(c);return f.onDestroy(()=>{h.forEach(t=>jf(t,gc)),_c(a,e.toStyles)}),u.forEach(t=>{$u(i,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Uu(t.duration,t.delay)}}class Nf{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Uu,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Xu(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){$u(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Af(t){return t&&1===t.nodeType}function Ef(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Lf(t,e,n,i,r){const o=[];n.forEach(t=>o.push(Ef(t)));const s=[];i.forEach((n,i)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i.__ng_removed=Sf,s.push(i))}),t.set(i,o)});let a=0;return n.forEach(t=>Ef(t,o[a++])),s}function Of(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;function o(t){if(!t)return 1;let e=r.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:i.has(s)?1:o(s),r.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function Df(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function jf(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Ff(t,e,n){Gu(n).onDone(()=>t.processLeaveNode(e))}function If(t,e){for(let n=0;n<t.length;n++){const i=t[n];i instanceof qu?If(i.players,e):e.push(i)}}function Rf(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class Bf{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Tf(t,e,n),this._timelineEngine=new yf(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const o=t+"-"+i;let s=this._triggerCache[o];if(!s){const t=[],e=qc(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new pf(t,e)}(i,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,i,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=Zu(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=Zu(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function zf(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=Uf(e[0]),e.length>1&&(i=Uf(e[e.length-1]))):e&&(n=Uf(e)),n||i?new Vf(t,n,i):null}let Vf=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&_c(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_c(this._element,this._initialStyles),this._endStyles&&(_c(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Cc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Cc(this._element,this._endStyles),this._endStyles=null),_c(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Uf(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];qf(r)&&(e=e||{},e[r]=t[r])}return e}function qf(t){return"display"===t||"position"===t}const Hf="animation",Gf="animationend";class Yf{constructor(t,e,n,i,r,o,s){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Jf(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),Zf(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),$f(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Xf(this._element,this._name,"paused")}resume(){Xf(this._element,this._name,"running")}setPosition(t){const e=Kf(this._element,this._name);this._position=t*this._duration,Zf(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),$f(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Jf(t,"").split(","),i=Wf(n,e);i>=0&&(n.splice(i,1),Zf(t,"",n.join(",")))}(this._element,this._name))}}function Xf(t,e,n){Zf(t,"PlayState",n,Kf(t,e))}function Kf(t,e){const n=Jf(t,"");return n.indexOf(",")>0?Wf(n.split(","),e):Wf([n],e)}function Wf(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function $f(t,e,n){n?t.removeEventListener(Gf,e):t.addEventListener(Gf,e)}function Zf(t,e,n,i){const r=Hf+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function Jf(t,e){return t.style[Hf+e]||""}class Qf{constructor(t,e,n,i,r,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Yf(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Fc(this.element,n))})}this.currentSnapshot=t}}class td extends Uu{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=lc(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class ed{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return rc(t)}matchesElement(t,e){return oc(t,e)}containsElement(t,e){return sc(t,e)}query(t,e,n){return ac(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>lc(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const o=document.createElement("style");return o.textContent=i,o}animate(t,e,n,i,r,o=[],s){const a=o.filter(t=>t instanceof Qf),l={};Oc(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const h=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Dc(t,e,l));if(0==n)return new td(t,h);const u="gen_css_kf_"+this._count++,c=this.buildKeyframeElement(t,u,e);document.querySelector("head").appendChild(c);const f=zf(t,e),d=new Qf(t,e,u,n,i,r,h,f);return d.onDestroy(()=>{var t;(t=c).parentNode.removeChild(t)}),d}}class nd{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Fc(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class id{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(rd().toString()),this._cssKeyframesDriver=new ed}validateStyleProperty(t){return rc(t)}matchesElement(t,e){return oc(t,e)}containsElement(t,e){return sc(t,e)}query(t,e,n){return ac(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,o);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},h=o.filter(t=>t instanceof nd);Oc(n,i)&&h.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=zf(t,e=Dc(t,e=e.map(t=>xc(t,!1)),l));return new nd(t,e,a,u)}}function rd(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let od=(()=>{class t extends Iu{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Ct.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Bu(t):t;return ld(this._renderer,null,e,"register",[n]),new sd(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(si(Hs),si(oh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class sd extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ad(this._id,t,e||{},this._renderer)}}class ad{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return ld(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function ld(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const hd="@",ud="@.disabled";let cd=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new fd("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(i,r,t,e.name,e)};return e.data.animation.forEach(o),new dd(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(si(Hs),si(Bf),si(Ml))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class fd{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,i=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==hd&&e==ud?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class dd extends fd{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==hd?"."==e.charAt(1)&&e==ud?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==hd){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),o="";return r.charAt(0)!=hd&&([r,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let pd=(()=>{class t extends Bf{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(si(oh),si(uc),si(af))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const gd=[{provide:uc,useFactory:function(){return"function"==typeof rd()?new id:new ed}},{provide:new Un("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:Iu,useClass:od},{provide:af,useFactory:function(){return new lf}},{provide:Bf,useClass:pd},{provide:Hs,useFactory:function(t,e,n){return new cd(t,e,n)},deps:[Wh,Bf,Ml]}];let md=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({providers:gd,imports:[au]}),t})();const yd=new Ks("11.1.0"),vd=new Un("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let bd,wd=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return zl()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&yd.full!==ju.full&&console.warn("The Angular Material version ("+yd.full+") does not match the Angular CDK version ("+ju.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(si(Ou),si(vd,8),si(oh))},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Du],Du]}),t})();try{bd="undefined"!=typeof Intl}catch(db){bd=!1}let xd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[wd,Nu],wd]}),t})(),kd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[xd,wd],wd]}),t})();class Sd extends S{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(t){super.next(this._value=t)}}class _d extends p{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Cd extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Md(t,e,n,i,r=new Cd(t,n,i)){if(!r.closed)return e instanceof v?e.subscribe(r):D(e)(r)}const Pd={};class Td{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Nd(t,this.resultSelector))}}class Nd extends _d{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Pd),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Md(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const i=this.values,r=this.toRespond?i[n]===Pd?--this.toRespond:this.toRespond:0;i[n]=e,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ad=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Ed(t){return new v(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?F(n):Su()).subscribe(e)})}function Ld(t,e){return"function"==typeof e?n=>n.pipe(Ld((n,i)=>F(t(n,i)).pipe(M((t,r)=>e(n,t,i,r))))):e=>e.lift(new Od(t))}class Od{constructor(t){this.project=t}call(t,e){return e.subscribe(new Dd(t,this.project))}}class Dd extends R{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new I(this),i=this.destination;i.add(n),this.innerSubscription=B(t,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function jd(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new Fd(t,e,n))}}class Fd{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Id(t,this.accumulator,this.seed,this.hasSeed))}}class Id extends p{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function Rd(t){return function(e){const n=new Bd(t),i=e.lift(n);return n.caught=i}}class Bd{constructor(t){this.selector=t}call(t,e){return e.subscribe(new zd(t,this.selector,this.caught))}}class zd extends R{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new I(this);this.add(i);const r=B(n,i);r!==i&&this.add(r)}}}function Vd(t,e){return z(t,e,1)}function Ud(t){return function(e){return 0===t?Su():e.lift(new qd(t))}}class qd{constructor(t){if(this.total=t,this.total<0)throw new xu}call(t,e){return e.subscribe(new Hd(t,this.total))}}class Hd extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function Gd(t=Kd){return e=>e.lift(new Yd(t))}class Yd{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Xd(t,this.errorFactory))}}class Xd extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Kd(){return new Ad}function Wd(t=null){return e=>e.lift(new $d(t))}class $d{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Zd(t,this.defaultValue))}}class Zd extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Jd(t,e){const n=arguments.length>=2;return i=>i.pipe(t?vu((e,n)=>t(e,n,i)):y,_u(1),n?Wd(e):Gd(()=>new Ad))}class Qd{constructor(t){this.callback=t}call(t,e){return e.subscribe(new tp(t,this.callback))}}class tp extends p{constructor(t,e){super(t),this.add(new c(e))}}class ep{constructor(t,e){this.id=t,this.url=e}}class np extends ep{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ip extends ep{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rp extends ep{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class op extends ep{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sp extends ep{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ap extends ep{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lp extends ep{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hp extends ep{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class up extends ep{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cp{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fp{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dp{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pp{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gp{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mp{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yp{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const vp="primary";class bp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function wp(t){return new bp(t)}function xp(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function kp(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const e=i[o],n=t[o];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Sp(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!_p(t[r],e[r]))return!1;return!0}function _p(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((t,e)=>i[e]===t)}return t===e}function Cp(t){return Array.prototype.concat.apply([],t)}function Mp(t){return t.length>0?t[t.length-1]:null}function Pp(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Tp(t){return Xo(t)?t:Yo(t)?F(Promise.resolve(t)):lu(t)}function Np(t,e,n){return n?function(t,e){return Sp(t,e)}(t.queryParams,e.queryParams)&&Ap(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>_p(t[n],e[n]))}(t.queryParams,e.queryParams)&&Ep(t.root,e.root)}function Ap(t,e){if(!Fp(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ap(t.children[n],e.children[n]))return!1}return!0}function Ep(t,e){return Lp(t,e,e.segments)}function Lp(t,e,n){if(t.segments.length>n.length)return!!Fp(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Fp(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ep(t.children[n],e.children[n]))return!1}return!0}{const i=n.slice(0,t.segments.length),r=n.slice(t.segments.length);return!!Fp(t.segments,i)&&!!t.children.primary&&Lp(t.children.primary,e,r)}}class Op{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wp(this.queryParams)),this._queryParamMap}toString(){return Bp.serialize(this)}}class Dp{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Pp(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zp(this)}}class jp{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=wp(this.parameters)),this._parameterMap}toString(){return Xp(this)}}function Fp(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Ip{}class Rp{parse(t){const e=new Jp(t);return new Op(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Vp(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${qp(e)}=${qp(t)}`).join("&"):`${qp(e)}=${qp(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Bp=new Rp;function zp(t){return t.segments.map(t=>Xp(t)).join("/")}function Vp(t,e){if(!t.hasChildren())return zp(t);if(e){const e=t.children.primary?Vp(t.children.primary,!1):"",n=[];return Pp(t.children,(t,e)=>{e!==vp&&n.push(`${e}:${Vp(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Pp(t.children,(t,i)=>{i===vp&&(n=n.concat(e(t,i)))}),Pp(t.children,(t,i)=>{i!==vp&&(n=n.concat(e(t,i)))}),n}(t,(e,n)=>n===vp?[Vp(t.children.primary,!1)]:[`${n}:${Vp(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${zp(t)}/${e[0]}`:`${zp(t)}/(${e.join("//")})`}}function Up(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qp(t){return Up(t).replace(/%3B/gi,";")}function Hp(t){return Up(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gp(t){return decodeURIComponent(t)}function Yp(t){return Gp(t.replace(/\+/g,"%20"))}function Xp(t){return`${Hp(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Hp(t)}=${Hp(e[t])}`).join("")}`;var e}const Kp=/^[^\/()?;=#]+/;function Wp(t){const e=t.match(Kp);return e?e[0]:""}const $p=/^[^=?&#]+/,Zp=/^[^?&#]+/;class Jp{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dp([],{}):new Dp([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Dp(t,e)),n}parseSegment(){const t=Wp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new jp(Gp(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Wp(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Wp(this.remaining);t&&(n=t,this.capture(n))}t[Gp(e)]=Gp(n)}parseQueryParam(t){const e=function(t){const e=t.match($p);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Zp);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=Yp(e),r=Yp(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Wp(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=vp);const o=this.parseChildren();e[r]=1===Object.keys(o).length?o.primary:new Dp([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Qp{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=tg(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=tg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=eg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return eg(t,this._root).map(t=>t.value)}}function tg(t,e){if(t===e.value)return e;for(const n of e.children){const e=tg(t,n);if(e)return e}return null}function eg(t,e){if(t===e.value)return[e];for(const n of e.children){const i=eg(t,n);if(i.length)return i.unshift(e),i}return[]}class ng{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ig(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class rg extends Qp{constructor(t,e){super(t),this.snapshot=e,ug(this,t)}toString(){return this.snapshot.toString()}}function og(t,e){const n=function(t,e){const n=new lg([],{},{},"",{},vp,e,null,t.root,-1,{});return new hg("",new ng(n,[]))}(t,e),i=new Sd([new jp("",{})]),r=new Sd({}),o=new Sd({}),s=new Sd({}),a=new Sd(""),l=new sg(i,r,s,a,o,vp,e,n.root);return l.snapshot=n.root,new rg(new ng(l,[]),n)}class sg{constructor(t,e,n,i,r,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(M(t=>wp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(M(t=>wp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ag(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class lg{constructor(t,e,n,i,r,o,s,a,l,h,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=h,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hg extends Qp{constructor(t,e){super(e),this.url=t,ug(this,e)}toString(){return cg(this._root)}}function ug(t,e){e.value._routerState=t,e.children.forEach(e=>ug(t,e))}function cg(t){const e=t.children.length>0?` { ${t.children.map(cg).join(", ")} } `:"";return`${t.value}${e}`}function fg(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Sp(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Sp(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Sp(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Sp(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function dg(t,e){var n,i;return Sp(t.params,e.params)&&Fp(n=t.url,i=e.url)&&n.every((t,e)=>Sp(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||dg(t.parent,e.parent))}function pg(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function(t,e,n){return e.children.map(e=>{for(const i of n.children)if(t.shouldReuseRoute(e.value,i.value.snapshot))return pg(t,e,i);return pg(t,e)})}(t,e,n);return new ng(i,r)}{const n=t.retrieve(e.value);if(n){const t=n.route;return gg(e,t),t}{const n=new sg(new Sd((i=e.value).url),new Sd(i.params),new Sd(i.queryParams),new Sd(i.fragment),new Sd(i.data),i.outlet,i.component,i),r=e.children.map(e=>pg(t,e));return new ng(n,r)}}var i}function gg(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)gg(t.children[n],e.children[n])}function mg(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function yg(t){return"object"==typeof t&&null!=t&&t.outlets}function vg(t,e,n,i,r){let o={};return i&&Pp(i,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Op(n.root===t?e:bg(n.root,t,e),o,r)}function bg(t,e,n){const i={};return Pp(t.children,(t,r)=>{i[r]=t===e?n:bg(t,e,n)}),new Dp(t.segments,i)}class wg{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&mg(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(yg);if(i&&i!==Mp(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xg{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function kg(t,e,n){if(t||(t=new Dp([],{})),0===t.segments.length&&t.hasChildren())return Sg(t,e,n);const i=function(t,e,n){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;const e=t.segments[r],s=n[i];if(yg(s))break;const a=`${s}`,l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Pg(a,l,e))return o;i+=2}else{if(!Pg(a,{},e))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new Dp(t.segments.slice(0,i.pathIndex),{});return e.children.primary=new Dp(t.segments.slice(i.pathIndex),t.children),Sg(e,0,r)}return i.match&&0===r.length?new Dp(t.segments,{}):i.match&&!t.hasChildren()?_g(t,e,n):i.match?Sg(t,0,r):_g(t,e,n)}function Sg(t,e,n){if(0===n.length)return new Dp(t.segments,{});{const i=function(t){return yg(t[0])?t[0].outlets:{[vp]:t}}(n),r={};return Pp(i,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[i]=kg(t.children[i],e,n))}),Pp(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new Dp(t.segments,r)}}function _g(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const o=n[r];if(yg(o)){const t=Cg(o.outlets);return new Dp(i,t)}if(0===r&&mg(n[0])){i.push(new jp(t.segments[e].path,Mg(n[0]))),r++;continue}const s=yg(o)?o.outlets.primary:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&mg(a)?(i.push(new jp(s,Mg(a))),r+=2):(i.push(new jp(s,{})),r++)}return new Dp(i,{})}function Cg(t){const e={};return Pp(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=_g(new Dp([],{}),0,t))}),e}function Mg(t){const e={};return Pp(t,(t,n)=>e[n]=`${t}`),e}function Pg(t,e,n){return t==n.path&&Sp(e,n.parameters)}class Tg{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),fg(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=ig(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),Pp(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,r=ig(t);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const i=ig(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new mp(t.value.snapshot))}),t.children.length&&this.forwardEvent(new pp(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(fg(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ng(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ng(t){fg(t.value),t.children.forEach(Ng)}class Ag{constructor(t,e){this.routes=t,this.module=e}}function Eg(t){return"function"==typeof t}function Lg(t){return t instanceof Op}const Og=Symbol("INITIAL_VALUE");function Dg(){return Ld(t=>function(...t){let e,n;return C(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),H(t,n).lift(new Td(e))}(t.map(t=>t.pipe(_u(1),function(...t){const e=t[t.length-1];return C(e)?(t.pop(),n=>Fu(t,n,e)):e=>Fu(t,e)}(Og)))).pipe(jd((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==Og)return t;if(i===Og&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||Lg(i))return i}return t},t)},Og),vu(t=>t!==Og),M(t=>Lg(t)?t:!0===t),_u(1)))}let jg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ut({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ho(0,"router-outlet")},directives:function(){return[Mm]},encapsulation:2}),t})();function Fg(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];Ig(i,Rg(e,i))}}function Ig(t,e){t.children&&Fg(t.children,e)}function Rg(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Bg(t){const e=t.children&&t.children.map(Bg),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==vp&&(n.component=jg),n}function zg(t){return t.outlet||vp}function Vg(t,e){const n=t.filter(t=>zg(t)===e);return n.push(...t.filter(t=>zg(t)!==e)),n}const Ug={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function qg(t,e,n){var i;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Ug):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||kp)(n,t,e);if(!r)return Object.assign({},Ug);const o={};Pp(r.posParams,(t,e)=>{o[e]=t.path});const s=r.consumed.length>0?Object.assign(Object.assign({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function Hg(t,e,n,i,r="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Gg(t,e,n)&&zg(n)!==vp)}(t,n,i)){const r=new Dp(e,function(t,e,n,i){const r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&zg(o)!==vp){const n=new Dp([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[zg(o)]=n}return r}(t,e,i,new Dp(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Gg(t,e,n))}(t,n,i)){const o=new Dp(t.segments,function(t,e,n,i,r,o){const s={};for(const a of i)if(Gg(t,n,a)&&!r[zg(a)]){const n=new Dp([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[zg(a)]=n}return Object.assign(Object.assign({},r),s)}(t,e,n,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Dp(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Gg(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Yg(t,e,n,i){return!!(zg(t)===i||i!==vp&&Gg(e,n,t))&&("**"===t.path||qg(e,t,n).matched)}function Xg(t,e,n){return 0===e.length&&!t.children[n]}class Kg{constructor(t){this.segmentGroup=t||null}}class Wg{constructor(t){this.urlTree=t}}function $g(t){return new v(e=>e.error(new Kg(t)))}function Zg(t){return new v(e=>e.error(new Wg(t)))}function Jg(t){return new v(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Qg{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(Sa)}apply(){const t=Hg(this.urlTree.root,[],[],this.config).segmentGroup,e=new Dp(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,vp).pipe(M(t=>this.createUrlTree(tm(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Rd(t=>{if(t instanceof Wg)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Kg)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,vp).pipe(M(e=>this.createUrlTree(tm(e),t.queryParams,t.fragment))).pipe(Rd(t=>{if(t instanceof Kg)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new Dp([],{[vp]:t}):t;return new Op(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(M(t=>new Dp([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){const i=[];for(const r of Object.keys(n.children))"primary"===r?i.unshift(r):i.push(r);return F(i).pipe(Vd(i=>{const r=n.children[i],o=Vg(e,i);return this.expandSegmentGroup(t,o,r,i).pipe(M(t=>({segment:t,outlet:i})))}),jd((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return i=>i.pipe(t?vu((e,n)=>t(e,n,i)):y,Ud(1),n?Wd(e):Gd(()=>new Ad))}())}expandSegment(t,e,n,i,r,o){return F(n).pipe(Vd(s=>this.expandSegmentAgainstRoute(t,e,n,s,i,r,o).pipe(Rd(t=>{if(t instanceof Kg)return lu(null);throw t}))),Jd(t=>!!t),Rd((t,n)=>{if(t instanceof Ad||"EmptyError"===t.name){if(Xg(e,i,r))return lu(new Dp([],{}));throw new Kg(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,i,r,o,s){return Yg(i,e,r,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o):$g(e):$g(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Zg(r):this.lineralizeSegments(n,r).pipe(z(n=>{const r=new Dp(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:h}=qg(e,i,r);if(!s)return $g(e);const u=this.applyRedirectCommands(a,i.redirectTo,h);return i.redirectTo.startsWith("/")?Zg(u):this.lineralizeSegments(i,u).pipe(z(i=>this.expandSegment(t,e,n,i.concat(r.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,i,r){if("**"===n.path)return n.loadChildren?(n._loadedConfig?lu(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(M(t=>(n._loadedConfig=t,new Dp(i,{})))):lu(new Dp(i,{}));const{matched:o,consumedSegments:s,lastChild:a}=qg(e,n,i);if(!o)return $g(e);const l=i.slice(a);return this.getChildConfig(t,n,i).pipe(z(t=>{const i=t.module,o=t.routes,{segmentGroup:a,slicedSegments:h}=Hg(e,s,l,o),u=new Dp(a.segments,a.children);if(0===h.length&&u.hasChildren())return this.expandChildren(i,o,u).pipe(M(t=>new Dp(s,t)));if(0===o.length&&0===h.length)return lu(new Dp(s,{}));const c=zg(n)===r;return this.expandSegment(i,u,o,h,c?vp:r,!0).pipe(M(t=>new Dp(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?lu(new Ag(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?lu(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(z(n=>n?this.configLoader.load(t.injector,e).pipe(M(t=>(e._loadedConfig=t,t))):function(t){return new v(e=>e.error(xp(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):lu(new Ag([],t))}runCanLoadGuards(t,e,n){const i=e.canLoad;return i&&0!==i.length?lu(i.map(i=>{const r=t.get(i);let o;if(function(t){return t&&Eg(t.canLoad)}(r))o=r.canLoad(e,n);else{if(!Eg(r))throw new Error("Invalid CanLoad guard");o=r(e,n)}return Tp(o)})).pipe(Dg(),uu(t=>{if(!Lg(t))return;const e=xp(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),M(t=>!0===t)):lu(!0)}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return lu(n);if(i.numberOfChildren>1||!i.children.primary)return Jg(t.redirectTo);i=i.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new Op(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Pp(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let o={};return Pp(e.children,(e,r)=>{o[r]=this.createSegmentGroup(t,e,n,i)}),new Dp(r,o)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function tm(t){const e={};for(const n of Object.keys(t.children)){const i=tm(t.children[n]);(i.segments.length>0||i.hasChildren())&&(e[n]=i)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Dp(t.segments.concat(e.segments),e.children)}return t}(new Dp(t.segments,e))}class em{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class nm{constructor(t,e){this.component=t,this.route=e}}function im(t,e,n){const i=t._root;return om(i,e?e._root:null,n,[i.value])}function rm(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function om(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=ig(e);return t.children.forEach(t=>{!function(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Fp(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fp(t.url,e.url)||!Sp(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dg(t,e)||!Sp(t.queryParams,e.queryParams);case"paramsChange":default:return!dg(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new em(i)):(o.data=s.data,o._resolvedData=s._resolvedData),om(t,e,o.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new nm(a.outlet.component,s))}else s&&sm(e,a,r),r.canActivateChecks.push(new em(i)),om(t,null,o.component?a?a.children:null:n,i,r)}(t,o[t.value.outlet],n,i.concat([t.value]),r),delete o[t.value.outlet]}),Pp(o,(t,e)=>sm(t,n.getContext(e),r)),r}function sm(t,e,n){const i=ig(t),r=t.value;Pp(i,(t,i)=>{sm(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new nm(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class am{}function lm(t){return new v(e=>e.error(t))}class hm{constructor(t,e,n,i,r,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){const t=Hg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,vp);if(null===e)return null;const n=new lg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},vp,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ng(n,e),r=new hg(this.url,i);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(t){const e=t.value,n=ag(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const r of Object.keys(e.children)){const i=e.children[r],o=Vg(t,r),s=this.processSegmentGroup(o,i,r);if(null===s)return null;n.push(...s)}const i=function(t){const e=[];for(const n of t){if(!um(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return i.sort((t,e)=>t.value.outlet===vp?-1:e.value.outlet===vp?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,n,i){for(const r of t){const t=this.processSegmentAgainstRoute(r,e,n,i);if(null!==t)return t}return Xg(e,n,i)?[]:null}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo||!Yg(t,e,n,i))return null;let r,o=[],s=[];if("**"===t.path){const i=n.length>0?Mp(n).parameters:{};r=new lg(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dm(t),zg(t),t.component,t,cm(e),fm(e)+n.length,pm(t))}else{const i=qg(e,t,n);if(!i.matched)return null;o=i.consumedSegments,s=n.slice(i.lastChild),r=new lg(o,i.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dm(t),zg(t),t.component,t,cm(e),fm(e)+o.length,pm(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:h}=Hg(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===h.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new ng(r,t)]}if(0===a.length&&0===h.length)return[new ng(r,[])];const u=zg(t)===i,c=this.processSegment(a,l,h,u?vp:i);return null===c?null:[new ng(r,c)]}}function um(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function cm(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function fm(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function dm(t){return t.data||{}}function pm(t){return t.resolve||{}}function gm(t){return Ld(e=>{const n=t(e);return n?F(n).pipe(M(()=>e)):lu(e)})}class mm extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const ym=new Un("ROUTES");class vm{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(M(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Ag(Cp(i.injector.get(ym,void 0,bt.Self|bt.Optional)).map(Bg),i)}),Rd(t=>{throw e._loader$=void 0,t}));return e._loader$=new K(n,()=>new S).pipe(G()),e._loader$}loadModuleFactory(t){return"string"==typeof t?F(this.loader.load(t)):Tp(t()).pipe(z(t=>t instanceof _a?lu(t):F(this.compiler.compileModuleAsync(t))))}}class bm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wm,this.attachRef=null}}class wm{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new bm,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class xm{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function km(t){throw t}function Sm(t,e,n){return e.parse("/")}function _m(t,e){return lu(null)}let Cm=(()=>{class t{constructor(t,e,n,i,r,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=km,this.malformedUriErrorHandler=Sm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_m,afterPreactivation:_m},this.urlHandlingStrategy=new xm,this.routeReuseStrategy=new mm,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=r.get(Sa),this.console=r.get(dl);const l=r.get(Ml);this.isNgZoneEnabled=l instanceof Ml&&Ml.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new Op(new Dp([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new vm(o,s,t=>this.triggerEvent(new cp(t)),t=>this.triggerEvent(new fp(t))),this.routerState=og(this.currentUrlTree,this.rootComponentType),this.transitions=new Sd({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(vu(t=>0!==t.id),M(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ld(t=>{let n=!1,i=!1;return lu(t).pipe(uu(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ld(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return lu(t).pipe(Ld(t=>{const n=this.transitions.getValue();return e.next(new np(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ku:Promise.resolve(t)}),(i=this.ngModule.injector,r=this.configLoader,o=this.urlSerializer,s=this.config,Ld(t=>function(t,e,n,i,r){return new Qg(t,e,n,i,r).apply()}(i,r,o,t.extractedUrl,s).pipe(M(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),uu(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return z(o=>function(t,e,n,i,r="emptyOnly",o="legacy"){try{const s=new hm(t,e,n,i,r,o).recognize();return null===s?lm(new am):lu(s)}catch(s){return lm(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),i,r).pipe(M(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),uu(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new sp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var i,r,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:o,extras:s}=t,a=new np(n,this.serializeUrl(i),r,o);e.next(a);const l=og(i,this.rootComponentType).snapshot;return lu(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ku}),gm(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),uu(t=>{const e=new ap(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),M(t=>Object.assign(Object.assign({},t),{guards:im(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return z(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?lu(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return F(t).pipe(z(t=>function(t,e,n,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?lu(o.map(o=>{const s=rm(o,e,r);let a;if(function(t){return t&&Eg(t.canDeactivate)}(s))a=Tp(s.canDeactivate(t,e,n,i));else{if(!Eg(s))throw new Error("Invalid CanDeactivate guard");a=Tp(s(t,e,n,i))}return a.pipe(Jd())})).pipe(Dg()):lu(!0)}(t.component,t.route,n,e,i)),Jd(t=>!0!==t,!0))}(s,i,r,t).pipe(z(n=>n&&"boolean"==typeof n?function(t,e,n,i){return F(e).pipe(Vd(e=>Fu(function(t,e){return null!==t&&e&&e(new dp(t)),lu(!0)}(e.route.parent,i),function(t,e){return null!==t&&e&&e(new gp(t)),lu(!0)}(e.route,i),function(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ed(()=>lu(e.guards.map(r=>{const o=rm(r,e.node,n);let s;if(function(t){return t&&Eg(t.canActivateChild)}(o))s=Tp(o.canActivateChild(i,t));else{if(!Eg(o))throw new Error("Invalid CanActivateChild guard");s=Tp(o(i,t))}return s.pipe(Jd())})).pipe(Dg())));return lu(r).pipe(Dg())}(t,e.path,n),function(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?lu(i.map(i=>Ed(()=>{const r=rm(i,e,n);let o;if(function(t){return t&&Eg(t.canActivate)}(r))o=Tp(r.canActivate(e,t));else{if(!Eg(r))throw new Error("Invalid CanActivate guard");o=Tp(r(e,t))}return o.pipe(Jd())}))).pipe(Dg()):lu(!0)}(t,e.route,n))),Jd(t=>!0!==t,!0))}(i,o,t,e):lu(n)),M(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),uu(t=>{if(Lg(t.guardsResult)){const e=xp(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new lp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),vu(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new rp(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),gm(t=>{if(t.guards.canActivateChecks.length)return lu(t).pipe(uu(t=>{const e=new hp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ld(t=>{let n=!1;return lu(t).pipe((i=this.paramsInheritanceStrategy,r=this.ngModule.injector,z(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return lu(t);let o=0;return F(n).pipe(Vd(t=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return lu({});const o={};return F(r).pipe(z(r=>function(t,e,n,i){const r=rm(t,e,i);return Tp(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,i).pipe(uu(t=>{o[r]=t}))),Ud(1),z(()=>Object.keys(o).length===r.length?lu(o):ku))}(t._resolve,t,e,i).pipe(M(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ag(t,n).resolve),null)))}(t.route,e,i,r)),uu(()=>o++),Ud(1),z(e=>o===n.length?lu(t):ku))})),uu({next:()=>n=!0,complete:()=>{if(!n){const n=new rp(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var i,r}),uu(t=>{const e=new up(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),gm(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),M(t=>{const e=function(t,e,n){const i=pg(t,e._root,n?n._root:void 0);return new rg(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),uu(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),M(t=>(new Tg(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),uu({next(){n=!0},complete(){n=!0}}),(r=()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new rp(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Qd(r))),Rd(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=Lg(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new rp(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new op(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var r;return ku}));var r,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:i}=e,r={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(r.state=t)}this.scheduleNavigation(i,t,n,r)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fg(t),this.config=t.map(Bg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,l=s?this.currentUrlTree.fragment:r;let h=null;switch(o){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,i,r){if(0===n.length)return vg(e.root,e.root,e,i,r);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new wg(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return Pp(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new wg(n,e,i)}(n);if(o.toRoot())return vg(e.root,new Dp([],{}),e,i,r);const s=function(t,e,n){if(t.isAbsolute)return new xg(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new xg(t,t===e.root,0)}const i=mg(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new xg(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Sg(s.segmentGroup,s.index,o.commands):kg(s.segmentGroup,s.index,o.commands);return vg(s.segmentGroup,a,e,i,r)}(a,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Lg(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Lg(t))return Np(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Np(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ip(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i,r){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let l,h,u;r?(l=r.resolve,h=r.reject,u=r.promise):u=new Promise((t,e)=>{l=t,h=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:l,reject:h,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(si(Hn),si(Ip),si(wm),si(wh),si(ko),si(Wl),si(Sl),si(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Mm=(()=>{class t{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new qa,this.deactivateEvents=new qa,this.name=i||vp,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Pm(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Bo(wm),Bo(Ma),Bo(Rs),("name",function(t,e){const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(fn(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(Ee(),"name")),Bo(pa))},t.\u0275dir=Kt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Pm{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===sg?this.route:t===wm?this.childContexts:this.parent.get(t,e)}}class Tm{}class Nm{preload(t,e){return lu(null)}}let Am=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new vm(e,n,e=>t.triggerEvent(new cp(e)),e=>t.triggerEvent(new fp(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(vu(t=>t instanceof ip),Vd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Sa);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return F(n).pipe(q(),M(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?lu(e._loadedConfig):this.loader.load(t.injector,e)).pipe(z(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(si(Cm),si(Wl),si(Sl),si(ko),si(Tm))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Em=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof np?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ip&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new yp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(si(Cm),si(Eh),si(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Lm=new Un("ROUTER_CONFIGURATION"),Om=new Un("ROUTER_FORROOT_GUARD"),Dm=[wh,{provide:Ip,useClass:Rp},{provide:Cm,useFactory:function(t,e,n,i,r,o,s,a={},l,h){const u=new Cm(null,t,e,n,i,r,o,Cp(s));if(l&&(u.urlHandlingStrategy=l),h&&(u.routeReuseStrategy=h),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,u),a.enableTracing){const t=rh();u.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u},deps:[Ip,wm,wh,ko,Wl,Sl,ym,Lm,[class{},new ui],[class{},new ui]]},wm,{provide:sg,useFactory:function(t){return t.routerState.root},deps:[Cm]},{provide:Wl,useClass:Jl},Am,Nm,class{preload(t,e){return e().pipe(Rd(()=>lu(null)))}},{provide:Lm,useValue:{enableTracing:!1}}];function jm(){return new Ul("Router",Cm)}let Fm=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Dm,zm(e),{provide:Om,useFactory:Bm,deps:[[Cm,new ui,new ci]]},{provide:Lm,useValue:n||{}},{provide:gh,useFactory:Rm,deps:[sh,[new hi(yh),new ui],Lm]},{provide:Em,useFactory:Im,deps:[Cm,Eh,Lm]},{provide:Tm,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Nm},{provide:Ul,multi:!0,useFactory:jm},[Vm,{provide:ol,multi:!0,useFactory:Um,deps:[Vm]},{provide:Hm,useFactory:qm,deps:[Vm]},{provide:fl,multi:!0,useExisting:Hm}]]}}static forChild(e){return{ngModule:t,providers:[zm(e)]}}}return t.\u0275fac=function(e){return new(e||t)(si(Om,8),si(Cm,8))},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})();function Im(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Em(t,e,n)}function Rm(t,e,n={}){return n.useHash?new bh(t,e):new vh(t,e)}function Bm(t){return"guarded"}function zm(t){return[{provide:qn,multi:!0,useValue:t},{provide:ym,multi:!0,useValue:t}]}let Vm=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(lh,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Cm),i=this.injector.get(Lm);return"disabled"===i.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?lu(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Lm),n=this.injector.get(Am),i=this.injector.get(Em),r=this.injector.get(Cm),o=this.injector.get(Xl);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||r.initialNavigation(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(si(ko))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Um(t){return t.appInitializer.bind(t)}function qm(t){return t.bootstrapListener.bind(t)}const Hm=new Un("Router Initializer"),Gm=[];let Ym=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Fm.forRoot(Gm)],Fm]}),t})();var Xm=n("b3AA"),Km=n("LvDl");function Wm(t,e,n,r){return i(n)&&(r=n,n=void 0),r?Wm(t,e,n).pipe(M(t=>l(t)?r(...t):r(t))):new v(i=>{$m(t,e,function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},i,n)})}function $m(t,e,n,i,r){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const i=t;t.addEventListener(e,n,r),o=()=>i.removeEventListener(e,n,r)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const i=t;t.on(e,n),o=()=>i.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const i=t;t.addListener(e,n),o=()=>i.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)$m(t[o],e,n,i,r)}i.add(o)}function Zm(t){return!l(t)&&t-parseFloat(t)+1>=0}function Jm(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}class Qm{call(t,e){return e.subscribe(new ty(t))}}class ty extends _d{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=Md(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function ey(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),H(t,void 0).lift(new ny(e))}class ny{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new iy(t,this.resultSelector))}}class iy extends p{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;l(t)?e.push(new oy(t)):e.push("function"==typeof t[E]?new ry(t[E]()):new sy(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let i=!1;const r=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(i=!0),s.done)return void n.complete();r.push(s.value)}this.resultSelector?this._tryresultSelector(r):n.next(r),i&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class ry{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class oy{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[E](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class sy extends R{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[E](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return B(this.observable,new I(this))}}function ay(t){return e=>e.lift(new ly(t))}class ly{constructor(t){this.notifier=t}call(t,e){const n=new hy(t),i=B(this.notifier,new I(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class hy extends R{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function uy(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new cy(t,n))}}class cy{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new fy(t,this.observables,this.project))}}class fy extends _d{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++)this.add(Md(this,e[r],void 0,r))}notifyNext(t,e,n){this.values[n]=e;const i=this.toRespond;if(i.length>0){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function dy(t,e){return new v(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let o=0,s=0;for(let a=0;a<i;a++){const l=F(t[a]);let h=!1;n.add(l.subscribe({next:t=>{h||(h=!0,s++),r[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==i&&h||(s===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}class py{}const gy=new Un("NgValueAccessor"),my={provide:gy,useExisting:it(()=>vy),multi:!0},yy=new Un("CompositionEventMode");let vy=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=rh()?rh().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Bo(Gs),Bo(Us),Bo(yy,8))},t.\u0275dir=Kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Ko("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[js([my])]}),t})();const by=new Un("NgValidators"),wy=new Un("NgAsyncValidators");function xy(t){return null!=t}function ky(t){const e=Yo(t)?F(t):t;return Xo(e),e}function Sy(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _y(t,e){return e.map(e=>e(t))}function Cy(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function My(t){return null!=t?function(t){if(!t)return null;const e=t.filter(xy);return 0==e.length?null:function(t){return Sy(_y(t,e))}}(Cy(t)):null}function Py(t){return null!=t?function(t){if(!t)return null;const e=t.filter(xy);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(l(e))return dy(e,null);if(h(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return dy(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return dy(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(M(t=>e(...t)))}return dy(t,null)}(_y(t,e).map(ky)).pipe(M(Sy))}}(Cy(t)):null}function Ty(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Ny=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=My(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Py(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t}),t})(),Ay=(()=>{class t extends Ny{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Ey(e||t)},t.\u0275dir=Kt({type:t,features:[_o]}),t})();const Ey=Rn(Ay);class Ly extends Ny{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Oy=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Bo(Ly,2))},t.\u0275dir=Kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&ss("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[_o]}),t})();function Dy(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jy(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Fy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Iy="VALID",Ry="INVALID",By="PENDING",zy="DISABLED";function Vy(t){return(Gy(t)?t.validators:t)||null}function Uy(t){return Array.isArray(t)?My(t):t||null}function qy(t,e){return(Gy(e)?e.asyncValidators:t)||null}function Hy(t){return Array.isArray(t)?Py(t):t||null}function Gy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Yy{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Uy(this._rawValidators),this._composedAsyncValidatorFn=Hy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Iy}get invalid(){return this.status===Ry}get pending(){return this.status==By}get disabled(){return this.status===zy}get enabled(){return this.status!==zy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Uy(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Hy(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=By,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zy,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Iy,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Iy&&this.status!==By||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zy:Iy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=By,this._hasOwnPendingAsyncValidator=!0;const e=ky(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof Ky?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof Wy&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new qa,this.statusChanges=new qa}_calculateStatus(){return this._allControlsDisabled()?zy:this.errors?Ry:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(By)?By:this._anyControlsHaveStatus(Ry)?Ry:Iy}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Gy(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Xy extends Yy{constructor(t=null,e,n){super(Vy(e),qy(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Fy(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Fy(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ky extends Yy{constructor(t,e,n){super(Vy(e),qy(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Xy?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Wy extends Yy{constructor(t,e,n){super(Vy(e),qy(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Xy?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const $y={provide:Ly,useExisting:it(()=>Jy)},Zy=(()=>Promise.resolve(null))();let Jy=(()=>{class t extends Ly{constructor(t,e,n,i){super(),this.control=new Xy,this._registered=!1,this.update=new qa,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(t=>{t.constructor===vy?n=t:Object.getPrototypeOf(t.constructor)===py?i=t:r=t}),r||i||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const i=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Ty(i,e.validator)):"function"==typeof i&&t.setValidators([i]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Ty(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);{const n=()=>t.updateValueAndValidity();Dy(e._rawValidators,n),Dy(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&jy(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&jy(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Zy.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Zy.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Bo(Ay,9),Bo(by,10),Bo(wy,10),Bo(gy,10))},t.\u0275dir=Kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[js([$y]),_o,ae]}),t})();const Qy={provide:gy,useExisting:it(()=>nv),multi:!0};let tv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})(),ev=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:tv}),t})(),nv=(()=>{class t extends py{constructor(t,e,n,i){super(),this._renderer=t,this._elementRef=e,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Ly),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(Bo(Gs),Bo(Us),Bo(ev),Bo(ko))},t.\u0275dir=Kt({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Ko("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[js([Qy]),_o]}),t})(),iv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[tv]]}),t})(),rv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[iv]}),t})();const ov=["*"],sv=["dialog"];function av(t){return null!=t}function lv(t){return(t||document.body).offsetHeight}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const hv={animation:!0,transitionTimerDelayMs:5};let uv=(()=>{class t{constructor(){this.animation=hv.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();const cv=()=>{},{transitionTimerDelayMs:fv}=hv,dv=new Map,pv=(t,e,n,i)=>{let r=i.context||{};const o=dv.get(e);if(o)switch(i.runningTransition){case"continue":return ku;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),dv.delete(e)}const s=n(e,i.animation,r)||cv;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),lu(void 0).pipe(function(t){return e=>new v(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new S,h=new S,u=a.pipe(function(...t){return e=>Fu(e,lu(...t))}(!0));dv.set(e,{transition$:a,complete:()=>{h.next(),h.complete()},context:r});const c=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=Wm(e,"transitionend").pipe(ay(u),vu(({target:t})=>t===e));(function(...t){if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return H(t,void 0).lift(new Qm)})(function(t=0,e,n){let i=-1;return Zm(e)?i=Number(e)<1?1:Number(e):C(e)&&(n=e),C(n)||(n=yu),new v(e=>{const r=Zm(t)?t:+t-n.now();return n.schedule(Jm,r,{index:0,period:i,subscriber:e})})}(c+fv).pipe(ay(u)),n,h).pipe(ay(u)).subscribe(()=>{dv.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let gv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),mv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),yv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})(),vv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),bv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})();var wv=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const xv=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function kv(t){const e=Array.from(t.querySelectorAll(xv)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(i=this.offset(e,!1)),i.top+=e.clientTop,i.left+=e.clientLeft}return n.top-=i.top,n.bottom-=i.top,n.left-=i.left,n.right-=i.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),i=window.pageYOffset-document.documentElement.clientTop,r=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+i,bottom:n.bottom+i,left:n.left+r,right:n.right+r};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,i){const[r="top",o="center"]=n.split("-"),s=i?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),l=parseFloat(a.marginTop),h=parseFloat(a.marginBottom),u=parseFloat(a.marginLeft),c=parseFloat(a.marginRight);let f=0,d=0;switch(r){case"top":f=s.top-(e.offsetHeight+l+h);break;case"bottom":f=s.top+s.height;break;case"left":d=s.left-(e.offsetWidth+u+c);break;case"right":d=s.left+s.width}switch(o){case"top":f=s.top;break;case"bottom":f=s.top+s.height-e.offsetHeight;break;case"left":d=s.left;break;case"right":d=s.left+s.width-e.offsetWidth;break;case"center":"top"===r||"bottom"===r?d=s.left+s.width/2-e.offsetWidth/2:f=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(d)}px, ${Math.round(f)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,y=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=m}},new Date(1882,10,12),new Date(2174,10,25);let Sv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah,rv]]}),t})(),_v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})(),Cv=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(si(uv))},t.\u0275prov=ut({factory:function(){return new t(si(uv))},token:t,providedIn:"root"}),t})();class Mv{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const Pv=()=>{};let Tv=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Pv}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,i=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${i+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(si(oh))},t.\u0275prov=ut({factory:function(){return new t(si(oh))},token:t,providedIn:"root"}),t})(),Nv=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(_u(1)).subscribe(()=>{pv(this._zone,this._el.nativeElement,(t,e)=>{e&&lv(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return pv(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(Bo(Us),Bo(Ml))},t.\u0275cmp=Ut({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(as("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),ss("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class Av{close(t){}dismiss(t){}}class Ev{constructor(t,e,n,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,this._closed=new S,this._dismissed=new S,this._hidden=new S,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ay(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ay(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():lu(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ey(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Lv=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let Ov=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new S,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new qa,this.shown=new S,this.hidden=new S}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=ey(pv(this._zone,t,()=>t.classList.remove("show"),e),pv(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};ey(pv(this._zone,this._elRef.nativeElement,(t,e)=>{e&&lv(t),t.classList.add("show")},t),pv(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Wm(t,"keydown").pipe(ay(this._closed$),vu(t=>t.which===wv.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(Lv.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;Wm(this._dialogEl.nativeElement,"mousedown").pipe(ay(this._closed$),uu(()=>e=!1),Ld(()=>Wm(t,"mouseup").pipe(ay(this._closed$),_u(1))),vu(({target:e})=>t===e)).subscribe(()=>{e=!0}),Wm(t,"click").pipe(ay(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(Lv.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=kv(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&pv(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(Bo(oh),Bo(Us),Bo(Ml))},t.\u0275cmp=Ut({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&nl(sv,3),2&t){let t;el(t=il())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(Fo("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),as("modal d-block"+(e.windowClass?" "+e.windowClass:"")),ss("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:ov,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(function(t){const e=Te()[16][6];if(!e.projection){const t=e.projection=Wn(1,null),n=t.slice();let i=e.child;for(;null!==i;){const e=0;null!==e&&(n[e]?n[e].projectionNext=i:t[e]=i,n[e]=i),i=i.next}}}(),Uo(0,"div",0,1),Uo(2,"div",2),function(t,e=0,n){const i=Te(),r=Ne(),o=xr(r,Zt+t,16,null,n||null);null===o.projection&&(o.projection=e),je(),64!=(64&o.flags)&&function(t,e,n){$i(e[11],0,e,n,Ii(t,n,e),Ui(n.parent||e[6],n,e))}(r,i,o)}(3),qo(),qo()),2&t&&as("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),Dv=(()=>{class t{constructor(t,e,n,i,r,o){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=r,this._ngZone=o,this._activeWindowCmptHasChanged=new S,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new qa,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=Wm(e,"focusin").pipe(ay(n),M(t=>t.target));Wm(e,"keydown").pipe(ay(n),vu(t=>t.which===wv.Tab),uy(t)).subscribe(([t,n])=>{const[i,r]=kv(e);n!==i&&n!==e||!t.shiftKey||(r.focus(),t.preventDefault()),n!==r||t.shiftKey||(i.focus(),t.preventDefault())}),i&&Wm(e,"click").pipe(ay(n),uy(t),M(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,i){const r=i.container instanceof HTMLElement?i.container:av(i.container)?this._document.querySelector(i.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!r)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);const l=new Av,h=this._getContentRef(t,i.injector||e,n,l,i);let u=!1!==i.backdrop?this._attachBackdrop(t,r):void 0,c=this._attachWindowComponent(t,r,h),f=new Ev(c,h,u,i.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(c),f.result.then(s,s),f.result.then(a,a),l.close=t=>{f.close(t)},l.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(c.instance,i),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),u&&u.instance&&this._applyBackdropOptions(u.instance,i),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(Nv).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let i=t.resolveComponentFactory(Ov).create(this._injector,n.nodes);return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{av(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{av(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,r){return n?n instanceof ba?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,r):new Mv([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Mv([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new Mv([[e]])}_createFromComponent(t,e,n,i,r){const o=t.resolveComponentFactory(n),s=ko.create({providers:[{provide:Av,useValue:i}],parent:e}),a=o.create(s),l=a.location.nativeElement;return r.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new Mv([[l]],a.hostView,a)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(si(Xl),si(ko),si(oh),si(Tv),si(Hs),si(Ml))},t.\u0275prov=ut({factory:function(){return new t(si(Xl),si(oo),si(oh),si(Tv),si(Hs),si(Ml))},token:t,providedIn:"root"}),t})(),jv=(()=>{class t{constructor(t,e,n,i){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=i}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(si(Rs),si(ko),si(Dv),si(Cv))},t.\u0275prov=ut({factory:function(){return new t(si(Rs),si(oo),si(Dv),si(Cv))},token:t,providedIn:"root"}),t})(),Fv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({providers:[jv]}),t})(),Iv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),Rv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),Bv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),zv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),Vv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),Uv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),qv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})(),Hv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({}),t})();new Un("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Gv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[Ah]]}),t})();const Yv=[gv,mv,yv,vv,bv,Sv,_v,Fv,Iv,Rv,Bv,zv,Vv,Uv,qv,Hv,Gv];let Xv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[Yv,gv,mv,yv,vv,bv,Sv,_v,Fv,Iv,Rv,Bv,zv,Vv,Uv,qv,Hv,Gv]}),t})(),Kv=(()=>{class t{constructor(){this.invokeHomeComponentFunction=new qa}onModalButtonClick(t){this.invokeHomeComponentFunction.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wv=(()=>{class t{constructor(t,e){this.activeModal=t,this.eventEmitterService=e,this.pizzaObj={productName:"",crustOpt:"",size:"",cheeseOpt:"",imageSrc:""}}ngOnInit(){}selectedPath(t){this.eventEmitterService.onModalButtonClick(t)}}return t.\u0275fac=function(e){return new(e||t)(Bo(Av),Bo(Kv))},t.\u0275cmp=Ut({type:t,selectors:[["app-modal"]],inputs:{pizzaObj:"pizzaObj"},decls:10,vars:2,consts:[[1,"modal-header",2,"background-color","#5784ba","color","#f7f6cf","filter","drop-shadow(0 0.2rem 0.25rem rgba(0, 0, 0, 0.2))"],[1,"modal-title","h2",2,"margin-left","2%"],[1,"modal-body","d-flex","flex-column","justify-content-center","align-items-center"],["alt","pizza_image",1,"pizza_img",3,"src"],[1,"pizza_desc"],[1,"modal-footer"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Uo(0,"div",0),Uo(1,"span",1),ys(2,"Comfirm Order"),qo(),qo(),Uo(3,"div",2),Ho(4,"img",3),Uo(5,"div",4),ys(6),qo(),qo(),Uo(7,"div",5),Uo(8,"button",6),Ko("click",function(){return e.selectedPath("Complete"),e.activeModal.dismiss("Cross click")}),ys(9," Complete "),qo(),qo()),2&t&&(cr(4),zo("src",e.pizzaObj.imageSrc,yi),cr(2),bs(" ",e.pizzaObj.productName+e.pizzaObj.crustOpt+e.pizzaObj.size+e.pizzaObj.cheeseOpt," "))},styles:["*[_ngcontent-%COMP%]{font-family:kanit}.button[_ngcontent-%COMP%]{font-size:1rem;padding:2% 6%;text-align:center;border-radius:5px;height:2vh;min-height:50px;min-width:120px;border-color:transparent;transition-duration:.4s;cursor:pointer;background-color:#5784ba;margin:1%;color:#f7f6cf}.pizza_img[_ngcontent-%COMP%]{max-width:60%;max-height:60%}.pizza_desc[_ngcontent-%COMP%]{font-size:1.25rem;margin-top:10px;margin-bottom:30px}"]}),t})();function $v(t,e){if(1&t&&(Uo(0,"table"),Uo(1,"tr"),Uo(2,"td"),ys(3),qo(),Uo(4,"td"),ys(5),qo(),Uo(6,"td"),ys(7),qo(),qo(),qo()),2&t){const t=e.$implicit;cr(3),vs(t.id),cr(2),vs(t.firstname),cr(2),vs(t.lastname)}}let Zv=(()=>{class t{constructor(t){this.activeModal=t,this.members=[{id:"61010888",firstname:"\u0e23\u0e27\u0e34\u0e2a\u0e23\u0e32",lastname:"\u0e2b\u0e19\u0e39\u0e40\u0e1e\u0e47\u0e07"},{id:"61010960",firstname:"\u0e27\u0e31\u0e0a\u0e23\u0e34\u0e19\u0e17\u0e23\u0e4c",lastname:"\u0e01\u0e31\u0e13\u0e2b\u0e32"},{id:"61011023",firstname:"\u0e28\u0e34\u0e23\u0e34\u0e27\u0e23\u0e23\u0e13",lastname:"\u0e01\u0e38\u0e25\u0e25\u0e30\u0e27\u0e13\u0e34\u0e0a\u0e22\u0e4c"},{id:"61011052",firstname:"\u0e28\u0e38\u0e20\u0e24\u0e01\u0e29\u0e4c",lastname:"\u0e17\u0e2d\u0e07\u0e14\u0e35"},{id:"61011182",firstname:"\u0e2d\u0e19\u0e31\u0e0d\u0e0d\u0e32",lastname:"\u0e1a\u0e38\u0e15\u0e27\u0e07\u0e28\u0e4c"},{id:"61011248",firstname:"\u0e2d\u0e38\u0e29\u0e13\u0e35",lastname:"\u0e1a\u0e32\u0e07\u0e43\u0e2b\u0e0d\u0e48"}]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(Bo(Av))},t.\u0275cmp=Ut({type:t,selectors:[["app-member-modal"]],decls:10,vars:1,consts:[[2,"padding","2%","background-color","#E5E5E5"],["type","button",1,"close",2,"padding-right","5%",3,"click"],[2,"font-size","50px"],[1,"container"],[1,"modal-header","d-flex","flex-column","align-items-center"],[1,"modal-title","h3",2,"font-weight","bold"],[1,"member_name"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(Uo(0,"div",0),Uo(1,"button",1),Ko("click",function(){return e.activeModal.dismiss("Cross click")}),Uo(2,"span",2),ys(3,"\xd7"),qo(),qo(),Uo(4,"div",3),Uo(5,"div",4),Uo(6,"span",5),ys(7,"Member"),qo(),qo(),Uo(8,"div",6),Ro(9,$v,8,3,"table",7),qo(),qo(),qo()),2&t&&(cr(9),zo("ngForOf",e.members))},directives:[Th],styles:["*[_ngcontent-%COMP%]{font-family:kanit}.container[_ngcontent-%COMP%]{padding:5% 10% 10%;background-color:#fff;border-radius:2%}.member_name[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:5%}table[_ngcontent-%COMP%]{table-layout:fixed;width:80%;font-size:1.25rem}td[_ngcontent-%COMP%]{text-align:left;padding:2% 0}"]}),t})();const Jv=["ngDiagram"];let Qv=(()=>{class t{constructor(t,e){this._kvdiffers=t,this.zone=e,this.linkDataArray=null,this.modelData=null,this.modelChangedListener=null,this.skipsDiagramUpdate=!1,this.modelChange=new qa,this.diagram=null,this._ndaDiffer=this._kvdiffers.find([]).create(),this._ldaDiffer=this._kvdiffers.find([]).create(),this._mdaDiffer=this._kvdiffers.find([]).create()}ngAfterViewInit(){this.diagram=this.initDiagram(),this.diagram.addEventListener=(t,e,n,i)=>{const r=Xm.Diagram.prototype.addEventListener;"mousemove"===e?this.zone.runOutsideAngular(()=>r.call(this,t,e,n,i)):this.zone.run(()=>{r.call(this,t,e,n,i)})};const t=this.diagramDiv.nativeElement;null!==t&&(this.diagram.div=t,this.diagram.delayInitialization(()=>{this.diagram.model.commit(t=>{t.mergeNodeDataArray(t.cloneDeep(this.nodeDataArray)),this.linkDataArray&&t instanceof Xm.GraphLinksModel&&t.mergeLinkDataArray(t.cloneDeep(this.linkDataArray)),this.modelData&&t.assignAllDataProperties(t.modelData,this.modelData),this.diagram.layoutDiagram(!0)},null)}),this.modelChangedListener=t=>{t.isTransactionFinished&&this.diagram&&this.diagram.model&&!this.diagram.model.isReadOnly&&this.zone.run(()=>{const e=t.model.toIncrementalData(t);this.modelChange.emit(e)})},this.diagram.addModelChangedListener(this.modelChangedListener))}static mergeChanges(e,n,i){function r(t,e){for(const n in t){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;switch(typeof t[n]){case"object":if(!r(t[n],e[n]))return!1;break;default:if(t[n]!==e[n])return!1}}for(const n in e)if(void 0===t[n])return!1;return!0}var o=e instanceof t?e.diagram:e.palette;o&&o.model&&n&&(n.forEachAddedItem(t=>{switch(i){case"n":o.model.addNodeData(t.currentValue);break;case"l":o.model.addLinkData(t.currentValue)}}),n.forEachRemovedItem(t=>{switch(i){case"n":{let n=o.model.nodeKeyProperty.toString();var e=o.findNodeForKey(t.previousValue[n]);e&&o.remove(e);break}case"l":var n=o.model.linkKeyProperty.toString(),r=o.findLinkForKey(t.previousValue[n]);r&&o.remove(r)}}),n.forEachChangedItem(t=>{if(!r(t.currentValue,t.previousValue))switch(i){case"n":{let n=o.model.nodeKeyProperty.toString();var e=o.findNodeForKey(t.previousValue[n]);e&&o.model.assignAllDataProperties(e.data,t.currentValue);break}case"l":var n=o.model.linkKeyProperty.toString(),s=o.findLinkForKey(t.previousValue[n]);s&&o.model.assignAllDataProperties(s.data,t.currentValue)}}))}ngDoCheck(){if(this.diagram&&this.diagram.model){var e=this._ndaDiffer.diff(this.nodeDataArray),n=this._ldaDiffer.diff(this.linkDataArray),i=this._mdaDiffer.diff(this.modelData);(e||n||i)&&(this.skipsDiagramUpdate||(null!==this.modelChangedListener&&this.diagram.model.removeChangedListener(this.modelChangedListener),this.diagram.model.startTransaction("update data"),this.diagram.model.assignAllDataProperties(this.diagram.model.modelData,this.modelData),t.mergeChanges(this,e,"n"),t.mergeChanges(this,n,"l"),this.diagram.model.commitTransaction("update data"),null!==this.modelChangedListener&&this.diagram.model.addChangedListener(this.modelChangedListener)))}}ngOnDestroy(){this.diagram.div=null}}return t.\u0275fac=function(e){return new(e||t)(Bo(ha),Bo(Ml))},t.\u0275cmp=Ut({type:t,selectors:[["gojs-diagram"]],viewQuery:function(t,e){if(1&t&&nl(Jv,3),2&t){let t;el(t=il())&&(e.diagramDiv=t.first)}},inputs:{linkDataArray:"linkDataArray",modelData:"modelData",skipsDiagramUpdate:"skipsDiagramUpdate",initDiagram:"initDiagram",nodeDataArray:"nodeDataArray",divClassName:"divClassName"},outputs:{modelChange:"modelChange"},decls:2,vars:1,consts:[[3,"className"],["ngDiagram",""]],template:function(t,e){1&t&&Ho(0,"div",0,1),2&t&&zo("className",e.divClassName)},encapsulation:2}),t})(),tb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=ct({imports:[[]]}),t})();const eb=["myDiagram"],nb=function(t,e,n){return{button_crust:t,button_crust_disable:e,button_crust_focus:n}};function ib(t,e){if(1&t){const t=Go();Uo(0,"label",20),Uo(1,"input",21),Ko("click",function(){Ae(t);const n=e.$implicit,i=Zo();return i.selectedPath(n.name),i.onClickMenuBt(n),i.onUpdateValue(0,n.id)}),qo(),ys(2),qo()}if(2&t){const t=e.$implicit,n=Zo();zo("ngClass",Va(4,nb,n.selectedValue[0]!=t.id,n.selectedValue[0]!=t.id&&n.step>1,n.selectedValue[0]==t.id)),cr(1),zo("ngModel",n.selectedValue[0])("value",t.id),cr(1),bs(" ",t.name," ")}}function rb(t,e){if(1&t){const t=Go();Uo(0,"label",22),Uo(1,"input",23),Ko("click",function(){Ae(t);const n=e.$implicit,i=Zo();return i.selectedPath(n.opt),i.onClickCrust(n.opt),i.onUpdateValue(1,n.id)}),qo(),ys(2),qo()}if(2&t){const t=e.$implicit,n=Zo();zo("ngClass",Va(4,nb,n.selectedValue[1]!=t.id,n.step<1||n.selectedValue[1]!=t.id&&n.step>2,n.selectedValue[1]==t.id)),cr(1),zo("ngModel",n.selectedValue[1])("value",t.id),cr(1),vs(t.opt)}}const ob=function(t,e){return{size_button:t,size_button_focus:e}};function sb(t,e){if(1&t){const t=Go();Uo(0,"label",22),Uo(1,"input",24),Ko("click",function(){Ae(t);const n=e.$implicit,i=Zo();return i.selectedPath(n.name),i.onClickSize(n.name),i.onUpdateValue(3,n.id)}),qo(),Ho(2,"img",25),qo()}if(2&t){const t=e.$implicit,a=Zo();zo("ngClass",(n=4,i=ob,r=a.step<=2||a.selectedValue[3]!=t.id,o=a.step>2&&a.selectedValue[3]==t.id,function(t,e,n,i,r,o,s){const a=e+n;return jo(t,a,r,o)?Oo(t,a+2,s?i.call(s,r,o):i(r,o)):Ua(t,a+2)}(Te(),Re(),n,i,r,o,s))),cr(1),zo("ngModel",a.selectedValue[3])("value",t.id),cr(1),zo("src",t.src,yi)}var n,i,r,o,s}const ab=function(t,e,n){return{button_crust:t,button_crust_focus:e,button_crust_disable:n}};function lb(t,e){if(1&t){const t=Go();Uo(0,"label",22),Uo(1,"input",26),Ko("click",function(){Ae(t);const n=e.$implicit,i=Zo();return i.selectedPath(n.opt),i.onClickTopping(n.opt),i.onUpdateValue(2,n.id)}),qo(),ys(2),qo()}if(2&t){const t=e.$implicit,n=Zo();zo("ngClass",Va(4,ab,n.selectedValue[2]!=t.id,n.selectedValue[2]==t.id,n.checkPizza||n.step<3||n.step>4&&n.selectedValue[2]!=t.id)),cr(1),zo("ngModel",n.selectedValue[2])("value",t.id),cr(1),vs(t.opt)}}function hb(t,e){if(1&t&&(Uo(0,"span"),ys(1),qo()),2&t){const t=e.$implicit;cr(1),vs(t)}}let ub=(()=>{class t{constructor(t,e,n,i){this.cdr=t,this.el=e,this.modal=n,this.eventEmitterService=i,this.selectedValue=[0,0,2,0],this.productName="",this.step=0,this.crustOpt="",this.size="",this.cheeseOpt="",this.inputStrings=new Array,this.checkPizza=!1,this.pizza=[{id:1,src:"assets/img/Hawaiian.png",name:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19"},{id:2,src:"assets/img/Empty.png",name:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a"}],this.imageSrc="assets/img/PizzaAraiauei.png",this.pizzaCheeses=[{id:1,src:"assets/img/HawaiianwithCheese.png",name:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19"},{id:2,src:"assets/img/Empty.png",name:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a"}],this.pizzaSizes=[{id:1,src:"assets/img/M.png",name:"\u0e01\u0e25\u0e32\u0e07"},{id:2,src:"assets/img/L.png",name:"\u0e43\u0e2b\u0e0d\u0e48"}],this.crustOpts=[{id:1,opt:"\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21"},{id:2,opt:"\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a"}],this.cheeseOpts=[{id:1,opt:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{id:2,opt:"\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"}],this.diagramNodeData=[{key:0,text:"Start",loc:"0, 950",category:"Start"},{key:1,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19",loc:"250 600"},{key:2,text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a",loc:"250 1400"},{key:3,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21",loc:"500 400"},{key:4,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a",loc:"500 800"},{key:5,text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21",loc:"750 1200"},{key:6,text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a",loc:"750 1600"},{key:7,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21\n\u0e01\u0e25\u0e32\u0e07",loc:"750 300"},{key:8,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21\n\u0e43\u0e2b\u0e0d\u0e48",loc:"750 500"},{key:9,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a\n\u0e01\u0e25\u0e32\u0e07",loc:"750 700"},{key:10,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a\n\u0e43\u0e2b\u0e0d\u0e48",loc:"750 900"},{key:11,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21\n\u0e01\u0e25\u0e32\u0e07\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a",loc:"1000 300"},{key:12,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21\n\u0e43\u0e2b\u0e0d\u0e48\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a",loc:"1000 500"},{key:13,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a\n\u0e01\u0e25\u0e32\u0e07\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a",loc:"1000 700"},{key:14,text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a\n\u0e43\u0e2b\u0e0d\u0e48\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a",loc:"1000 900"},{key:15,text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21\n\u0e01\u0e25\u0e32\u0e07",loc:"1000 1100"},{key:16,text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21\n\u0e43\u0e2b\u0e0d\u0e48",loc:"1000 1300"},{key:17,text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a\n\u0e01\u0e25\u0e32\u0e07",loc:"1000 1500"},{key:18,text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a\n\u0e43\u0e2b\u0e0d\u0e48",loc:"1000 1700"},{key:19,text:"Trap",loc:"1650 950"},{key:20,text:"Finish",loc:"1350 950",category:"End"}],this.diagramLinkData=[{key:-99,points:[-50,1e3,0,1e3],text:"",fill:"#52ce60",stroke:"#52ce60",arrStroke:"#52ce60",strokeWidth:3},{key:-1,from:0,to:0,segmentFraction:.6,points:[75,955,75,925,25,925,25,955],segmentOffset:new Xm.Point(0,30),text:"\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e01\u0e25\u0e32\u0e07,\n\u0e43\u0e2b\u0e0d\u0e48, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \nConfirm, Cancel, Complete"},{key:-2,from:0,to:1,segmentFraction:.5,points:[95,975,250,650],text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19"},{key:-3,from:0,to:2,segmentFraction:.4,points:[95,1025,250,1450],text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a"},{key:-4,from:1,to:0,segmentFraction:.684,points:[300,700,300,1010,670,1010,670,1825,25,1825,25,1045],text:"Cancel"},{key:-5,from:1,to:1,segmentFraction:.5,points:[325,605,325,575,275,575,275,605],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\n\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48,\nConfirm, Complete"},{key:-6,from:1,to:2,segmentFraction:.5,points:[337,685,400,1385,337,1415],text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a"},{key:-7,from:1,to:3,segmentFraction:.5,points:[345,625,500,450],text:"\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21"},{key:-8,from:1,to:4,segmentFraction:.5,points:[345,675,500,850],text:"\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a"},{key:-9,from:2,to:0,segmentFraction:.35,points:[300,1500,300,1825,25,1825,25,1045],text:"Cancel"},{key:-10,from:2,to:1,segmentFraction:.5,points:[255,1430,225,1350,265,685],text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19"},{key:-11,from:2,to:2,segmentFraction:.4,points:[325,1405,325,1375,275,1375,275,1405],segmentOffset:new Xm.Point(0,25),text:"\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\n\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48,\nConfirm, Complete"},{key:-12,from:2,to:5,segmentFraction:.5,points:[345,1425,750,1250],text:"\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21"},{key:-13,from:2,to:6,segmentFraction:.5,points:[345,1475,750,1650],text:"\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a"},{key:-14,from:3,to:0,segmentFraction:.678,points:[550,500,550,610,670,610,670,1825,25,1825,25,1045],text:"Cancel"},{key:-15,from:3,to:3,segmentFraction:.5,points:[575,405,575,375,525,375,525,405],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nConfirm, Complete"},{key:-16,from:3,to:4,segmentFraction:.5,points:[587,485,650,785,587,815],text:"\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a"},{key:-17,from:3,to:7,segmentFraction:.5,points:[595,425,750,350],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-18,from:3,to:8,segmentFraction:.5,points:[595,475,750,550],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-19,from:4,to:0,segmentFraction:.624,points:[550,900,550,1010,670,1010,670,1825,25,1825,25,1045],text:"Cancel"},{key:-20,from:4,to:3,segmentFraction:.5,points:[515,815,460,785,515,485],text:"\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21"},{key:-21,from:4,to:4,segmentFraction:.5,points:[575,805,575,775,525,775,525,805],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nConfirm, Complete"},{key:-22,from:4,to:9,segmentFraction:.7,points:[595,825,750,750],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-23,from:4,to:10,segmentFraction:.7,points:[595,875,750,950],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-24,from:5,to:0,segmentFraction:.615,points:[850,1250,925,1250,925,1825,25,1825,25,1045],text:"Cancel"},{key:-25,from:5,to:5,segmentFraction:.5,points:[825,1205,825,1175,775,1175,775,1205],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nConfirm, Complete"},{key:-26,from:5,to:6,segmentFraction:.5,points:[837,1285,900,1580,837,1615],text:"\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a"},{key:-27,from:5,to:15,segmentFraction:.25,points:[845,1225,1e3,1150],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-28,from:5,to:16,segmentFraction:.25,points:[845,1275,1e3,1350],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-29,from:6,to:0,segmentFraction:.535,points:[850,1650,925,1650,925,1825,25,1825,25,1045],text:"Cancel"},{key:-30,from:6,to:5,segmentFraction:.5,points:[765,1615,705,1580,765,1285],text:"\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21"},{key:-31,from:6,to:6,segmentFraction:.5,points:[825,1605,825,1575,775,1575,775,1605],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nConfirm, Complete"},{key:-32,from:6,to:17,segmentFraction:.25,points:[845,1625,1e3,1550],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-33,from:6,to:18,segmentFraction:.25,points:[845,1675,1e3,1750],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-34,from:7,to:0,segmentFraction:.722,points:[850,360,925,360,925,1825,25,1825,25,1045],text:"Cancel"},{key:-35,from:7,to:11,segmentFraction:.5,points:[845,325,1005,325],text:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-36,from:7,to:7,segmentFraction:.5,points:[825,305,825,275,775,275,775,305],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e01\u0e25\u0e32\u0e07,\n\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-37,from:7,to:8,segmentFraction:.3,points:[755,370,730,370,730,520,760,520],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-38,from:7,to:20,segmentFraction:.3,points:[755,325,690,325,690,175,1300,175,1300,1010,1350,1010],text:"Confirm"},{key:-39,from:8,to:0,segmentFraction:.7025,points:[845,575,925,575,925,1825,25,1825,25,1045],text:"Cancel"},{key:-40,from:8,to:12,segmentFraction:.75,points:[845,525,1005,525],text:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-41,from:8,to:7,segmentFraction:.7,points:[840,520,865,520,865,370,845,370],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-42,from:8,to:8,segmentFraction:.525,points:[825,505,825,475,775,475,775,505],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e43\u0e2b\u0e0d\u0e48,\n\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-43,from:8,to:20,segmentFraction:.2,points:[760,580,690,580,690,610,1300,610,1300,1010,1350,1010],text:"Confirm"},{key:-44,from:9,to:0,segmentFraction:.682,points:[850,760,925,760,925,1825,25,1825,25,1045],text:"Cancel"},{key:-45,from:9,to:13,segmentFraction:.75,points:[845,725,1005,725],text:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-46,from:9,to:9,segmentFraction:.525,points:[825,705,825,675,775,675,775,705],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e01\u0e25\u0e32\u0e07,\n\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-47,from:9,to:10,segmentFraction:.3,points:[755,770,730,770,730,920,760,920],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-48,from:9,to:20,segmentFraction:.2525,points:[755,725,690,725,690,610,1300,610,1300,1010,1350,1010],text:"Confirm"},{key:-49,from:10,to:0,segmentFraction:.6558,points:[845,975,925,975,925,1825,25,1825,25,1045],text:"Cancel"},{key:-50,from:10,to:14,segmentFraction:.75,points:[845,925,1005,925],text:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-51,from:10,to:9,segmentFraction:.7,points:[840,920,865,920,865,770,845,770],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-52,from:10,to:10,segmentFraction:.525,points:[825,905,825,875,775,875,775,905],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e43\u0e2b\u0e0d\u0e48,\n\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-53,from:10,to:20,segmentFraction:.3,points:[760,980,690,980,690,1010,1350,1010],text:"Confirm"},{key:-54,from:11,to:0,segmentFraction:.754,points:[1100,350,1250,350,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-55,from:11,to:11,segmentFraction:.5,points:[1075,305,1075,275,1025,275,1025,305],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-56,from:11,to:7,segmentFraction:.5,points:[1e3,350,850,350],text:"\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-57,from:11,to:20,segmentFraction:.1,points:[1095,325,1300,325,1300,1010,1350,1010],text:"Confirm"},{key:-58,from:12,to:0,segmentFraction:.74,points:[1100,550,1250,550,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-59,from:12,to:12,segmentFraction:.5,points:[1075,505,1075,475,1025,475,1025,505],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-60,from:12,to:8,segmentFraction:.25,points:[1e3,550,850,550],text:"\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-61,from:12,to:20,segmentFraction:.126,points:[1095,525,1300,525,1300,1010,1350,1010],text:"Confirm"},{key:-62,from:13,to:0,segmentFraction:.7228,points:[1100,750,1250,750,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-63,from:13,to:13,segmentFraction:.5,points:[1075,705,1075,675,1025,675,1025,705],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-64,from:13,to:9,segmentFraction:.25,points:[1e3,750,850,750],text:"\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-65,from:13,to:20,segmentFraction:.17,points:[1095,725,1300,725,1300,1010,1350,1010],text:"Confirm"},{key:-66,from:14,to:0,segmentFraction:.7048,points:[1100,950,1250,950,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-67,from:14,to:14,segmentFraction:.5,points:[1075,905,1075,875,1025,875,1025,905],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-68,from:14,to:10,segmentFraction:.25,points:[1e3,950,850,950],text:"\u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"},{key:-69,from:14,to:20,segmentFraction:.3,points:[1095,925,1300,925,1300,1010,1350,1010],text:"Confirm"},{key:-70,from:15,to:0,segmentFraction:.683,points:[1100,1150,1250,1150,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-71,from:15,to:15,segmentFraction:.5,points:[1075,1105,1075,1075,1025,1075,1025,1105],segmentOffset:new Xm.Point(0,25),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-72,from:15,to:16,segmentFraction:.2,points:[1005,1170,980,1170,980,1320,1010,1320],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-73,from:15,to:20,segmentFraction:.28,points:[1095,1125,1300,1125,1300,1010,1350,1010],text:"Confirm"},{key:-74,from:16,to:0,segmentFraction:.6565,points:[1090,1375,1250,1375,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-75,from:16,to:15,segmentFraction:.8,points:[1090,1320,1115,1320,1115,1170,1095,1170],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-76,from:16,to:16,segmentFraction:.525,points:[1075,1305,1075,1275,1025,1275,1025,1305],segmentOffset:new Xm.Point(0,30),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e43\u0e2b\u0e0d\u0e48,\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nComplete"},{key:-77,from:16,to:20,segmentFraction:.17,points:[1100,1350,1300,1350,1300,1010,1350,1010],text:"Confirm"},{key:-78,from:17,to:0,segmentFraction:.63,points:[1100,1550,1250,1550,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-79,from:17,to:17,segmentFraction:.5,points:[1075,1505,1075,1475,1025,1475,1025,1505],segmentOffset:new Xm.Point(0,30),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, Complete"},{key:-80,from:17,to:18,segmentFraction:.2,points:[1005,1570,980,1570,980,1720,1010,1720],text:"\u0e43\u0e2b\u0e0d\u0e48"},{key:-81,from:17,to:20,segmentFraction:.13,points:[1095,1525,1300,1525,1300,1010,1350,1010],text:"Confirm"},{key:-82,from:18,to:0,segmentFraction:.594,points:[1090,1775,1250,1775,1250,1825,25,1825,25,1045],text:"Cancel"},{key:-83,from:18,to:17,segmentFraction:.8,points:[1090,1720,1115,1720,1115,1570,1095,1570],text:"\u0e01\u0e25\u0e32\u0e07"},{key:-84,from:18,to:18,segmentFraction:.525,points:[1075,1705,1075,1675,1025,1675,1025,1705],segmentOffset:new Xm.Point(0,30),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a, \u0e43\u0e2b\u0e0d\u0e48,\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nComplete"},{key:-85,from:18,to:20,segmentFraction:.1,points:[1100,1750,1300,1750,1300,1010,1350,1010],text:"Confirm"},{key:-86,from:19,to:0,segmentFraction:.625,points:[1700,1050,1700,1810,50,1810,50,1050],text:"Complete"},{key:-87,from:19,to:19,segmentFraction:.5,points:[1725,955,1725,925,1675,925,1675,955],segmentOffset:new Xm.Point(0,40),text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48,\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nConfirm, Cancel"},{key:-88,from:20,to:0,segmentFraction:.586,points:[1400,1050,1400,1810,50,1810,50,1050],text:"Complete"},{key:-89,from:20,to:19,segmentFraction:.5,points:[1450,1e3,1650,1e3],text:"\u0e2e\u0e32\u0e27\u0e32\u0e22\u0e40\u0e2d\u0e35\u0e49\u0e22\u0e19, \u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a,\n\u0e2b\u0e19\u0e32\u0e19\u0e38\u0e48\u0e21, \u0e1a\u0e32\u0e07\u0e01\u0e23\u0e2d\u0e1a,\n\u0e01\u0e25\u0e32\u0e07, \u0e43\u0e2b\u0e0d\u0e48,\n\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a, \u0e44\u0e21\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a,\nConfirm, Cancel"}],this.diagramDivClassName="myDiagramDiv",this.diagramModelData={prop:"value"},this.skipsDiagramUpdate=!1,this.selectedNode=null,this.currNode=0,this.zOrder=0}ngOnInit(){null==this.eventEmitterService.subsVar&&(this.eventEmitterService.subsVar=this.eventEmitterService.invokeHomeComponentFunction.subscribe(t=>{this.selectedPath(t),this.resetPath(),this.onClickCancel("")}))}openModal(){this.modal.open(Wv).componentInstance.pizzaObj={productName:this.productName,crustOpt:this.crustOpt,size:this.size,cheeseOpt:this.cheeseOpt,imageSrc:this.imageSrc}}openMemberModal(){this.modal.open(Zv)}onClickMenuBt(t){this.step<=1&&(this.imageSrc=t.src,this.productName=t.name,this.step=1,this.checkPizza="\u0e14\u0e31\u0e1a\u0e40\u0e1a\u0e34\u0e49\u0e25\u0e0a\u0e35\u0e2a"===this.productName),this.inputStrings.push(t.name)}onClickCrust(t){1<=this.step&&this.step<=2&&(this.crustOpt=t,this.step=2),this.inputStrings.push(t)}onClickSize(t){2<=this.step&&this.step<=3&&(this.size=t,this.step=3),this.inputStrings.push(t)}onClickTopping(t){this.checkPizza||(this.cheeseOpt="\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"===t?"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a":""),3<=this.step&&this.step<=4&&("\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e35\u0e2a"===t?(this.pizzaCheeses.forEach(t=>{t.name===this.productName&&(this.imageSrc=t.src)}),this.step=4):(this.pizza.forEach(t=>{t.name===this.productName&&(this.imageSrc=t.src)}),this.step=3)),this.inputStrings.push(t)}onClickCancel(t){19!=this.currNode&&(this.selectedValue=[0,0,2,0],this.step=this.currNode=0,this.imageSrc="assets/img/PizzaAraiauei.png",this.productName="",this.crustOpt="",this.cheeseOpt="",this.size=""),"cancel"===t?this.inputStrings.push("Cancel"):this.inputStrings=new Array}onUpdateValue(t,e){0===t&&this.step<=1&&(this.selectedValue[0]=e),1===t&&1<=this.step&&this.step<=2&&(this.selectedValue[1]=e),3===t&&2<=this.step&&this.step<=3&&(this.selectedValue[3]=e),2===t&&3<=this.step&&this.step<=4&&(this.selectedValue[2]=e)}initDiagram(){const t=Xm.GraphObject.make,e=t(Xm.Diagram,{"toolManager.mouseWheelBehavior":Xm.ToolManager.WheelZoom,initialAutoScale:Xm.Diagram.Uniform,model:t(Xm.GraphLinksModel,{linkKeyProperty:"key"})});return e.commandHandler.archetypeGroupData={key:"Group",isGroup:!0},e.isReadOnly=!0,e.nodeTemplate=t(Xm.Node,"Spot",{desiredSize:new Xm.Size(100,100)},new Xm.Binding("location","loc",Xm.Point.parse),t(Xm.Panel,"Auto",t(Xm.Shape,"Circle",{stroke:null,fill:"lightblue"},new Xm.Binding("fill","color")),t(Xm.TextBlock,{textAlign:"center",font:"10pt kanit",stroke:"#444444"},new Xm.Binding("text"),new Xm.Binding("stroke","txtStroke")))),e.nodeTemplateMap.add("Start",t(Xm.Node,"Spot",{desiredSize:new Xm.Size(100,100)},new Xm.Binding("location","loc",Xm.Point.parse),t(Xm.Shape,"Circle",{fill:"#52ce60",stroke:null},new Xm.Binding("fill","color")),t(Xm.TextBlock,new Xm.Binding("text"),{font:"bold 16pt helvetica, bold arial, sans-serif",stroke:"whitesmoke"},new Xm.Binding("stroke","txtStroke")))),e.nodeTemplateMap.add("End",t(Xm.Node,"Spot",{desiredSize:new Xm.Size(100,100)},new Xm.Binding("location","loc",Xm.Point.parse),t(Xm.Shape,"Circle",{fill:"maroon",stroke:null},new Xm.Binding("fill","color")),t(Xm.Shape,"Circle",{fill:null,desiredSize:new Xm.Size(90,90),strokeWidth:2,stroke:"whitesmoke"}),t(Xm.TextBlock,new Xm.Binding("text"),{font:"bold 18pt helvetica, bold arial, sans-serif",stroke:"whitesmoke"},new Xm.Binding("stroke","txtStroke")))),e.linkTemplate=t(Xm.Link,{routing:Xm.Link.AvoidsNodes,corner:10,curve:Xm.Link.JumpOver,zOrder:0},new Xm.Binding("points"),new Xm.Binding("zOrder"),t(Xm.Shape,{stroke:"#444444"},new Xm.Binding("stroke"),new Xm.Binding("strokeWidth")),t(Xm.Shape,{toArrow:"Standard",fill:"#444444",stroke:"#444444"},new Xm.Binding("fill"),new Xm.Binding("scale"),new Xm.Binding("stroke","arrStroke")),t(Xm.TextBlock,{segmentIndex:NaN,background:"whitesmoke",textAlign:"center",font:"10pt kanit",stroke:"#444444"},new Xm.Binding("text"),new Xm.Binding("segmentFraction"),new Xm.Binding("segmentOffset"),new Xm.Binding("stroke","txtStroke"))),this.myDiagram=e,e}ngAfterViewInit(){if(this.observedDiagram)return;this.observedDiagram=this.myDiagramComponent.diagram,this.cdr.detectChanges();const t=this;this.myDiagramComponent.diagram.addDiagramListener("ChangedSelection",function(e){0===e.diagram.selection.count&&(t.selectedNode=null);const n=e.diagram.selection.first();t.selectedNode=n instanceof Xm.Node?n:null})}selectedPath(t){for(let e=0;e<this.diagramLinkData.length;e++)if(this.diagramLinkData[e].from==this.currNode&&this.diagramLinkData[e].text.includes(t)){const t=Km.cloneDeep(this.diagramNodeData[this.diagramLinkData[e].from]);t.color="lightblue",t.txtStroke="#444444",this.diagramNodeData[this.diagramLinkData[e].from]=Km.cloneDeep(t),this.zOrder+=1;const n=Km.cloneDeep(this.diagramLinkData[e]);n.stroke="#52ce60",n.strokeWidth=3,n.fill="#52ce60",n.arrStroke="#52ce60",n.scale=2,n.txtStroke="#52ce60",n.zOrder=this.zOrder,this.diagramLinkData[e]=Km.cloneDeep(n);const i=Km.cloneDeep(this.diagramNodeData[this.diagramLinkData[e].to]);i.color="#52ce60",i.txtStroke="whitesmoke",this.diagramNodeData[this.diagramLinkData[e].to]=Km.cloneDeep(i),this.currNode=this.diagramLinkData[e].to,this.currLink=this.diagramLinkData[e];break}}resetPath(){this.zOrder=0,this.currNode=0;for(let t=1;t<this.diagramNodeData.length;t++){const e=Km.cloneDeep(this.diagramNodeData[t]);"Finish"==e.text?(e.color="maroon",e.txtStroke="whitesmoke"):(e.color="lightblue",e.txtStroke="#444444"),this.diagramNodeData[t]=Km.cloneDeep(e)}for(let t=1;t<this.diagramLinkData.length;t++){const e=Km.cloneDeep(this.diagramLinkData[t]);e.stroke="#444444",e.strokeWidth=1,e.fill="#444444",e.arrStroke="#444444",e.scale=1,e.txtStroke="#444444",e.zOrder=0,this.diagramLinkData[t]=Km.cloneDeep(e)}}}return t.\u0275fac=function(e){return new(e||t)(Bo(pa),Bo(Us),Bo(jv),Bo(Kv))},t.\u0275cmp=Ut({type:t,selectors:[["app-home"]],viewQuery:function(t,e){if(1&t&&nl(eb,3),2&t){let t;el(t=il())&&(e.myDiagramComponent=t.first)}},decls:42,vars:13,consts:[[1,"container"],[1,"main"],[3,"initDiagram","nodeDataArray","linkDataArray","divClassName","modelData","skipsDiagramUpdate"],["myDiagram",""],[1,"sidebar"],[1,"element_container"],["src","assets/img/Dino_Logo.png",1,"logo"],[1,"product"],[1,"product_img",2,"margin-bottom","2.5%",3,"src"],[1,"menuName"],[1,"product_button"],["type","button",3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],["type","submit",1,"button",2,"background-color","#5784ba","margin","2.5%","color","#f7f6cf",3,"click"],["type","reset",1,"button",2,"margin","2.5%",3,"click"],[1,"button",2,"background-color","#f4cfe0","margin","2.5%",3,"click"],[1,"stringArea"],[1,"inputStringArea"],[4,"ngFor","ngForOf"],["src","assets/img/Dinosor.png"],["type","button",3,"ngClass"],["type","radio","name","pizza",3,"ngModel","value","click"],[3,"ngClass"],["type","radio","name","crust",3,"ngModel","value","click"],["type","radio","name","size",3,"ngModel","value","click"],[3,"src"],["type","radio","name","cheese",3,"ngModel","value","click"]],template:function(t,e){1&t&&(Uo(0,"div",0),Uo(1,"section",1),Ho(2,"gojs-diagram",2,3),qo(),Uo(4,"aside",4),Uo(5,"div",5),Ho(6,"img",6),qo(),Uo(7,"h1"),ys(8,"MENU"),qo(),Uo(9,"div",7),Ho(10,"img",8),qo(),Uo(11,"div",9),ys(12),qo(),Uo(13,"div",10),Ro(14,ib,3,8,"label",11),qo(),Uo(15,"h1"),ys(16,"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e02\u0e2d\u0e1a"),qo(),Uo(17,"div",10),Ro(18,rb,3,8,"label",12),qo(),Uo(19,"h1"),ys(20,"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e02\u0e19\u0e32\u0e14"),qo(),Uo(21,"div",10),Ro(22,sb,3,7,"label",12),qo(),Uo(23,"h1"),ys(24,"Topping"),qo(),Uo(25,"div",10),Ro(26,lb,3,8,"label",12),qo(),Uo(27,"button",13),Ko("click",function(){return e.step>=3?[e.selectedPath("Confirm"),e.step=5,e.openModal()]:e.selectedPath("Confirm")}),ys(28," Order Now!! "),qo(),Uo(29,"div",10),Uo(30,"button",14),Ko("click",function(){return e.selectedPath("Cancel"),e.onClickCancel("cancel")}),ys(31," Cancel "),qo(),qo(),Uo(32,"div",10),Uo(33,"button",15),Ko("click",function(){return e.openMemberModal()}),ys(34," Member "),qo(),qo(),qo(),Uo(35,"footer"),Uo(36,"div",16),Uo(37,"h1"),ys(38,"String Input"),qo(),Uo(39,"div",17),Ro(40,hb,2,1,"span",18),qo(),qo(),Ho(41,"img",19),qo(),qo()),2&t&&(cr(2),zo("initDiagram",e.initDiagram)("nodeDataArray",e.diagramNodeData)("linkDataArray",e.diagramLinkData)("divClassName",e.diagramDivClassName)("modelData",e.diagramModelData)("skipsDiagramUpdate",e.skipsDiagramUpdate),cr(8),Jo("src",e.imageSrc,yi),cr(2),vs(e.step>0?e.productName+e.crustOpt+e.size+e.cheeseOpt:"\u0e1e\u0e34\u0e0b\u0e0b\u0e48\u0e32\u0e2b\u0e19\u0e49\u0e32\u0e2d\u0e30\u0e44\u0e23\u0e40\u0e2d\u0e4b\u0e22"),cr(2),zo("ngForOf",e.pizza),cr(4),zo("ngForOf",e.crustOpts),cr(4),zo("ngForOf",e.pizzaSizes),cr(4),zo("ngForOf",e.cheeseOpts),cr(14),zo("ngForOf",e.inputStrings))},directives:[Qv,Th,Mh,nv,vy,Oy,Jy],styles:['*{margin:0;padding:0;box-sizing:border-box}.container{display:grid;height:100%;grid-template-columns:3fr 1fr;grid-template-rows:3fr 1fr;grid-template-areas:"main sidebar" "footer sidebar"}.main{grid-area:main;display:grid;background-color:#f4f4f4;margin:1% 1% 0;border-radius:15px}.sidebar{grid-area:sidebar;position:fixed;overflow-y:auto;height:100%;left:auto;right:0;width:25%;display:flex;flex-direction:column;background:#b6d8f3;max-width:100%;padding:0 2% .5%}.sidebar>h1{text-align:center;font-family:kanit;font-size:2em;margin:5% auto}.element_container,.logo{display:flex;justify-content:center}.logo{width:10vw;min-width:100px}.product{display:flex;justify-content:center;flex-wrap:wrap}.product_img{width:300px;min-width:80px;max-width:100%}.menuName{font-family:kanit;font-size:20px;margin:5% 0;text-align:center}input[type=radio]{display:none}.product_button{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.button,.button_crust{font-family:Kanit;font-size:1rem;padding:0 10%;margin:5%;text-align:center;border-radius:15px;height:3vw;min-height:80px;background-color:#f8f6cf;border-color:transparent;transition-duration:.4s;cursor:pointer}.button_crust:hover{background-color:#f1e1e9}.button_crust_focus{background-color:#f4cfe0;cursor:pointer}.button_crust_disable,.button_crust_focus{font-family:Kanit;font-size:1rem;padding:0 10%;margin:5%;text-align:center;border-radius:15px;height:3vw;min-height:80px;border-color:transparent;transition-duration:.4s}.button_crust_disable{background-color:#dcdcdc;cursor:context-menu;cursor:pointer}.button:focus{outline:none}.size_button{font-size:2em;padding:0 5%;margin:5% auto;border-radius:50%;width:6vw;height:6vw;min-height:120px;min-width:120px;background-color:initial;border-color:transparent;transition-duration:.4s;cursor:pointer;filter:grayscale(100%);align-items:center}.size_button:hover{filter:grayscale(50%)}.size_button_focus{font-size:2em;padding:0 5%;margin:5% auto;border-radius:50%;width:6vw;height:6vw;min-height:120px;min-width:120px;background-color:initial;border-color:transparent;transition-duration:.4s;cursor:pointer;filter:none;align-items:center}.size_button>img,.size_button_focus>img{width:100%}label{display:flex;align-items:center;justify-content:center}footer{grid-area:footer;margin:1%;display:grid;grid-template-columns:10fr 2fr;bottom:1%;overflow-y:auto;background-color:#f4cfe0;border-radius:15px;z-index:2}footer h1{justify-self:start;font-family:kanit;font-size:2em;margin:2%}footer img{width:50%;position:sticky;min-width:200px;margin:0 0 auto auto}.inputStringArea>span{margin-top:5px;margin-right:1%;font-family:kanit;font-size:18px}.inputStringArea{display:flex;flex-wrap:wrap;margin:0 0 0 2%}@media (max-width:767px){.sidebar{display:none;width:50%}.container{grid-template-columns:1fr;grid-template-rows:3fr 1fr;grid-template-areas:"main" "footer"}footer{grid-template-columns:2fr 1fr}footer img{width:90%}}.myDiagramDiv{background:#f5f5f5;display:block;width:100%;height:100%}'],encapsulation:3}),t})(),cb=(()=>{class t{constructor(){this.title="Dino-Pizza"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ut({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&Ho(0,"app-home")},directives:[ub],styles:[""]}),t})(),fb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t,bootstrap:[cb]}),t.\u0275inj=ct({providers:[],imports:[[au,Ym,md,kd,rv,tb,Xv]]}),t})();(function(){if(Bl)throw new Error("Cannot enable prod mode after platform setup.");Rl=!1})(),ou().bootstrapModule(fb).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);